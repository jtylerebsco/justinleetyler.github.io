<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<script id="versionArea" type="text/javascript">
//<![CDATA[
var version = {title: "TiddlyWiki", major: 2, minor: 6, revision: 4, date: new Date("August 18, 2011"), extensions: {}};
//]]>
</script>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="copyright" content="
TiddlyWiki created by Jeremy Ruston, (jeremy [at] osmosoft [dot] com)

Copyright (c) Jeremy Ruston 2004-2007
Copyright (c) UnaMesa Association 2007-2011

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer.

Redistributions in binary form must reproduce the above copyright notice, this
list of conditions and the following disclaimer in the documentation and/or other
materials provided with the distribution.

Neither the name of the UnaMesa Association nor the names of its contributors may be
used to endorse or promote products derived from this software without specific
prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS' AND ANY
EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
DAMAGE.
" />
<!--PRE-HEAD-START-->
<!--{{{-->
<link rel='alternate' type='application/rss+xml' title='RSS' href='index.xml' />
<!--}}}-->

<!--PRE-HEAD-END-->
<title> Reading Journeys - notes, thoughts, and favorite quotes </title>
<style id="styleArea" type="text/css">
#saveTest {display:none;}
#messageArea {display:none;}
#copyright {display:none;}
#storeArea {display:none;}
#storeArea div {padding:0.5em; margin:1em 0em 0em 0em; border-color:#fff #666 #444 #ddd; border-style:solid; border-width:2px; overflow:auto;}
#shadowArea {display:none;}
#javascriptWarning {width:100%; text-align:center; font-weight:bold; background-color:#dd1100; color:#fff; padding:1em 0em;}
</style>
<!--POST-HEAD-START-->

<!--POST-HEAD-END-->
</head>
<body onload="main();" onunload="if(window.unload) unload();">
<!--PRE-BODY-START-->

<!--PRE-BODY-END-->
<div id="copyright">
Welcome to TiddlyWiki created by Jeremy Ruston; Copyright &copy; 2004-2007 Jeremy Ruston, Copyright &copy; 2007-2011 UnaMesa Association
</div>
<noscript>
<div id="javascriptWarning">
This page requires JavaScript to function properly.<br /><br />If you are using Microsoft Internet Explorer you may need to click on the yellow bar above and select 'Allow Blocked Content'. You must then click 'Yes' on the following security warning.
</div>
</noscript>
<div id="saveTest"></div>
<div id="backstageCloak"></div>
<div id="backstageButton"></div>
<div id="backstageArea"><div id="backstageToolbar"></div></div>
<div id="backstage">
	<div id="backstagePanel"></div>
</div>
<div id="contentWrapper"></div>
<div id="contentStash"></div>
<div id="shadowArea">
<div title="MarkupPreHead">
<pre>&lt;!--{{{--&gt;
&lt;link rel='alternate' type='application/rss+xml' title='RSS' href='index.xml' /&gt;
&lt;!--}}}--&gt;
</pre>
</div>
<div title="ColorPalette">
<pre>Background: #fff
Foreground: #000
PrimaryPale: #8cf
PrimaryLight: #18f
PrimaryMid: #04b
PrimaryDark: #014
SecondaryPale: #ffc
SecondaryLight: #fe8
SecondaryMid: #db4
SecondaryDark: #841
TertiaryPale: #eee
TertiaryLight: #ccc
TertiaryMid: #999
TertiaryDark: #666
Error: #f88
</pre>
</div>
<div title="StyleSheetColors">
<pre>/*{{{*/
body {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];}

a {color:[[ColorPalette::PrimaryMid]];}
a:hover {background-color:[[ColorPalette::PrimaryMid]]; color:[[ColorPalette::Background]];}
a img {border:0;}

h1,h2,h3,h4,h5,h6 {color:[[ColorPalette::SecondaryDark]]; background:transparent;}
h1 {border-bottom:2px solid [[ColorPalette::TertiaryLight]];}
h2,h3 {border-bottom:1px solid [[ColorPalette::TertiaryLight]];}

.button {color:[[ColorPalette::PrimaryDark]]; border:1px solid [[ColorPalette::Background]];}
.button:hover {color:[[ColorPalette::PrimaryDark]]; background:[[ColorPalette::SecondaryLight]]; border-color:[[ColorPalette::SecondaryMid]];}
.button:active {color:[[ColorPalette::Background]]; background:[[ColorPalette::SecondaryMid]]; border:1px solid [[ColorPalette::SecondaryDark]];}

.header {background:[[ColorPalette::PrimaryMid]];}
.headerShadow {color:[[ColorPalette::Foreground]];}
.headerShadow a {font-weight:normal; color:[[ColorPalette::Foreground]];}
.headerForeground {color:[[ColorPalette::Background]];}
.headerForeground a {font-weight:normal; color:[[ColorPalette::PrimaryPale]];}

.tabSelected {color:[[ColorPalette::PrimaryDark]];
	background:[[ColorPalette::TertiaryPale]];
	border-left:1px solid [[ColorPalette::TertiaryLight]];
	border-top:1px solid [[ColorPalette::TertiaryLight]];
	border-right:1px solid [[ColorPalette::TertiaryLight]];
}
.tabUnselected {color:[[ColorPalette::Background]]; background:[[ColorPalette::TertiaryMid]];}
.tabContents {color:[[ColorPalette::PrimaryDark]]; background:[[ColorPalette::TertiaryPale]]; border:1px solid [[ColorPalette::TertiaryLight]];}
.tabContents .button {border:0;}

#sidebar {}
#sidebarOptions input {border:1px solid [[ColorPalette::PrimaryMid]];}
#sidebarOptions .sliderPanel {background:[[ColorPalette::PrimaryPale]];}
#sidebarOptions .sliderPanel a {border:none;color:[[ColorPalette::PrimaryMid]];}
#sidebarOptions .sliderPanel a:hover {color:[[ColorPalette::Background]]; background:[[ColorPalette::PrimaryMid]];}
#sidebarOptions .sliderPanel a:active {color:[[ColorPalette::PrimaryMid]]; background:[[ColorPalette::Background]];}

.wizard {background:[[ColorPalette::PrimaryPale]]; border:1px solid [[ColorPalette::PrimaryMid]];}
.wizard h1 {color:[[ColorPalette::PrimaryDark]]; border:none;}
.wizard h2 {color:[[ColorPalette::Foreground]]; border:none;}
.wizardStep {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];
	border:1px solid [[ColorPalette::PrimaryMid]];}
.wizardStep.wizardStepDone {background:[[ColorPalette::TertiaryLight]];}
.wizardFooter {background:[[ColorPalette::PrimaryPale]];}
.wizardFooter .status {background:[[ColorPalette::PrimaryDark]]; color:[[ColorPalette::Background]];}
.wizard .button {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::SecondaryLight]]; border: 1px solid;
	border-color:[[ColorPalette::SecondaryPale]] [[ColorPalette::SecondaryDark]] [[ColorPalette::SecondaryDark]] [[ColorPalette::SecondaryPale]];}
.wizard .button:hover {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::Background]];}
.wizard .button:active {color:[[ColorPalette::Background]]; background:[[ColorPalette::Foreground]]; border: 1px solid;
	border-color:[[ColorPalette::PrimaryDark]] [[ColorPalette::PrimaryPale]] [[ColorPalette::PrimaryPale]] [[ColorPalette::PrimaryDark]];}

.wizard .notChanged {background:transparent;}
.wizard .changedLocally {background:#80ff80;}
.wizard .changedServer {background:#8080ff;}
.wizard .changedBoth {background:#ff8080;}
.wizard .notFound {background:#ffff80;}
.wizard .putToServer {background:#ff80ff;}
.wizard .gotFromServer {background:#80ffff;}

#messageArea {border:1px solid [[ColorPalette::SecondaryMid]]; background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]];}
#messageArea .button {color:[[ColorPalette::PrimaryMid]]; background:[[ColorPalette::SecondaryPale]]; border:none;}

.popupTiddler {background:[[ColorPalette::TertiaryPale]]; border:2px solid [[ColorPalette::TertiaryMid]];}

.popup {background:[[ColorPalette::TertiaryPale]]; color:[[ColorPalette::TertiaryDark]]; border-left:1px solid [[ColorPalette::TertiaryMid]]; border-top:1px solid [[ColorPalette::TertiaryMid]]; border-right:2px solid [[ColorPalette::TertiaryDark]]; border-bottom:2px solid [[ColorPalette::TertiaryDark]];}
.popup hr {color:[[ColorPalette::PrimaryDark]]; background:[[ColorPalette::PrimaryDark]]; border-bottom:1px;}
.popup li.disabled {color:[[ColorPalette::TertiaryMid]];}
.popup li a, .popup li a:visited {color:[[ColorPalette::Foreground]]; border: none;}
.popup li a:hover {background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]]; border: none;}
.popup li a:active {background:[[ColorPalette::SecondaryPale]]; color:[[ColorPalette::Foreground]]; border: none;}
.popupHighlight {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];}
.listBreak div {border-bottom:1px solid [[ColorPalette::TertiaryDark]];}

.tiddler .defaultCommand {font-weight:bold;}

.shadow .title {color:[[ColorPalette::TertiaryDark]];}

.title {color:[[ColorPalette::SecondaryDark]];}
.subtitle {color:[[ColorPalette::TertiaryDark]];}

.toolbar {color:[[ColorPalette::PrimaryMid]];}
.toolbar a {color:[[ColorPalette::TertiaryLight]];}
.selected .toolbar a {color:[[ColorPalette::TertiaryMid]];}
.selected .toolbar a:hover {color:[[ColorPalette::Foreground]];}

.tagging, .tagged {border:1px solid [[ColorPalette::TertiaryPale]]; background-color:[[ColorPalette::TertiaryPale]];}
.selected .tagging, .selected .tagged {background-color:[[ColorPalette::TertiaryLight]]; border:1px solid [[ColorPalette::TertiaryMid]];}
.tagging .listTitle, .tagged .listTitle {color:[[ColorPalette::PrimaryDark]];}
.tagging .button, .tagged .button {border:none;}

.footer {color:[[ColorPalette::TertiaryLight]];}
.selected .footer {color:[[ColorPalette::TertiaryMid]];}

.error, .errorButton {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::Error]];}
.warning {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::SecondaryPale]];}
.lowlight {background:[[ColorPalette::TertiaryLight]];}

.zoomer {background:none; color:[[ColorPalette::TertiaryMid]]; border:3px solid [[ColorPalette::TertiaryMid]];}

.imageLink, #displayArea .imageLink {background:transparent;}

.annotation {background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]]; border:2px solid [[ColorPalette::SecondaryMid]];}

.viewer .listTitle {list-style-type:none; margin-left:-2em;}
.viewer .button {border:1px solid [[ColorPalette::SecondaryMid]];}
.viewer blockquote {border-left:3px solid [[ColorPalette::TertiaryDark]];}

.viewer table, table.twtable {border:2px solid [[ColorPalette::TertiaryDark]];}
.viewer th, .viewer thead td, .twtable th, .twtable thead td {background:[[ColorPalette::SecondaryMid]]; border:1px solid [[ColorPalette::TertiaryDark]]; color:[[ColorPalette::Background]];}
.viewer td, .viewer tr, .twtable td, .twtable tr {border:1px solid [[ColorPalette::TertiaryDark]];}

.viewer pre {border:1px solid [[ColorPalette::SecondaryLight]]; background:[[ColorPalette::SecondaryPale]];}
.viewer code {color:[[ColorPalette::SecondaryDark]];}
.viewer hr {border:0; border-top:dashed 1px [[ColorPalette::TertiaryDark]]; color:[[ColorPalette::TertiaryDark]];}

.highlight, .marked {background:[[ColorPalette::SecondaryLight]];}

.editor input {border:1px solid [[ColorPalette::PrimaryMid]];}
.editor textarea {border:1px solid [[ColorPalette::PrimaryMid]]; width:100%;}
.editorFooter {color:[[ColorPalette::TertiaryMid]];}
.readOnly {background:[[ColorPalette::TertiaryPale]];}

#backstageArea {background:[[ColorPalette::Foreground]]; color:[[ColorPalette::TertiaryMid]];}
#backstageArea a {background:[[ColorPalette::Foreground]]; color:[[ColorPalette::Background]]; border:none;}
#backstageArea a:hover {background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]]; }
#backstageArea a.backstageSelTab {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];}
#backstageButton a {background:none; color:[[ColorPalette::Background]]; border:none;}
#backstageButton a:hover {background:[[ColorPalette::Foreground]]; color:[[ColorPalette::Background]]; border:none;}
#backstagePanel {background:[[ColorPalette::Background]]; border-color: [[ColorPalette::Background]] [[ColorPalette::TertiaryDark]] [[ColorPalette::TertiaryDark]] [[ColorPalette::TertiaryDark]];}
.backstagePanelFooter .button {border:none; color:[[ColorPalette::Background]];}
.backstagePanelFooter .button:hover {color:[[ColorPalette::Foreground]];}
#backstageCloak {background:[[ColorPalette::Foreground]]; opacity:0.6; filter:alpha(opacity=60);}
/*}}}*/</pre>
</div>
<div title="StyleSheetLayout">
<pre>/*{{{*/
* html .tiddler {height:1%;}

body {font-size:.75em; font-family:arial,helvetica; margin:0; padding:0;}

h1,h2,h3,h4,h5,h6 {font-weight:bold; text-decoration:none;}
h1,h2,h3 {padding-bottom:1px; margin-top:1.2em;margin-bottom:0.3em;}
h4,h5,h6 {margin-top:1em;}
h1 {font-size:1.35em;}
h2 {font-size:1.25em;}
h3 {font-size:1.1em;}
h4 {font-size:1em;}
h5 {font-size:.9em;}

hr {height:1px;}

a {text-decoration:none;}

dt {font-weight:bold;}

ol {list-style-type:decimal;}
ol ol {list-style-type:lower-alpha;}
ol ol ol {list-style-type:lower-roman;}
ol ol ol ol {list-style-type:decimal;}
ol ol ol ol ol {list-style-type:lower-alpha;}
ol ol ol ol ol ol {list-style-type:lower-roman;}
ol ol ol ol ol ol ol {list-style-type:decimal;}

.txtOptionInput {width:11em;}

#contentWrapper .chkOptionInput {border:0;}

.externalLink {text-decoration:underline;}

.indent {margin-left:3em;}
.outdent {margin-left:3em; text-indent:-3em;}
code.escaped {white-space:nowrap;}

.tiddlyLinkExisting {font-weight:bold;}
.tiddlyLinkNonExisting {font-style:italic;}

/* the 'a' is required for IE, otherwise it renders the whole tiddler in bold */
a.tiddlyLinkNonExisting.shadow {font-weight:bold;}

#mainMenu .tiddlyLinkExisting,
	#mainMenu .tiddlyLinkNonExisting,
	#sidebarTabs .tiddlyLinkNonExisting {font-weight:normal; font-style:normal;}
#sidebarTabs .tiddlyLinkExisting {font-weight:bold; font-style:normal;}

.header {position:relative;}
.header a:hover {background:transparent;}
.headerShadow {position:relative; padding:4.5em 0 1em 1em; left:-1px; top:-1px;}
.headerForeground {position:absolute; padding:4.5em 0 1em 1em; left:0; top:0;}

.siteTitle {font-size:3em;}
.siteSubtitle {font-size:1.2em;}

#mainMenu {position:absolute; left:0; width:10em; text-align:right; line-height:1.6em; padding:1.5em 0.5em 0.5em 0.5em; font-size:1.1em;}

#sidebar {position:absolute; right:3px; width:16em; font-size:.9em;}
#sidebarOptions {padding-top:0.3em;}
#sidebarOptions a {margin:0 0.2em; padding:0.2em 0.3em; display:block;}
#sidebarOptions input {margin:0.4em 0.5em;}
#sidebarOptions .sliderPanel {margin-left:1em; padding:0.5em; font-size:.85em;}
#sidebarOptions .sliderPanel a {font-weight:bold; display:inline; padding:0;}
#sidebarOptions .sliderPanel input {margin:0 0 0.3em 0;}
#sidebarTabs .tabContents {width:15em; overflow:hidden;}

.wizard {padding:0.1em 1em 0 2em;}
.wizard h1 {font-size:2em; font-weight:bold; background:none; padding:0; margin:0.4em 0 0.2em;}
.wizard h2 {font-size:1.2em; font-weight:bold; background:none; padding:0; margin:0.4em 0 0.2em;}
.wizardStep {padding:1em 1em 1em 1em;}
.wizard .button {margin:0.5em 0 0; font-size:1.2em;}
.wizardFooter {padding:0.8em 0.4em 0.8em 0;}
.wizardFooter .status {padding:0 0.4em; margin-left:1em;}
.wizard .button {padding:0.1em 0.2em;}

#messageArea {position:fixed; top:2em; right:0; margin:0.5em; padding:0.5em; z-index:2000; _position:absolute;}
.messageToolbar {display:block; text-align:right; padding:0.2em;}
#messageArea a {text-decoration:underline;}

.tiddlerPopupButton {padding:0.2em;}
.popupTiddler {position: absolute; z-index:300; padding:1em; margin:0;}

.popup {position:absolute; z-index:300; font-size:.9em; padding:0; list-style:none; margin:0;}
.popup .popupMessage {padding:0.4em;}
.popup hr {display:block; height:1px; width:auto; padding:0; margin:0.2em 0;}
.popup li.disabled {padding:0.4em;}
.popup li a {display:block; padding:0.4em; font-weight:normal; cursor:pointer;}
.listBreak {font-size:1px; line-height:1px;}
.listBreak div {margin:2px 0;}

.tabset {padding:1em 0 0 0.5em;}
.tab {margin:0 0 0 0.25em; padding:2px;}
.tabContents {padding:0.5em;}
.tabContents ul, .tabContents ol {margin:0; padding:0;}
.txtMainTab .tabContents li {list-style:none;}
.tabContents li.listLink { margin-left:.75em;}

#contentWrapper {display:block;}
#splashScreen {display:none;}

#displayArea {margin:1em 17em 0 14em;}

.toolbar {text-align:right; font-size:.9em;}

.tiddler {padding:1em 1em 0;}

.missing .viewer,.missing .title {font-style:italic;}

.title {font-size:1.6em; font-weight:bold;}

.missing .subtitle {display:none;}
.subtitle {font-size:1.1em;}

.tiddler .button {padding:0.2em 0.4em;}

.tagging {margin:0.5em 0.5em 0.5em 0; float:left; display:none;}
.isTag .tagging {display:block;}
.tagged {margin:0.5em; float:right;}
.tagging, .tagged {font-size:0.9em; padding:0.25em;}
.tagging ul, .tagged ul {list-style:none; margin:0.25em; padding:0;}
.tagClear {clear:both;}

.footer {font-size:.9em;}
.footer li {display:inline;}

.annotation {padding:0.5em; margin:0.5em;}

* html .viewer pre {width:99%; padding:0 0 1em 0;}
.viewer {line-height:1.4em; padding-top:0.5em;}
.viewer .button {margin:0 0.25em; padding:0 0.25em;}
.viewer blockquote {line-height:1.5em; padding-left:0.8em;margin-left:2.5em;}
.viewer ul, .viewer ol {margin-left:0.5em; padding-left:1.5em;}

.viewer table, table.twtable {border-collapse:collapse; margin:0.8em 1.0em;}
.viewer th, .viewer td, .viewer tr,.viewer caption,.twtable th, .twtable td, .twtable tr,.twtable caption {padding:3px;}
table.listView {font-size:0.85em; margin:0.8em 1.0em;}
table.listView th, table.listView td, table.listView tr {padding:0 3px 0 3px;}

.viewer pre {padding:0.5em; margin-left:0.5em; font-size:1.2em; line-height:1.4em; overflow:auto;}
.viewer code {font-size:1.2em; line-height:1.4em;}

.editor {font-size:1.1em;}
.editor input, .editor textarea {display:block; width:100%; font:inherit;}
.editorFooter {padding:0.25em 0; font-size:.9em;}
.editorFooter .button {padding-top:0; padding-bottom:0;}

.fieldsetFix {border:0; padding:0; margin:1px 0px;}

.zoomer {font-size:1.1em; position:absolute; overflow:hidden;}
.zoomer div {padding:1em;}

* html #backstage {width:99%;}
* html #backstageArea {width:99%;}
#backstageArea {display:none; position:relative; overflow: hidden; z-index:150; padding:0.3em 0.5em;}
#backstageToolbar {position:relative;}
#backstageArea a {font-weight:bold; margin-left:0.5em; padding:0.3em 0.5em;}
#backstageButton {display:none; position:absolute; z-index:175; top:0; right:0;}
#backstageButton a {padding:0.1em 0.4em; margin:0.1em;}
#backstage {position:relative; width:100%; z-index:50;}
#backstagePanel {display:none; z-index:100; position:absolute; width:90%; margin-left:3em; padding:1em;}
.backstagePanelFooter {padding-top:0.2em; float:right;}
.backstagePanelFooter a {padding:0.2em 0.4em;}
#backstageCloak {display:none; z-index:20; position:absolute; width:100%; height:100px;}

.whenBackstage {display:none;}
.backstageVisible .whenBackstage {display:block;}
/*}}}*/
</pre>
</div>
<div title="StyleSheetLocale">
<pre>/***
StyleSheet for use when a translation requires any css style changes.
This StyleSheet can be used directly by languages such as Chinese, Japanese and Korean which need larger font sizes.
***/
/*{{{*/
body {font-size:0.8em;}
#sidebarOptions {font-size:1.05em;}
#sidebarOptions a {font-style:normal;}
#sidebarOptions .sliderPanel {font-size:0.95em;}
.subtitle {font-size:0.8em;}
.viewer table.listView {font-size:0.95em;}
/*}}}*/</pre>
</div>
<div title="StyleSheetPrint">
<pre>/*{{{*/
@media print {
#mainMenu, #sidebar, #messageArea, .toolbar, #backstageButton, #backstageArea {display: none !important;}
#displayArea {margin: 1em 1em 0em;}
noscript {display:none;} /* Fixes a feature in Firefox 1.5.0.2 where print preview displays the noscript content */
}
/*}}}*/</pre>
</div>
<div title="PageTemplate">
<pre>&lt;!--{{{--&gt;
&lt;div class='header' macro='gradient vert [[ColorPalette::PrimaryLight]] [[ColorPalette::PrimaryMid]]'&gt;
&lt;div class='headerShadow'&gt;
&lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;
&lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;
&lt;/div&gt;
&lt;div class='headerForeground'&gt;
&lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;
&lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id='mainMenu' refresh='content' tiddler='MainMenu'&gt;&lt;/div&gt;
&lt;div id='sidebar'&gt;
&lt;div id='sidebarOptions' refresh='content' tiddler='SideBarOptions'&gt;&lt;/div&gt;
&lt;div id='sidebarTabs' refresh='content' force='true' tiddler='SideBarTabs'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div id='displayArea'&gt;
&lt;div id='messageArea'&gt;&lt;/div&gt;
&lt;div id='tiddlerDisplay'&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!--}}}--&gt;</pre>
</div>
<div title="ViewTemplate">
<pre>&lt;!--{{{--&gt;
&lt;div class='toolbar' macro='toolbar [[ToolbarCommands::ViewToolbar]]'&gt;&lt;/div&gt;
&lt;div class='title' macro='view title'&gt;&lt;/div&gt;
&lt;div class='subtitle'&gt;&lt;span macro='view modifier link'&gt;&lt;/span&gt;, &lt;span macro='view modified date'&gt;&lt;/span&gt; (&lt;span macro='message views.wikified.createdPrompt'&gt;&lt;/span&gt; &lt;span macro='view created date'&gt;&lt;/span&gt;)&lt;/div&gt;
&lt;div class='tagging' macro='tagging'&gt;&lt;/div&gt;
&lt;div class='tagged' macro='tags'&gt;&lt;/div&gt;
&lt;div class='viewer' macro='view text wikified'&gt;&lt;/div&gt;
&lt;div class='tagClear'&gt;&lt;/div&gt;
&lt;!--}}}--&gt;</pre>
</div>
<div title="EditTemplate">
<pre>&lt;!--{{{--&gt;
&lt;div class='toolbar' macro='toolbar [[ToolbarCommands::EditToolbar]]'&gt;&lt;/div&gt;
&lt;div class='title' macro='view title'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit title'&gt;&lt;/div&gt;
&lt;div macro='annotations'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit text'&gt;&lt;/div&gt;
&lt;div class='editor' macro='edit tags'&gt;&lt;/div&gt;&lt;div class='editorFooter'&gt;&lt;span macro='message views.editor.tagPrompt'&gt;&lt;/span&gt;&lt;span macro='tagChooser excludeLists'&gt;&lt;/span&gt;&lt;/div&gt;
&lt;!--}}}--&gt;</pre>
</div>
<div title="GettingStarted">
<pre>To get started with this blank [[TiddlyWiki]], you'll need to modify the following tiddlers:
* [[SiteTitle]] &amp; [[SiteSubtitle]]: The title and subtitle of the site, as shown above (after saving, they will also appear in the browser title bar)
* [[MainMenu]]: The menu (usually on the left)
* [[DefaultTiddlers]]: Contains the names of the tiddlers that you want to appear when the TiddlyWiki is opened
You'll also need to enter your username for signing your edits: &lt;&lt;option txtUserName&gt;&gt;</pre>
</div>
<div title="OptionsPanel">
<pre>These [[InterfaceOptions]] for customising [[TiddlyWiki]] are saved in your browser

Your username for signing your edits. Write it as a [[WikiWord]] (eg [[JoeBloggs]])

&lt;&lt;option txtUserName&gt;&gt;
&lt;&lt;option chkSaveBackups&gt;&gt; [[SaveBackups]]
&lt;&lt;option chkAutoSave&gt;&gt; [[AutoSave]]
&lt;&lt;option chkRegExpSearch&gt;&gt; [[RegExpSearch]]
&lt;&lt;option chkCaseSensitiveSearch&gt;&gt; [[CaseSensitiveSearch]]
&lt;&lt;option chkAnimate&gt;&gt; [[EnableAnimations]]

----
Also see [[AdvancedOptions]]</pre>
</div>
<div title="ImportTiddlers">
<pre>&lt;&lt;importTiddlers&gt;&gt;</pre>
</div>
</div>
<!--POST-SHADOWAREA-->
<div id="storeArea">
<div title="A Chosen Faith" creator="Justin" modifier="Justin" created="201109230008" tags="Non-Fiction 289" changecount="1">
<pre>CHAPTER 3: DEEDS, NOT CREEDS
“The weakness of the Calvinist argument… [is] that it involved a capricious resolution of some people’s sin by divine orchestration; while others were left hopeless, swinging in the wind.” –44

“We are born with a capacity for both good and evil, and society contributes directly to the development of our aptitude for each.” –45

“… every principle, if exaggerated, is responsible for its own undoing.” –47

“it is in our lives, and not our words that our religion must be read.” –Thomas Jefferson –49

“all that matters is whether we are willing to live up to the promises and power of our own faith.” –49

“… sin of sophisticated resignation.” –50

“For many of us, self-improvement (both physical and spiritual) has displaced the transformation of society as our principal moral concern.” –50

“Is there nothing worth risking one’s life for? Are there no dreams or goals so important that we risk our own destruction to gain them?” –Rev. James Reeb –53

CHAPTER 4: The Known and the Unknown

“We need not think alike to love alike.” Francis David –58

“… liberty, equality, and fraternity… (kindship of all)… Liberty went west, to America…. Equality went east, to the Soviet Union and … China… the missng element, human kinship. This is the religious element. It alone can bind together the other two.” –62-63

“… ‘Confessing Church,’ which was made up of those Christians who dared to resist Nazi ideology and anti-Semitism” –65

“How can an individual or a religious community attempt to live in the spirit of such prophetic women and men… [1] concrete acts of human service…[2] moral reflection and social education… [3] ‘make their witness’… [4] social action…” –69 – 72

CHAPTER 5: CATHEDRAL OF THE WORLD

“A new awakening, it consecrates your life with sacrements of pain you do not undeerstand and promised joy you will never fully call your own.” –82

“Awakening to the call stirring deep within you, the call of life itself – the call of God – you begin your pilgrimage.” –82

“… ‘God’ is not God’s name, but our name for that which is greater than all and yet present in each.” –84

“… reject religion… There are two problems with this approach. One is that such rejection deprives us of a potentially deep encounter with the mysterious forces… The second is that none of us is able to resist interpreting the sosmic runes.” –81-82

“…Overarching crisis of our times: dogmatic division in an ever more intimate, fractious, and yet interdependent world.” –86

“I’m suggesting a new theological model, in which one light (Unitarianism) shines through many windows (Universalism) in various, yet telling ways.” –88

“… reductionism universalism: a little too much of everything, leaving us with a stomach ache and a confusing palate.” –88

“…more than Christian…” –91

“The distinctive feature of Unitarian Universalist education is that young people are introduced to many religious traditions, challenged to formulate their own beliefs, and encouraged to respect the beliefs of others.” –94

CHAPTER 6: DIALOGUE

FAMOUS UNITARIAN UNIVERSALISTS
King John Sigismund of Transylvania
Katherine Vogel
Faustus Sozzini (or Socinus)
Martin Buber
James Luther Adams
Emily Jennings Stowe
James Freeman Clark
Ralph Waldo Emerson
Margaret Fuller
Oliver Wendell Holmes
Orestes Bronson
Jeskin Lloyd Jones
Sophia Lyon Fahs
Jean Starr Williams</pre>
</div>
<div title="A defense of utilitarianism /" creator="Justin" modifier="Justin" created="201110222020" modified="201110222022" tags="assign" changecount="2">
<pre>	A Defense of Utilitarianism.
	Source	NoteType	Quote
	I. Introduction A. Development of Modern Unilitarianiam  1. Plato   a. `greatest balance of pleasure over pain' yes  2. Aristotle   a. Happeness is the 	o	1-
	greatest attainable virtue.  3. Francis Hutcheson   a. came up with the phrase 'greatest happiness for the greatest number' yes  4. Jeremy Bentham   
	a. hutchesons phrase is 'the measure of right and wrong' yes  5. John Steward Mills  6. Henry Sidgwich   a. wrote 'Method of Ethics': exploring self-
	interest and altruism.  7. Hastings Rashdall   a. Ethics must be teleological.Traditional utilitariansim v.s rule-utilitariasm act utilitarianism  a. a 
	comparison of values instead of rules rule-utiliariansim  a. nonstrict moral principles as thumb for guidance S.E. ToulminJ.O. urmson also must be 
	teleologicalC. Difficulties with utilitariansim 1. Interpretation of the principle of utility. 2. Determination of value and utility 3. Individual v.s. societal 
	points of view. 4. Distribution  a. 'involved in the very meaning of utility, or the great
	I regard the aggregated or social utility as the ultimate objective of human beings. The ultimate objective naturally leads to the principle of utility, 	q	8
	which is the core of utilitiarianism.
	During much of modern philosophy the predominant systematic theory has been some form of utilitariansim.	q	9
</pre>
</div>
<div title="A reason to believe" creator="Justin" modifier="Justin" created="201109251225" modified="201109301202" tags="Non-Fiction 974 Biog B y2011" changecount="6">
<pre>A REASON TO BELIEVE
by Deval Patrick.

Review: In &quot;A reason to believe&quot;, Gov. Patrick &quot;distill[s] some of the many lessons that have made me the idealist I am.&quot; He speaks of his coming of age years in Chicago, his time at Harvard, his work in the Sudan and as a corporate attorney, personal and family relationships, and struggles as governor. As an autobiography, I was informative, engaging, and even inspiring.

Grade:B

Read: Sept. - Oct. 2011

Notes:

Ch. 1:
&quot;Authenticity is a matter of values. Know those and be true to them, and you can comfortable navegate the uneven terrain of life.&quot; -35
&quot;I was learning how to shrug off slights, real or perceived. &quot;-50
&quot;I was just a good citizen, a patient listener, and a sharp observer.&quot; -82

Ch. 2:
&quot;Change favors the well prepared.&quot; -62
&quot;I had learned how culture explains why people sometimes draw different conclusions from the same information.&quot; -60

Ch. 3:
&quot;In our age of high decibel hate-mongering and attack gone viral, grace and generosity are sometimes viewed as quaint relics from a lost era. But that special giving of the spirit... sustains us all.&quot; -89
&quot;Desperation, as it turns out, is a great ice breaker.&quot; -89


Ch. 5: Save a place
  A wonderful and touching chapter about his parents, and his relationship to his parents.

&quot;When we have dinner parties, I like to go around the table and say something about each guest and our special connection to him or her.&quot; -90
&quot;Our responsibility was to befriend him, have him to supper a few times, and be a resource to answer questions if he needed us.&quot; -110
 &quot;You come to understand that forgiveness is sometimes needed to heal ancient wounds.&quot; -116
 &quot;For a time I felt responsible for the breakup [of Patricks' parent's marriage], as kids do.&quot; -120
 &quot;The day he [Deval's father] left... the phone rang... my mother answered... The caller was a women who ask for my father... the caller said, 'Tell him our baby needs shoes'... The baby was my half-sister, Lashon, and my mother had known nothing about her or my father's infidelities... My mother had one or two abortions after I was born... When he learned what she had done, he flew into a range&quot; -124 - 125
   //Wow//
 &quot;Apart from that episode, my years at Milton had began to mature me.&quot; -126
  //I feel my years at Hillsdale Academy matured me... or at least gave me an appreciation for learning.//
 &quot;I haven't made any judgement against you [Deval's father]... I don't even know you. The fact that I'm making other chooses [than you] is not about you.&quot; -129
 &quot;After our long walk that summer day, my mother and I became much closer. We began to accept each other as adults, as friends.&quot; -130
 &quot;I had to admire her [Deval's mother] moxie -- picking up from a tenement on the South Side of Chicago, flying to Nairobi, and thinking, I'll figure it out along the way.&quot; -133
 &quot;She stayed for almost two weeks, and when she left felt a deep void. I couldn't believe she had traveled so far to see me. She had never been very good about showing affection or saying she loved me, but her unlikely trip spoke more eloquently than any word or gesture.&quot; -134

Ch. 6: Faith is how you live
   Thoughts on faith, and his work with NAACP, the Justice Dept., the corporate world, and Governor. 
  &quot;To me, God is real.&quot; -147
  &quot;The pageantry of Catholic mass or the rituals of Islamic prayer seem sometimes to overtake the message itself.&quot; -148 //Oh I don't know about that... //
  &quot;I had so many cases like this one [involving the death penalty] that I was finally persuaded that there are certain things that government just does not do well. Making irreversible decisions about life and death is one of them.&quot; -153
  &quot;Theirs [the radical political right] is a faith based on intolerance, a faith without compassion. Hating homosexuals and despising illegal immigrants instead of hating poverty and despising homelessness seems to miss the point of a life of faithfulness.&quot; -164
  &quot;If social justice means anything in politics, it means opening up the process to those who have been left out, to hear their voice and return their calls.&quot; -166
  &quot;... I try not to wear my faith on my sleeve... but to contribute where I an to the common good. It's a struggle. I can have a mean temper, my patience can wear thin, and I can be short with people who are short with me. But more often than not, I have learned that kindness... moves me further forward...&quot; -171

Ch. 7: Overcoming Kryptonite
     Challenges in passing the bar, and running for and being Governor; in particular, Diane's depression.
&quot;It was an act of will to quiet the doubt, to restore my faith in myself, and to get the work done.&quot; -175
&quot;The doctors concluded that she [Diane] was extremely smart but was obsessed with always doing the right thing perfectly, being perceived in the right light - and felt she would pay a huge price if she wasn't.&quot; -190

Ch. 8: In defense of idealism
The importance of idealism; his friendship with Pres. Obama.
&quot;Ours may be the only nation in human history not organized around a common language or religion or culture so much as a common set of civic ideals.&quot; -197
&quot;About 12 percent of those who serve in the U.S. military are not citizens.&quot; 219
  </pre>
</div>
<div title="A spiritual Journey" creator="Justin" modifier="Justin" created="201109230047" tags="Non-Fiction 248" changecount="1">
<pre>Broyles, Anne. Journaling:  A spiritual Journey. ISBN: 0835808661

Introduction

Types of Spiritual Journaling:
1. Realizing our ground of being in our everyday life.
2. Responding to a reading.
3. Responding to meditation.
4. Dreams
5. Our associations

Tips on Getting Started:
1. Choose your jounral wisely. Size, cost weight, and other physical issues are important.
2.Writing Utensil.
3. Choose a specific time and place.
&quot;Journaling is about discovering.&quot; -9

&quot;there is a difference between a diary and a journal. A diary is a record of daily evens in one's own life. ... but in journaling, one looks inward to see how one is affected by the events.&quot; -10

&quot;Journaling is a private discipline in which we can reveal ourselves totally.&quot; -11

&quot;As much as I use the computer for many aspects of my life, I still like the feel of a physical journal book in my hands as I consider my life.&quot; -13

&quot;...There is something in the physical act of writing that releases creativity and self-understanding.&quot; -14

&quot;This journal will become a friend, one of the first posessions to be saved in case of fire, for this friend will know more of your inner life than most people will.&quot; -15
</pre>
</div>
<div title="A wing and a prayer :" creator="Justin" modifier="Justin" created="201110222114" tags="252 Non-Fiction B" changecount="1">
<pre>Source	NoteType-uote
	Is there anyone we feel we have no need of? A good spiritual exercise might be to figure out where and howw we can reach out to someone we -	10
	would rather ignore.
	Kingdom of God	d	13
	The ministry we receive at baptism calls us to transform our communities into something that looks more like the reign of God.-	22
	… all ministry is grounded in baptism.-	22
	We need leades in the church -- and I insist-	23
	Breathe deeply, know the wind of God is always beneath your wings, receive holy spirit, and change the world.-	4</pre>
</div>
<div title="About me" creator="Justin" modifier="Justin" created="201109230409" modified="201109271112" tags="site" changecount="9">
<pre>&lt;html&gt;
&lt;table align=&quot;center&quot; border=0&gt;
 &lt;tr valign=&quot;middle&quot;&gt;&lt;td&gt;&lt;img src=&quot;/picture.jpg&quot;&gt;&lt;/td&gt;
 &lt;td&gt;&lt;h2&gt;Justin Lee Tyler&lt;br /&gt;
				M.L.I.S.&lt;br /&gt;
				Database Designer - EBSCO Publishing&lt;/h2&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;/table&gt;
&lt;/html&gt;
|About me:|[[Resume|http://www.linkedin.com/in/justinleetyler]]|
||[[Brief Biography|/biog.html]]|
||[[Contact form]]|
||[[Interests|/interests.html]]|</pre>
</div>
<div title="After God" creator="Justin" modifier="Justin" created="201109230021" tags="Non-Fiction" changecount="1">
<pre>After God – The Future of Religion 
DBID: 0097

READING DATES: May 2005

NOTES:

I.	The Legacy of the Old Religions
A.	“Religion has been a powerful tool of self-development by enlarging the scope of consciousness, intensifying and purifying it.” -80
1.	“There are (or were) a number of valuable and interesting experiments in selfhood and modes of consciousness, some of which we ought to keep”-80
2.	In brief, the position is that all our present major religious traditions are now coming to an end, just as the once very grand religions of ancient Mesopotamia, Egypt, and Greece came to an end in antiquity.” –81
3.	“For us, there is only us and all this.” –109
4.	“Although the point is obvious, it remains curiously difficult to recognize that we made it all up”. -216
B.	We should pick out what is valuable and salvage what we can of existing religions.
1.	“Our religion not as supernatural doctrine but as an experiment in selfhood” –82
2.	“We should learn to pursue our own personal growth by exploring and flipping among several different forms of self-hood and views of life. There is no One Great Truth anymore, and there never will be again. It is now better to maintain a small personal repertoire of different truths, paths, and goals, to be utilized ad lib.&quot;”-82
3.	“We give up the notion of religion as a system of reassuring supernatural beliefs; and we adopt instead the idea of religion as a toolkit.” –90
4.	“I am offering only religion as a toolkit, a small set of attitudes and techniques, by practicing which we can grow in self-knowledge (the eye of god), learn to accept the transience and insubstantiality of ourselves and everything else (the blissful void), and learn to say a whole hearted yes to life (solar living). 
5.	Minimalist “nonrealistic” version of Christian Theology (127-128)
a.	God is the “religious ideal” – that is, a unifying symbol of our common values and of the goal of the religious life.
b.	The God of Christians is love – that is, the Christian specification of the religious ideal makes agapeic (disinterested, or “solar”) love the highest value.
c.	We see love as taking human form in Jesus – in the stories told by and about him, and in the various doctrinal and others have subsequently developed around him.
C.	The Eye of God
1.	“assesses oneself and one’s world as from the standpoint of eternity. The person who truly and seriously believe sin God is a person who has … a consciousness of oneself as one appears from an ideal and universal standpoint outside oneself.” –83
2.	“God is voluntary” –85
a.	“HE is unchangeable. Fixed in eternity, he grows no older.”
b.	“he is nobody – and therefore he as the power to draw the truth about ourselves out of us.”
D.	The Blissful Void
1.	“Abstract sacred, the cool sublime, and the disappearance of the self into immanence, objectivity, and nothingness.” –88
E.	Solar Living
II.	Naturalism, Philosophy, and Religion
A.	“They seek to fuse Eternity with Now; which, I say, is exactly what religion must henceforth do.” -92
</pre>
</div>
<div title="American Jesus :" creator="Justin" modifier="Justin" created="201110211805" modified="201110222027" tags="232 Non-Fiction" changecount="2">
<pre>	II. Reincarnations	o
	 A. The mormans
	  1. Eden is in Independence, Missouri; second coming is in Jackson County, Missouri
	  2. Joseph Smith
	   a. Born in Sharon, Vermont
	   b. Moved to New york
	   c. Sought to restore the original church.
	    1) Incredible religious diversity
	  3. Textual Mormans
	    a. Apostolic
	    b. RLDS -&gt; Community in Christ 2001
	  4. Temple Mormans
	    a. Abrahamic
	    b. Jesus` atonement as one scene in plan of salvation.
	  5. 20th century mormanism accomationists
	  6. Bypassed the ECLA as 5th largest group in USA.
	  7. Jesus
	   a. Farrar's The life of Christ
	   b. Talmage's Jesus the Christ
	Before the Revolutionary War, church members were in a distinct minority.	q	10
	As Jefferson sat down in the White House, razor in hand, and began to cut and paste his own Bible, the American Jesus was born.	q	13
	Great Disappointment	f	167
	His [Joseph Smith] was unabashedly masculine and unapologetically majestic	q	178
	The book of morman as &quot;choloform in print.&quot;	q	182
	Mormons continued to accept the Bible as God`s word only 'as far as it is translated correctly.'	q	186
	I. Ressurrection	o	19-42
	 A. The Enlightened Sage
	  1. Jefferson
	   a. great moral teacher
	  2. Jesus seminar
	   a. american
	    1) method=democratic
	    2) goal=freedom
	    3) obsession=jesus
	   b. a third quest, after historical jesus, and &quot;The New Quest&quot;.
	   c. Jesus as englightened sage, but a grooby one. -38
	… by engrafting on them the mysticisms of a Grecian Sophist…	q	22
	Thursday, October 20, 2011	Page 3 of 76
	He [Jefferson] built his theological system, however, on what can only be described as a myth.	q	22
	I am a Christian, in the only sence in which he wished any one to be; sincerely attached to his doctrines, in preference to all others; ascribing to 	q	26
	himself every human excellence, and believing he never claimed any other.
	Jeffersons religious genius was his ability to imagine Jesus apart from historical Christianity.	q	27
	Whatever jesus was, he was in no sence a Liberal Protestant.	q	34
	Spiritual indifference was the rule in seventeenth-century Virginia, maryland, New York, New jersey, Delaware, and North and South Carolina.	q	43
	I. Resurrection	o	43-
	 B. Sweet Savior
	  1. Puritanism
	   a. God fearing, rather than Jesus fearing
	  2. Evangelicalism
	   a. Charactoristics
	    1. enthusiasm
	    2. Egalitarianism 
	    3. revivalism
	    4. republicanism
	    5. biblicism
	    6. Common scense.
	   b. Calvinists=separaration from God. Evangelicals=narrow that gap.
	   c. A loving God
	   d. &quot;Evangelicalism found tis voice… through the hymns.&quot;-74
	  3. Feminism
	   a. charactoristic women not eve, but the domestic version
	   b. focused on benevolent, voluntary associations
	   c. Helena Blavatsky
	   d. Mary Baker Eddy
	   e. god not as judge, but friend.
	   g. focus not on ethical sayings, but on stories
	   h. feminism stoped here.
	  4. Liberal Protestantism
	   a. While evangelicals preached &quot;sola scriptura&quot;, liberals weened themselves to &quot;only jesus&quot;
	   b. conversion as a process, not an event
	   c. by 1800, left evangelical fold
	   d. emphisised
	    1) birth,  not resurrection
	    2) incarnation, not atonement
	    3) immanence, not transcendence
	Puritanism provided the moral and religious background of fully 85% of the people who declaired their independence in 1776.	q	44
	Thursday, October 20, 2011	Page 4 of 76
	On the eve of the revolution, only 17 percent of adults were church members, and spiritual lethargy was the rule.	q	44
	For obvious reasons, they rebuffed the Anglicanism of the crown, sending what came to be known as Episcopalisnism on a long downward slide.	q	47
	W.E.B. Du Bois once wrote that slave religion was charactorized by three things: `the Preacher, the Music, and the Frenzy.'	q	49
	Alos opposed [the the evangelicalism in the 19th century] were Proestants from liturgical traditions such as Lutheranism and Episcopalianism, who 	q	51
	believed that revivals diminished the value of sacraments.
	As early as 1691, Cotton mather was complaining that `there are far more godly women in the world than there are godly men.'	q	56
	While in the 1700`s congregations were feminiized, in the 1800's Jesus was.	q	56
	I never saw, or reaad, of any country where religion had so strong a hold upon the women, or a slighter hold upon the men.	q	58
	Nearly one-quarter of the Christians in the United States now believe in reincarnation.	q	6
	While there are likely more Muslims than Episcopalians in the United States, there are infinitely more Episcopalians than Muslims (44 to 0, to be 	q	6
	exact) in the 108th Congess.
</pre>
</div>
<div title="An autobiography :" creator="Justin" modifier="Justin" created="201110211806" modified="201110222028" tags="Non-Fiction" changecount="2">
<pre>An autobiography :
	Source	NoteType	Quote
	Jelousy does not wait for reasons	q	12
	I know that notiiing i impossible for pure love.	q	13
	God ultimatele  saves him whose motive is pure.	q	13
	I am of opinion that all exclusive intimacies are to be avoided	q	19
	A reformer cannot afford to have close intimacy with him whom he seeks to reform. True friendship is an identity of souls rarely to be found in this 	q	19
	world. Only between like natures can friendship be altogether worthy and enduring. Friends react on one another.
	As we know that a man often  succumbs to temptation, however much he may resist it, we also know that Providence often intercedes and saves 	q	24
	him in spite of himself. How all this happens, - how far a man is free and how far a creature of circumstances - how far free-will comes into play and 
	where fate enters on the scene, - all this is a mystery and will remain a mystery.
	Ever since I have been grown up, I have never desired to smoke and have always regarded the habit of smoking as barbarous, dirty, and harmful. I 	q	26
	have never understood why there is such a rage for smoking throughout the world. I cannot bear to travel in a compartment full of people smoking. 
	I become choked.
	The term `religion' I am using in its broadest sense, meaning thereby self-realization or knowledge of self.	q	31
	Thursday, October 20, 2011	Page 5 of 76
	But one thing that took deep root in me - the conviction that morality is the basis of things, and that truth is substance of all morality.	q	32
	For a bowl of water give a goodly meal	q	35
	I had to frame every sentence in my mind, before i could bring it out.	q	42
	Certificates of progress and character...	q	778</pre>
</div>
<div title="Anatomy of the sacred :" creator="Justin" modifier="Justin" created="201110222029" tags="200 Non-Fiction" changecount="1">
<pre>	Source	NoteType	Quote
	Religion	d	10
	Religion	d	11
	Chapter 7 : Diety: conceptions of the Divine and the Ultimate	o	169-198
	The Earth is our mother, the Sky is our father. The Sky fertilizes the Earth with rain, the Earth produces grains and graces.	q	171
	While the problem in the East was how to reconcile the fact of a world of plurality with the intuition of a single would-soul or ground, the problem 	q	189
	for the western historical religions was how to reconcile the presence of sacred power in the would with its wholly otherness or transcendence of 
	The divine name YHWH is here connected with the ver hayah, to be. In ancient Hebrew texts only consonants and not vowels were written to 	q	192
	produce the name.
	Anthropomorphism	d	195
	Cosmogony	d	223
	IX. Cosmogony: Origins of the natural and social order.	s	223-
	Nous	d	224
	Myth	d	224
	Adrogynous	d	226
	Nun	d	226
	Marduk	d	232
	Taablets of Destinies.	f	233
	Thursday, October 20, 2011	Page 6 of 76
	II. Ways of Studying Religion	O	24-
	 A. Theology and religios studies.
	 B. Literary Criticism
	 C. Historiography
	 D. Anthropology
	 E. Sociology
	 F. Psychology
	 G. Philosophy
	 H. Phenomenology
	  1. `meaning that which appears' -40
	  2. Study of structures and forms
	Theogony	d	240
	XII. Ethics	o	304
	 A. Ancient Greece
	  1. wisdom
	  2. temperance
	  3. courage
	  4. justice
	 B. Buddhism
	  1. love
	  2. equanimity
	  3. patience
	  4. Bodhisattva
	 C. Christianity
	  1. Seven cardinal virtues
	 D. Sources of Moral authority
	  1. Cosmic/natural law
	   a. Confucism
	   b. Roman Catholic natural law
	    1) Thomas Aquinas
	 E. Confucism
	  1. Mencius
	 F. Charismatic Leaders
	  1. ghandi
	  2. Amos (ethical prophet)
	Ethics of Virtue	d	305
	Ethics of obligation/duty	d	306
	Is something right because God commands it or does He command it because it is right?	q	322
	Thursday, October 20, 2011	Page 7 of 76
	I. What is Religion	o	3-23
	 A. Defining Religion
	  1. Theism v.s. Non-Theism
	  2. Sacred v.s. secular
	  3. Mono v.s. polytheism
	  4. Why define religion
	   a. religions do share charactoristics
	   b. avoid confusion
	  5. Substantive v.s. functional
	 B. Why are humans religious?
	 C. Why Study Religion
	 D. How to study religion
	Propitiation	d	4
	Religion	d	4
	Religion	d	4-5
	Religion	d	5
	Religion	d	5
	Religion	d	5
	Religion	d	5
	Religion	d	5
	Religion	d	53
	Chapter III : The Sacred and the Holy	o	53-
	Religion	d	55
	Religion	d	6
	Religion	d	6
	Religion	d	6
	Religion	d	9
	Thursday, October 20, 2011	Page 8 of 76
</pre>
</div>
<div title="Angel and Demons" creator="Justin" modifier="Justin" created="201109230018" tags="813 Fiction B" changecount="1">
<pre>Angel and Demons by Dan Brown 
ISBN: DBID: 0091              
-------------------------------

GRADE: B

READING DATES: 04/01/2005 - 

NOTES:

Earth  = Power
Air    = Intellect
Wind   = Ardor
Fire   = Water</pre>
</div>
<div title="Armageddon's children /" creator="Justin" modifier="Justin" created="201110222031" tags="813 Fiction" changecount="1">
<pre>Candle	f
	He wrote in his journal each night before going to sleep, putting down his musings and his discoveries so that he would have a record of them 	q
	when his term  of service was up.
	Cycles come and go. One day the world will be new again.	q
	He [Hawk] liked her [Owl] face, liked the way you could always tell what she was thinking.	q
	Quick Drain	f
	Things could always get worse, even in a world as riddled by madness as this one.	q
	The ones who survived were the ones who understood that while faith and courage were necessary, they weren`t enough. Good judgement and 	q
	sound reasoning had to be exercised as well. When the world was collapsing around your ears, you had to know when to stand fast and when to 
	Owl might be able to learn something from one of her books.	q
	Use the seeking-Elfstones to find it, the three to find the one. Read your histories. The secret is written down.	q
	Thursday, October 20, 2011	Page 9 of 76
	He couldn`t say why he found this so pleasing, why he actually looked forward to rising early and in secret spending time with a creature that gave	q
	 nothing back.
	…his anger and his forward momentum kept him going when common sense and second thoughts might have turned him around.	q
	The asence of her warmth left him instantly chilled.	q
	It was a mistake to take anything so seriously. It aged you too quickly and drained you of energy and hope.	q
	Panther	f
	What they didn’t want to believe, what they tried repeatedly to dismiss, was that whatever good and evil there was in the world came from within 	q
	themselves and not from some abstract source. It was easier to attribute both to something larger than what they knew, what they could see. A 
	refusal to accept that it came from within was what had ultimately undone them...lies that went something like this: “Do you want to know what it 
	will take to survive? A willingness to do what is needed. The world has always belonged to the strongest. The weak have never been meant to 
	inherit anything. You choose which you want to be in this life. By your choice, you are either with us or against us. Choose wisely”…a culture of 
	weapons and battle, from a mindset of hate and suspicion and ruthless determination
	…absenting yourself from the affairs of the world was an invitation for disaster.	q
	Owl	f
	If you don`t sleep, you aren't rested. If you aren't rested, you can't perform adiquately your duties as a Chosen.	q
	Every living creature deserves our help when we can give it, expecially when it is in pain.	q
	Chalk	f
	Hawk	f
	His understanding of its truths transcends time and place	q
	What matters is that the human spirit remains strong and alive.	q
	Bear	f
	Sparrow	f
	Fixit	f
	There were things no one could describe, crawled up out of Hell and the mire.	q
	Eventually, a new world would be born from the ashes of the old, and living in a walled fortress was not the way to make that happen.	q
	Thursday, October 20, 2011	Page 10 of 76
	She gave him a different kind of strenth with her love, a strength born of knowing that you could change another person`s life by just being who 	q
	you were.
	The light hides us from our enemies	q
	Still, he supposed, you carried your memories of the dead in your heart. That was the safest place for them.	q
	Sick at heart. I need air and space and freedom.	q
	Flesh and blood met heat and light, and the contact ws sharp and penetrating, and it sent shock waves coursing through Logan`s body.	q
	I mean that killing demons will not restore the world. Humankind is fighting a war it cannot win	q
	But he quickly discovered that what he had taken fro weakness and indecisiveenss was measured consideration and complex thought.	q</pre>
</div>
<div title="Back from the brink" creator="Justin" modifier="Justin" modified="201109252058" tags="Non-Fiction 941 Biog B y2011" changecount="3">
<pre>BACK FROM THE BRINK
by Alaister Darling

Grade: B
Read: Aug. - Sept. 2011

|PERSONAL REFLECTION|
 One thing that stands out to me is how complacent and careless the bankers really were. They did nothing to try to stop the crash, nor, when it occurred, did they even acknowledge it. And yet they went to the gov't demanding money as if they were entitled to it. Parts about Gordon Brown (his character, seeming lack of direction) seem consistent with the other books and descriptions of him. Darling is a low key politician. It doesn't seem that he particularly enjoys the spotlight. I like that. ? 

|FAVORITE QUOTES|
how close we came to the collapse of one of the world?s largest banks, a collapse that would have brought down the global banking system within hours. 132 ? Politics above all is about people and relationships. 138 -- my political reputation had been built on my ability to ?troubleshoot?. 144 -- That was the hand I was dealt and I learned, often the hard way, to be bold in playing it. 273 -- seventy-nine days. 284 -- But something changed after he became Prime Minister and suddenly I was definitely outside the tent. 610 -- Unlike the wealth that never did trickle down, as. 710 -- Here we were, talking in calm tones about the British government having lost intimate and sensitive details of half the population. It was all contained on two CDs which had been popped in the post? No one had a clue where. 869 -- The discs never were found. The. 924 -- My guess is that the discs were destroyed once it was clear that the hunt was on, possibly within days. All of this, though, further darkened. 925 -- my audience with Her Majesty the Queen. 1297 -- he?d rung me to ask whether I was blocking their dissemination. 1780 -- ?Will no one rid me of this turbulent priest??. 1788 -- Peter remains something of an enigma, and probably he likes it that way,. 1816 -- The debacle of the summer was about to be overshadowed by the worst banking crisis ? not in sixty or a hundred years, but in history. 1831 -- was also struck by the fact that the US president, although frequently described as the most powerful man in the world, cannot automatically get what he wants at home. He has to horse-trade. In. 1929 -- So why not let the banks fail?. 2300 -- If RBS closed its doors, the banking system would freeze, not just in the UK but around the globe. 2509 -- by some strange anomaly gets paid for every cup of tea or coffee he makes. 2660 -- There was page after page of it, which Gordon and I signed, as Her Majesty?s Lords of the Treasury. This was a dramatic moment. 2805 -- The General Theory of Employment, Interest. 2846 -- Income tax, when it was introduced in 1798 by William Pitt the Younger to pay for the Napoleonic Wars, was intended to be temporary. 3001 -- His quiet style, self-deprecating and relaxed, belied a steely determination. He. 3176 -- Part of the Chinese government?s deal with its people is that they provide employment and rising standards of living. For as long as they do that, the people will put up with living under an authoritarian regime. 3354 -- The point is that Cabinet government is a critical part of our constitution and it is being neglected. 3569 -- Richard Crossman in his diaries observes that political friendships should be cool and detached. 3589 -- I vividly remember a speech Gordon made while we were in opposition, the famous ?neoclassical endogenous growth theory? speech. He started speaking as the second half was still being written. Halfway through, a hand appeared from behind a curtain and handed him the rest of the speech. This exemplifies Gordon?s approach to working on such matters. 3705 -- Alan Johnson, a. 4047 -- ?Tesco test?. I make a point of watching how people react when I go shopping. If they look away, you are in trouble. If they engage with you, either through eye contact or, even better, conversation, then you are in with a chance. 4092 -- But Andrew?s boyish exuberance and serious intent rekindled the fire that any government needs. 4205 -- James Callaghan Memorial Lecture. 4216 -- I had seen the Northern Lights from the ground in Lewis many times, but to fly through millions of green crystals for more than two hours as they glittered on the polar icecap was truly. 4480 -- The gladiatorial style masked the essential policy questions. 4576 -- After three years in one of the most difficult jobs I?ve ever done, I wanted a rest. 4703 -- The Queen?s government goes on. 4706 -- Indeed, Gordon was now being put in the impossible situation of having to remain as Prime Minister until Nick Clegg and David Cameron signed off their deal. 4871 -- essential. It has to be grounded in a core belief ? in our case, in fairness and an aspiration to make things better for individuals and for the country as a whole. There were areas where we did not get it right. Areas, too, where we got. 4971 -- The state is there to do those things that we as individuals cannot do alone,. 5010 -- The Beveridge Report, drawn up during the Second World War, set out the platform for what was to become the welfare state. 5016 -- Government action is not a denial of freedom; rather, it is a way of increasing freedom, of supporting people to achieve their aspirations in a rapidly changing world. 5038 -- To me, what matters is what works, whether it be in the public or the private sector. We. 5039 -- We in the Labour Party had lost our collective vision and sense of purpose, and we need now to get it back again. 5166
</pre>
</div>
<div title="Bearers of the black staff /" creator="Justin" modifier="Justin" created="201110291944" modified="201111160142" tags="813 y2011 Fiction" changecount="12">
<pre>by Terry Brooks.
READ: Oct. - Nov. 2011

GRADE: 

NOTES:

CH.1: //Creatures get through the ward//
&quot;The Word's magic was given to him [the grey man] by his predecessor and before that by his, and so on over a span of five centuries.&quot;-5

CH. 2: //Pru and Pan find two dead bodies that the creature had killed and eaten//
Prue: a tracker -11
Pantera Qu: a tracker - 11
Trow Ravenlock: Leader of the Trackersof Glensk Wood - 14; 25
&quot;They were in agreement about the one they called Hawk, who had brought their people here five centuries ago...&quot; -16

CH. 3: //Pru and Pan (PP) come across Sider, who instructs them to tell the council what they see: that the creature came from the Myst, which would be considered heresy among the Seraphic sect//
Sider Ament: The grey man -24
&quot;Ordinarily, neither [Prue and Pan] would have told anyone anything unless they knew the person well enough to call him a friend.&quot; -25
&quot;'We [Prue and Pan] don't believe as do the Seraphic sect... we're Trackers, and we believe in a world outside this valley.&quot; -26

CH. 4: //Trow tells PP not to tell the council what they saw, but Pan insists//
&quot;'What do you suppose hedoes, living out there by himself [Sider][, said Pan]... I don't know [said Prue]. watches, mostly.&quot;' -30 //This is what I do... watch //
Skeal Eile: The head of the Seraphic sect?
&quot;Now he [Pan] lived alone, not quite certain what to do with either the house or himself when he wasn't taking.&quot; //I often find that i don't know what to do with myself when I'm not working.//
Brickey: -37

CH. 5-6: //Pan presents his case to the council. Aislinne say they need to leave and seek help from the Elves, and they do so.//
Skeal Eile: The Seraphic
Aislinne Kray: Wife of Pogue Kray; member of the council.
Pogue Kray: Husband of Aislinne Kray; leader of the council.
&quot;She [Prue] was a loner who preferred life lived outside villages in the wild, where she felt free and uencombered.&quot; -45
&quot;Keeping silent was the coward's way, and Prue was never a coward.&quot; -41
&quot;The Races had eparated shortly after their arrival, moving away from one another to establish their own boundaries within the confines of their new home. Men had settled in teh south and west, the Elves had gone northeast, and the Lizards and Spiders, withtheir numbers much smaller, had made their homes in the small corners in between.&quot; -41
&quot;... you should not doubt. We can do nothing about those who do, those fools who think dogma equates with truth.&quot; Aislinne Kray. -57

CH. 7-8: //Sider finds the creature (an agenahl) and tries to kill it, almost being killed in the process. He is saved by Deladion Inch.//
Agenahl: mutants from the great war.
&quot;He [Sider] instinctively like this man, but he really didn't know enough about him. Trusting people you didn't know was never a good idea. &quot;-78

CH. 9-10: //Deladion takes Sider to an old fortress, and talks about the aftermath of the great war.//
&quot;It's a harsh world, Sider, and I stay sane in it by making sure all the choices are mine and not someone else's&quot; -58 -Sider
&quot;the primary obligation of it's bearer is to proteck those for whom it was created, way back when the Great Wars were just a possibility.&quot; -Sider -86
&quot;People are strange creatures, and they don't always have a clear eye towards how things stand.&quot; -Sider. -86
&quot;The end of the Great Wars came in a series of huge explosions that tore up the land and poised everything in it for two hundred years. Almost no one surved. Those who did went north or south or hid out in places that escaped the worse of it. Some went underground. Some went deep into the mountains. Some stayed upt and got lucky. Others tured into freks and mutants and worse things than that... after the end of the Great Wars,people lived like animals.... The people who had escaped the worse of the plaues nd poisons and firestorms had formed communities that were fortified and protected.&quot; -Inch -87
&quot;Centures of enlightenment and progress vanished virtually overnight because Men couldn't find a way to use it widely and purposefully.&quot; -Inch. -89
&quot;The Trolls are the most populous people. Used to call themselves Lizards, but quit doing that a long time back.&quot; -91
&quot;do you have a family there...  I have none, so I have nothing to go back to and movin ahead is all I know.&quot; -Inch. -92

Ch. 14. //A discussion ensues, having seen a dragon, and knowing the wall is coming down, about whether to go back. But they see a campfire. When they sense the danger, it is too late.//

Ch. 15 //We learn that Sider and Aislinne use to be lovers, but he chose the staff over her.//
&quot;All you needed to do was to pay attention to what was going on around you. That was what he  [Pan] had done.&quot; -110
&quot;You have a direct and purposeful way that reflects in your character. When you are given something to do , you see it through... You accept work as a part of life and self-sacrifice as a part of work.&quot; -153
&quot;This world we inhait, here in the valley, is mostly good and nurchuring, but it is fragile, too... I am saying that the end of our stay in this valey is coming, perhaps in your [sider] lifetime, and we must all prepare for it... The transition will be difficult and not without cost.&quot; -153 // Like my journey to Mass. //

Ch. 16-21 //Pan and Pru are caught by trolls, but Pan is allowed to travel back to get help as the wall is coming down. Along the way, Sider finds him. Trow has a change of heart//

Ch. 27 //Pretending to be the Trolls friend, Deladion Inch goes into their camp to rescue the girl. He does, but then his vehicle falls apart.//

Ch. 28 // Mistral Belloruus explains how the elfstones work. And Teonette and Isoeld murnder the king in the library, and are framing Phryne for it. //

&quot;Now they [the elfstones] would pass to Phryne 00 not because she was her mothers daugther, but because she had the strength of character her father did not and that was what was needed if the Elves were to survive.&quot; -312
&quot;'These are the blue Elfstones, Phryne, the seeking-Stones... One each for the heart, mind, and body. They work in unison, drawing on the strengths found within the user. The greater those strengths, the greater the power of the Stones. In effect, the user determines the power of the magic.', [says Mistral]. -313
&quot;Wielding the magic, experiencing the power, is how you discover what it means to have command of it.&quot;Take the Elfstones.&quot; -313
&quot;Reluctantly, Phyne did. They were indeed heavier than she expected, and she held them she could feeel unexpected warmth seeping into her skin.... 'They feel alive...'&quot; -313
&quot;'They are alive. The magic is a living thing. It lies inanimate until a user summons it, unitl it finds a kindred spirit. It doesn't work for anyone who isn't Elven, and it doesn'trespond to anyone whom it is not given freely -- as i have given it to you.'&quot; -Mistral -314
&quot;'For the Elfstones to work, you must picture in your mind what itis you seek. You must see it clearly and you must ask the stones to findit for you.&quot; -314 -Mistral.
&quot;'Your combined strengths of heart, mind, and body will determine the extent of your control over the magic... This is your chance to discover the truth of things. Use it well.&quot; -315
&quot;Abruptly, she felt the Elfstones warm within her hand, causing her to open her eyes in surprise and look down. Brilliant blue light seeped from between her fingers...&quot; -316
&quot;But something had been done. A rush of exhilaration was flooding through her body, sweeping from head to foot adn back again, a sense of warmth and excitement mingling with something she could not define.&quot; -316
&quot;In the time of his reign as King, he had done nothing to foster the study or use of Elvin magic.&quot; -318</pre>
</div>
<div title="Being liberal in an Illiberal age" creator="Justin" modifier="Justin" created="201109230031" tags="Non-Fiction 289" changecount="1">
<pre>Being liberal in an Illiberal age 
----------------------------------

Grade: 

Read: July - August 2005

Notes:

CHAPTER ONE

&quot;the unfolding of their spiritual nature&quot; -19

I. A way of walking and acting in the world
A. &quot;For me the fundamental question of life is not why but how. How shall I live while I live? This is the bedrock question.&quot; -1
B. &quot;My dear friend, in those days people had convictions. We moderns have opinions. And it takes more than opinions to build a Gothic cathedral.&quot; -Heinrich Heine
C. &quot;The liberal spirit is wholistic.&quot; -3
D. &quot; I speak as a liberal in search of redemption and reconstruction - one whose soul is full o fholes burned by the evils of society.&quot; -4
E. &quot;We keep trying to live like scientists, when in fact most of the important decisions we make - choosing a spouse, changing a job - are not scientific at all.&quot; -6
F. &quot;His [Albert Schweitzer] view of human beings (including himself, of course) was pessimistic. It was his willing, hoping, and acting that were optimistic.&quot; -9

II. What do you say after you say &quot;I'm a Unitarian Universalist&quot;?
A. Chapter Outline
1. Earthy and Practical Reason
2. Unity with Diviersity
B. Quotes
1. &quot;We are Unitarian Universalists, not by substituting one confession of faith for another, but by opening our minds to receive truth and inspiration from every possible source&quot; -39
2. &quot;Churches, Bibles, and creeds are thec creations of humans who once exercised their freedom to create&quot; -39
3. &quot;They will do their own thinking about current matters of faith and belief&quot; -40
4. &quot;We continue to evolve by the light of our growing understanding of ourselves and our world.&quot; -45
5. It's goal is to be an &quot;Earthy and practical&quot; religion -40
6. &quot;Humans must accept responsibilibty for their choices and for their acts.
7. &quot;Unitarian Universalism, then, is a community of faith, with individual freedom as to its method and with reason as its guide.&quot; -43
8. &quot;Truth for authority, not authority for truth.&quot; -Susan B. Anthony
9. &quot;The goal of organized Unitarian Universalism is to provide maximum freedom combined with full fellowship for each individual.&quot; =44
10. &quot;Let there be no mistake about the fact that Unitarian Universalist fellowship is a purposeful, positive, organized religious movement, dedicated to the spiritual, moral, and social fulfillment of the gift of life.&quot; -45
11. &quot;Religion for us is no insulated segment of life. It is our entire being in search for meaning.&quot; -45
Being Liberal in an Illiberal Age
by Jack Mendelsohn

Read August 2005

Chapter 1: A way of Walking and Acting in the world.

CHAPTER 2
A Human Being, No More or Less
&quot;'the unfolding of their own spiritual nature.&quot;'-William Ellery Channing -19

CHAPTER 6
Christian or More than Christian
&quot;Albert Einstein once said that nuclearn weapons had changed everthing except the way humans think.&quot;-81
Roman Catholics: long tradition
Jews: Heroes and Heroines
Baptists: Democratic Policy
Confucianists: emmphasized reason
Hindus: Eclectic system of theology
Humanists: experiience of the world
Buddhists: accent on the individual

CHAPTER 7
The who, what, and where of God
&quot;There are no sightings out there of heaven's location or God's hrone. What is out there, our computer-directed invasions confirm, is perhhaps he most significant scientific discovery of our age -- infinite geometric space, within which, for practical human purposes, god is silent.&quot; -87
&quot;The achievements of he scientific method inspire reverence in the minds of religious liberals.&quot; -87
-Why God is a problem
1) &quot;God is a word used to cover a multiplicity of meanings.&quot;
2) &quot;The historical evolution of God concepts.&quot; -89
3) god has an &quot;interest in totality&quot; &quot;God is the symbol most commonly used to express his cosmic perspective.&quot; -89
&quot;They find themselves contending for concrete definitions, and in the name of such definitions, massive slaughters have taken place.&quot; -89

&quot;Baffled by the very mysteries they create for themselves, humans...&quot; -91

&quot;IN what ways, then, do we characteristically look for solutions to the problem of God? There are three main lines of direction&quot; -94
 1) God and the human search for self
 2) God and the idealized reality
 3) God and the search for meaning and purpose.

&quot;If God is God, then God is not good; if God is good, hen God is not God&quot; -92

&quot;&quot;God... is at the beginning of all things... he becomes a monstrous being.. [because of] violence, pain, misery, injustice, and cruelty... if you try to apoligize for this God... you merely turn a brutal deity into a demented one. What would we think... of a human father who deliberately torments his children... then turns around and lavishes favors on one of them while leaving the others to tremble and whimper.. Here is a savagely disproportionae system of punishment that is an insult not only to reason but to justice as well.&quot; -92-93

-Ways to search for God:
1) God and the human search for self.   
&quot;Augustine... taught that persons find themselves only when they are able to penetrate deeply enough into their experience to united the subjective and objective aspects of their lives. I is also at this point, Augustine said, that a person finds God.&quot; -95
2) God and idealized reality
&quot;help of god means the fixed and unchangeable order of nature... God is beyond our human problems of good and evil&quot; -100
&quot;The will of god... is the sume of all causes and all laws... We are free to the extent that we know and understand ourselves, our fellows, and the world in which we live&quot; -100
3) God and the search for meaning and purpose

Spinoza's definitions of God
 -The Love of God
  &quot;the giving of oneself to the power that hoold the world together... and persuades us to come to... start on new biginings.

&quot;As for the Gods, I do not know weather they exist or not. Life is too short for such difficult enquiries...Humans are the measure of all things&quot; -Protagoras

&quot;Humanism - an approach to faith, thought, and action that assigns an overriding interest to the human rather than to the supernatural&quot; -106

&quot;Thus God, at all times and in all places is the spirit of a people as they experience and interpret their existence... Insofar as the universerse is consciously conceived as a unity, God is the spirit of the universe.&quot; -111

&quot;God, in brief, is the glorious sum of the living process, in which I, as a person, and we, as a human community, live, strive, and die.&quot; -112

CHAPTER 9
&quot;...ethics is shorthand for actions arising out of faith and from within community&quot; -130

The UUSC
-&quot;Extablished in 1940 to rescue Jewish and other refugees from Nazi Europe.&quot; -130
-&quot;We work with and not just for others.&quot; -131
-&quot;Behind the UUSC there is a powerful religious motivation... of demonstrating that mutuality is the way to One World, One Humanity.&quot; -131

&quot;Those of us who defend religion by relating it to the problems and conditions of life know that the ultimate test is responsible action from which there is no escape when greater or lesser values are in conflict&quot; -134
</pre>
</div>
<div title="CHRISTIAN GOSPELS." creator="Justin" modifier="Justin" created="201110222036" tags="226 Non-Fiction" changecount="1">
<pre>	Source	NoteType	Quote
	I. Diversity of Early Christians	o
	 A. Jewish-Christian Adaptionists
	  1. Adapted at the baptism
	  2. Produced Mark
	 B. Marcionite Christians
	  1. Anti-Semitism
	 C. Gnostic Christians
	 D. Prodo-Orthodox
	  1. Roman Theology
	  2. Won majority thru censorship.
	II. Early Jewish Diversity
	 A. Pharisees
	  1. Evolved into current rabbis
	  2. Prayer, study, kindess/charity
	 B. Sadduccees
	 C. Essenes
	 D. Forth Philosophy
	  1. Sect of josephus
	III. Modern Judiams
	 A. Orthodox
	 B. Conservative
	 C. Reconstructionist
	 D. Reform
	
	-7% of current jews in diaspera
	-
	Thursday, October 20, 2011	Page 16 of 76
	A. What is the Blasphamy?	o
	 1. Historian finds nothing wrong.
	 2. Look at what marks community thought
	 3. Punishment is for stoning for Blasphamy, but Jesus isn`t stoned.
	 4. Claiming that you have special divine powers.
	 5. Did the sehedran have power to kill?
	B. Phrase &quot;Son of Man&quot;	o
	 1. Reference to the Third Person
	 2. Impending Doom
	C. What Scholars knew of Jesus
	 1. Born in Palistine
	 2. A healer and Teacher
	 3. Arrested and Killed for Treason
	 4. Extreamly Bothersome.
	r	MK.
	r	MK. 14
	r	MK. 15:38
</pre>
</div>
<div title="Can Ethics Be Christian." creator="Justin" modifier="Justin" created="201110222032" tags="170 Non-Fiction" changecount="1">
<pre>	Source	NoteType	Quote
	Chapter 7 : Conclusions -by James M. GustafsonA. Can ethics be Christian 1. If by revelation, then no. 2. Logic, that which ethical persons can 	o
	agree, then yesB. Ways that morality is qualified by the Christian experience 1. The reason for being moral (motivation) 2. The character of the 
	moral agent (virtue) 3. He points of reference used to determine conduct</pre>
</div>
<div title="Canticle /" creator="Justin" modifier="Justin" created="201110222033" tags="813 Fiction" changecount="1">
<pre>Source	NoteType	Quote
	Aballister Bonaduce	f
	Cadderly	f
	Thursday, October 20, 2011	Page 11 of 76
	The Edificant Library had stood for 600 years, and in all that time its doors had never been closed to scholars of any but the evil religions... it was a 	library quote
	place for poety reading, painting, and sculpting, a place for discussions of the profound and often unanswerable... the library was a fitting tribute 
	to Deneir and Oghma, the allied gods of knowledge, literature, and art.
	They are taer... Crude and firce. .. They`ll not bargin.	q
	Goddess Talona	f
	Druzil	f
	Silvanus	f
	Edificant Library	library quote
	Percival	f	010
	Given the druids` reputation for seclusion…	q	012
	…and the wizard, forgettful as most wizards seem to be…	q	012
	Cadderly had to remind himself to keep his manners proper and his gaze on her eyes	q	013
	He was a disciplined scholar and had come here for a specific purpose.	q	014
	I should think that priests of Deneir and Gond, dedicated to knowledge, would act as partners.	q	016
	Cadderly shrugged and tried to dismiss the whole incident as another of Headmaster Avery`s misplaced explosion. Avery odviously just didn't 	q	018
	understand him.
	Aballister	f	021
	Castle Trinity	f	021
	Lands of the Novel	f	021
	Talona	f	021
	Chapter 2 : Agent of Talona	s	021-035
	…Barjin and his wretched priests…	q	023
	Druzil	f	023
	The change had been dramatic. Aballister was hollowed and worn now, all the dabling in dark magic, worshipping a demanding goddess, and 	q	023
	controlling chaotic creatures… having taken their toll.
	Thursday, October 20, 2011	Page 12 of 76
	Little did he know then that the imp`s precious scheme would involve two years of painstaking and costly effort, tax the wizard to the limits of his 	q	023
	endurance, and destroy so many others in the process.
	Chaos is a beautiful thing, moral master, a force of destruction and conquest, the ultimate disease, the Most Fatal Horror. Orchestrating chaos 	q	028
	brings power to he who remains beyond its crippling grip!
	Haverly	q	029
	Dorigen	q	032
	Danica Maupoissant	f	036
	Chapter 3 : Danica	s	036-045
	Turkel Bastan	f	039
	So she [Danica] had left Westgate, barely more than a child, to build  on her future, to attain new heights of self-discipline. Once again, Master 	q	040
	Turkel had shown his love and respect for her, placing her needs above his own obvious despair at her departure.
	The [Edificant] library was a massive room supported by dozens and dozens of arched pillars…	library quote	041
	To him [Cadderly], adventures and battles were events to be read about.	q	041
	She would not allow others to copy simple techniques without first achieving the mental preparation and philosophical attitudes that accompanied 	q	043
	Chapter 4 : Canticle	s	046-56
	There is nothing like religion to rouse the rabble.	q	047
	Ivan Bouldershoulder	f	049
	Pikel	f	050
	Headmistress Pertelope	q	054
	Chapter 5 : To know your Allies	s	057-70
	Druzil found his center of magic, his otherworldly essence, which allowed hiim to transcend the physical rules governing creatures of this host 	q	058
	Chapter 6 : Water and Dust	s	071-085
	The grandmaster was in control of his body, of his very being.	q	074
	Mullivy	f	077
	Thursday, October 20, 2011	Page 13 of 76
	Arcite	f	086
	I cannot change who I am… nor will I surrender the goals I have chosen for my life.	q	086
	Newander	f	086
	Cleo	f	086
	s	086-95
	Like most druids, Newander was a gentle sort, and he was always uncomfortable when called to battle.	q	090
	s	095-0103
	s	103yes14
	Cadderly smiled at his own ineptitude. He rarely prepared any spells at all, and even when he took the time, his accomplishements with clerical 	q	110
	magic were far from highly regarded. Cadderly was more scholar than priest, and he viewed his vows to Deneir more as an agreement of attitude 
	and priorities than a pledge of devotion.
	Cadderly smiled at his own ineptitude. He rarely prepared any spells at all, and even when he took the time, his accomplishments with clerical magic	q	110
	 were far from highly regarded. Cadderly was more scholar than priest, and he viewed his vows to Deneir more as an agreement of attitude and 
	priorities than a pledge of devotion.
	Cadderly`s eyes sparkled joyfully as if in search of answers to the uncounted mysteries of the world….	q	116
	Danica reluctantly let him go, honestly torn between her perception of duty and the needs of love.	q	135
	Keep yourself safely back from him… I am not yet certain of his intentions.	q	147
	`Would you put your trust in a failure?' the pitiful Newander asked. Cadderly did not hesitate. 'Self-pity does not become you.'	q	152
	I always assume the worst, thus am I pleasantly surprised if anythign better occurs.	q	157
	…so fanatic to their tenents that they had lost their very identities.	q	160
	You need not explain… Dreams sometimes do have the power of prophecy, and we have no clearer trail to follow. Take your rest then. I will watch 	q	162
	over you.
	I have not the true heart for my chosen calling.	q	170
	His love was introspection, spending hours on end staring at the night sky, or at nothing at all.	q	171
	…eyeing Cadderly with utter hatred.	q	171
	Thursday, October 20, 2011	Page 14 of 76
	`I want to learn of Deneir and the other gods… I want to watch the progress of the world, the rise of cities. I want to… I want…' Newander shook 	q	173
	his head…'I do not know what I want!' Cadderly's grey eyes lit up. 'Even in your own heart you do not know what it is in your own heart… That is a
	 rare thing, and it has saved you… That, and the fact  that you have not been here for very long since this all began.'
	Again he returned to relaxation - toes, then feet, then legs	q	174
	[Cadderly] had learned these techniques from Danica - one of the things she had revealed about her religion - and had found them quite useful, 	q	174
	restful, and enjoyable.
	I have ways of keeping the world out.	q	177
	`Will you help me? Cadderly asked. 'I cannot do it alone.'	q	178
	Percival never really provided any answers, but Cadderly often found them hidden within his own word.	q	184
	The skeletons were mindless creatures, not thinking fighters.	q	204
	Druzil tightened his wings and sank within himself, turning from the physical senses to the more subtle inner feelings, empathic sensations, that 	q	206
	surved an imp as well as eyes might surve a human.
	Think like a druid. Envision the animals! Become an animal!	q	209
	Something in this room… torchured her soul.	q	216
	`North' Ivan corrected, then he whispered to Pikel, 'Never met a human who could tell his way underground.'	q	226
	Chapter 25 : Out of the Mist	s	300-311</pre>
</div>
<div title="Cape Breton Road :" creator="Justin" modifier="Justin" created="201110222034" tags="813 Fiction" changecount="1">
<pre>Source	NoteType	Quote
	Starr	f
	Innis	f
	Finlay	f
	Dan Rory	f
	Chapter 1	s	001-017
	And Alec… whas a cousin too, friendly but distant, tactiturn, not a prober or a gossip, and Innis liked him for that since he seemed to expect 	q	16
	nothing more private from you than he was willing to give himself and that was very little.</pre>
</div>
<div title="Chanting the Psalms :" creator="Justin" modifier="Justin" created="201110222035" tags="782 Non-Fiction" changecount="1">
<pre>	IV. Chanting Techniques	o	85-
	 A. Monotone
	 B. Suzaki Psalmody
	  1. Step up - step down.
	   a. a/k/a/ &quot;Major second&quot;
	  2. On the stressed syllable.
	  3. In palsms w/ three line format, chant 1st line monotone, and 2nd and 3rd line step up - step down.
	  4. For mornful psalms, instead of a whole note, step a half note.
	 C. Anglican tone.
	  1. Candence tone = cast not int the line.
</pre>
</div>
<div title="Clay's way /" creator="Justin" modifier="Justin" created="201110222036" modified="201110222119" tags="813 Non-Fiction A" changecount="3">
<pre>I don`t know how to seem normal. I need a prop.
My dick is the center of my existence.	-112
My ejaculation was so powerful it fucked with our whole plane of existence. -15
I forget how to feel love as a simple emotion. For me, love`s a jumbled mass of hidden feelings, indirect motivation, and uncontrollable lust.- 159
Life goes on- 198
I think it`s disgusting that I'm related to them. They envy dudes that own yachts but don't have any books on the shelves.- 21
I`m so trapped inside my mind I didn't even notice this shit all over me. -5</pre>
</div>
<div title="Complete Stories" creator="Justin" modifier="Justin" created="201109230019" tags="Fiction D" changecount="1">
<pre>Complete Stories
DBID: 0095
------
GRADE: D

READING DATES: May – June 2005

NOTES: 

I.	Black Death
A.	Where
1.	Eatonville
B.	When
1.	1920’s
C.	Who
1.	Old Man Morgan
a.	a “hoodoo man”
b.	Lives by lake Blue Sink
2.	Beau Diddley
3.	Docia
D.	What / Why
1.	Beau Diddley was to marry Docia, but later he refused. Beau went to Old man Morgan to put a curse on him.
II.	Sweat
A.	When
1.	Sunday, Spring, 11:00pm, 1920’s
2.	Who: 
a.	Delia Jones: Wife
b.	Sykes: Husband
c.	Bertha: Whore
B.	Why
1.	“I done tole you time and time again to keep them white folks’ cloths outa dis house” (79)
2.	“Two months after their wedding, he had given her the first brutal beating.” –75
3.	“Oh well, whatever goes over the Devils’ back, its got to come under his belly. Sometime or ruther, Skyes, live everyone else, is gointer reap his sowing.” (76)
4.	“A triumphant indifference to all that he was or did” (76)
5.	“Delia and Sykes fought all the time now with no peaceful interludes.” –79
6.	“Ah hates you, Skyes” (81)
7.	The snake he brought bit him and he died.
</pre>
</div>
<div title="Confessions of Saint Augustine." creator="Justin" modifier="Justin" created="201110222039" tags="? Non-Fiction" changecount="1">
<pre>	Confessions of Saint Augustine.
	Source	NoteType	Quote
	Nebridius	f
	Simplicainus	f
	…because I had certainly been both rash and impious in speaking out in condemnation of a matter on which I ought to have taken pains to be -
	better informed.
	… wen I use to criticize your saints for holding beliefs what they had never really held at all.-
	Book V	s
	Bishop Ambrose	s
	… O Life of my life…-
	But how could I expect that the Platonist books would ever teach me charity?-
	Book VII	s
	Ambition seeks honor and glory, whereas only thou shouldst be honored above all, and glorified forever-
	My heart warm to him [Bishop Ambose], not at first as a teacher of the truth, which I had quite dispaired of finding in your Church, but simply as a -
	man who showed me kindness.
	She had the weak body of a women but the strong faith of a man, the composure of hier years, a mother`s love for her son, and the devotion of a -
	Christian.
	Elpidius-
	Faustus	f
	To whom am I narrating all this?  Not to thee, O my God, but to my own kind in thy presence -- to that small part of the human race who may chance-
	 to come upon these writings.To whom am I narrating all this?  Not to thee, O my God, but to my own kind in thy presence -- to that small part of the
	 human race who may chance to come upon these writings.
	And since at that time (Thou, O light of my heart, knowest) Apostolic Scripture was not known to me.-
	Butelder folks` idleness is called 'business' ; that of bys, being really the same, is punished by those elders ; and none commiserates either boys or -
	Thursday, October 20, 2011	Page 18 of 76
	But no one doth well against his will, even though what he doth, be well.-
	No doubt, then, that a free curiosity has more force in our learning these things, than a frightful enforcement.-
	And what is it that I delight in, but to love, and be beloved?-
	Descend, that ye may ascend, and ascend to God.  For ye have fallen, by ascending against Him.-
	...dedicate these books unto Hierius, an orator of Rome	f
</pre>
</div>
<div title="Consider Jesus :" creator="Justin" modifier="Justin" created="201110222040" tags="242 Non-Fiction" changecount="1">
<pre>Source	NoteType-uote
	Chapter 1 : A living tradition	o	1-18
	Chapter 2 : The Humanity of Jesus	o	19-34
	Human nature	d	24
	God	d	28
	Chapter 3 : Jesus` Self-Knowledge	o	35-48
	As baptized persons graced by the Holy Spirit dwelling within us, each of us is called to utter our own personal christological answer by word and -	4
	deed ; so too the church as a whole, in the idiom of our age.
	The experience of salvation coming from God through Jesus makes him fundamentally interesting.-	4
	He [Jesus] is a boy with these tremendous questions about God and religious matters.-	43
	Jesus will be very different from John, announcing salvation rather than doom.-	44
	Chapter 4 : The History of Jesus	o	49-
	… love is heart of the reign of God; not an easy love but a self-giving love on the model of God. Such love grounds the law, puts it in correct -	56
	perspective, and fulfills it. Loving this way, Jesus creatres a liberating life-style and shows a wonderful freedom to do good.
	Chapter 6 : Liberation Christology	o	83-</pre>
</div>
<div title="Contact form" creator="Justin" modifier="Justin" created="201109271102" modified="201109271103" tags="site" changecount="3">
<pre>&lt;html&gt;
  &lt;body&gt;
 &lt;iframe src=&quot;https://spreadsheets.google.com/embeddedform?formkey=dDNFd0p4amRHTTkzdnpVZDVoaWN6UFE6MQ&quot; width=&quot;760&quot; height=&quot;638&quot; frameborder=&quot;0&quot; marginheight=&quot;0&quot; marginwidth=&quot;0&quot;&gt;Loading...&lt;/iframe&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<div title="Death of Ivan Ilych." creator="Justin" modifier="Justin" created="201110222041" tags="?" changecount="1">
<pre>	Source	NoteType-uote
	Chapter 11	s
	Seshchetitsky	f
	While she was kissing hiim he hated her from the bottom of his soul and with difficulty refrained from pushing her away.-
	Chapter 5	s
	Chapter 7	s
	Gerasim	f
	… he [the butler] was doing it for a dying man and hoped someone would do the same for him when his time came.-
	Vladimir Ivanovich	f
	Michael Danilovich	f
	Chapter 12	s
	This consciousness intensified his physical suffering tenfold.-
	Resistance is impossible!-
	No, I mustn`t think of that....It is too painful…-
	Latterly during the lonliness in which he found himself as he lay facing the back of the sofa, a loneliness in the midst of a populous town and -
	surrounded by numberous acquaintances and relations but that yet could not have been more complete anywhere - either at the bottom of the sea 
	or under the earth.
	I was going up in public opinion, but to the same extent life was ebbing away from me. And now it is all done and there is only death.-
	Take some opium.-
	Thursday, October 20, 2011	Page 20 of 76
	Chapter 9	s
	Vasya	f
	Fedor Petrovich	f
	Praskovya Fedorovna Mikhel	f
	Ivan Ilych`s life had been most simple and most ordinary and therefore most terrible.-
	Chapter 5	s
	Ilya Epimovich Golovin	f
	Schwartz in particular irritated him by his jocularity, vivacity, and saviorfaire…-
	…and the more she pitied herself the more she hated her husband.-
	Chapter I	s
	Ivan Illych possessed this capacity to separate his real life from the official side of affairs and not mix the two…-
	Baron Greff	f
	Zachar Ivanovich	f
	Nikolaevich	f
	Peter Ivanovich	f
	Happe	f
	Chapter 3	s
	Chapter 2	s
	Lisa	f
	Praskovya Fedorovna came of a good famly, was not bad looking, and had some little propty. Ivan Illych might have aspired to a more brilliant -
	match, but even this was good… because his social circle approved the match.
	Chapter 4	s
</pre>
</div>
<div title="DefaultTiddlers" creator="Justin" modifier="Justin" created="201109230001" modified="201109230104" changecount="2">
<pre>[[Welcome]]</pre>
</div>
<div title="Dragons of autumn twilight /" creator="Justin" modifier="Justin" created="201110222042" tags="813 Fiction A" changecount="1">
<pre>Source	NoteType-uote
	Tanis	f
-ualinesti	f
	Huma	f
	Krynn	f
	Phudge	f
	Kitiara	f
	Camptalk	f
	pp.287-302	s
	Sturm	f
	Solostaran	f
	Laurana	f
	Otik	f
	Tika	f
	Chapter 12	s	119-126
	Verminaard	f	125
	Sageway East	f	128
	Thursday, October 20, 2011	Page 22 of 76
	How precious it has become ... now that it has been purchased by the blood of innocents.-	129
	Turbidus Ocean	f	129
	He [Tanis] felt tired - tired of fighting, tired of killing, tired of slogging through the muck.-	141
	We [dragons] mete out jsutice swiftly and surly, human scum…-	143
	Raistlin	f	145
	Can`t you feel it? Any of you? … Evil about to waken and come forth. -Raistlin-	154
	… if the mage had any feelings.-	161
	Chapter 16	s	161-168
	Mishakal	f	163
	Khisanth	f	164
	Everyone the light touched felt rested and refreshed. The pain and exhauston from the day`s toil left their bodies.-	165
	Griffon	f	166
	Reorx	f	167
	The light from Raistlin`s staff glowed brightly, keeping away the darkess.-	168
	The light from Raistlin`s staff glowed brightly, keeping away the darkness.-	168
	Raistlin was now reading his spellbook, murmuring the words over and over until he had committed them to memory.-	170
	Gully Dwarves	f	178
	Unlike goblins, who attack anything that moves without strategy or thought, draconians are intelligent and quick thinking.-	184
	The mage spoke and the chrystal on his staff flared.-	189
	Bupu	f	189
	The broken city. Highbulp Phudge I, the Great.	s	195-210
	The Highbulp`s map. A spellbook of Fistandantilus.	s	211-220
	Thursday, October 20, 2011	Page 23 of 76
	You [Riverwind] said man could not make gods of other men.-	212
	Towers of High Sorcery	f	214
	Fistandantilus	f	214
	Newsea	f	217
	The mage was distant, unlikable, impossible to understand, yes, but he was loyal to them.-	221
	The sacrifice. The twice dead city.	s	221-242
	Istar	f	222
	Night of the Dragons	s	245-249
	Hederick	f	246
	Council of Highseekers	f	246
	Theros Ironfield`s blacksmith shop	f	248
	Toede	f	249
	Kalith karan, tobanis-kar!-	250
	Hobgoblins	f	251
	The stranger. Captured.	s	251-
	`I do not explain my ways to you,' Raistlin hissed. 'Trust me or not, as you choose.'-	259
	Catyrpelius	f	260
	`This is rediculus… Kill the knight! Kill them if they cause more trouble. I'm loosing sleep.'-	260
	Gilthanas	f	263
	Now I understand them, Tanis thought. Now I know the cold emptiness inside that hurts worse than any sword thrust. My home is gone.-	263
	Slave Caravan. A strange old Magician.	s	263-272
	Gateway pass	f	267
	Thursday, October 20, 2011	Page 24 of 76
	Speaker of the Suns	f	269
	I cannot work without my spell components!-	277
	Attacked? Blyxtshok! Get this cart moving!-	277
	s	-285
	When se did look up, it was to gaze at Tanis, her heart in her eyes.-	304
	Hall of the Sky… a huge square, lit by torches. The giant dome of the heavens, glittered with stars, arched above it.-	306
	Tanis winced. Hearing Kitiara`s name was like a physical blow.-	309
	…`This decision is coming from your head, not your heart. Deep inside, you don't really believe we should split up.' 'Your'e right. I didn't truly -	309
	believe we should separarte. It's the sensible, logical thing to do, of course, which is why we don't do it.
	Sla-Mori… Secret Way.-	311
	Tanis glared at the mage, hating him for his cold, unfeeling logic, and for being right.-	336
	Sothi Nuinqua Tsalarioth… Faithful beyond Death.-	339
	To the Abyss with the cleric!-	355
	The dragon found Eben charming, intelligent, resourceful, and … trustworthy.-	385
	… It was that the Dark Queen herself looked up to find a radiant god, dressed in white and shining armor, appear on the horizon of her plans. She -	395
	was not ready to fight this god… The Queen of Darkness withdrew and left her cleric to his fate.
	Though we will honor the memory of our people in our hearts… we must look forward, not behind. We will honor the past by taking from it the -	398
	good and the sorrowful that have made us what we are. But the past shall rule us no longer.
	It was your love and your faith in eachother that brought hope to the world. Each of you was willing to sacrifice your life for this promise of hope, -	399
	each has saved the life of the other… you will walk through much darkness before morning. But your love will be as a torch to light the way.
	The company of the dark-souled, cynical mage seemed more suited to him tonight than music and laughter.-	403
	What do I ever see with these eyes of mine… I see death, death and destriction. I see war.-	404
	Hope is the denial of reality. It is the carrot dangled before the draft horse to keep him plodding along in a vain attempt to reach it… we should -	404
	remove the carrot and walk forward with our eyes open… Do not talk to me of hope… Still, we have to keep trying and hoping. That`s what's 
	important, the trying and the hoping. Maybe that's most important of all.</pre>
</div>
<div title="Dragons of the dwarven depths /" creator="Justin" modifier="Justin" created="201110222043" tags="813 Fiction A" changecount="1">
<pre>Source	NoteType-uote
	Chapter 4	s
	Chapter 10	s
	Chapter 3	s
	Chapter 7	s
	Chapter 17	s
	Chapter 15	s
	Chapter 16	s
	Skullcap
	Skullcap
	Skullcap
	Chapter 9	s
	Chapter 6	s
	Chapter 13
	Chapter 14	s
	Dray-yan	f
	Skullcap
	*Fortress of Zhaman
	Chapter 8	s
	Caramon	f
	Grag	f
	Thursday, October 20, 2011	Page 26 of 76
	Raistlin Majere	f
	Prelogue	s
	Takisis	f
	Chapter 5	s
	`'Shirak,' said Raistlin, raising his staff. The crystal on top, held fast in the golden claw, burst into light... 'Dulak,' he murmured, and the glow from -	100, 119
	his staff blinked out...'
	...straight to the abyss...-	151
	You must swear to by by every object you have in your pouches... May they all change into roaches and crawl off in the night if you break your -	152
	At that moment, she faced up to the truth. All the fires in her died.-	157
	She didnt want to die, not alone, not in the darkness.-	158
	Hope is a denial of reality... Hope is the carrot dangled before the draft horse to keep him plodding along in a vain attempt to reach it... we should -	16
	remove the carrot and walk forward with our eyes open.
	Then came the horrific blast that brought down a mighty fortress and killed all those on both sides. The blast destroyed all living things, tearing life-	186
	 apart with such fury that no little bit of it survived. No trees, no grass, no beasts, no bugs. No lichen, no moss. Nothing but death. Grotesque piles 
	of twisted, blackened, melted armor and mounds of ash littered the fire-swept ground - all that was left of two great armies whose struggles had 
	indeed in a single terrible moment, as the fire devoured their flesh, boiled their blood, and consumed them utterly.
	The life within was green and slimy, scaly and sinuous, creepy and slithering, but it was life.-	186
	I am going to study my spells.  I do not want to be disturbed-	311
	An ornate marble sarcphagus stood in the center of the room. A carven figure of the king graced the top.-	344
	He did not mean to be a hero. He was only a man who held true to his beliefs and did what he thought was right.-	346
	Oh, for the love of Reorx! The only reason you`re any use to anyone is for picking the occasional lock, and now you can't even do that!-	347
	He was hurting and in a bad mood, and he took it as a personal affront that Tasslhoff was so cheerful.-	389
	Then there came among us an evil greater than any we had yet known. Sadly, we mistook that evil for our salvation.-	51
	Fistandantilus	f	51
	Xak Tsaroth	f	59
	Thursday, October 20, 2011	Page 27 of 76
	Spellbook of Fistandantilus	f	59
	A mage`s most valued posession was his book of magical spells compiled over a lifetime of work. Written in the language of magic, each spell was -	60
	recorded in detail using the precise wording, with notions as to the proper pronunciation of each word, the precise inflections and intonations, 
	what gestures should be used, and what components might be required.
	Tika Waylan	f	61
	Solace	f	61
	Otik Sandeth	f	61
	Laurana	f	61
	Solace	f	61
	Laurana	f	61
	We are not put into this world to be liked-	86
	Empty Mirror, The.
	Source	NoteType-uote
	‘In India a hermit was meditating on the shore of a river when he was disturbed by a young man. The young man knelt down and said:   ‘Master, I -	88
	want to become your disciple.’   ‘Why?’ asked the master.   ‘Because I want to find God.’ The master jumped up, took the young man by the scruff 
	of the neck, dragged him to the river and pushed his head under water. After a minute the master released the young man and pulled him out of the 
	river. The young man spat out some of the water which he got in his mouth and began to cough. After a while he became quiet.    ‘What did you 
	want most of all while I kept you under water?’ asked the master.    ‘Air,’ said the young man.    `Very well,’ the master said. ‘Go back to wherever 
	you have come from, and come back to me when you want God as much as you wanted air just now.’</pre>
</div>
<div title="Dragons of the fallen sun" creator="Justin" modifier="Justin" created="201110081356" modified="201110081407" tags="Fiction 812 A y2009" changecount="4">
<pre>DRAGONS OF THE FALLEN SUN
by Margaret Weis and Hickman

&quot;'It is time you enter the modern era. The gods are gone, and good riddens. I say we humans rule the world.'&quot; -Ernest magnt. -6
&quot;The silence weighed on them, smothering them&quot; -12
&quot;But she (Mina) was so self-posessed, so completely in control of herself and in control of the situation that he [Gildan] could not come [???] rational arguement&quot; -22
&quot;The name may not be spoken. My god is One God. The one who rides the storm, the one who ride the [???]. My God is the One God who made your flesh whole. Swear your loyalty to me, Gildan. Follow me to victory.&quot; -96
&quot;She [Goldmoon] was living proof that although Paladine and Mishakal were gone, their power for good lived on in the hearts of those who had loved them.&quot; -30
&quot;The elves had finally succeeded in their historic goal of isolating themselves from the rest of the world. But the shield did not keep out the thunder and rain, wind and lightning. &quot;-34
&quot;... anger that frightened him in its fury and intensity&quot; 
&quot;Samar viewed life as a battle that had to be fought and won each day.&quot; -97
&quot;'Its his arrogance [Gerard], his pride that drives people away'&quot; -67 -Laura
&quot;Ever since that day, he [Gerard] had suspected that any women who looked at him with any interest whatsoever was secretly calculating his worth, all the while masking her disgust for him with sweet smiles and flittering lashes. &quot;-69
&quot;'The people must aquire faith in themselves before they are ready to believe in anything beyond themselves.'&quot; -109 -Mina
&quot;Your [Tas'] chatter is giving me [Gerard] a headache&quot; -126

CH. 6: //Gerard and Tas are told to find Palin in Qualinost//
&quot;'I have no money to offer you. I have only this sure knowledge that I will freely share with you - fight for me and and one day you will come to know the one true God.'&quot; -150 -Mina

CH.7: //I'm not sure if Mina leads the army into disaster or success, but the men love her.//
&quot;Cyan wanted to inflict a pain nothing would ease, a pain that would endure for centuries.&quot; -188
&quot;'You must walk carefully. You must think before you speak, think f the consequences of every word. You must consider your actions. You must not be distracted by the least little thing. '&quot; -Rollan -180

CH. 8: //Discussion btw Silvan, Rolan, and Drinel.//
&quot;'These are dark days. Life is serious business and should be taken seriously. We do not have the luxury for joy or merriment.'&quot; -195 -Gerard.

CH. 9 // Gerard and Tas travel to Qualinost.//
&quot;Everything he [Targonne] looked upon was reduced to debits and credits, profit's and loss, all weighed in the balance, counted to the penny, and chalked up into one column or another.&quot; -209
&quot;'Gods have come, gods have gone.'&quot;-Targonne -211</pre>
</div>
<div title="ED: The Milibands and the Making of a Labour leader" creator="Justin" modifier="Justin" created="201109230400" tags="941 Non-Fiction C" changecount="1">
<pre>ED: The Milibands and the Making of a Labour leader by Mehdi Hasan, James Macintyre

‘They taught a faith that ideas mattered, that knowledge was important and its pursuit exciting...’ - 249   

book, Parliamentary Socialism, - 295   

‘Ed was shyer, less sure of himself, more introspective.’ - 410   

self-sufficient person,’ - 464   

clever, collegiate, committed. ‘But there was something a little shy about him, a little tentative,’ - 1073   

as ‘a bit Harry Potter; nice, knowledgeable and clever’. - 1195   

Despite his father describing the sport as ‘two and a half hours of mind-destroying boredom’, - 1768   

sense of leadership, - 1798   

apartment. It was minimally furnished and always neat and tidy. ‘I remember thinking that this was a man who lived a life of the mind,’ observes Fung. ‘I don’t know whether it was a condition of the scholarship but he spent most of his time reading and thinking and going to seminars and so on.’ - 1805   

to read, study, think and reflect. - 1808   

he’s dismissive and patronising.’ - 4017   

Ed’s scrappy, insurgent, pull-out-all-the-stops mindset. - 4037   

Renegade: The Making of a President by journalist Richard Wolffe and The Audacity to Win by former Obama campaign manager David Plouffe. - 4375   

Axelrod. ‘David is very good but he is running at 100 per cent while Ed is at 70 per cent,’ replied Muir. ‘Ed has so much more capacity to improve. It’s just like Obama when he ran against Hillary.’ A wry smile appeared on Axelrod’s face. - 4385   

She decided that she was willing to make whatever sacrifices were necessary.’75 Though she has little to say about the ups and downs of British politics and policy and tends to defer to Ed on such issues, Justine is very much her own person. - 5305   

‘Life’s an adventure. And you’ve got to seize the day’ - 5328   

is considered to have been a chairman and a facilitator rather than a decider or dictator. - 5728   

Ed’s strengths is his ability to empathise with others, to listen and to learn. - 5927 </pre>
</div>
<div title="Education" creator="Justin" modifier="Justin" created="201109230413" tags="site" changecount="1">
<pre>&lt;html&gt;
MLIS, &lt;a href=&quot;http://slis.wayne.edu/&quot; target=_blank&gt;Wayne State University - School of Library and Information Science&lt;/a&gt; (2008)&lt;br /&gt;
         BA Religious Studies, &lt;a href=&quot;http://www.udmercy.edu&quot; target=_blank&gt; University of Detroit-Mercy &lt;/a&gt;(2006)&lt;br /&gt;
		 AA Liberal Arts, &lt;a href=&quot;http://www.delta.edu&quot; target=_blank&gt; Delta College &lt;/a&gt;(2004)

&lt;/html&gt;</pre>
</div>
<div title="Ethics and spirituality at work :" creator="Justin" modifier="Justin" created="201110222044" tags="174 Non-Fiction" changecount="1">
<pre>XI. For a spiritual ethic of work : some inspiriation from Simone Weil.	o	130-146
	     by Thierry C. Pauchant.
	
	 1. Limit race for dominiation
	 2. Rediscover notion of limit
	 3. See institutions as both good and evil
	 4. Go beyond economic considerations
	 5. Secure and democritize work
	 6. Favor concordance btw thought and action
	 7. Root thought in person
	 8. Reinvent politics
	 9. Encourage ability of subtle mindfulness
	...spirituality at work would allow them to live a more integrated and more systemic life…-	35
	II. Spirituality at work	o	35-
	   by Ian I. Mitroff
	
	 A. Results of study
	  1. 92% of managers favor integrating spiritual values.
	  2. There is a lack of models and tools for integration.
	  3. The spiritual organization has specific charactoristics
	  4. Crisis is usually the starting point
	  5. &quot;Religion&quot; and &quot;Spirituality&quot; percieved differently
	
	B The paths 
	 1. Religious-based organization
	 2. Evolutionary organization
	 3. Recovering organization
	 4. Socially responsible organization
	 5. Values-based organization
	Thursday, October 20, 2011	Page 29 of 76
	VI. The Cooperative	o	77-
	  by Claude Beland
	
	A. Desjardins
	 1. A banking company in Quebec, Canada.
	 2. Cooperative ethics
	 3. Began with Alphones Desjardins
	
	B. Principles
	 1. solidarity
	 2. Mutual help
	 3. fraternity
	 4. charity
	 5. Education the public about
	  a. democracy
	  b. economy
	  c. responsibility
	  d. solidarity</pre>
</div>
<div title="Evil and the response of world religion /" creator="Justin" modifier="Justin" created="201110222045" tags="291 Non-Fiction" changecount="1">
<pre>Source	NoteType-uote
	The Priestly Conceptions of Evil in the Torah,   by Gene G. James.A. Creation 1. Gen. 1:26 give a polytheistic view (`let us make humans in our own 	o	003-014
	image.' 2. A premordial chaos kept in place by God's hand and rules  a. not unique, however to the P creation story 3. Unique to the P story  a. 
	Description of the order of creation  b. Division of creation into three groups   1) birds = heavens   2) animals\humans = dry land   3) fish\sea 
	monsters = waters  c. be fruitful and multiply   1) opposite told in the Atrahasis Story / Gilgamest Epic   2) Meaning humans ordered to maintain the 
	order of creation  d. vegetarianism   1) Presupposes all life is holy B. Disobedience, Destruction, and a New Beginning 1. The Flood  a. Primary duty 
	is not killing (vegetarianism), but humans do.  2. J v.s. P story  a. J = 2 unclean, 7 clean  b. P = 2 unclean, 2 clean 3. Eating meat is now allowedC. 
	Holiness 1. Circumcision  a) But not women  b) Not unique to Israelites 2. Females not capapble of holiness,
	From myth to psyche to mystic psychology  -by Sheldon R. Isenberg	s	016-031
	Providence and the Problem of Evil in Jewish Thought   by David J. Goldberg	s	032-042
	The discovery of Christian meaning in suffering,   by Jane Mary Zwerner	s	043-055
	The Ambiguity of the Symbol of the Cross  -by Mary Ann Stenger	s	056-069
	… The concept of God inposing order on chaotic material is central in understanding P`s world view.-	13
	… evil as the breakdown of order.-	14
	Thursday, October 20, 2011	Page 30 of 76
	We have created the possibility of utterly destroying the planet, a possibility that Jewish and Christian imagination had relegated to God alone. -	16
	This is a unique situation that has already streated traditional teologies and theodicies, often beyond the breaking point. Certainly one result of the
	 Holocause has been that Jews have plunged into theological crisis. The old images and beliefs do not satisfy the vast manjority. The evolution of 
	this mellennia-old tradition requires that we move into a new phase of conversation about God and evil.
	Mystics and philosophers from many traditions have recognized that whatever it is we mean by or call God, God is beyond human description. -	16
	Hence all descriptions of God are, in a significant sence, human projections. But that doesn`t mean that they are therefore fictional.
	From Myth to Psyche to Mythic Pychology    -by Sheldon R. IsenbergA. Evil in the Book of Job 1. Shit happens, deal with it. 2. We humans can 	o	16-32
	never comprehend God`s plan.B. Evil in the Apocalyptic Literature 1. 'Dangeriously Dualistic' -21 2. 'Being on [Gods] side is enough and all is 
	preordained.C. Evil and the Rabbis 1. Rules are created by Rabbis in response to God's order.D. Evil and Kabbalah 1. 'Evil we experience is due to a 
	break that prohibits the exchange between the divine energies' -27
	Midrash	f	17
	Torah	f	17
	The fundamental biblical constructivist premise is subverted, not destroyed, as it is transformed from mechanical clarity to mystery.-	20
	Divine Goodness and Demonic Evil  -by David Ray Griffin A. Monotheism v.s. Monism  1. Monotheism: doctrine that there is ultimately only one 	o	223-239
	power that is worthy of worship  2. Monism: doctrine that there is only one power. B.Divine Power  1. Employed persuasively and creatively  2. 
	Always based on responsive love fro the creatures  3. Always informed by creative love   a. always intends for the good C. Demonic Power  1. 
	Empoloyed coercively and destructively  2. Based on hat and/or indifference  3. Not aimed at the good of all. D. Views of Evil  1. New Testiment   a. 
	Semidualism   b. Dualism  2. Augustine  3. Griffin: Evil as produced by a necessary to survival
	Divine Goodness and Demonic Evil  -by David Ray Griffin	s	223-240
	…as a Christian theologian I take the perfect goodness of God, as pure unbounded love, not to be negotiable.-	225
	The divine power is the power to evoke and to persuade, not the power to coerce and compel.-	229
	Siddur	f	24
	… when the good impulse rules the evil inclination-	25
	In Kabbalah evil results from breaking relationship, by not seeing, understanding and valuing the interdependent relationships without wich -	28
	nothing exists, including God.
	When sefirotic energy becomes mixed with that of the demonic realm of the world, the break in relationship within God is commonly described as a -	28
	temporary divorce between the masculine and feminine aspects of God.
	Thursday, October 20, 2011	Page 31 of 76
	Providence and the Problem of Evil in Jewish Thought   by David J. GoldbergA. Understandings of Evil 1. Traditional Biblical Understanding  a. A 	o	32-42
	form of Divine Punishment 2. Don`t Try to Understand  a. The Book of Job  b. 'Where were you when I laid the foundations of the earth…?' (Job 
	38:4)  c. 'And Aaron went silent' (Lev. 10:3) 3. The Very Existence of Evil  a. Ibn Daub   1) 'Evil is merely the absence of good' -34  b. Maimonides   1) 
	Evil are privations of the good.   2) The wrong excersise of free will  c. Both are semantic games. 4. As a tool to become fully human  a. Irenaeus: 'an 
	appropriate arena for the emergence of those values which make human beings God-like in their struggle for good and equip them for their role of 
	enjoying God forever.B. Types of Evil 1. Natural  a. 'Acts of God' (as found in english common law) 2. Moral  a. Free Choice D. Kabbalah 1. Isaac 
	Luria  a. Theory  of Tzimtzum (self-contradition)  b. free choice is necessary to be fully human
	To expact God to create matter which is not matter is to ask God to do the logically impossible.-	36
	…The Holocaust… has raised to new levels of sensitivity our preception of the brutality of which human beings are capable and of the agonies -	37
	suffered in this world by the innocent. While the problem of why an all-good, all-powerful God can tolerate evil in creation has always been the 
	most difficult question for a theist to face, the sheer scope and nakedness of the evil witnessed in the twentieth century has rendered banal all 
	earlier attemps at an answer.
	The horrors of Hiroshima and the napalm bomb seem too monstrous for theodicy to cope with… [but] the quest for theodicy is still valid if God is -	38
	to continue to be worshipped in any meaningful sense.
	`…when you know that God is hidden, then God is hidden no longer'-	42
	Discovery of Christian Meaning in Suffering: Transformation and Solidarity -by Jane Mary Zwerner A. The Cross  1. Soul-Making Theodicy- 	o	43-55
	Individual transformation through suffering B. Suffering 1. Produces the opportunity for god to be present 2. Not external suffering, but internal C. 
	Transformation
	The Ambiguity of the Symbol of the Cross  -by Mary Ann Stenger A. Interpretations of the meaning of the Cross  1. Self-Sacrifice  2. The Love of 	o	56-69
	the Divive   a. I.e. God giving his only son.   b. See St. John 15:13  3. The process by which Jesus became the Christ   a. Jesus denies himself
	The followers of Jesus came very early to the conclusion that he had lived in order to die, that his death was not the interruption of his life at all but-	57
	 its ultimate purpose… The death of Jesus on the cross could have brought an end to Jesus` religious movement. But instead it becomes the focus 
	of the Christian faith.</pre>
</div>
<div title="Existentialism for Dummies" creator="Justin" modifier="Justin" created="201109271048" modified="201110040204" tags="Non-Fiction 142 B y2011" changecount="4">
<pre>EXISTENTIALISM FOR DUMMIES
by Christopher Panza and Gregory Gale.

Grade: B
Read: Aug - Oct. 2011
Notes:

Ch. 11: Nietzsche: Mastering the Art of Individuality

A. Desires
&quot;Being composed of desires, your self is always biased. You can't help but project meaning or value onto the world.&quot; -236
&quot;In typical existentialist fashion, Nietzsche rejects the notion of a right way to see things. He sees no objective truth in the world for you to discover. Instead, he thinks you must understand the world through your perspective, one that always reflects your own specific interests.&quot; -240
&quot;This is a basic truth of existentialism - that you're always projecting your meaning of your own world and that this is just an inescapable part of who you are.&quot; -240

B. Controling Desires.
&quot;Nietzsche's central points: The self begins as a kind of achaos of unorganized desire[, and] being a self requires the activity of mastering your desires and ordering them around a choice that expresses the meaning you've given your life.&quot; -241
&quot;...being a self requires not being a train wreck... It means giving your self a coherent sense of direction through self-mastery.&quot; -243
&quot;...true mastery... they choose, and then hold themselves accountable to their own decisions.&quot;-244
&quot;...being noble... you give yourself a self-created purpose... essentially, an autonomous person gives himself his own rules to live by.&quot; -245
reductionist v.s. existentialist
&quot;Noble living requires that you do the following: Experience yourself as the meaning of the good, be self-affirmative, love yourself.&quot; -247
&quot;Nobles embrace self-overcoming, the need to continually alter and move past the specific ways in which they engaged the world in the past.&quot; -250
&quot;Being a self isn't something you are; it's something you do.&quot; -251
&quot;'In the beginning, the noble caste was always the barbarian caste; their superiority lay, not in physical force, primarily, but in force of soul -- they were more complete men.&quot;-253
&quot;The ability to incorporate many diverse perspectives within yourself but remain focused on a definitive gal or purpose reveals true inner power through an inner beauty reflective of an artistry of living
&quot;This is a basic existential premise: Everyone strives to engage the world on his own terms.&quot; -258

Ch. 12: Fear and loathing in Existential Politics
&quot;... the goal of existentialism is to afford human beings a more successful and healthy means of coming to terms with and plotting a course through their lives.&quot; -279
&quot;If reading Nietzsche doesn't disturb you, then you aren't reading Nietzsche.&quot; -282
&quot;... Camus rejects the absolute assurance in any set of values that advocates the rebellion say make the fighting defensible.&quot; -294

Ch. 13: Existentialism and Other Schools of Philosophical Thought
Analytic v.s. continental philosophy
Existentialism v.s. Postmodernism
&quot;Bigotry, then, is inseparable from the absolute systems and meaning narratives people create to console themselves and distract them from the fact that the world is fundamentally meaningless, and that rather than being a given, the meaning of the world is their responsibility.&quot; -307</pre>
</div>
<div title="Exploring and proclaiming the Apostles' Creed /" creator="Justin" modifier="Justin" created="201110222046" tags="238 Non-Fiction" changecount="1">
<pre>Source	NoteType-uote
	A. Pauls Christology  1. A new creation in Christ.B. Gospels portraitsC. Early Church 1.Origen distinguishes the trinity.	o
	Thus it is right that each article of the Creed begins with `I believe,' for we are making not an individual, public commitment to believing intellectual -	56
	ideas, but rather to an act of trust in a particular person and he events of his life and death, as narrated in the subsequent clauses.
	Jesus may have been one of the great teachers of the human race, but Christianity is not primarily about his teaching, and still less about -	56-7
	philosophical ideas… when we express our faith in `Jesus Christ,' we are saying that the long biblical traditions of prophets, priests, and kings 
	anointed by God has reached its pinnacle in the Annointed One, Jesus himself.
	`Jesus' is Greek for the Hebrew 'Joshua,' a personal noun derived from the word for 'to save' and 'salvation' as well as 'healing' and 'wholeness.'-	57</pre>
</div>
<div title="Foresters, The." creator="Justin" modifier="Justin" created="201110222046" tags="823 Fiction" changecount="1">
<pre>Source	NoteType-uote
	Chapter 5-Able forged a document to pay off a businessman from Edinburgh. Michael took responsibility for the debt, and after his father dies, will 	s	37-44
	have to sell Dovenest. -Agnes is pregnant.
	…but with the whole passion of love that existed in her nature, she embraced her husband`s neck, and with every kindest and most encouraging -	38-39
	word, addressed to his own ear, mingled prayers of holiest fervour for his peace of mimd to the Giver of all merices.
	His [Michael Forester] whole appearance betokened no ordinary character-	9</pre>
</div>
<div title="Four faces of Jesus." creator="Justin" modifier="Justin" created="201110222047" tags="232 Non-Fiction" changecount="1">
<pre>Source	NoteType-uote
	A. Mark	o
	 1. Writing for a Roman Audience
	B. Matthew
	 1. Written in Antioch, Syria.
	 2. Written for Jews; a &quot;new moses&quot;
	 3. Works similar to a catechism
	 4. A work of several discources
	  a.The Sermon on the Mount (Matthew 5:3-7:27)
	  b. The Missionary Discourse (Matthew 10:5-42)
	  c. The Parable Discourse (Matthew 13:3-52)
	  d. The Church Community Discourse (Matthew 18:3-35)
	  e. The Eschatological (Last Things) Discourse (Matthew 24:4-25:46)
	C. Luke
	 1. Achaia
	D. John
	 1. Jesus is divine.
	The way to assimilate Mark is in a single gulp: Sit down and read all 16 chapters as you would any other book. Forget about footnotes and cross -
	references. Simply read it whole and entire in one sitting, and you`ll be introduced to a Jesus you may not have met before.
	Luke, like Mark, sought out others in compiling his portrait…-</pre>
</div>
<div title="Framework for Feminist Ethics." creator="Justin" modifier="Justin" created="201110222048" tags="? Non-Fiction" changecount="1">
<pre>Source	NoteType-uote
	A. Types of Feminist Ethics 1. Radical feminist perspective 2. Sex-rolism 3. Socialist feminism 4. Marxist-Leninist feminism	o
	Thursday, October 20, 2011	Page 33 of 76
	…the analysis of the root of oppression is a key factor in feminist ethics… Self-determination for woemn, autonomy, and an inviolable sence of -
	embodiedness figure prominently in all feminists` visions of a new social order.</pre>
</div>
<div title="Frankenstein" creator="Justin" modifier="Justin" created="201109230017" tags="Fiction A" changecount="1">
<pre>Frankenstein   
DBID: 0079     
---------------

GRADE: A

READING DATES: 05/01/2005</pre>
</div>
<div title="Greener Shore, The." creator="Justin" modifier="Justin" created="201110222049" tags="813 Fiction" changecount="1">
<pre>	Source	NoteType-uote
	Trees are a visible representation of the sacred forces of wind and water and son. Their shapes conform to the wind that swirls around them-	27
	There are times when the contents of our heads are all we have.-	28
	Druids may not always recognize lies, but they know the truth when they hear it.-	28
	Aivar	f	3
	You will enter the fire but never feel the flame.-	32
	To gaze upon it was to feel the cold breath of the Otherworld.-	32
	I, chief druid of the Carnutes, had been able to materially alter the form and function of objects through a deliberate act of will. That ability had set -	33
	me apart from all my people.
	Druids served in a number of capacities. Their principle obligation was to maintain the harmony between the visible and invisible worlds. They also-	4
	 kept the laws of their race and were the only members of a tribe exempt from battle.
	I told you, I can`t sell Cormiac, because he owns himself. As we all do.-	42
	In Hibernia, battle had become the only means by which men defined themselves-	44
	Some of the trees I knew in Gaul did not grow in Hibernia. Either their gifts were not required in this climate, or others with similar abilities had been -	48
	substituted for them. Nature ever strives to maintain balance.
	Vercingetorix	f	5
	Let the past go? How can I let go of something that`s entangled with my spirit like mistletoe on an oak tree?-	5
	Briga	f	5
	Thursday, October 20, 2011	Page 34 of 76
	The fire on our hearth never went out. Briga considered tending the fire to be a a sacred rite, as it had been for our ancesters in a much colder -	59
	climate. Fire was heat, fire was life. If the fire was allowed to die, calamity would follow.
	Patience with their men is one of the many gifts of women.-	6
	Night, do your simple duty, I thought. Close my eyes and extinguish the tiresome fire in my head.-	61
	Her [Briga] totally integrated spirit chose to see only the radiance, and move toward it instinctively. That, I told myself, was the iimage we should -	64
	keep with us.
	A conqueror`s most dangerous opponents are not the warriors, but the thinkers. Realizing this, Caesar had ordered his legions to hunt down the -	70
	Order of the Wise and put all thye found to the sword. With those murdered men and women died must of our past.
	Without having access to bards, people were cut adrift from their past. We know who we are by knowing what we have done.-	70
	Love can end in grief, however.-	74
	Was it history? Or myth, as history so often becomes? The overlapping of myth and reality is like the twinning of spirit and flesh, a manifestation -	75
	of the Two-Faced One.
</pre>
</div>
<div title="Happiness is Overrated" creator="Justin" modifier="Justin" created="201109230040" tags="Non-Fiction 170" changecount="1">
<pre>Belliotti, Raymond Angelo. Happiness is Overrated. New York, NY: Rowman &amp; Littlefield Publishers, Inc. 2003

I.	Preface
A.	“I conclude by reiterating that attaining a positive state of ind is not necessarily a great good, and happyness is defined by uplifted feelings, while usually a good, is overrated
B.	“I conclude that happiness, in most of its realizations, remains valuable; but is far from the most immportant human aspiration.
C.	Goal should be, “meaningful, valuable lives” -xiii
II.	Greek, Roman, and Christian Happiness
A.	Happiness as Moral and Intellectual Virtue
1.	Socrates
a.	“Socrates emerges from Plato’s portrayal as a man with firm moral convictions. We should never harm or wrong others regarless of what they did to us... The just person has a balanced soul and is in harmony with the world” -4
2.	Plato
3.	Summary -10
a.	Happiness is desired fro its own sake, not for the sake of anything else
b.	The direct pursuit of pleasure cannot be the greatest good.
c.	Different pleasures can be ranked in terms of
(1)	quality
(2)	quantity
(3)	intensity
(4)	duration
(5)	purity
d.	Happiness must be connected to moral and intellectual virtues if it is to embody maximum value.
e.	Happiness that embodies maximum value must be more than merely an enduring, positive, subjective psychological state, such as extended joy, contentment, exuberance, or peace.
f.	Although passions for justice, knowledge, truth, and virtues have no excess, moderating the passions is often a reliable path to happiness.
g.	To achieve a happiness that embodies maximum value we much enjoy and use other goods wisely. 
B.	Happiness as Flourishing
C.	Happiness as Radical Asceticsm
D.	Happiness as Hedonism
E.	Happiness as Tranquility
F.	Happiness as Worldly Transcendence
</pre>
</div>
<div title="Harry Potter" creator="Justin" modifier="Justin" created="201109230036" modified="201109230041" tags="823 Non-Fiction" changecount="2">
<pre>GENERAL NOTES

Schools
1. Hogwarts
2. Durmstrang
3. Beautxbaton

Government
Department of Magical Games and Sports
Improper use of Magic Office
Department of International Magical Cooperation
Accidental Majical Reversal Squad
Goblin Liason Office
Department for the Regulation and Control of Magical Creatures
Misuse of Muggle Artifacts Office
Department of Mysteries
Office for the detection and confiscation of counerfeit defensive spells and protective object.

Professors
Madam Pomfrey- Nurse
Professor Binns - History of Magic
Professor Sinistra - Astronomy
Professor Flitwicks - Charms
Professor McGonagal - Deputy Headmistress
Professor Dumbledore - Headmaster
Hagrid - Care of Magical Creatures
Mr. Flinch - Caretaker
Mr. Moody - Defence against the Dark Arts
Professor Snape - Potions
Professor Trelawney - Divination
Professor Vector -</pre>
</div>
<div title="Harry Potter and the Order of the Phoenix" creator="Justin" modifier="Justin" created="201109230042" tags="Fiction 823 B" changecount="1">
<pre>READ: August - Sept. 2005

GRADE: B

NOTES:

CHAPTER 18

Summary: The &quot;room of requirement&quot; -386
CHAPTER 20:

Summary: Hagrid comes back

CHAPTER 21: THE EYE OF THE SNAKE

Summary: Hadrig is inspected, Christmas Break comes, and Harry has a dream. 

CHAPTER 24: 

Summary: Harry starts his Occlumency classes with Snape.

&quot;'Then you will find yourslef easy prey for the Dark Lord! ... Fools who wear their hearts proudly on their sleeves, who cannot conrol their emotions, who wallow in sad memories and allow themsleves to be provoked this easily - weak epople in other words -- they will stand no chance against his  powers! He will penetrate your mind with absurd ease...&quot;' -536 -Snape

 &quot;'You are to rid your mind of all emotion every night before sleep - empty it, make it black and calm...&quot;' -538 -Snape

CHAPTER 27 : THE CENTAUR AND THE SNEAK

Summary: Harry's Defence against the Dark Arts class is discovered by Umbridge. The matter is taken to Dumbledore's office to a meeting including the Miniser of Magic. Doumbledor protects Harry, and a fight breaks out inhis office btw Fudge and Dumbledore.

&quot;Remeber - close your mind.&quot; -622

&quot;'There's things more importan' than keepin' a job.'&quot; -605 -Hagrid

CHAPTER 26: SEEN AND UNFORESEEN

Summary: Another Educational Decree; Umbridge fires Professor Trelawney
</pre>
</div>
<div title="In sylvan shadows /" creator="Justin" modifier="Justin" created="201110222050" tags="813 Fiction A" changecount="1">
<pre>Source	NoteType-uote
	Months	f
	Prolongue	s
	Chapter Ten : Betrayed	s	119
	`Your father is not pleased with you,' Danica remarked. 'He never is… but we share respect, and do not doubt our love.'-	120
	Growling, on the very edge of control…-	156
	The creature was much stronger than she, but Danica called upon powers that the org couldn`t begin to understand.-	160
	Chapter Two : A Book worth Reading	s	16-27
	Do not underestimate that which I… might know… We are not a simple folk wasting our years dancing under the stars, as so many would choose -	20
	to believe.
	… for the wizard hid his emotions well in the hollowed features of his drained face.-	21
	I know yyou are ready. Forgive me my fears. They do not come from any doubts about you or your dedication or your wisdom.-	23
	…and then she [Danica] was chanting softly in a melodic and rhythmical way, seeking complete harmony of body and spirit.-	25
	Phien denifi ca… These are only images.-	25
	Deneir	f	26
	Chapter Three - Intrigue	s	28-46
	We shall depart in an hour… You will come then with whatever you have packed and silently endure any hardships resulting from what you have -	39
	neglected to take along.
	Thursday, October 20, 2011	Page 39 of 76
	Chapter Four - Indecision	s	47-59
	Shayleign	f	6
	Chapter Five - First Contact	s	60-75
	Chapter One : By Surprise	s	6yes5
	Galladel	f	7
	Tintagel	f	8
	Introduction to Carl G. Jung's Principle of Synchronicity.
	Source	NoteType-uote
	`as long as theres forgiveness, fear and guilt looses their power.'-
	prayer is ... an accounting of our souls.-</pre>
</div>
<div title="Liberal Religion" creator="Justin" modifier="Justin" created="201109230023" modified="201110222050" tags="200 Non-Fiction" changecount="2">
<pre>Liberal Religion: Practices and Principles
DBID: 0125 

READING DATES: 06/15/2005 – 07/19/2005

NOTES:

	Liberal Religion requires everybody to think of himself or herself as part of the whole.
	The root of the evil is apathy and indifference	11
	Our age does not lack reflection but passion. -Soren Kierkegaard	12
	Those who accept and absorb Liberal Religion feel no anxiety and are able to help overcome the disarray of society.”	12

I.	Preface A Matter of Moral Passion
A.	Quotations
1.	“Liberal Religion requires everybody to think of himself or herself as part of the whole.” 
2.	“The root of the evil is apathy and indifference.” -11
3.	“Those who accept and absorb Liberal Religion feel no anxiety and are able to help overcome the disarray of society.” –12
4.	“Our age does not lack reflection but passion.” –Soren Kierkegaard –12

II.	What is liberal religion
A.	Problems of Traditional Religion
1.	“Traditional Religion is scripture-based” –17
2.	“To the extent that traditionalists do not practice what their religion teaches, they are living proof of the vitality of at least one principle of Liberal Religion, namely, freedom of belief”. –19
3.	“Traditional Religion is an utter failure because its religious message has not substantially elevated the conduct of people during the past five thousand years.” –20
4.	“Traditional Religion has demonstrated its inability to establish a spiritual order that shuns violence and brutality, and one that promotes friendship, peace, and what is called Christian Love.” –20
B.	What is Liberal Religion
1.	“It is an open-ended community of free sprits from very diverse backgrounds.” –21
2.	The message: “We do not all think alike but we all alike agree to think.” –22
3.	“The often repeated proclamation that ours is a creedless religion is just not true… This flexibility is, in itself, part of the creed.” –22
4.	“The truth is that liberalism has a very honorable tradition in the United States. It is the fountainhead of Americanism. Jefferson, Adams, Madison, Monroe, Franklin and most other promoters of the American Revolution were flaming liberals. All great developments, from the Declaration of Independence to the Civil War, from the Emancipation to the Civil Rights Movement, are one continuous forward surge towards the realization of the American liberal idea. Liberals believe in the perfectibility of life.” –23
5.	Every individual is “expected to think for himself or herself.” –27
C.	the American Unitarian Association (1943) –25
1.	Five principles
a.	Individual Freedom of Belief
b.	Discipleship to Advancing Truth
c.	Democratic Process in Human Relations
d.	Universal Brotherhood
e.	Allegiance to the Cause of a United World Community
2.	“It will be noted that the last three of the five points are affirmative statements of religious belief which are irreconcilable with the first two points. … What this demonstrates is that freedom of belief is not absolute even in the Liberal Church, and it is an error to assume that one can believe just anything and still be counted as an adherent to Liberal Religion.”

III.	Principles of Liberal Religion
A.	General Quotes
1.	“Let religion be to us life and joy / Let it be a voice of renewing challenge to the best we have and may be / Let it be a call to generous action.” –Vincent Silliman –29
B.	Religion
1.	Definitions
a.	“Liberal Religion is an earthbound religion” –29
b.	“Liberal religion has overcome fear and Angst. It is in tune with the Universe. It loves the world.” –31
c.	“What matters to Liberal Religion is whether a person is concerned with what happens around him or her.” –33
d.	“To put it simply, religion is the human striving for integration into the Universe. The fundamental concept of religion is that of spiritual unity with the Universe.” –34
e.	“Religion grows out of the urge to come to terms with the Universe.
f.	According to Robert Ellwood, Religion is expression in three areas:
1)	Verbal
2)	Worship
3)	Social
g.	According to Harold Berman, religion has four elements:
1)	Ritual
2)	Tradition
3)	Authority
4)	Universality
2.	The Sacred and the Secular
a.	No separation of Church and State, “Liberal Religion cannot accept the distinction between sacred and secular” –38
3.	A Universal Yearning
4.	Cosmology
a.	Creation story is a “myth”.
b.	“Liberal Religion’s cosmology generally is that the universe evolved gradually as is taught by the theory of evolution” –44
5.	Chosen People
a.	“It [Liberal Religion] does not accept the idea of a chosen people.”
b.	“Elitism of course runs counter to the universal character of Liberal Religion.” –46
c.	“Ye shall know them by their fruits.” –Jesus
6.	Scriptures
a.	The Old Testament = “an historical and anthropological record of a primitive people and primitive personalities which was written, edited, and translated over a period of about one thousand years.” –47
b.	“The Liberal Church will not recognize any such closure.” –49
7.	Revealed Religion
a.	“As the Liberal Church does not acknowledge a supernatural power, so its religion is not supernaturally revealed.” –50
8.	Ethics and Morals
a.	“Liberal Religion demands of its adherents strict moral and ethical conduct.” –52
b.	“To protest or combat the alleged evil, conduct which otherwise would be immoral and unethical is regarded as morel and ethical. This is “ethical relativism.” –54
c.	“It [Liberal Religion ] demands that ethical and moral norms, once recognized as such, must be adhered to.” –54
9.	Religion and the Law
a.	“It [the law} can concede religion as a special legal status only in cases where the burdens of government have been reduced.” –57
10.	Grace and Mercy
a.	“None of which is relevant to Liberal Religion.”
b.	Grace = “spiritual freeloading, which is not acceptable to Liberal Religion.” –58
c.	Traditional religion = Man must have god’s grace because man is inherently evil. “It is an attitude which Liberal Religion does not accept.” –58
11.	Ecumenical Religion
a.	“Liberal Religion would betray its fundamental principles if it joined in a broad religious enterprise that professed beliefs contrary to the truth as Religious Liberal see it.” –59
b.	“The so-called interfaith efforts diminish Liberal Religion. They stress togetherness and aim to blur the lines between religious individuality. They advocate mutual toleration. We more than tolerate Traditional Religion, we respect it. But, we should not want any part of it.” –60
12.	Fringe Religions
a.	“The religious attitude of most cult members is irrational and, for that reason alone, incompatible with Liberal Religion.” –60
C.	God
1.	Definitions
a.	“Liberal Religion, therefore, does not subscribe to the idea of divine omnipotence.” (67)
b.	“Liberal Religion will accept a nonpersonal, nonsupernatural God concept… Liberal Religion will use the word “God” (although sparingly) to describe the life force pulsating throughout the Universe.” (67-68)
c.	“Liberal Religion, which disdains belief in an anthropomorphic god, generally agrees with the assumption that there is the presence of an overriding intelligence and immanent order.” (69)
d.	“God is revered as the creative principle.” (70)
e.	“worshipping the immanent power and the unity of the Universe” (75)
f.	“God as the spiritual aspect of human endeavor or human existence.” (84)
2.	“The Religious Liberal simply relies on the conclusions he has reached on the basis of observation and experience” (69)
3.	The “God is love” Concept
a.	“Traditional Religion first knocks the believer to the ground and then administers first aid with the statement that God loves him or her.” (77)
b.	“Liberal Religion does not abjure love. It exalts love and values it highly. But it does not pretend that the world is all love, and it does not demand that each person love all others.” (77)
4.	The Will of God
a.	“IT should also be said that the traditional reference to the “Will of God” is inappropriate and even repugnant to Liberal Religion.” (79)
b.	The “magic words of Traditional Religion”
5.	The Fear of God
a.	“Liberal Religion must reject this idea altogether. If God is good, why fear him?” (80)
D.	Reason and Faith
1.	Chapter Quotes
a.	“Rationality is the keynote to the Liberal Religious faith.” (89)
b.	“The real impact of religious faith comes in ordinary, daily living, for example, when one encounters a business failure or some personal tragedy.” (97)
2.	Faith
a.	“Faith is the nonintellectual side of religion.” (92)
b.	“The faith of the Religious Liberal is controlled by reason because the Religious Liberal is convinced, and instinctively believes, that rationality is the keystone to religion.” (92)
c.	Most Americans have faith in freedom, in self-government, and in democracy. The truth of this faith cannot be found in history. It is a faith based upon abstract concepts of right, morality, and justice. This faith has been called an American secular religion, apparently to distinguish it from sacred religion.” (96)
d.	“The faith that stands on authority is no faith.” (98) –Emerson
3.	Propagation of the Faith
a.	“The faith of the Liberal Religion is largely unknown because little effort has been made to disseminate it.” (98)
E.	Emotionalism and Mysticism
1.	“They [religious liberals] merely insist that religious emotions must not infringe upon the realm of reason.” –101
2.	“ ‘A certain tendency to insanity has always attend3ed the opening of the religious sense in men. ‘” –Emerson –101
F.	Truth
1.	“It [liberal religion] trusts science.” –107
2.	“… experience, which is the basis of Liberal Religion.” –107
3.	perceived truth v.s. revealed truth
4.	“Liberal Religion will discard any tradition and any authority that is shown to be in error. This attitude is what theologians call empirical naturalism.” –107
5.	“Liberal Religion rejects any closed system; it does not accept the permanency of any truth, teaching, or belief. Liberal Religion does not accept that which is contrary to ever-evolving scientific knowledge.” –106
6.	“It [liberal religion] relies for its truth upon science and therefore is subject to the hazards of science. The greatest hazard is that which is true today may be found untrue tomorrow.” –108
7.	“Traditional Religion has always resisted, and still resists, the search for new truths. … Liberal Religion condemns all efforts to inhibit the search for truth.” –109
8.	“Liberal Religion is guided by empirical naturalism, which means verifiable natural experience as distinguished from nonverifiable mystical or revelatory intuition.” –110
9.	“’There is no absolute knowledge. And those who claim it, whether they are scientists or dogmatists, open the door to tragedy. All information is imperfect. We have to treat it with humility. That is the human condition and that is what quantum physics says.” –Bronowski, “The Ascent of Man”. –111
10.	“In conclusion, Liberal Religion does not claim to be the sole possessor of all truth. Truth evolves through the ages, and there are many areas of uncertainty. For that reason, Liberal Religion admits that there may be differing religious truths. But, it does not concede the truth of any religious thought which is conflicted with what science has definitively refined.
G.	Myths and Symbols
1.	“Truth is best told in prose.” –115
2.	Definitions
a.	Mythology = “the use of imagery to express the other-worldly in terms of the world and the divine in terms of human life, the other side in terms of this side.” –116
b.	Legend = “… a legend is an embroidered historical or quasi-historical tale, not tinged with religion.” –120
c.	Symbols = “abbreviations” -120
3.	“The bond with the past is stronger than the stern demand for naked truth.” –116
4.	“Liberal Religion distrusts uncertainty and ambiguity; it therefore must abjure myths rather than accept and promote them.” –117
5.	“… that story can be told straightforwardly without embroidery.” –118
6.	“The doctrines of hell, purgatory, and heaven, of the body verses the soul, of the divine son slain and reborn, as well as the sacramental eating of the body and blood and divinity of God, directly and deviously influenced Christianity which was itself, a mystery religion of atonement and hope, of mystic union and release. The basic ideas and ritual of the Orphic cult are alive and flourishing amongst us today.” –119 – Will Durant
7.	“…all myths are grounded in the belief in supernatural beings.” –119
8.	“The worst feature of the myth is that it corrupts the young.” –119
9.	“Liberal Religion needs no symbols.” –122
H.	Jesus and Christianity
1.	“Since Jesus believed the end of the world was near, he was interested in making men worthy of life in the other world. He was interested in improving man’s ethical behavior. He was not interested in social reform. The greatness of Jesus’ teaching is its timelessness; its value survives even through it was not intended for the future.” –124
2.	“Nobody in the Liberal Church believes Jesus to be the incarnation of God, or part of a divine trinity. … Traditional Religion diminishes the greatness of Jesus in other was well. Paul robbed him of his humanity and made him into a divinity. … Jesus rebuked such appellations (Luke 4:41)” –125
3.	“Jesus was obviously a very strong personality who had no patience with the old ways. He was bent on reform at all costs. “ –127
4.	“All traditional Religions have been unloving and arrogant.” –127
5.	“the religion of Christ and the Christian religion are two entirely different matters.” –127 – Gotthold Ephaim Lessing
6.	”Paul, not Jesus, is the founder of the Christian Church.” –129
7.	“It was also Paul who invented the myth that Jesus is “our Lord” and the he was the Son of God.” –129
8.	“The Lordship of Jesus – his divine qualities as the Son of God – are clearly inspired inventions of Paul, long after the death of Jesus. The idea that Jesus is part of the trinity is an even later invention of the Church.” -130
9.	“In Liberal Religion, the greatness and the influence of Jesus does not depend nor does it rest upon the story of the risen Christ. … the Liberal Church reveres Jesus as a great prophet.” –128
10.	“In many respects, Christianity today has become a habit rather than a religion. The mindless mouthings of Christianity intrude on numerous public invocations. Worse still, it has become a sales tool.” –131
11.	“In conclusion, it bears repeating that in spite of its enormous influence in the world, Christianity has failed to bring about more peace, and that the teachings of Jesus did not have a noticeable impact on the conduct of men.” –131
I.	Satan, Heaven, and Hell
1.	“Liberal Religion regards these concepts as useless, mythical baggage.” –133
2.	Definitions
a.	Heaven = “state of happiness and contentment” -137
b.	Hell = “alienation, misery, or general unhappiness.” –137
J.	Sin, Redemption, and Salvation
1.	Definitions
a.	Salvation = “a healing process.”
2.	“Liberal Religion insists that one is master of one’s own life.” –139
a.	“Forgiveness and reconciliation can only be obtained through individual efforts of the sinner.” –143
b.	“Liberal Religion does not allow such an easy escape. It demands that every person heal himself or herself.” –142
1)	Through an “integration with the evolutionary process” -142
2)	“…requires a personal volition and an intelligent effort.” -142
3.	“Liberal Religion will have none of this.” –140
4.	“Whoever makes an effort to strive on, we can redeem and save.” –142 –Goeth’s Faust
5.	Predestination: “Liberal Religion rejects this doctrine altogether because it conflicts with its tenets of self-reliance and self-responsibility.” –144
K.	Death, Immortality, the Soul, and the last Judgement
a.	Death is the termination of a persons life. –145
b.	“One’s immortality is to found in one’s descendants, works, and lasting influence on others. That is al there is to it.” –145
c.	Suicide: “The principle of freedom of choice must govern” –149
d.	“The dualism of body and soul, which was invented by the Greeks, is incompatible with Liberal Religion.” –150
IV.	Part Two : Practices
A.	The Democratic Process in Human Relations
B.	The Dignity of Man
1.	Slavery is incompatible with the dignity of man and therefore repugnant to Liberal Religion.” –158
2.	“… will not allow any discrimination on the basis of sex” –158
C.	Justice
1.	Majesty of the Law based in laws being known, understood, observed, and enforceable. 
2.	Social Justice: “It is a social system which allows every human being to live in dignity and to develop according to his or her own potential.” –162
3.	The Principle of social justice conflicts, at times, with the economic system. In that case, Liberal Religion requires the economic system to yield.” –162
4.	“Liberal Religion recognizes that the lawless crime wave threatening our social fabric is largely born of slums, ignorance, poverty, bad health conditions, race discrimination, and a lack of economic opportunity.” –163
5.	“The doctrine of “Natural Law” has no legitimate place in a democratically organized society.” –165
D.	Freedom of Belief
1.	“There is no absolute freedom. There are limits to the freedom of belief, limits imposed by the standards of Liberal Religion which are discussed throughout this writing.” –167
2.	“Liberal Religion demands that all religious tenants must be tested in the crucible of contemporary free inquire. That is what individual freedom of belief means.” –168
3.	“The importance of the free mind principle of the Liberal Church lies in the fact that it imposes no value judgement and leaves the individual completely free to believe even what the rest of us consider evil.” –169
4.	“It is one thing for the Church to disassociate itself from Kung’s teaching, but it is another to censor him for stirring up the minds of his listeners and readers and to prevent the latter from exercising freedom of belief.” –170
E.	Social Concern
1.	“It condemns the overkill approach which requires huge expenditures for weaponry that is capable to destroying life on the earth several times over.” –175
2.	“An urgent social concern today is the potential damage to human life posed by the development of nuclear energy, genetic engineering, and a deteriorating environment. … IT shares a growing concern about the social impact of unbridled scientific development.” –176
3.	“It postulates that men must integrate themselves into nature, becoming part of it instead of its master.” –176
4.	“Liberal Religion does not approve of public intrusion into personal sexual preferences and habits.” –178
5.	“Even persons of poor taste must be accorded this freedom.” –180
6.	“The overriding principle of freedom of belief gives every Liberal Religionist the right to disagree.” –180
7.	“Liberal Religionists have a commendable zeal for helping the underdog… this zest sometimes overshadows the principle of rationality which Liberal Religion cannot abandon without jeopardizing its integrity. … Worse still, some zeal sometimes develops into zealotry.”  –181 
8.	According to the tenants of Liberal Religion, the individual is and must be subordinate to the community and the environment.” –181
F.	Religious Liberty
1.	One favorite fairy tale in American history ... is that our ancestors came to America to establish religious liberty. Quite the opposite is true. The early settlers would not tolerate dissent from their own religious dogmas.” –183
2.	“Religious Liberals respect all religious beliefs and disbelief’s.” –184
3.	“When this happens outside of a religious assembly, or outside of the family circle, it is religious compulsion, not religious liberty.” –187
4.	Of the constitution, “What is required is merely neutrality with respect to sectarian creeds. No particular religious viewpoint must be promoted.” –193
5.	Tax Exemption
a.	“There is no justification whatsoever for exempting churches from paying their fair share for municipal services such as fire and police protection.” -=196
6.	“The principle of religious liberty must yield when it conflicts with the public interest.” –198
G.	Politics
1.	The American Colonies
a.	Pennsylvania = Quakers
b.	Maryland = Roman Catholicism
c.	Massachusetts = Calvinist Puritans
d.	Virginia = Anglican Church
2.	“Obnoxious as Reverend Falwell and Father Coughlin may be, adherents of Liberal Religion cannot question their right to preach what they believe.” 
3.	“Politics without religion is unprincipled, and religion without politics makes religion too otherworldly and therefore is sterile.” –206
H.	Worship and Prayer
1.	“In the Liberal Church it is essentially a celebration of life.” –215
2.	“Let a man once begin to think about the mystery of his life and the links which connect him with the life that fills the world, and he cannot but bring to bear upon his own life and all the life that comes within his reach the principle of reverence for life, and manifest this principle by ethical world and life affirmation expressed in action. Existence will thereby become harder for him in every respect than it would if he lived for himself, but at the same time it will be richer, more beautiful, and happier. It will become, instead of mere living, a real experience of life.” –215 –Albert Schweitzer
I.	Heroes and Saints
1.	“They are people who exemplify what Liberal Religion stands for.”
2.	Thomas Jefferson
a.	“His original draft of the Declaration of Independence contained a condemnation of slavery, but it was stricken upon the insistence of southern states ... It must be born in mind that Jefferson was born into a slave economy, and if he alone had freed his slaves, it would have been economic suicide. … After his death, he set them free.” –225
J.	Celebrations
1.	“Universality is its unifying system and it is therefore quite appropriate to observe the traditions of these various strains.” –231
2.	“It’s the spirit that counts.” -233
3.	Holidays
a.	Christmas
b.	Thanksgiving Day
c.	United Nations Day
1)	“In spite of the shortcomings of the United Nations in the field of pure politics, its achievements in the realm of humanitarianism are magnificent” –233
d.	Dedication of a young child
1)	“Your children are not your children / They are the sons and daughters of Life’s longing for itself. / They come through you but not from you / You may give them your love but not your thoughts / For they have their own thoughts…” –Kahilil Gibran’s The Prophet. –234
e.	Funeral or Memorial Service
1)	“celebration of the life of the deceased.” –234
K.	Role of the Minister
1.	“His weekly sermon is expected to be an original creation.”-235
2.	“well-educated person”-235
3.	“There is no more appropriate and honorable job description for the minister of Liberal Religion than that of spiritual leader.” –237
4.	“the minister in the Liberal Church must have the freedom of the pulpit.” –237
5.	“The pulpit function is probably the most important activity of the minister of Liberal Religion.” –238
6.	“He must be ready with spiritual guidance.” –240
7.	“The hectic tempo of present day life, our crowded schedules, and the obstacles of traffic make the lives of some people lonelier than ever. A sympathetic minister can fill a much needed void, especially a Liberal minister who has other resources than simply kneeling in prayer. 
L.	Is Organized Religion Necessary?
1.	“Liberal religion is an intensely personal religion, as distinguished from institutional religion.” –243
2.	“Our aspirations would falter, our liberal energy would collapse, and our zeal would cease if we were not organized as a band of brothers and sisters who uphold, strengthen, and inspire each other.” –243
3.	“Liberal Religious ideas cannot be spread except by organization.” –243
4.	“… the common human need for fellowship and the need to belong.” –244
5.	“Membership in a Liberal Religious group should not be a casual affair. It should be a carefully considered commitment.” –245
6.	“The constitutional protection of religious liberty does not extend to a religious belief which is not shared by an organized group.” –246
M.	The Virtues – A summary
1.	“Indispensable, not the sense that a Liberal Religionist must possess these virtues, but in the sense that he or she must recognize these attributes as virtues worthy of attainment.” –247
2.	Truth
a.	“He was under the influence, not of alcohol, but of the equally intoxicating Traditional Religion.” –248
3.	Knowledge
a.	“Knowledge is valuable and its absence (ignorance) is hard to tolerate. -249
b.	“…too many people do not know what they are talking about.” –249
c.	“Reasoning power and rationality presupposes knowledge.” –250
4.	Compassion
5.	Social Service
a.	“The important thing is that one cannot be a good religious Liberal and confine one’s activities to that of breadwinning and recreation. Personal piety will not do, unless one benefits the community.” –251
6.	Integration
a.	“it refers to the integration of the individual into his environment.” –252
7.	Reverence for Life
a.	“Their religious concern for the right to life of an unborn fetus rarely extends to the victims of war.” –253
b.	Liberal Religion’s reverence for life is an all-encompassing tenet.” –253
8.	Patriotism
a.	“Patriotism ceases to be a virtue if it develops into that unintelligent zealotry which is known as chauvinism. Chauvinists are individuals who, without apparent provocation, proclaim support of their country in a loudmouthed and bellicose manner.” –254
b.	“The Declaration of Independence and the Gettysburg Address, both written by devout Religious Liberals, are part of the scripture of Liberal Religion.”
9.	Listening
a.	“The person who uses intervals between his or her utterances in order to think of what to say next, is not listening.” –255
b.	“silence and quietude… enable one to listen to the inner voice.” –255
10.	Consistency
11.	Participation
a.	“Liberal Religion teachers that the creation is not finished, that all humans are called upon to help perfect the creation and, in particular, to improve all animate life on the planet earth. “ –256
12.	Obedience to the Law
a.	“We must reject the theory that there is a higher law than that promulgated by the democratic process.” –258
13.	Humility
14.	Respect
a.	“Any morality induced by fear and bribery is not a virtue.” -261 
b.	“Respect for scientific truth is at the heart of Liberal Religion.” -262

</pre>
</div>
<div title="Libraries in the ancient world /" creator="Justin" modifier="Justin" created="201110222051" tags="020 Non-Fiction" changecount="1">
<pre>Source	NoteType-uote
	PrefaceA. covers from 3000 BCE-500 CEB.
	The BeginningsA. Clay 1. Durable 2. ok in fire
	Writing, it would appear, started as a primitive form of bookkeeping.	o	2</pre>
</div>
<div title="Library : An unquiet history" creator="Justin" modifier="Justin" created="201109241507" modified="201109252058" tags="Non-Fiction 027 C y2003" changecount="4">
<pre>LIBRARY : AN UNQUIET HISTORY
by Matthew Battles

Read: June - July 2003
Grade: C

|QUOTATIONS|
The library in the digital age is in a state of flux, which is indistinguishable from a state of crisis - not only for institutions but for the books they contain, preserve, and propagate, a crisis for the culture of letters whose roots are firmly planted in the library -212

... the very fact that the library has endured these cycles seems to offer hope. -213

Perhaps the first prominent card catalog was Edward Gibbon's inventory on playing cards.</pre>
</div>
<div title="Light of Eidon." creator="Justin" modifier="Justin" created="201110160416" modified="201110291953" tags="Fiction 813 ? y2011" changecount="13">
<pre>Light of Eidon, 
by Hancock, Karen.

READ: Oct. 2011

GRADE

NOTES

King Raynen
Abramm
Kalladornes
Carissa
Saeral

CH. 1: //Eldrin learns he is next in line to the throne. He is kidnapped. //
Eldrin: Son of the King, Novice Initiate in the Holy Brethren.

CH.2  // Meridon rescues him; but it seems it was all a setup. //
&quot;They blasphemed the tenets of Holy Writ, ridiculed the work of the Guardians, and scoffed at the power of the Flames to protect.&quot;
Terstans: Servents of the evil one.
Meridon: Captain of the Kings Guard; a Terstan.
Table of Lords
&quot;... meant-probably nothing; all Terstans were mad-but... &quot;

CH. 3 // Eldrin learns that his brother, the king, is a Terstan. Has an audience with him, and is told his faith is fake. //

CH. 4// Conversation with Carissa, who tries to convince Eldrin that Saeral is using him. //

CH. 5 // This books sounds like the argument between Protestants and Catholics. //

CH. 6 //Eldrin goes into the room and sees what Meridon tells him would be there. //

CH. 7 // Eldrin is severely punished for going in the room.// 

CH. 8 // Eldrin now believes that Saeral is using him. He is able to excape with Meridons help, only to be captured now by Prince Gillard, who says he's working for the king.
the puppet by which Saeral meant to grab the Crown. //
&quot;His Majesty suspected your decision to seek seclusion might not have been entirely your own.&quot;

CH. 9 //Prince Gillard may be behind it all. The kings wife gives birth early, and it dies. Meridon is suppose to be excecuted for killing an initiate, but the King arranges for his excape and hangs somebody else. There's suggestion that the king is mad. He sells Eldrin into slavery.//

CH. 10 //Eldrin is bought by a Thilosian//

CH. 11//Carissa goes to find Eldrin; hires Katahn for help.//

CH. 15: //Eldrin comes to terms with his slavery; begins preparations for fighting in the games.//</pre>
</div>
<div title="MainMenu" creator="Justin" modifier="Justin" created="201109230048" modified="201109230407" changecount="3">
<pre>[[Reading Log]]
----
[[About me]]
[[Projects]]
[[Education]]
</pre>
</div>
<div title="Meditations" creator="Justin" modifier="Justin" created="201109230030" tags="188 Non-Fiction A" changecount="1">
<pre>Meditations by Marcus Aurelius 
ISBN: 0140441409 DBID: 0843 
------
GRADE: A

NOTES: 
</pre>
</div>
<div title="Moral issues and Christian responses /" creator="Justin" modifier="Justin" created="201110222052" tags="241 Non-Fiction" changecount="1">
<pre>Source	NoteType-uote
	Christian responses to the human genome project   -by Cynthia S.W. CrysdaleA. Overview 1. nucleotide of  the proteins (genes)  a. Adenine  	o
	b.cytosine  c. Guantine  d. Thymine 2. Related Issues  a. genetic counseling  b. genetic screening and discrimination  c. patening of genes   1) 
	inventions vs discoveries  d. privacy issues  e. genetic therapy (eugenenics)  f. cloning  h.theological issoes (free will)
	Case for Physician-Assisted Suicide?  By James F. KeenanA. Issues of Gender Inequalitiy 1. Due to issues of depression and poverty 2. 	o	186-
	Enuthenasia becomes not an issue of `autonomy or rights, but with social failure'B. Pain Relief 1. There are pain relief techiquesC. Voluntary 1. 
	Issues in the Netherlands seem to indicate active euthanasia policies.
	Issues in Contemporary Christian Ethics : The Choice of Death in a Medical Context  by Margaret A. FarleyA. Passivism in the early church 1. 	o	193-205
	Justin Martyr  a. `The Christian must not resist attack' 2. Origen  a. 'the Christian Lawmaker must not allow killing' 3. Ambrose  a. the taking of life is 
	not justified even for self defence. 4. Attitude toward war and generally one of pacifism.B. Underlying Issues 1. We don't own our life. 2. Human life
	 is both good and badC. the limits of preserving life 1. Personal integrety, moral, and religious witness 2. Conflict between human lives. 3. Individual
	 autonomy 4. Quality of life. 5. Meidcal futilityD. Reasons why we ought not take our own life 1. Our life is not our own 2. The law of nature is to 
	preserve life 3. We are essentially social beingsE. Social Consequences in allowing euthanasia 1. Produces a slippery slope 2. Possible risk of 
	medical error 3. --&gt; crisis of professional identityF. Possible Recommendations 1. Clarify the meaning and e
	… some have recognized in human `nature' itself a basic drive toward life, a desire to live, indicative of a moral 'law', and obligation to preserve -	195
	human life.
	If the sting of death is sin, the sting of dying is solitude… desertion is more choking than death, and more feared. The chief problem of the dying is -	204
	how not to die alone. -Paul Ramsey
	Thursday, October 20, 2011	Page 41 of 76
	Moreover, the central importance to the good society is tolerance and respect for differing moral perceptions.-	204
	The curtain only rises : assisted death and the practice of baptism  by Martha Ellen StortzA. three tenor of debates in euthenasia 1. `Death involves	o	205-216
	 right and autonomy, choice and control' 2. 'Death is highly physicalized and medicalized 3. 'Death is a private matter.'
	Lingering in pain, suffering, and isolation constitutes the worse imaginable end.-	206
	Oregon became the first state in the union to permit assisted death.-	207
	Baptism brings beginning and ending of human life together with sacramental power.-	212
	… not rights, but relationships mark the Christian life… relationships that will sustain and nurture, admonish and challenge, support us in living -	214
	and accompany us through death.
	Sources for Body Theology   by James B. NelsonA. An Anglican approach 1. Scripture 2. Reason  a. Checks our own narrow and arbitrary 	o	276-285
	interpretations. 3. Tradition  a. Checks our own interpretation against the richness of the past. 4. Experience  a. A personal touchB. Scripture 1. 
	What did it say 2. what does lt say 3. NT  a. No sex ethic only love  b. A culture of   1) purity   2) property  2. OT   a. No consept of orientation.C. 
	Tradition 1. No clear answerD. Reason 1. Oreantations are given not chosen
	The Homosexual movement: a response   by P. RamseyA. A beginnidg in the sexoal revelutionB. Heterosexual normC. The movement claims	o	285-292
	Rathar than proclaiming loud, dogmatic slogans about the Bible, we might do better to consider the odd and intimate ways in which we have each -	31
	been lead to where we are in our relationship with the scriptures.
	I. Biblical Authority (Walter Brueggemann)	o	31
	A judgement grounded in anxiety, anywhere on the thological spectrum, deos not what to be disturbed or informed by facts on the ground.-	35
	…The reading of the bible is now expecially urgent because our society is sore tempted to reduce the human project to commodity. In its devotion -	37
	to the making of money it reduces persons to objects and thins human communications to electronic icons. Technique in all its military modes and 
	derivatively in every  other mode treatens us. Technique is aimed at control, the fencing out of death, the fecing out of gift, and eventually, the 
	fencing out of humanness.
	When Generosity is not enough   by Ellen T. CharryA. Intro. 1. Christians tend to be a bit ambivalent about money. 2. Not all poverty is the same.B.	o	394-403
	 Reconsidering help for the poor 1. Types of Help  a. Business   1) a shift from donation to enterprise.   2) exporting democracy  b. faith-based 
	initiatives   1) ones inner life and social skills  c. welfare 2. A need to move past `anger, resentment, and fear.  a. education and child development is 
	key  b. because it leads to alianation.  b. faith, school, and family.   1) 'men need job security' -398. Why just men?  3. Intellect, social skills, 
	interperosnal skills, personal discipline, strong motivation.C. Christian Contributions 1. Christian Self esteem grounded in God
	… poor… because they lack the skills and styles needed to enter the mainstream.-	401
	… [Economic] development entails much more than producing goods and services-	403-404
	Catholic Social Teaching   by Oliver F. WilliamsA. Communitarianism 1.	o	403-411
	It is not wrong to want to live better-	406
	Thursday, October 20, 2011	Page 42 of 76
	To have and have not  by Michael LindA. Two major classes in America 1. Credentialed minority  a. making a living from fees supplemended by 	o	411-416
	stock options 2. Salaried salariedB. Causes of disparities 1. Immigration 2. Tax reform 3. Free Trade
	Christian Theology and Development   by Gnana RobinsonA. Pyramid 1. Pattern on dominance and dependenceB. Ladder 1. Under-development 	o	420-423
	countries must imitate the developed countriesC. Life-Boat 1. `white mans burden'D. Piece of the Development Pie 1. Ever-increasing production 2. 
	Overlooks need for justice and resouce limitationE. Just Relations 1. Based on self-reliance and welfare to all.
	Christian theology demands that all people enjoy the God-Given blessings of creation equally, because all are created in the image of God and all -	422
	are given the privilege of enjoying this creation equally.
	The Church and Marriage: Looking for a New Ethic   -by Jean Ponder SotoA. The Second Vatican Council stated two reasons for sex 1. The 	o	55
	procreation and education of children 2. The mutual love and support of the spousesB. Our concept of marriage comes from greco-roman society. 
	1. A citizens duty to have children 2. Marriage a social contract.C. Sexual Intimacy as Aestetic 1. Something like art
	Common Decency : A New Christian Sexual Ethics   -by Marvin M. EllisonA. The Contexts for sexual ethics 1. Responsibility should become the 	o	59-65
	norm for christian ethics. 2. If the church will take social justice seriously, it must also take sexual injustice and oppression seriously 3. All cultures 
	organizes erotic life. 4. The church must choose between security and fullness.B. An Ethic of Common Decency 1. Justice in the relationship 2. 
	Reclaiming the joys of sex in relationships  a. staying in touch with our sences 3. Celebrate all sexual relations  a.  whenever they   1) deepen human 
	intimacy   2) deepen love  b. celbrate the plurality and respect differences. 4. Fidelity  a. `honoring and responding fairly to the demands of a 
	relationship'  b. cannot be predetermined in any relationship 5. What is a 'marriage'  a. persons committed to eachother experiencing mutual benefit 
	arising from mutual devotion and affection.C. What is ruled out? 1. Relations in which persons are abused, exploit
	And Christian sprirituality without erotic passion is lifeless and cold. It is also borning.-	65
	Love your enemies    by karen LebacqzA. Rape 1. 1/3 of woman are raped 2. Links sex and violence 3. Socialization of sex sterlotypes.B. A Christian 	o	65-74
	ethic must address this 1. Sex steriotypesC. Loving your enemy 1. Forgiveness and repentence 2. Survival 3. “...forgive... Only if  he achnodoges 
	wrong-doing, repents, and seeks a new relationship free from power, domlnation, and violence`</pre>
</div>
<div title="Motivation and Personality" creator="Justin" modifier="Justin" created="201109230025" tags="Non-Fiction 153" changecount="1">
<pre>Motivation and Personality by Abraham Maslow
ISBN : DBID: 0801

READING DATES: 04/16/2005 – 

GRADE: A

NOTES:

I.	Hierarchy of Needs
A.	Safety Needs
1.	Wanting a Predictable, orderly world
2.	“Frantic clinging = a role of protector –87
3.	Preference for the familiar
4.	Unsafe man feels as if disaster is always intending
5.	A healthy taste for the novel or unknown.
B.	Esteem Needs
1.	Types
a.	Adequacy
b.	Prestige
2.	“The most stable and therefore most healthy self esteem is based on deserved respect from others.” -91
II.	Self Actualizing People
A.	Characteristics
1.	Acceptance
a.	With a &quot;stoic style&quot;
b.	Feel bad when what should be isn’t what is.
2.	Spontaneity
a.	&quot;Behavior marked by simplicity and naturalness.&quot;
b.	Unconventionality is necessary
c.	&quot;Inner Attitude&quot;
d.	&quot;relatively autonomous and individual rather than conventional&quot; ; but are the &quot;most ethical of people.&quot;
e.	May feel like &quot;spies…in a foreign world.&quot;
f.	The distinction of living and preparing to live.
g.	&quot;The attempt grow to perfection and to develop more and more fully into their own personal system.&quot;
3.	Problem-Centering
a.	Rather than ego-centered
b.	Visionary = able to see the whole picture
4.	The quality of detachment; the need for privacy
a.	As opposed to the dichotomy introvert-extrovert
b.	Find it easy to be aloof, reserved, calm, and serene
c.	Intense concentration --&gt; absent-mindless and oblivious
d.	In social relations &quot;certain troubles and problems&quot; creates &quot;coldness, snobbishness, lack of affection, unfriendliness.&quot;
B.	Love in Self-Actualizing People
1.	Dropping of defenses
2.	Sexuality
a.	Sex for intimacy; not for the act.
b.	Absence of sex more easily tolerated
3.	The pooling of needs
4.	Fun and gaiety in healthy love relationships.
5.	Respect for the others individuality
a.	“The love of a person implies, not the possession of that person, but the affirmation of that person. It means granting him, gladly, the full right to his unique manhood.” –H. Overstreet
b.	Love as an affirmation of others.
c.	Respect: Acknowledging him as in independent entity and as a separate and autonomous individual.
d.	The so-called signs of respect actually patriarchal protectionism.
6.	Love as an end experience
a.	Admiration ask for nothing and gets nothing.
b.	“He watches and stares with an innocent eye, like a child who neither agrees nor disagrees, approves nor disapproves, but who… simply lets it come in and achieve its effects. –254
c.	One falls in love by awe, overwhelmed by the experience, and loves it.
d.	“They love because they are loving persons.” –256
7.	Detachment and individuality
a.	“Healthy selfishness: A great self-respect, a disinclination to make sacrifices w/o a good reason.
8.	Greater taste and Perceptiveness of Healthy Lovers
a.	“The can perceive truth and reality far more effectively than the average.” –257
b.	Prefer Family; not random People
c.	“Physical imperfections … are less important to healthy people than are character defects.”’
d.	Easier to fall in love with simple people
e.	“They are intuitively, sexually, impulsively attracted to people who are right for them by cold, intellectual, clinical calculation.”

III.	Unmotivated and purposeless reactions
A.	Causation Theory
B.	Motivation  determination
C.	Need Gratification
D.	Habits
1.	“Effects of Familiarity”
E.	Stereotypes
1.	Easier to put into box
2.	“Premature freezing of conclusions.” –295
F.	Growth motivation vs. deficiency motivation
G.	“Freudian slips, tics, and free association.”
H.	Behavior is a means to get things done.

</pre>
</div>
<div title="Mount dragon :" creator="Justin" modifier="Justin" created="201110040111" modified="201110151412" tags="Fiction 813 B y2011" changecount="2">
<pre>MOUNT DRAGON
by Douglas Preston and Lincoln Child.

Read: Aug. - Oct. 2011

Grade: B

</pre>
</div>
<div title="On Moral Duties" creator="Justin" modifier="Justin" created="201109230013" modified="201109230035" tags="Non-Fiction 188" changecount="2">
<pre>On Moral Duties by Cicero
DBID: 0022

GRADE: A

1. &quot;Nothing is more generally useful than the principles of duty.&quot;
Duty has two sides:
The Sovergn Good
Practical Rules: The Division of Duties
Ordinary: Adequate reasoning can bring
Perfect: What is right?
4.
&quot;The Distinctive facility of man is his eager desire to investigate the truth.&quot;
&quot;A well constituted character will bow to no authority but that of a master of a just and legitamate who aims at the public good.&quot;
16. Brotherhood of Ethics
	-Human Race
&quot;The Brotherhood of the entire human race&quot;.
17. &quot;That when good men of like charactr become one, their we find the strongest union when two men have the same tastes and same desires, each loves his neighbor as himself, and the ideal of pythagoras is realized; the two friends become one.&quot;
“Put when good men of like character become one, their we find the strongest unions … When two men have the same tastes and same desires, each loves his neighbor as himself, and the ideal of pythagoras is realized; the two friends become one.”

20. Fortitude
Indifferent of outward circumstances
Brave, staying on focus


21. 
	“Whatever we undertake, the most though preparation is necessary.” 

36. Two kinds of beauty
1)	Grace and Dignity
2)	But simply be moderate

      Two kinds of thought
	Appetite  Action
	Thought  Truth

37. Speech
1)	Discorse
a)	Science of Rhetoric
2)	Conversation
      Rules for Rhetoric
	-Voice be clear and pleasant
      Rule of Conversation
	“Let us put forward our opinions in an easure tenative way and not without a spice of humor”
	Don’t monopolize conversation

39. Sound Principle
	“That in our conduct we should be free from passion or wild irrational feeling”
	“Exibit respect and concideration for those who we converse.”
	“Guard against extravagence and excessive display.”
	“Never go to excess, but let moderation be your guide.”
      Undertaking an action
1)	Must be subject to reason
2)	Don’t take it personally
3)	Observe Moderation
40. 
	Moderation = “Science of accuratly disposing our words and deeds.”
	Doing the right thing at the right time.

41. 
	Listen to others: learn from them.
	“Let us respect, uphold, and maintain the great family of the human race.”

42. “Dishonesty is the most shameful thing in the world.”

43. The Four divisions of honor
1)	Prudence
2)	Fellow-Feeling
3)	Fortitude
4)	Temperance

44. “The study and contemplation of the universe would seem stunted and imperfect if it did not result in action.
</pre>
</div>
<div title="On the Brink of Civil War" creator="Justin" modifier="Justin" created="201109230010" modified="201109230010" tags="Non-Fiction 973" changecount="2">
<pre>NOTES: 

CH. 1: Storm Clouds Rising
-----
-North wanted new territory from the Mexican War to be non-slavery; South wanted territory slave while allowing the states to be carved out if it in the future to choose when the time came.

CH. 2
----
I. Calhouns' Proposal: Territories are common property; and congress cannot impose laws on them. The only laws that can be imposed are the ones that the territories themselves impose.
II. Five issues relating to Slavery
 A) California
  1) If amitted; would destroy the balance of in the Senate. Most imagrants were Northern.
 B) New Mexico and Utah Territory
 C) Texas
  1) Claimed territory from New Mexico; some of it being federal property.
  2) Texas was slave
 D) Slavery and Trade in D.C.
 E) Fugitive Slaves
  1) Though a law requiring slaved be bought to their owners was signed from the beginning; northern states never followed it.

CH. 5: &quot;The Star of the West&quot;
----
I. Great People of the Senate = Daniel Webster (MA), John C. Calhoun (SC), Henry Clay.
II. Clays' &quot;Comprehensive Scheme&quot; (75)
 A. California admitted w/o any restrictions (that is, free)
 B. All other territories w/o provisions of slavery would be left alone)
 C. Texas reliquish clame to NM territory, in which case the federal government would assume Texas's public debt.
 D. Slavery allowed but slave trade banned in D.C.
 E. Congress have no power over slave trade in the U.S.
 F. Fugitive Slave Law would be tightened.

---------------------------------------------------------

The &quot;problem of the South&quot; (189)
-Slavery
-Free Trade
-State Slavery

Calhoun= Gov't interfearence in the south
-Unfair tax burden of southern 
-New Ordinance
-Missouri Compromise
-New Territories
 -Territories must be organized by congress; not the people of the territory.
__________
          |
MEMORABLE |
QUOTES    |
__________|
&quot;I shall not place myself in any leading position. But I shall seek to be a calm and quiet looker on, rarely speaking and when I do endevering to throw oil on the trouble waters.&quot;
DBID: 0018
</pre>
</div>
<div title="Opening the Bible /" creator="Justin" modifier="Justin" created="201110222054" tags="220 Non-Fiction" changecount="1">
<pre>Source	NoteType-uote
	In the end, God`s truth is to be found not in the book, but in the presence of the risen Christ, recognized in the breaking of the bread.-	13
	Thursday, October 20, 2011	Page 47 of 76
	For now, just notice that the gospel writer (rf. LK. 4:16) does not say explicitly that Jesus read the Isiah scripture aloud. Of course, the episode -	17
	makes no sence unless he did.
	Writing a letter using a famous name seems odd and dishonest to us, who are so used to grappling with issues of copyright, plagiarism, and -	29
	intellectual property. But the practice was quite common in the ancient world, and was considered a way f honoring the memory of a movement`s 
	… lecturn carved to resemble an eagle, symbolizing God`s saving word soaring above the congregation	f	3
	When Jesus read in the synagogue, it is possible that he used the Targum [Arabic translation/parahrase of the Hebrew Scriptures) as the starting -	35
	place for his dramatic reinterpretation of Scripture.
	By the end the second century, this new approach to the Hebrew Bible (midrash) had caused an all but irreparable rift between Jew and Christian in -	40
	their reading of the sacred texts they shared.
	Of all the names [for God: El, El Shaddai, Adonai, Elohim, Yahweh], it is this last one -- Yahwey, or more precisely, the Hebrew equivalent of the -	45
	letters YHWH -- that is the most sacred in the tradition. Every time the word YHWH appears in the original Hebrew, the NRSV translators, using a 
	centuries-old typographical convention, signal the occurrence with the word LORD, using all uppercase letters
	I. The Bible A. Reading the bible responsibly  1. The context of public worship  2. The context of ancient cultures and languages in which thee bible	o	6
	 first was written and published.  3. The context of tradition, expecially the first four centuries of Christian believing, when characteristically 
	Christian methods of reading the Bible began to take coherent shape.  4. The context of almost two thousand years of intellectural, scientific, 
	religious, and social change, in the midst of which, in diverse times and places, Episcopalians have wrestled with the meaning of the Bible in our 
	lives B. Citing Chapter and Verse  1. Began with the Rabbi Nathan in the middle ages  2. Further exteded by humanist scholar Robert Estienne in 
	1551. C. Midrash  1. `The central conviction … that God's voice, hidden in the sacred text, can be heard in the midst of human voices reading the 
	text.  2. Allegorical reading.   a. '… he [paul] neglects the specifics of language and context in order to reveal the rea
	It is our history, the history of God`s continuing actions among us - a history of God's relationship with humanity in Jesus the Christ that is at once-	8
	 cosmic and intimate, both timeless and immediate. Though our baptism, we laim God's history as our own.</pre>
</div>
<div title="Our endangered values" creator="Justin" modifier="Justin" created="201109230059" modified="201109230426" tags="Non-Fiction 306" changecount="3">
<pre>&lt;html&gt;&lt;cite&gt;Carter, Jimmy. 2005. Our endangered values: America's moral crisis. New York: Simon &amp; Schuster.&lt;/cite&gt;&lt;/html&gt;

Chapter 1: America’s Common Beliefs - and Strong Differences
“This deterioration in harmony, cooperation, and collegiality in the Congress is, at least in part, a result of the rise of fundamentalist tendencies and their religious and political impact.” -8
	
“What are the results of this profligate ownership and use of guns designed to kill people?” -13

“As with almost all other citizens, however, my private life has been the major factor in shaping my own opinions and my personal reactions to the collective views of others.” -15
This is a nice disclaimer that I think all people must acknowledge.

CHAPTER 2: MY TRADITIONAL CHRISTIAN FAITH
“Pastors... were empowered only to serve others... Local pastors were to be servant ministers and not masters of their congregation.” -17-18

“‘You only need two loves in your life: for God, and for the person in front of you at any particular time.” -23

I believe that anyone can be successful in life, regardless of natural talent or the environment within which we live. This is not based on measuring success by human competitiveness for wealth, possessions, influence, and fame, but adhering to God’s standards of truth, justice, humility, service, compassion, forgiveness, and love.” -28 
</pre>
</div>
<div title="Outposts :" creator="YourName" modifier="YourName" created="201111192320" modified="201111192325" tags="Non-Fiction 910 y2011" changecount="8">
<pre>Outposts : journeys to the surviving relics of the British Empire / [by] Simon Winchester. -- New York : Perennial, c2003. -- xxiii, 362 p. -- ISBN 0060598611.

CH. 2 : British Indian Ocean Territory and Diego Garcia
*The forced removal of the native population of Diego Garcia
CH. 3 : Tristan //A description of the very small community//
*&quot;Rules, the British belive, are the essentials of an ordered society.&quot; -88
*The evacuation due to the volcano eruption.
</pre>
</div>
<div title="Palmistry" creator="Justin" modifier="Justin" created="201109230026" modified="201109230027" tags="Non-Fiction 133" changecount="2">
<pre>Palmistry  |
DBID: 0823 |
-----------

READING DATES: 07/11/2005 - 07/22/2005

NOTES

I. INTRODUCTION
 A. Your hand is a map that moves.
 B. Palmistry is as ancient as humanity itself.
 C. Good sight, good light, good concentration, and intuition are the keys to good palm reading.
 D. Unless you're really good at getting outside yourself, your own hand will only tell you what
    you want to hear. An objective
    palm reader may do better at
    revealing your deepest self to
    you. 

II. ABOUT HANDS
 A. Robin's Rules of Order
  1. Thumb, then other fingers,
     including shape, direction
     (bend), nails.
  2. Head, heart and life lines, 
     expecially their arc, clarity,
     color, and texture.
  3. Other lines of significance and 
     what's wrong.
  4. The mounts
   a. strengths
   b. talents
  5. Both hands: what's strong in the
     secondary suit.
  6. Timing: the subject's present
     age and how soon it is to the 
     next birthday.
  7. Color, texture, and size.
 B. Types of Hands
  1. Active
   a. Dominate
  2. Inactive
   a. Passive 
 C. Shapes of Hands
  1. Elementary Hand
   a. Characteristics
    1) Nature-loving, physical
   b. Hand shape
    1) Large 	
   c. Fingers
    1) Short and stubby
    2) square tips
   d. Palm
    1) Rough-textured
    2) very firm
   e. Appearance
    1) Coarse
   f. Lines
    1) Very few clear ones
    2) generally straight
    3) not often long
     a) except life line
   g. Astrological Sign
    1) Taurus
  2. Practical Hand
   a. Characteristics
    1) reliable, persistent
   b. Hand shape
   c. Fingers
   d. Palm
   e. Appearance
   f. Lines
   g. Astrological Sign
  3. Spatulate Hand
   a. Characteristics
    1) confident, mechanical, handy
   b. Hand shape
   c. Fingers
   d. Palm
   e. Appearance
   f. Lines
   g. Astrological Sign
  4. Conic Hand
   a. Characteristics
    1) Imaginative, intuitive
   b. Hand shape
   c. Fingers
   d. Palm
   e. Appearance
   f. Lines
   g. Astrological Sign
  5. Philosophical Hand
   a. Characteristics
    1) extroverted, extravagant
   b. Hand shape
   c. Fingers
   d. Palm
   e. Appearance
   f. Lines
   g. Astrological Sign
  6. Psychic Hand
   a. Characteristics
    1) Spritual, idealistic
   b. Hand shape
   c. Fingers
   d. Palm
   e. Appearance
   f. Lines
   g. Astrological Sign
  7. Mixed Hand
   a. Characteristics
    1) Fexible, socialble
   b. Hand shape
   c. Fingers
   d. Palm
   e. Appearance
   f. Lines
   g. Astrological Sign
</pre>
</div>
<div title="Peaceable Kingdom, The." creator="Justin" modifier="Justin" created="201110222055" tags="?" changecount="1">
<pre>	Source	NoteType-uote
	I. A qualified Ethic  -by Stanley HauerwasA. What is a qualified Christian ethic 1. Recognition that we are sinners.B. Rules and Obligations 1. 	o
	Differing ideas  a. Plato/Aristotle: secondary to virtues  b. Represent a consensus about what is good for society  c. Kant: requirements of action  
	d. John Stuart Mill (utilitarians): generalizations of experience of what gives the greatest good to the greatest number of people. 2. Types  a. 
	Teleological: What is right or wrong is determined by consequences  b. Deontological: rightness or wrongness in the act itself.  c. common 
	assumptions btw the two:   1) morality founded during a particular problem.   2) Moral systems need to be cohearantC. Problems of an unqualified 
	ethic 1. No contextD. Importance of Contexts 1. Narrative is fundamental to us as contingent beings 2. Brings out our awareness of historical 
	beings 3. Revelation of God through narrative
	Thursday, October 20, 2011	Page 48 of 76
	II. On being Historic : Agency, Character, and Sin -by Stanley HauerwasThesis: form by having a well-formed character.A. essence of freedom 	o
	comes from accepting our reality.
</pre>
</div>
<div title="Philosophy :" creator="Justin" modifier="Justin" created="201110222056" tags="190 Non-Fiction" changecount="1">
<pre>	Source	NoteType-uote
	III. PlatoA. Basic Philosophy 1. Things pass before our view and we must discover why. Mathematics, because it is void of particulars, is how its 	o
	done 2. The World of Ideas  a. True Knowledge 4. World of Appearances  a.. Opinions  b. PhenominasB. Biographical Information 1. Born in athans
	 428 2. Philosophers concern w/ nature of thingsC. Theory of Knowledge 1. Cave anology  a. People only see shadows  b. Education shows them 
	the light 2. The Divided Line  a. Four stages of Development  b. Relation btw form and things   1) Forms causes things   2) Thing participates in 
	form   3) Thing imitates form  c. How we know forms   1) Recollection   2) DesireD. Moral Philosophy 1. The Soul (conflicts that go on within a 
	person)   a. Parts    1) Reason    2) Spirit    3) Appetite  2. Evil   a. The soul forgetting the form   b. Harmony unity w/ form   c. False v.s. True 
	Knowledge  3. The good life is ifficient functioning of thingsE. Political Theology  1. Comes out of Human economic needs  2. Appr
	Four stages of Development                                 |                 Objects                   |    Modes of Thought 	s
	____________________________________________________________ Intelligible World    |             The Good (Forms)      |     Knowledge 
	(Knowledge)          |      Mathematical objects         |     Thinking ____________________________________________________________       
	Visible World |                   Things                     |     Belief       (opinions)       |                  Images                      |    Imagining
	Divisions of the soul and classes   Class      |   Soul-----------------------------Craftsman | Appitites Articians  |-----------------------------Gardians   |   Spirit----	s
	---------------_---------  Rulers     |  Rational
	IV. AristotleA. Biography 1. Accredited contributions to:   a. Socrates: inductive arguments and universal difinitions   b. Plato: development of 	o
	forms and matter.A. Logic 1. Syllogism 2. Kinds of Reasoning  a. Dialectic (opinions generally accepted)  b. Eristic or Contentious Reasoning   1) 
	Opinions which seem generally accepted but are not really.  c. Demonstrative (premesis are true and primary)  d. Arriving at archai (observation and
	 induction)B. Metaphysics 1. `Science of first knowledge' 2. 'All people desire to know' 3. The Question  a. 'What does it mean to be anything 
	whatsoever?' 4. The Substance of the Predicate 5. Matter and Form  a. For Plato, they are Seprate
	I. Socrates` Predecessors: Philosophy and the Natural OrderA. Background Info 1. Birthplace of philosophy was the town of Miletus 2. Hubris: 	o
	Punishing people for lack of moderation 3. Hesiod ascribed to the gods and the universe moral consistency 4. Basic question: What are things 
	made of?B. Philosophers bf Socrates 1. Thales of Miletus  a. ~600 BC  b. Answer to basic question: Water  c. Shifted answer to mythological base 
	to a scientific one  d. Thought earth was flat disc floating on water 2. Anaximander  a. Answer to basic question: an indefinate or boundless realm  
	b. Cosopology   1) Earth was cylindrical    2) Living things came from sea to dry land.   3) Believed in many worlds. 3. Pythagoras  a. everything 
	consisted of numbers   1) music  b. three different kinds of people   1) those who make a profit   2) those who compete   3) those who are spectators 
	 c. platonic controbutions   1) the importance of the soul   2) the souls three-fold division   3) importance of mathematics  4
	V : Classical Philosophy after Plato  A. Four groups of  Philosophers  1. epicureans   a. relied on democritus   b. look towards apathy  2. stoics   a. 	o	105-
	heraclitus notion of a fiery substance   b. control reactions of external affairs   3. skeptics   a. sacratic form of doubt   b. preserve freedom by 
	refaining to commit to a belief  4. neoplatonists    a. drew heavily from plato.   b. salvation through mystical union with god.  5. The new 
	philosophers lead people to think in more personal terms.  6. History   a. Peloponnesian War made greece into a roman colony. With a lack of ability
	 to control external affairs, people began looking inside.B. Epicurus: Perfecting the Pleasure Principle 1. Epicurus  a. born 342 bce on samos  b. 
	I. David Hume A. Introduction  1. B. in Edinburg, 1711. D. in Edinburg, 1776.  2. Gave empiricism its clearest and most rigorous formulation.  3. 	o	254-279
	Wrote A treatise of human nature and Essays moral and political.  4. Wanted to build a `science of man'
	Thursday, October 20, 2011	Page 49 of 76
	Hume… concluded that if we take seriously the premise that all our ideas come from experience, we must accept the limits to knowledge that this -	271
	explanation of ideas forces upon us, no matter what our customary beleifs may suggest.
	II. Socrates and the Sophists A. Sophists  1. Scepticle of any abolute truth   a. due to knowledge of different cultures  2. Protagoras   a. no way of 	o	28-43
	distinguishing btw appearance and reality   b. moral judgements completely relative
	XVI. Kant A. Bio.  1. Lived in Konigsberg, East Prussa  2. Family known as Pietists  3. Major work: CRITIQUE OF PURE REASON B. Kants 	o	289-
	Philosophy 1. The problem  a. we admire the heavens above (external) and the moral law withing.  b. necessity v.s. freedom. 2. Science raised two 
	major problems  a. the threat of everything being absorbed into a mechanical universe.  b. explanation and justification of scientific knowledge 3. 
	`though our knowledge begins with experience, it does not follow that all arrises out of experience' C. Judgement  1. An operation of thought 
	whereby we connect a subject and a predicate' -294  2. analytic   a. already contained in the subject
	XXIV. Existentialism A. basic philosophy: `to what end is their work… useful?' B. Soren Kierkegaard  1. Bio   a. trained in hegal's philosophy at the 	o	443-
	Univ. or Copenhagen.   2. Thoughts on Existence   a. just for the individual human being.   b. to think = spectator
</pre>
</div>
<div title="Pride and Prejudice" creator="Justin" modifier="Justin" created="201109230034" tags="Non-Fiction 813 A" changecount="1">
<pre>Notes - Pride and Prejudice

*
s ch 1

*
q: &quot;Mr. Bennet,&quot;&quot;

*
q: &quot;Mrs. Long&quot;
-.selfish women -2 nieces
*
q : &quot;&quot;Do not you want to kn&quot;
&quot;&quot;Do not you want to know who has taken it?... &quot;&quot;You want to tell me, and I have no objection to hearing it.&quot;&quot;
[Pride and Prejudice]
*
f : &quot;Mr. Morris&quot;

*
f &quot;Sir William and Lady L&quot;
&quot;Sir William and Lady Lucas&quot;
[Pride and Prejudice]
*
S ch 2

*
f : &quot;Lizzy.&quot;&quot;
-2nd daughter
*
f &quot;Kitty,&quot;

*
q&quot;One cannot know what a&quot;
&quot;One cannot know what a man really is by the end of a fortnight.&quot;
[Pride and Prejudice]
*
f &quot;Mary?&quot;

*
f : &quot;Lydia,&quot;
-youngest
*
 f &quot;Hertfordshire;&quot;
&quot;Hertfordshire;&quot;
[Pride and Prejudice]
*
f &quot;Mr. Bingley&quot;

*
f: &quot;Mr. Hurst,&quot;

*
f : &quot;Mr. Darcy&quot;
-proud, disagreeable
*
q : &quot;You know how I detest&quot;
&quot;You know how I detest it, unless I am particularly acquainted with my partner.&quot;
[Pride and Prejudice]
a shy man
*
f: &quot;Jane&quot;

*
f &quot;Longbourn,&quot;
-where they lived
*
q &quot;&quot;He is just what a you&quot;
&quot;&quot;He is just what a young man ought to be,...sensible, good-humored, lively...He is also handsome,&quot;&quot;
[Pride and Prejudice].
*
q: &quot;Miss Bennet he acknowl&quot;
&quot;Miss Bennet he acknowledged to be pretty, but she smiled too much.&quot;
[Pride and Prejudice]
*
f: &quot;intimate. Sir William&quot;
&quot;Sir William Lucas&quot;
[Pride and Prejudice]
*
f. : &quot;Charlotte,&quot;&quot;
&quot;well, Charlotte Lucas.&quot;
[Pride and Prejudice]
*
q : &quot;Happiness in marriage&quot;
&quot;Happiness in marriage is entirely a matter of chance.&quot;
[Pride and Prejudice]
*
q : &quot;A lady's imagination i&quot;
&quot;A lady's imagination is very rapid; it jumps from admiration to love, from love to matrimony, in a moment.&quot;
[Pride and Prejudice]
*
f: &quot;Catherine and Lydia,&quot;
&quot;Catherine and Lydia,&quot;
[Pride and Prejudice]
*
s ch.8
-gets sick at mr. Dublies house.
*
p. 101 : &quot;&quot;I deserve neither suc&quot;

*
p. 101 : &quot;&quot;I deserve neither suc&quot;

*
q&quot;&quot;I deserve neither suc&quot;
&quot;&quot;I deserve neither such praise nor such censure,&quot;&quot;
[Pride and Prejudice]
*
f: &quot;Pemberley,&quot;
&quot;Pemberley,&quot;
[Pride and Prejudice]
*
s ch 9
-elizabeth and the sisters get into it.
*
q: &quot;&quot;You expect me to acco&quot;
&quot;&quot;You expect me to account for opinions which you choose to call mine, but which I have never acknowledged. Allowing the case, however, to stand according to your representation,&quot;
[Pride and Prejudice]
*
q: &quot;&quot;You used us abominabl&quot;
&quot;&quot;You used us abominably ill,&quot; answered Mrs. Hurst, &quot;running away without telling us that you were coming out.&quot; Then taking the disengaged arm of Mr. Darcy, she left Elizabeth to walk by herself. The path just admitted three. Mr. Darcy felt their rudeness, and immediately said&quot;This walk is not wide enough for our party. We had better go into the avenue.&quot;&quot;
[Pride and Prejudice]
*
q
&quot;&quot;How pleasant it is to spend an evening in this way! I declare after all there is no enjoyment like reading!  &quot;How much sooner one tires of anything than of a book!When I have a house of my own, I shall be miserable if I have not an excellent library.&quot;&quot;
[Pride and Prejudice]
*
q: &quot;But it has been the st&quot;
&quot;But it has been the study of my life to avoid those weaknesses which often expose a strong understanding to ridicule.&quot;&quot;
[Pride and Prejudice]
*
q : &quot;My good opinion once l&quot;
&quot;My good opinion once lost, is lost for ever.&quot;&quot;
[Pride and Prejudice]
*
q: &quot;&quot;And your defect is a&quot;
&quot;&quot;And your defect is a propensity to hate everybody.&quot;&quot;
[Pride and Prejudice]
*
q: &quot;She attracted him more&quot;
&quot;She attracted him more than he liked-&quot;
[Pride and Prejudice]
*
s ch 13
-collins visits. Acts like he's at a  meet market
*
q&quot;
&quot;and though he belonged to one of the universities, he had merely kept the necessary &quot;terms, without forming at it any useful acquaintance. The subjection in which his father had brought him up&quot;
[Pride and Prejudice]
*
p. 197 : &quot;and though he belonged&quot;

*
q: &quot;and though he belonged&quot;
&quot;She attracted him more than he liked-&quot;
[Pride and Prejudice]
*
q : &quot;&quot;They have both,&quot; said&quot;

*
s ch 17
-bennets get invited to a ball.
*
p. 267 : &quot;affirmative; and, unab&quot;
&quot;&quot;When you met us there the other day, we had just been forming a new acquaintance.&quot;&quot;
[Pride and Prejudice]
*
p. 274 : &quot;opportunity.&quot; &quot;I would&quot;
&quot;&quot;I would by no means suspend any pleasure of yours,&quot;&quot;
[Pride and Prejudice]
*
p. 293 : &quot;The expression of his&quot;
&quot;The expression of his face changed gradually from indignant contempt to a composed and steady gravity.&quot;
[Pride and Prejudice]
*
p. 295 : &quot;She looked at Jane, to&quot;
&quot;She looked at Jane, to see&quot;
[Pride and Prejudice]
*
p. 303 : &quot;Darcy said nothing at&quot;
&quot;Darcy said nothing at all.&quot;
[Pride and Prejudice]
*
p. 330 : &quot;From this day you must&quot;
&quot;Elizabeth. From this day you must be a stranger to one of your parents. Your mother will never see you again if you do not marry Mr. Collins, and I will never see you again if you do.&quot;&quot;
[Pride and Prejudice]
*
q : &quot;and that if she suspec&quot;
&quot;and that if she suspects the nature of my feelings for him, she means (most kindly!) to put me on my guard?&quot;
[Pride and Prejudice]
*
q
&quot;The stupidity with which he was favored by nature must guard his courtship from any charm that could make a woman wish for its continuance; and Miss Lucas, who accepted him solely from the pure and disinterested desire of an establishment, cared not how soon that establishment were gained.&quot;
[Pride and Prejudice]
*
q&quot;
&quot;done. I am not romantic, you know; I never was. I ask only a comfortable home; and considering Mr. Collins's character, connections, and situation in life, I am convinced that my chance of happiness with him is as fair as most people can boast on entering the marriage state.&quot;&quot;
[Pride and Prejudice]
*
q&quot;
&quot;Charlotte the wife of Mr. Collins, was a most humiliating picture!-&quot;
[Pride and Prejudice]
*
s ch 22
-charlot tells eliz of the marriage.
*
q&quot;
&quot;Elizabeth was the real cause of all the mischief; and the other that she herself had been barbarously used by them all:&quot;
[Pride and Prejudice]
*
s ch 23&quot;
-the fallout from the news
*
q&quot;
&quot;He may live in my memory as the most amiable man of my acquaintance, but that is all. I have nothing&quot;&quot;either to hope or fear, and nothing to reproach him with.&quot;&quot;Thank God! I have not that pain. A little time therefore- I shall certainly try to get the better.&quot;&quot;
[Pride and Prejudice]
[Pride and Prejudice]
[Pride and Prejudice]
*
p. 396 : &quot;either to hope or fear&quot;

*
p. 396 : &quot;Thank God! I have not&quot;

*
q&quot;
&quot;There are few people whom I really love, and still fewer of whom I think well. The more I see of the world, the more am I&quot;dissatisfied with it; and every day confirms my belief of the inconsistency of all human characters,&quot;
[Pride and Prejudice]&quot;
[Pride and Prejudice]
*
s ch 25
-jane agrees to go to the gardeners

*
p. 426 : &quot;My father, however, is&quot;
&quot;My father, however, is partial to Mr. Wickham.&quot;
[Pride and Prejudice]
*
q  &quot;What are men to rocks&quot;
&quot;What are men to rocks and mountains?&quot;
[Pride and Prejudice]
*
q : &quot;mind.&quot; &quot;Upon my word,&quot;&quot;
&quot;&quot;Upon my word,&quot; said her ladyship, &quot;you give your opinion very decidedly for so young a person.&quot;
[Pride and Prejudice]
*
q
&quot;introduction; but I am ill qualified to recommend myself to strangers.&quot;&quot;&quot;&quot;I certainly have not the talent which some people possess,&quot;&quot;
[Pride and Prejudice]
[Pride and Prejudice]
*
q : &quot;I do not know anybody&quot;
&quot;I do not know anybody who seems more to enjoy the power of doing what he likes than Mr. Darcy.&quot;&quot;
[Pride and Prejudice]
*
q: &quot;fearful of its being M&quot;
&quot;fearful of its being Mr. Darcy,&quot;
[Pride and Prejudice]
*
p. 630 : &quot;what chance could ther&quot;
&quot;Catherine, weak-spirited, irritable, and completely under Lydia's guidance, had been always affronted by their advice; and Lydia, self-willed and careless, would scarcely give them a hearing. They were ignorant, idle, and vain.&quot;
[Pride and Prejudice]
*
q: &quot;who would willingly ha&quot;
&quot;who would willingly have gone through the world without believing that so much wickedness existed in the whole race of mankind,&quot;
[Pride and Prejudice]
*
p. 679 : &quot;older.&quot; In vain did El&quot;
&quot;older.&quot; In vain did Elizabeth attempt to make her reasonable, and Jane to make her resigned.&quot;
[Pride and Prejudice]
*
s 42
-liz jabs wickham about Darcy
*
q: &quot;but where other powers&quot;
&quot;but where other powers of entertainment are wanting, the true philosopher will derive benefit from such as are given.&quot;
[Pride and Prejudice]
*
p. 711 : &quot;Mrs. Gardiner abused h&quot;
&quot;Mrs. Gardiner abused her stupidity.&quot;
[Pride and Prejudice]
*
s 44
 a new vision of darcy
*
p. 792 : &quot;In Darcy's presence sh&quot;
&quot;In Darcy's presence she dared not mention Wickham's name;&quot;
[Pride and Prejudice]
*
p. 812 : &quot;&quot;Good God! what is the&quot;
&quot;&quot;Good God! what is the matter?&quot;&quot;
[Pride and Prejudice]
*
p. 824 : &quot;Her affections had bee&quot;
&quot;Her affections had been continually fluctuating,&quot;
[Pride and Prejudice]
*
p. 920 : &quot;She became jealous&quot;
&quot;She became jealous&quot;
[Pride and Prejudice]
</pre>
</div>
<div title="Projects" creator="Justin" modifier="Justin" created="201109230412" modified="201109230431" tags="site" changecount="2">
<pre>&lt;html&gt;
&lt;!-- &lt;a href=&quot;http://dplopac.detroitpubliclibrary.org/uhtbin/cgisirsi/x/0/0/5?searchdata1=finding%20aid%20world%20wide%20web&quot; title=&quot;Finding Aids created from the SNAP project for Detroit Public Library. Accessable through Library Catalog. Click on link icon.&quot;&gt; Finding Aids &lt;/a&gt; &lt;br /&gt; --&gt;
&lt;a href=&quot;/projects/tiddlywiki/&quot; title=&quot;A personal reading log with notes using a non-linear wiki called TiddlyWiki&quot;&gt;My reading log&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;/projects/at&quot; title=&quot;An experimental interface (simple php hosted on my server; finding aids hosted on DPL's catalog server) to search the Archivists' Tookit SQL database.&quot;&gt;Finding Aid search engine #1&lt;/a&gt;&lt;br /&gt;
&lt;!--&lt;a href=&quot;http://www.google.com/cse/home?cx=016675791389865783747%3A6gzvgrd39sq&quot; title=&quot;Google custom search for DPL finding aids.&quot;&gt;DPL Finding Aid search engine #2&lt;/a&gt; &lt;br /&gt; --&gt;
&lt;a href=&quot;projects/research/home.html&quot;&gt; Research and resources &lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;/netjukebox/&quot; title=&quot;sign-in as 'anonymous' (no password) to view catalog.&quot;&gt; My Music Library &lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;/scuttle&quot; title=&quot;and yours too!  :) eMail me to sign up.&quot;&gt; My Bookmarks &lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;/openbiblio/special/kindle.php&quot;&gt;My Kindle books catalog&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;/openbiblio/opac&quot;&gt;My catalog&lt;/a&gt;&lt;br /&gt;
&lt;!-- &lt;a href=&quot;/wordpress&quot; title=&quot;A Wordpress blog on news and links about space flight and exploration.&quot;&gt;SpaceShelf&lt;/a&gt;&lt;br /&gt; --&gt;
&lt;a href=&quot;/streber&quot; title=&quot;An opensource social project manager.&quot;&gt;Streber&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://www.zotero.org/justinleetyler/items&quot; title=&quot;My Zotero library&quot;&gt;My Zotero Library&lt;/a&gt;&lt;br /&gt;
&lt;/html&gt;</pre>
</div>
<div title="Psychology and religion :" creator="Justin" modifier="Justin" created="201110222107" tags="200 Non-Fiction" changecount="1">
<pre>	God is an intimate matter of life and destiny.-	001
	Thursday, October 20, 2011	Page 51 of 76
	I. William James	o	001-033
	 A. Belief
	  1. There is no absolute way to know truth.
	  2. This leads to atheism; others to
	  3. Belief leads to `subjective energy', which leads to the 'highest good' -4
	  4. Because religion might be true, it follows that there is good reason to believe.
	 B. No single point of view can ever capture all of reality
	 C. Nature of Religious experience
	  1. Belief not a result of disorders
	  2. Religion doesn't have a single core
	  3. Spirituality essential
	   a. rather than institutional.
	   b. 'inner disposition' or 'personal religion'
	  4. The highest good is creating union with the 'unseen order'
	  5. Religion brings joy in life.
	   a. comes from letting go.
	  6. Conversion
	   a. feelings of personal powerlessness and bankruptcy
	  7. Saintliness, motivated by
	   a. abandonment of the self
	   b. letting go
	   c. percieved for what they are
	   d. belief in sacredness of human life
	  8. Mysticism
	   a. root of spirituality
	   b. states of consciousness -22
	    1) ineffablilty
	    2) transiency
	    3) passivity
	    4) noetic quality
	   c. Nature has special powers to awaken the mystic mood.
	   d. mysticism arrises in the subconscious.
	   e. revelations are direct perceptions of fact of other orders of truth
	  9. Primacy of feeling over intellect.
	   a. proofs for God become pointless if one has experienced God.
	Positivism	d	002
	Rationalism	d	002
	Absolutist	d	003
	Skepticism	d	003
	Empiricism	d	003
	Thursday, October 20, 2011	Page 52 of 76
	It is unreasonable to rule out faith as a pathto truth… when faith is part and parcel of truth`s creation.-	005
	Belief	d	006
	Passion	d	006
	Personal religion moves the individual to initiate personal, as opposed to ritual, acts.-	012
	Religion	d	012
	When in the course of time new original religious experience occures, it appears as unorthodox to the established church, which, according to -	014
	James, was born of just such experience.
	Ascenticism	d	021
	Religious Mysticism	d	023
	Science is grounded in reason, religion in mystical experience… both provide genuine access to an incredibly rich universe.-	025
	But pessimism, abandonment, and gloominess predominate, and the powers are unfriendly to life.-	025
	Supernaturalism	d	025
	Inspiration	d	028
	Twice-borness	d	028
	Salvation	d	029
</pre>
</div>
<div title="RELIGION AND PSYCHOLOGY." creator="Justin" modifier="Justin" created="201110222102" tags="200 Non-Fiction" changecount="1">
<pre>	Source	NoteType-uote
	III. Beverly Sinke	o
	 A. Bio
	  1. PH.D. 
	   a. disertation on peak experiences
	  2. Five kids, one died.
	  3. Diagnosed w/ cancer 1983
	  4. Book about confronting the issue.
	  5. Stay at home mom, got bored
	Thursday, October 20, 2011	Page 57 of 76
	IV. Faith Development (Fowler)	o
	 A. Stages of Development
	  1. Intuitive Projective
	   a. children dominated by fantasy
	   b. Begininnings of awareness
	  2. Undifferentiated faith
	   a. must have consistency of care
	  3. Mythic-literal faith
	   a. Legalism
	  4. Synthetic-conventional faith
	   a. Concerned with fairness and reciprocity
	   b. Abstractness
	  5. Individuative-Reflective faith
	   a. Sence of self
	   b. critical reflection
	  6. Paradoxical-Consolidated Faith
	   a. Re-work the past
	   b. evertything falls apart
	  7.Universalizing Faith
	   a. A sense of inclusiveness with everyone
	   b. A power to see diversity
	o
	Thursday, October 20, 2011	Page 58 of 76
	I. What is Psychology	o
	 A. Def.
	  1. Give more control over what we have no conrol of.
	  2. The science of mental life
	  3. How ppl behave ; looking at behavior.
	 B. Systematic and objective
	 C. Theoretical Perspectives
	  1. Nural-biological approach
	  2. Psycho-anolytic approach
	   a) keeps part of experience out of awareness.
	  3. Cognitive approach
	  4. Humananist
	   a. a/k/a Phenominological
	   b. Subjective
	   c. Individualistic
	   d. Self-actualization
	    a. Becoming all that you can be.
	    b. Enviroment to flurish
	 D. Areas of PSY
	  1. Expirimental
	  2. Socia 
	  3. Clinical
	  4. Developmental
	  5. And Others…
	II. What is Religion	o
	 B. Def.
	  1. Helps ppl appreciate what you cannot control
	  2. Framework of beliefs beyond yourself.
	  3. James `Religion is the feelings, acts in relation to their divinity.'
	  4. The belief of God, and the rituals directed toward that power.
	  5. Teachers definition : A search for significance in ways related to the sacred.
	 C. Awareness of the Several Traditions
	  1. Different ways to account for God; accessing the Sacred.
	  2. Varies in the way formed
	   a) expsed to a tradition
	   b) Active searching
	  3. Rituals become a way of knowing the world and understanding it.
	Religion and the clinical practice of psychology.
	Source	NoteType-uote
	Thursday, October 20, 2011	Page 59 of 76
	II. Faith development (William James)	o
	  by James Fowler
	A. We should address impact of faith on human action.
	B. Faith
	 1. An integral centering process
	 2. Functions
	  a. Coherence and direction
	  b. community
	  c. Provides a frame of reference
	  d. Prioritizes life
	 3. Stages of faith
	  a. Primal 
	   1. Infancy stage
	   2. Trust begins to form
	  b. Intuitive
	   1. early childhood
	   2. imagination w/o logic
	  c. Mythic - literal faith
	   1. childhood and beyond
	   2. imgaination with logic
	  d. Synthetic - conventional faith
	   1. Adolescence and beyond
	   2. 
	  e. Individuative - reflexive faith
	   1. internalization
	   2. young adulthood and beyond
	  f. Conjunctive faith
	   1. Early Midlife and beyond
	   2. embracing the polarities 
	  g. Universalizing faith 
	   1. midlife and beyond
	   2. grounded in a power of being.
	 C. Similarities btw fowler and James
	  1. Nonreductionistic and indirect
	  2. Empirical approach
	  3. Genetics underlying faith 
	  4. Pragmatic, functiona with evaluative criteria.
	  5. Pluralism in faith
	  6. Feeling and construing self
	  7. Grounding convictions  
	  8. James = twice-born. Fowler = once-born
	Thursday, October 20, 2011	Page 60 of 76
	XII. The religious dimension in psyc	o	327-364
	 A. Denominations
	  1. Judaism
	   a. emphisises orthopraxis
	   b. more likely to find free association and introspection useful
	  2. Catholicism
	   a. 20% of U.S.
	  3. Mainline Protestantism and Anglicanism
	  4. New scripture churches
	   a. Mormons
	    1) family oriented
	    2) coffee, tea, tobacco alcohal, and pre- or extramarital sex are prohibited -336
	   b. Christian Science
	    1) lack of medical treatment may lead to feeling of abandonment
	  5. Millennial churches
	   a. concerned about judgementalism or attack on their religion
	  6. Fundamentalist, Evangelical, Holiness, and Pentecostal.
	   a. Fundamentalists concerned w/ dispensational premillenialism
	   b. creation v.s. evolution
	   c. evangelicals willing to compromise w/ larger society more than fundamentalists
	   d. 4/5 of evangelicals find consolation w/ religion.
	   e. Holiness movement
	    1) first blessing (baptism, removal of original sin)
	    2) second blessing (eradication of sin)
	    3) third blessing  (baptism in the holy spirit)
	    4) decorous and restrained
	   f. pentecostal churches are vocal
	  7. African american churches
	   a. suffering as a message from God to change one`s ways
	  8. Islam
	   a. leading a &quot;modest, diginified, and satisfying life&quot; -342
	   b. Sufism reselmbles &quot;psychoanalytic ego psychology&quot;
	 B. The bible
	  1. Pay attention to translations, language qualities, and different aspects
	 C. Assessment of factors
	  1. Pargaments copping styles
	   a. self-directed
	   b. collaborative
	   c. deferring
	  2. Markers of Pathology
	   a. Self-oriented display
	   b. Religion as reward
	   c. Scrupulosity
	   d. Relinguishing responsibility
	   e. Ecstatic frenzy
	   f. Persistent church-shopping
	    1) indication of severe narcissistic vulnerability or object permanence
	   g. Indiscriminate enthusiasm
	Thursday, October 20, 2011	Page 61 of 76
	   h. tough love
	   i. Bible as moment-to-moment guide to life
	   j. spirit possession
	  3. A mature adjustment to religion
	   a. Awareness of complexity/ambiguity
	   b. choice in religious afiliation
	   c. Value-bases congruence
	   d. recognicion of shortcomings
	   e. respect for boundaries of religion/secular
	  4. Is religion the problem or solution?
	   a. a problems if atleast
	 D. Psychotherapy
	  1. Initial obstacles
	   a. developing a therapeutic alliance
	   b. religious beliefs and practices
	   c. client feels that faith has failed.
	    1) explore what is faith.
	  2. Client's religious issues
	   a. scriptural interpretation
	    1) explore clients understing of text
	    2) ask client to point out text
	    3) look at context
	    4) look at translations
	    5) exisialism
	  3. Therapists' personal background
	  4. Treatment of religious imagery
	   a. draw attention to parallells btw dream and story
	   b. explore clients overall theology
	Orthodoxy	d	331
	Orthopraxis	d	331
	Church	d	334
	Cult	d	334
	Sect	d	334
	`alims	d	343
-adis	d	343
	Thursday, October 20, 2011	Page 62 of 76
	Imam	d	343
	Shaykhs	d	343
	If somebody talks about direct communication with God or Satan, this is more likely pathological.-	347
	Scrupulosity	d	347
	… in Greek and Roman times, the common paradigm of a homosexual relationship (frequently involving slavery) was between an adult male and -	353
	young boy.
	theology	d	356
	… expressing feelings of love or affection for the therapist and is using the idiom of sexuality.-	357
	… trust is an outcome, not a precondition for therapy.-	357
	Thursday, October 20, 2011	Page 63 of 76
	XIII : Religion in Clinical Practice : Implicit and explicit integration	o	365-
	   by Siang-Yang Tan
	
	A. Implicit integration
	 1. A more covert approach
	
	B. Explicit integration
	 1. Orthodox Christians seem to prefer this.
	 2. Must be conducted in this atmosphere
	  a. clinically sensitive
	  b. ethically responsible
	  c. professionally competent
	 3. Ethical guidelines
	  a. dealing w/ problems would be helped by doing it.
	  b. working within clients belief system
	  c. an agreement to do so.
	
	C. Explicit integration techniques
	 1. Prayer
	  a. not only &quot;talking&quot;
	  b. therapist may impose:
	   1) imagery, script, or agenda
	 2. Scriputre
	  a. therapist may impose in authoritative way
	  b. be aware of interpretations
	 3. Referral to church or clergy
	
	D. Developing a mature and deep faith
	 1. Inward disciples
	  a. Mediation/prayer
	  b. fasting
	  c. study
	 2. Outward disciples
	  a. simplicity
	  b. solitdue
	  c. submisssion
	  d. service
	 3. Corporate disciples
	  a. confession
	  b. worship/celebration
	  c. guidance
	MT. 19:19	r	651
	MK. 12:31	r	651
	Thursday, October 20, 2011	Page 64 of 76
</pre>
</div>
<div title="Reading Log" creator="Justin" modifier="Justin" created="201109230006" modified="201110210044" tags="site" changecount="50">
<pre>|Title|Author|Pub. Date|ISBN|
|[[After God]]||||
|Airframe|Crichton, Michael|1996|0345402871|
|Alone, alive, and well||||
|[[Angel and Demons]]||||
|[[Back from the brink]]|Darling, Alaister.|2011||
|[[The Beautiful Room]]||||
|[[Being liberal in an Illiberal age]]||||
|Beowulf|Heaney, Seamus (trans.)|2003|0393961308|
|[[A Chosen Faith]]||||
|[[Complete Stories]]||||
|[[The Da Vinci Code]]||||
|The Dalai Lama|Marcello, Patricia|2003|0313322074|
|Doctor Faustus|Marlow, Christopher||039397619x|
|[[Dragons of the fallen sun]]|Weis, Hickman|2000||
|The Druid of Shannara|Brooks, Terry|1991||
|The Elfstones of Shannara|Brooks, Terry|1982||
|The Elfqueen of Shannara|Brooks, Terry|1992||
|[[ED: The Milibands and the Making of a Labour leader]]|Mehdi Hasan, James Macintyre|2011||
|English local government from the revolution to the Municipal Corporations Act|Web, Sidney ; Web, Beatrice|||
|[[Existentialism for Dummies]]|Panza, Christopher; Gale, Gregory|2008|9780470276990|
|[[The First Emancipator]]||||
|First king of Shannara|Terry Brooks|1996||
|[[The Forgotten Founding Father]]|Kendall, Joshua|2011|9780399156991|
|[[Frankenstein]]||||
|[[Happiness is Overrated]]||||
|[[Harry Potter]]||||
|[[Harry Potter and the Order of the Phoenix]]||||
|[[The Healing Journey]]||||
|Ice Hunt|Preston, Douglas ; Child, Lincoln|||
|[[Liberal Religion]]||||
|[[Library : An unquiet history]]|Batttles, Matthew||039302290|
|The Lord-Protectors daugther|Modesitt, L.E.|2008|
|The Nine|Toobin, Jeefrey|2008|978140096794|
|[[On the Brink of Civil War]]||||
|[[On Moral Duties]]||||
|[[Meditations]]||||
|[[Motivation and Personality]]||||
|[[Mount Dragon]]|Preston, Douglas ; Child, Lincoln|1997|9780812564372|
|[[Our endangered values]]||||
|[[Palmistry]]||||
|[[The pirates of Somalia]]|Jay Bahadur|2011|9780307379061|
|[[Pride and Prejudice]]||||
|[[The psychology of religion and coping]]|Kenneth I. Pargament|||
|[[A reason to believe]]|Patrik, Deval|2011|9780767931120|
|[[The Rector of Justin]]||||
|The Scions of Shannara|Brooks, Terry|1990||
|[[Spanish alphabet]]||||
|[[A spiritual Journey]]||||
|The sword of Shannara|Brooks, Terry|1997||
|The Talismans of Shannara|Brooks, Terry|1993||
|[[Tanquil]]||||
|[[Tess of the D'urbervilles]]||||
|[[Thousand Orcs]]||||
|[[Time of the Twins]]||||
|William and Harry|Seward, Ingrid|2002|1559706902|
|[[The well-educated mind]]|Bauer, Susan W.|2003|0393050947|
|What kind of nation|Simon, James F.|2002|0684848708|
|The Wishsong of Shannara|Brooks, Terry|1986||
------
MISC
[[Unknown Sources]]
[[GettingStarted]]
</pre>
</div>
<div title="Responsible Self, The." creator="Justin" modifier="Justin" created="201110222103" tags="171 Non-Fiction" changecount="1">
<pre>Source	NoteType-uote
	…our quest for truth about oursleves and in our quest for true existence.-
	The Stoic`s main question is: 'How may one react to events not with passion - that is, as one whois passive or who is subject to raw emotions -
	called for by events - but with reason?'
	Two things in particular we say about ourselves: we act toward an end or ore purposive-
	I. What is a good person? A. Man the Maker B. Man the Citizen C. Man the Answerer  1. Dialogue is important  2. A `psychology of interaction'  3. 	o
	Elements   a. idea of response   b. our interpretation   c. anticipation of reaction to our action</pre>
</div>
<div title="Rites of Passage." creator="Justin" modifier="Justin" created="201110222105" modified="201110222106" tags="journal" changecount="2">
<pre>	I. Five Steps of Ritual A. Letting Go/New Emergings  1. Making a conscious decision to abandon an old way.  2. Remaining open to the new quality	o
	 arising B. Wandering  1. A time of confusion C. Polarities  1. Opposing urges or emotions. D. New Beginnings  1. A new fision in the midst of 
	change. E. Rooting  1. integrating the new vision into daily realities.II. An Exclusive Time 1. Must take priority over evething else.III. Exclusive 
	Space.IV. Searching for Personal Symbols 1. Archetypal Symbols
	Ritual… an ancient tool for navigating the mental and emotional processes of human transition, and recasting it in terms that made it meaningful…-	4
	The going away, the journey out of the familiar, is a powerful emotional metaphor for change.-	7

Source	NoteType-uote
	The most prominent element in the patter, whenseasonal ande conomic power are personified…, is the dramatization of the idea of death, -
	expectation, and rebirth.
	Seasons are of no concern man except for their economic reprecussions.-
	IX. Other types of Rites of passage	o
	 A. Three major types
	  1. Separation
	  2. transition
	  3. incorporation
	 B. Rites involving hair
	  1. separation from previous world
	 C. The veil
	  1. again, separation
	 D. Homosexuality
	  1. A &quot;rite of friendship&quot;
	 E. Prohibition of Sex
	 F. Flagellation
	  a. intended for evil spirit
	 G. Rites of &quot;first times&quot;
	  a. important
	 H. Rites involving time.
	  1. New year
	 I. Rites not intended to influence father god or mother earth, but to recognize transition.
	Thursday, October 20, 2011	Page 65 of 76
	VIII. Funteral 	o
	 A. Not a reite of Separation, but of transition to a new state.
	  1. Marked by allowing the body to stay.
	  2. Therefore, berried w/ traveling items
	  3. A/k/a/ initiation rites
	 B. Funeral Rites
	 C. Morning
	  1. Stripping the house
	  2. 4-5 months
	 D. The afterworld
	  1. Like this, only better
	 E. Suicide
	  1. Considered normal
	  2. Reward
	   a. marterdom
	  3. Not allowed in afterlife, state of limbo
	  4. Punished in next world.
	I. The Classification of Rites	o	1-14
	 A. Religion (theory)
	  1. Dynamism
	   a. monistic
	   b. impersonal theory of mana
	  2. Animism
	   a. personalistic theory
	   b. totems
	   c. anthropomorphic beings
	   d. amorphous beings
	 B. Technique (magic, rites)
	  1. Sympathetic v.s. Contagious
	   a. Sympathetic rites based on like on like, opposite on opposite.
	   c. contagious rites based on belief that &quot;natural or acquired characteristics are material and transmissible.&quot; -7
	  2. Direct v.s. indirect
	   a. direct= immediately, without intervention by any outside agent.
	  3. Positive v.s. negative
	 C. Types of Ceremonies
	  1. Personal
	  2. Celestrial
	 D. Another typeology of rites
	  1. Rites of separation
	  2. Rites of transition
	  3. Rites of incorporation
	Thursday, October 20, 2011	Page 66 of 76
	VII. Betrothal and Marriage	o	116-
	 A. Betrothal
	  1. Marriage an economic aspect
	 B. Rites of Separation from tribe/family
	  1. A/k/a rites of &quot;rape or capture&quot;
	 C. Rites of Incorporation
	  1. Kings of rites for this chapter
	   a. Dowry
	   b. Communal meals
	   c. Exchanging gifts
	   d. common clothing or trinkets
	   e. washing each other
	   f. entering new house
	  D. Rites of divorce
	   a. not uncommon
	  E. I.e. growing grew hair
	II. The Territorial Passage	o	15-26
	Our interest lies not in the particular ites but in their essential significance and their relativfe positions within ceremonial wholes -- that is, their -	191
	&quot;…semivilized…&quot;-	2
	III. Individuals and groups	o	26-40
	 A. Preliminary stage
	  1. Transitional period
	  2. Rites of incorporation
	   a. eating and drinking together
	   b. tying one to another
	   c. kissing one another
	   d. symbol of natura imitatio
	 B. Unions broken only by rite of separation
	IV. Pregnancy and Childbirth	o	41
	V. Birth and childhood	o	50-64
	Thursday, October 20, 2011	Page 67 of 76
	VI. Initiation Rites	o	65
	 A. Individual marked by special rite.
	 B. Basic path
	  1. Physical and mental weakening. Lose recognition of childhood existence
	  2. Instruction of myths
	  3. The ceremony of initiation
	 C. Baptism
	  1. separation
	  2. Separates and incorporates
	  3. Incorporates
	 D. Rites of Banishment
	Thus in Rome social puberty precedes physiological puberty, and in Paris it follows physiological puberty.-	66
	This statement hold true especially for girls, since the social activity of a woman is much simpler than that of a man.-	67
	Whether each type of mutilation was invented only once and transmitted from people to people by borrowing, or whether each was invented -	74
	several times independently, is a question without interest to the purposes of this work.
	But Christianity borrowed so extensively from the Egyptian, Syrian, Asiatic, and Greek mysteries that it is difficult to understand the one without -	88
	taking the others into account.
	Mysteries	d	89
	…sign of the cross - odviously a rit of appropriation by the diety and of imcorporation into the community of the faithfull.-	95
	In the case of a return to the original religion, for instance in the Christian ritual of penance, the penitent was considered a Christian who for some -	96
	reason had lost his initiation and was striving to recover it.</pre>
</div>
<div title="SiteSubtitle" creator="YourName" modifier="Justin" created="201109222359" modified="201109230108" changecount="2">
<pre>notes, thoughts, and favorite quotes</pre>
</div>
<div title="SiteTitle" creator="YourName" modifier="Justin" created="201109222359" modified="201109230107" changecount="2">
<pre>Reading Journeys</pre>
</div>
<div title="Spanish alphabet" creator="Justin" modifier="Justin" created="201109230028" tags="Non-Fiction 468" changecount="1">
<pre>I. Spanish alphabet and Pronunciation
dbid 1833
-------------------------------------
 
 A. Alphebet
  A: a 
  B: be 
  C: ce 
  CH: che 
  D: de 
  E: e
  F: efe 
  G: ge  
  H: hache 
  I: i 
  J: jota 
  K: ka
  L: ele 
  LL: elle 
  M: eme 
  N: ene 
  Ñ: eñe 
  O: o
  P: pe 
  Q: cu 
  R: ere 
  S: ese 
  T: te 
  U: u
  V: ve 
  W: doble u 
  X: equis 
  Y: i griega 
  Z: zeta

 B. Pronunciation
  1. Stress Rules
   a. ends in vowel, s, or n,
     stress next to last syllable
   b. Other words w/o accent, stress
     last syllable
   c. accents used to indicate 
      exeptions to the rule. If a 
      or b don't apply, use accent to
      stress.
  2. Accents can distinguish
     harmonyons
  3. Demonstritive
     Pronouns/Adjectives
    a. Pronouns get accent.
  4. Words used in interogratie may
     be accented
  5. o accented btw #s to avoid
     confusion w/ zero.
  6. Umlauts are used to show
     pronunciation of u.

II. AJECTIVES AND NOUNS

 A. Making Nouns and adjectives
      Plural
  1. Basic Rule
   a. ends in consonant, add &quot;es&quot;
   b. ends in unaccented vowel, add s
   c. ends in accented vowel, add
      &quot;es&quot;
    * exception: ends in &quot;é&quot;, add -s
   c. &quot;y&quot; considered consonent (-yes)
  2. End in &quot;z&quot;, change to -ces.
  3. Days of the week are the same

 B. Gender
  1. Basic Rule: Gender must match
   a. -o, -os usually masculine
   b. -a, -as usually feminine
  2. Two or more nouns being
     described  by one adjective,
     use masculine.

 C. Noun - Adjective agreement
  1. both number and gender
  2. Making masculine adjectives
     feminine
   a. change &quot;-o&quot; to &quot;-a&quot;
   b. end in any other letter, its
      the same.

 D. Posessive Adjectives
    1. Rules
       a. Don't use when refering to
          1) Body Part
          2) Piece of Clothing
    2. Shorter form
       a. Before each noun
       b. my		out
	  your	        your
          his, hers, its
       c. Singular Noun
          mi		neustro -a
          tu            vuestros, -a
          su            su
       d. Plural Noun
          mis	  Neustros, -a
          tus     Vustros, -a
          sus     sus, -0s , -as
    3. Longer Form
       a. After Noun
       b. Singular Noun
          mío, -a     nuestro-s
          tuyo, -a    vuestro, -a
          suyo, -a    suyo, -a
       c. Plural Noun
          míos, -as   nuestros, -as
          tuos, -as   vuestros, -as
          suyos, -as  suyos, -as
       d. Use longer form when:
          1) expressing, &quot;of mine&quot;,
             yours
          2) w/ verb &quot;sur&quot;
          3) using the phrase,
             &quot;¡Dios Nío!

 E. Demonstrative Adjectives
    this (here): este, -a
    these (here): estos, -as
    that (there): ese, -a
    those (there): esos, -as
    that (farther away): aquel,
                         aquella
    those (farther away): aquellos
                          aquellas   


III. WRITTEN SPANISH

 A. Punctuation
  1. Signos de interrogatión and sig-
     nos de exclamacion
   a. ¿? ¡!
   b. May use one at beginning of se-
      netence and end of sentence.
   c. Marks go only around question
      part of sentence.
  2. Coma
   a. ,
   b. Not used before y (and)
   c. Eng. and Spa switched coma and 
      period when used with numbers.
  3. Comillas
   a. &lt;&lt; &gt;&gt; or &quot;&quot;
   b. Put period AFTER quotation

IV. Vocabulary and Phrases
    1. Family Relations
    2. Numbers
    3. Days and Months
    4. Phrases for the Traveler
       (07/24/2005)
    5. Greetings, house

  A. More Numbers
     40: cuarenta
     50: cincuenta (seen-kwan-tah)
     60: sensenta
     70: sententa
     80: ochenta
     90: nuventa
     100: cien, ciento

  C. Questions
     Cómo. How.
     Cuál. Which.
     Cuándo. When.
     Cuánto, -a. How Much.
     Cuántos, -as. How Many.
     Dónde. Where.
     Qué. What.
     Quién. Who.


V. Asking Questions
 1. Accests for interrogrative words 
    not used for written text.

VI. ARTICLES
    A. Indefinate Article
       1.     sing.   pl.
              -----------
         mas | un     unos
         fem | una    unas

       2. a, an some a few
       3. Use it when:
          a. for a or an
       4. Don't use it when:
          a. with cien, mil, cierto,
             tal, otro, ortra.
          b. when Quéis an
             exclamation
    B. Lo
       1. Neuter
       2. Use it when:
          a. with masc. sing. form 
             of an adjective
          b. w/ past participle
    
    C. Definite Article
       1.     sing.   pl.
              -----------
         mas | el    los
         fem | la    las

       2. tranlated &quot;the&quot;
       3. When used with:
          a. a, a + el = al
          b. de, de + el = del
       4. Use when
          a. In from a noun w/ 
             general statement
          b. w/ noun of weight or
             measure.
          c. w/ noun of rank
          d. name of language when
             used as a verb
          e. w/ proper nouns
</pre>
</div>
<div title="Speaking of Faith." creator="Justin" modifier="Justin" created="201110222108" tags="?" changecount="1">
<pre>	Source	NoteType-uote
	I. Different Voice in Moral Decisions   -by Carol Gilligan A. Two Strans of Western Moral Tradition  1. Self-Interested Form   a. Grounded in 	o
	experience of Inequality   b. Concerned w/ justice, fairness, equality, rights.   c. Social Contract Theory  2. Self-Sacrifice    a. Grounded in experience 
	of attachment   b. concerned w/ interdependence, caretaking, responding to needs.
</pre>
</div>
<div title="Tanquil" creator="Justin" modifier="Justin" created="201109230100" tags="?" changecount="1">
<pre>I.	
II.	Quotes
A.	&quot;Even when he lies, he gives us small glimpses of truth. Let's make use of that for now.&quot; -65
1.	I think this quote deals with &quot;reading between the lines&quot;. Like when people keep their distance from you because, &quot;they don’t want to hurt you.&quot; This shows something about their character.
B.	&quot;She [Grianne] had spent years learning how to keep any sense of weakness carefully hidden…&quot; –114
C.	&quot;My intent… is to see you and your raiders and your airships consumed by the fires of the netherworld that spawned you.&quot; –163
D.	&quot;Our worst enemies. No brains, no feelings, no purpose. They are one step above rocks on the evolutionary ladder. Magic easily controls then.&quot; –170
E.	&quot;…trying to reassure himself that he wouldn't give way to what he was feeling.&quot;-188
1.	This is the essence of both self control, and of rationalization: trying to convince ourselves that what we are doing is according to reason.
F.	&quot;…suspect everything and everyone of being something other than what appearances suggest. –215
1.	I think of Anthany, who, when cuddling with me, seems to actually like me. But it's just his hormones talking; not his heart.
G.	&quot;…he had learned to trust his instincts.&quot; -224
</pre>
</div>
<div title="Tess of the D'urbervilles" creator="Justin" modifier="Justin" created="201109230022" tags="Fiction 813 A" changecount="1">
<pre>Tess of the D'urbervilles 
DBID: 0101                
--------------------------
READING DATES: June 2005

GRADE: A
              
CHARACTOR LISTING:

Tess Durbyfield
Joan Durbyfield
John Durbyfield
Alec D'urberville

READING NOTES:

I.8. : Tess gets ready to go to chaseborough after the invitation. Alec takes her for a very horrifying ride on the horse down the hill. He then forces himself on her.

I.9. : Tess settles into the new enviroment

I.10. : Tess goes out partying. She gets into an arguement with Car, and Alec comes and saves her... so to speak</pre>
</div>
<div title="The Ancient mysteries :" creator="Justin" modifier="Justin" created="201110222030" tags="291 Non-Fiction" changecount="1">
<pre>	Ancient mysteries, The. :
	Source	NoteType	Quote
	-Introduction	o	1-
	Aristotle concludes that initiates into the mysteries do not learn anything, but rather have an experience and are put in a certain state of mind.	q	12
	The development of early agrarian or fertility festivals into the mystery religions involved, first and foremost, the conviction on the part of the 	q	7-8
	worshippers that the cycle of nature related directly to human life… Hence, if human beings could assimilate the power that made life triumphant in 
	the world of nature, they too might live in a more complete way.</pre>
</div>
<div title="The Beautiful Room" creator="Justin" modifier="Justin" created="201109230029" modified="201109230040" tags="D Fiction" changecount="2">
<pre>The Beautiful Room is Empty by Edmund White 
ISBN: 0679755403 DBID: 0841	            
---------------------------------------------

GRADE: D</pre>
</div>
<div title="The Da Vinci Code" creator="Justin" modifier="Justin" created="201109230015" modified="201109230016" tags="Fiction 813 A" changecount="2">
<pre>The Da Vinci Code by Dan Brown |
ISBN: 0385504209 DBID: 0029    |
--------------------------------

GRADE: A

NOTES:

&quot;Those who seek the truth are more than friends. They are brothers.&quot;
&quot;Your Heart is true my friend.&quot;
&quot;Those who truly understnd their faiths understand the stories are metaphorical.&quot; -342</pre>
</div>
<div title="The First Emancipator" creator="Justin" modifier="Justin" created="201109230038" modified="201110050035" tags="Non-Fiction 973 y2005" changecount="2">
<pre>The First Emancipator
 by Andrew Levy

DBID: 
Read: August - Sept. 2005

NOTES
Chapter 1

&quot;Carter provided financial support and sponsorship that eased the transition to freedom, provided financial support and sponsorship that eased the transition to freedom, provided for disabled and indigent freed slaves, and laid the primitive groundwork for an interracial republic, challenging in numberous small instances the notion that young America would fall apart if blacks and whites were free at the same time.&quot; -xvii

Chapter 1: King of America
...as Carter alienated his wife's family rather than tear slave children away from their parents, Washington was still buying eenage girls away from their parents and their homes in order to stock Mount Vernon.&quot; -31

&quot;In its way, Robert Carter's pulse, which oscillated between extreme enthusiasm and extreme detachment...&quot; -32
	I know what this feels like.

Chapter II: Dance or Die
&quot;That was how Virginians morned... no record of emotional attachment might remain for posterity.&quot; -37
	I find this quite ironic: half the reason I keep a journal is so that I can write down my emotions and sort them out.

&quot;'A new system of politicks in british north america...'&quot; -37
	
&quot;Carter saw the new blunt politics as a violation of what he called his 'Plan of Life', which still revolved around the Englishtenment gentleman's virtue of 'moderation'&quot; -40

&quot;He hid himself [carter] from almost everyone.&quot; -43
	I know what this emotion feels like. I think I did that today: as I took Brian home, he mentioned the mall was open. I knew he was trying to give me a hint, but I just ignored it, wanting to just be left alone. Unfortunatly, being alone means being lonely. And that is kinda what I am today: lonely and bored.

&quot;[Carter] wondered aloud whether or not life existed on other planets.&quot; -43

Chapter 3: Heavenly Confusion
&quot;Comune with your own Heart, &amp; in your Chamber, &amp; be still&quot; -87

Chapter 4: Inglorious Connexions

Chapter 5: Deed of Gift
&quot;If there is a single reason why Robert Carter is so difficult to resurrect in this century... was the product of a genious for withdrawal and aloofness as much as for emphathy.&quot;
	I know what this feels like. I am capable of extreme love and horrible hatred. My problem (among many) lies in that I cannot seem to control those emotions.

&quot;It was also a blank slate, however, and Enlightenment men often did their best work on blank slates.&quot; -138
	I tend to do my best work under pressure. Take writing papers for instance. I do my best work the night before it was due.

&quot;In August 1791... Carter wrote the Deed of Gift.&quot; -140 

&quot;Finally, on February 28, 1792... he undertook the largest private emancipation in American history. A... group of slaves... were escorted to the courthouse in Montross... they[the slaves] were 'examined' to ascertain that 'all &amp; every of the aforsaid Negroes are of Sound Minds &amp; Bodies', recieved the certificates... and departed the courthouse as freed men and women.&quot; -147

&quot;Lowered rents in order to honor requests from freed blacks...&quot; -151

&quot;Carter evicted white tenants whom he considered 'blameable,' and replaced them with black tenants...&quot; -151

&quot;Five hundred punds, he decided, was too much to spend for a mansion-sezed tract in the heart of the Dictrict of Columbia.&quot; -152
	He may have done a great thing by freeing his slaves, but this was a really stupid decision.

&quot;'I do acknowledge that my plans and advice have never been pleasing to the world.&quot; -163

&quot;when Robert Carted died, sometimee in the late hours of March 10, 1804, he died quickly and unexpectedly.&quot; -167

&quot;He lived comfortably within the monkish contours upon which he had insisted for two decades.&quot; -172
	I strive to do this.

&quot;He wanted to transcend this material world, spirit himslef off to some quiet, solitary place from which the rumble of American history would be but distant cannonade. In the end, he got what he wanted.&quot; -173 

&quot;We forget Robert Carter because his song of liberty lacked the crescendo and the passion we assume preceeds any stunning moral act&quot; -189

&quot;... a long-standing belief that racial progress comes from enhanced atachment between blacks and whites.&quot; -189
</pre>
</div>
<div title="The Healing Journey" creator="Justin" modifier="Justin" created="201109230044" tags="Non-Fiction 610" changecount="1">
<pre>Copans, Stuart A. The Healing Journey : your journal of self-discovery. ISBN: 047124712X

Preface: Embarking on the Path to Healing

1. Set aside a time, perferably daily.
2. Write before and after  an event, allowing you to clarify thoughs and feelings; organize.
3. Reflect on what you've read.

Suggestions
1. relaxation excercises before.
2. take brakes during writing
3. play music
4. vearity of writing utencils
5. write in a physically and emotionally comfortable place.

&quot;Your journal can be a valuable companion on the road to growth and self-discovery.&quot; -ix

Excercise 5
Associations
This is a &quot;clustering&quot; excercise to stimulate your ideas and thinking and provide another way to loosen up your journal writing and explore your thoughts and feelings. It is called associations because its major purpose is to help you build on your ideas, associate other ideas with that central idea or theme, and recognize patters in your thinking and writing process.

EXERCISE 8
Stream of Consciousness writing means that you start with an idea - any idea - and ramble. Let your pren (or mind) take you where it wants to go. Don't worry about cohearence or making sense. Don't worry about finishing sentences. Don't worry about legibility. Go with the ideas as they come up. Simply write what's free enough to let your mind wander from one idea to the next, without restriction. Sometimes, this approach is refered as free-form writing, freestyle writing, or automatic writing. 

EXERCISE 9 - Fridge Poetry
This technique is named after the magnet refrigerator poetry that has become popular recently. Fridge poetry... consists of a series of individual words that magnetically stick to a refrigerator. You can take any of the words and rearrange them in any order to make a senence, spell out a message, or make a poem - all from found materials (in this case, the individual magnetized words taht are available to you.) It can be a great way to get creative with only what is available to you.
	Of course, you don't have to buy a set of magnetic words to be a refrigerator poet. You can simply make up your own set of words or cut words out of a magazine - but the trick is to do so at random, without consciously selecting the words.From these words - these found materials - you can be creative and make poetry.
</pre>
</div>
<div title="The New Testament :" creator="Justin" modifier="Justin" created="201110222053" tags="225 Non-Fiction" changecount="1">
<pre>	III Early Traditions	o
	 A. Oral tradition
	  1. Mark written ~70AD
	  2. Matthew and luke written ~80AD
	  3. John written ~90AD
	 B. Moral truth, not historical truth
	Thursday, October 20, 2011	Page 43 of 76
	VI. The Synoptic Problem	o
	 A. Methods for studying
	  1. Reader-response criticism
	  2. Redaction criticism
	   a. studies how authors change or modify the original work
	 B. The Synoptic Problem
	  1. Def: how do we explain the similarities btw the synoptics
	  2. Four source hypothesis
	   a. See c:\library\l853a.jpg
	  3. Why Markan priority
	   a. The patterns of agreement
	   b. The sequence of the Narrative
	   c. The Characteristics of the Changes
	  4. The Q source
	   a. The same material for matthew and luke but not mark
	   b. Matthew and Luke could have had a different edition of Q; and of Mark, for all we know.
	   c. Luke preserved the sequence of Q moreso than Matthew
	    1) because Matthew changed marks sequence more than luke.
	  5. The M and L Sources
	   a. The authors of Matthew and Luke didn’t` simply make up their uniqueness.
	I. What is the New Testament	o
	 A. diversity in Early Christianity
	  1. Jewish Christian Adoptionists
	   a. Christ adapted by God to be Gods son
	   b. Jesus was not divine.
	   c. continue to follow OT rules except sacrifice
	   d. considered paul a heritic.
	  2. Marcionite Christians
	   a. Followed Marcion.
	   b. Gospel over law.
	   c. Two gods in the bible.
	   d. Jesus completely divine
	    1) a phantasm
	  3. Gnostic Christians
	   a. claimed a special knowledge for salvation.
	   b. Jesus only one of the divine beings
	   c. Salvation meant excaping the material world.
	  4. Proto-orthodox
	   a. Jesus as both human and divine
	 B. NT
	  1. 27 books 
	  2. ~15 authors
	  3. Written btw 50 and 120 AD
	  4. Formalized by Athanasius in 367 AD.
	Thursday, October 20, 2011	Page 44 of 76
	II The world of early Christian Traditions	o
	 A. The problems
	  1. Where do you start reading?
	   a. Matthew, the first book of the bible, isn`t the first one written.
	   b. 1Thes. is, but paul never met Jesus; lived after he died
	  2. Conditions of 1st century Rome.
	   a. No middle class
	   b. travel was horrendous
	 B. Religiosity in the Greco-roman world.
	  1. Terms
	   a. Pagan: Anyone who is not a Jew or a Christian.
	   b. Gentile: Anyone who is not a Jew; christian or not.
	  2. Nature of religion
	   a. no hierarchy
	   b. no creeds
	   c. no ethical committments
	   d. no sacred writings
	   e. no church/state separation
	   f. no exclusive comittments
	   g. ritual was important
	  3. The Divine Pyramid
	   a. The one God
	   b. The great Gods
	    1) mentioned in the Iliad and Odyssey
	   c. Daimonia, loal gods, etc.
	   d. Divine beings, demigods, immortals, heros
	   e. Humans.
	 B. Judiasm in the Greco-Roman world.
	  1. Cultic practices
	   a. animal sacrifices
	   b. prayer
	  2. Monotheistic
	  3. The Covenant
	   a. The Law
	   b. The temple
	    1) perhaps the size of 25 football fields.
	  4. Jewish Sects
	   a. Pharisees
	    1) believed in resurrection
	   b. Sadduccees
	    1) the aristicrates
	   c. Essenes
	    1) produced dead sea scrolls
	    2) Conservative
	   d. Fourth Philosophy
	    1) militant
	Thursday, October 20, 2011	Page 45 of 76
	V. St. Mark	o
	 A. Rooted in a Jewish worldview
	  1. Jesus as Messiah
	   a. Future king of Israel
	   b. A cosmic deliveror
	  2. The Son of God
	   a. A king of Israel
	   b. Entire nation of Israel
	 B. Pictures of Jesus
	  1. Son of god
	   a. opposed by authorities
	   b. opposed by his unique status
	  2. The misunderstood Son of God
	   a. not knowing where his power comes from
	  3. (And yet….) The achnowledge son of God
	  4. The suffering son of God
	  5. The criucified son of God
	  6. The vindicated son of God
	 c. Mark and his readers
	  1. Written for non-jews
	  2. Converted from paganism
	  3. &quot;The way clealy still part of Judiasm
	 d. The &quot;Son of Man.&quot;
	  1. Somebody divine
	IV. Literary and historical introduction	o
	 A. Gospels were a form of ancient Biographies.
	 B. Antient biographies portrayed essential traits in a chronological order
	 C. Therefore, early Christians wrote about the man they worship as the `Son of God who died dfor the salvation of the world.' -65
	VIII. St. Luke	o
	 A. The comparative method
	  1. Not concerned w/ the source of material.
	 B. Background of St. Luke
	  1. Greek-speaking christians
	  2. A greco-roman biography
	  3. Written after mark
	  4. Written in a better style than luke
	  5. Dedicated to Theophilus
	 C. The Birth Narrative
	 D. Salvation came through the jews to whole world.
	All knowledge - not only of literary texts but of people, the world around us, our experiences and sensations - is necessarily relational. We know -
	what we know only in relation to everything else that we know.
	Thursday, October 20, 2011	Page 46 of 76
	For ancient Jews, a prophet was not a crystal ball glazer, a person who made inspired predictions about events far in the future. He was a -	122
	spokesperson for God, a messenger sent from God to his people.
</pre>
</div>
<div title="The Rector of Justin" creator="Justin" modifier="YourName" created="201109230005" modified="201109230321" tags="Fiction 813" changecount="3">
<pre>CHAPTER 1
Summary: Brian Aspinwall becomes Master of English at the Justin private school. After initial bumps with the Headmaster (Rev. Prescott) and the students, he starts reading to Mrs. Prescott (who is sick), and hence finds his place in the school.

&quot;The best way for the passive man to overtake his more active brothers is to write them up.&quot; -1

&quot;I am shy and lack force of personality, and my stature is small. I stammer when I am nervous, and my appearance is more boyish than manly. All this will work against me. 

“God, as usual, has done a better job than man.” –3

“A headmaster, particualarly one so venerable, must be like a constitutional sovereign. He performs his funtion by being seen.” –7

“Oh, Journal…” ...cool phrase

“If you want to understand the boys here, you must understand it [sports]. –9

“… boys and masters, were part of the same pack!” –11


“When a gentleman undresses, a gentleman goes to bed.” –25

CHAPTER 2
Summary: Rev. Prescott thinks that Mr. Aspinwalls’ dormitory is too undiciplined. He sets quotas for “black marks”. Mr. Aspinwall continues to read to Mrs. Prescott, and starts learning the other masters and how the school works; allowing him to become more comfortable with his station. 

“The big thing is not to worry too much about guilt or innocence.” –26

A master should be “unpopular… [but] respected”.

“ I might be a monster, but I had one!” –28

I am sure that every minute of his day, every colloquy, every walk, every meal is somehow put ot he service of Justin” –31

”I have all eternity in which to rest, Miss Mitchell. Leave us alone.” –33

CHAPTER 3

“And yet I still feel a mysterious compulsion to continue these entries.” -37
	
“Mysterious Compulsion”… interesting phrase. 

“You will help him… correct the themes of his sacred studies classes…” –39
	Another interesting term

“You’ve got to let boys be animals once in a while.” –42

“I said that life was more attractive, not better” –42

“Of course in America this sort of thing was undestood at its lowest levels.”
	

“The greatness of the private school [is that]… it can sometimes turn a third-rate student into a second-rate one.” –44
	
“My function is to listen, not to console.” –44
	
CHAPTER 4

“Oh, ego, ego, burning like an eber in the conflagration of the world.” –47

&quot;The more I know, the richer I shall be. Oh yes I'm quite selfish.&quot; -52

CHAPTER 5
Summary: Here begins Horace Havistocks’s book that he started writing.

&quot;This good sence... proved the most valuable gift of the few with which he endowed us.&quot;
	

&quot;But Frank, however respected and admired, was not as popular as one might have supposed. He cared too little for the opinions of others, and he could be crutally outspoken in his speech. He was a silent, moody boy, and there was an air of truculent, rather unlovable superiority in his pale aquare handome face and in those big calm brooding wide-apart brown eyes.&quot; -63

“This theory was simply that any man who wants strongly enough to become the friend of another will succeed if there are no unbridgeable class or racial gaps and if he wantes no time in worrying about his own inferior attainments.” –65

“Frank had too little time for human relationships. He studied hard, read a great deal and exercised violently... I was quick to note that he cared as little for anyone else.” –66

“He was a strange, proud, bitter boy, and he could be very cruel indeed when he wanted.” –67


“… marked an association with one who was still considered ‘different’… [Frank said he would] court the richest heiress I can find…My eyes [Horace Havistock] filled with tears…” –69 - 70

“… it broke in upon me that this was his [Frank] way of apologizing.”
	
“..admire that bigoted, sanctimonious jackass?”
	Cool phrase; I’ll have to use it.

CHAPTER 6

“Ah, Luther. I should have anticipated the name of a rebel from the citizen of a separated arm of the Queen’s realm.” –86

“We remained the closest of friends, but something had gone out of the relationship.” –87

CHAPTERS 7
Summary: After the companionship between Horace and Frank is now over, Frank meets Eliza. This chapter tells of Franks’ coming back to his faith, and the feelings of rejection Horace Had.

“With him [Frank] it was a case of love at first sight; with her [Eliza], of love at first foresight.” -96

“I suppose you will say that I fell asleep, exhausted at last, and dreamed my vision. It doesn’t matter” –101

“… but now, in the perverse way of humans…”
</pre>
</div>
<div title="The alchemist /" creator="Justin" modifier="Justin" created="201110222025" tags="398 Fiction" changecount="1">
<pre>Alchemist, The
	Source	NoteType	Quote
	Everything that happens once can never happen again. But everything that happens twice will surely happen a third time.`' They mounted their 	q
	Now, I`m beginning what I could have started ten years ago. But I'm happy at least that I didn't wait twenty years.	q
	He was at home with the silence of the desert, and he was content just to look at the trees.	q
	No matter what he does, every person on earth plays a central role in the history of the world. And normally he doesn`t know it.	q
	Because, when you know that language [Love], it`s easy to understand that someone in the world awaits you, whether it's in the middle of the 	q
	desert or in some great city.
	...and their eyes meet, the past and the future become unimportant... `Without such love, one's dreams would have no meaning.	q
	...when we strive to become better than we are, everything around us becomes better, too.	q
	...they would have to share living space with those who lived there, and would be given the best accommodations. That was the law of hospitality.	q
	... My john never drinks in the day. Only at night, when the longing overcomes him	q	99</pre>
</div>
<div title="The course of my life." creator="Justin" modifier="Justin" created="201110291957" modified="201111111253" tags="y2011" changecount="5">
<pre>by Edward Heath.

READ: Oct.-Nov. 2011

GRADE: 

NOTES: 
CH. 7: Steadying the ship
*Being chief whip
**&quot;The job of a chief Whip is, above all, to hold the parliamentary party together.
*Anthony Eden's disastrous Suez Canal episode 
**Eden had to end the invasion because of the pound was on the verge of collapsing and nobody was prepared to support it.
*Eden's health problems.
*Heaths work as Minister of Labor.
&quot;Another thing I was very ken on was improving the health of the working population, as Ihad discovered that around 300 million working days each year were being lost because of ill-health or injury.&quot; -199
&quot;I was always in favor of co-operation and regular high-level meetings between government, unions and employers.&quot; -200</pre>
</div>
<div title="The forgotten founding father." creator="Justin" modifier="YourName" created="201110020250" modified="201110210036" tags="Non-Fiction 423 Biog A y2011" changecount="9">
<pre>The Forgotten Founding Father
by Joshua Kendall

Read: Oct. 2011

Grade: 

Notes:
Prologue:
Friendship with George Washington; his work.
&quot;'I wish to enjoy life, but books and business will ever be my principle pleasure. I must write; it is a happiness I cannot sacrifice.'&quot; -4 -N.W.
&quot;'America must be as independent in literature... as she is in politics -- as famous for arts as for arms.'&quot; -6 -N.W.
&quot;Webster's [illness] was what contemporary psychiatrics call obsessive-compulsive personality disorder.&quot; -8
&quot;'I am not formed for society; and I wait only to be convinced that people wish to get rid of my company, and I would instantly leave them for better companions: the reflections of my own mind.'&quot; -8 -N.W.

CH.1
&quot;Webster's commonplace book - the notebook he began keeping at Yale, which features his favorite passages from literary works - includes dialogue from from this play, and Webster presumably took part in this production.&quot; -30
&quot;While Yale's professors would dazzel Webster with their intellectual prowess, they were too self-absorbed to provide much personal guidance.&quot; -31
&quot;To manage his dark moods and anxiety, Webster would disconnect from his innermost thoughts - a coping strategy he had began in childhood and would use for the rest of his life. The man of words never cared much for introspection. Webster would always prefer doing - whether it be rushing off to war or compiling a massive reference work - to feeling.&quot; -37
&quot;Webster's morning routine had him waking up at 5:30 a.m., then heading over to the chapel for an hour and a half of prayers and recitations.&quot; -37
&quot;'What is now called a liberal education... disqualifies a man for business.'&quot; -52 -N.W.

CH.2
&quot;Like Johnson, Webster would have to learn to live with his nervous condition.&quot; -57
Though Reeve ha a genial manner, he was self-absorbed. -58
&quot;If it is possible for her to find a man who knows her worth, and has a disposition and virtues to reward it, the union of their hearts must secure that unmingled felicity in life, which is reserved for genuine love, a passion inspired by sensibility, and improved by a perpetual intercourse of kind offices. &quot;- 67 N.W.
He was also feeling lonely in this strange town outside of his native Connecticut. 'In this situation of things,' Webster recalled in his memoir, 'his spirits failed, and for some months, he suffered extreme depression and gloomy forebodings.&quot; -69 N.W.
&quot;... the speller is where Americans first learned to pronounce the twenty-sixth letter of the alphabet 'zee' rather than 'zed.' - 76

CH. 3
&quot;While partison attach was the lifeblood of late eighteenth0century American journalism...&quot; -81
&quot;His only gainful employment was promoting his own books. Webster spent most of his time reading. But the lack of purposeful activity left him feeling anxious and depressed. On Satuday, August 7, he lamented in his diary, 'Did nothing worthy of particular notice.' Without a new literary project, he soldiered as best he could. &quot;-89

CH. 4
&quot;... one man data collection agency...&quot;-107
&quot;During a lonely weekend in late August, when he was feeling bored and disgusted with Baltimore, he had picked up his pen. As was often the case, emotional distress prompted a burst of creative activity.&quot; -113
&quot;To counteract his deep-seated social anxiety, he [N.W.] projected an unbecoming arrogance.&quot; -114
&quot;While he lacked the social skills necessary to form intimate friendships, he [N.W.] was adept at ingratiating himself with the powerful.&quot; -122

CH. 5
&quot;Though publicly Webster was animated, in private hew as feeling despondent. &quot;-131
&quot;Unskilled in forging human connections, he [N.W.] acted if he were the only person in the room. &quot;-115
&quot;And Webster's social obtuseness compounded the problem.&quot; -138
&quot;That he [N.W.] was losing potential customers to stage actors - whom he despised - was particularly galling. &quot;-139
&quot;The months he had spent in with Rebecca the previous spring had given him a taste of a while new way of being in the world, which he sorely missed. &quot;-153
&quot;Over the next year and a half, an overworked and anxious Webster would come close to a nervous breakdown.&quot; -154
&quot;'... But I am a bachelor and want the happiness of a friend whose interest and feelings should be mine.&quot; -154

CH. 9 // Webster publishes his dictionary//

CH. 10
&quot;For Webster, the payoff was in daily compiling and arranging, which both mitigated his existential angst and gave him a sense of purpose.&quot; -258
&quot;The Great Comet of 1807...&quot; -258
&quot;In 1808, Webster became a devout Calvinist; from then on, all his literary efforts would be in the service of God.&quot; -262
&quot;The highest political office this founding father would ever hold is state rep.&quot; -264
&quot;Now a nationally recognized writer with the power to shape his own destiny, he had gone out of his way to alienate just about everyone he had ever known.&quot; -268
&quot;Webster's great-grandfather was buried in nearby Hadley, the town he founded, which had originally included Amherst.&quot; -270
&quot;According to Webster's working hypothesis, until the construction of the Tower of Babel, human beings all spoke the same ur-language, which he labeled Chaldee.... Webster's methodology was riddled with a fatal flow: He was attempting to back up one speculative hypothesis with nothing more than a string of additional speculative hypotheses... Webster's grandiosity had gotten the best of him. Paradoxically, the search for truth would lead this brilliant polymath to build an alternative universe out of gibberish. &quot; -274-276
&quot;While a colossal failure as literature, the Synopsis succeeded as therapy, helping Webster to both control and exorcise some of his inner demons.&quot; -277
&quot;With Webster leading the charge, Massachusetts residents had been clamoring for peace [in opposition to the War of 1812] since the beginning of the year. &quot;-278
&quot;The patriot who had fervently preached American unity for the past thirty years had completed an abrupt about-face. Webster now openly talk about dividing America into three parts - North, South, and West.&quot; -278
&quot;Arguing that America's founding document was no longer working, Webster was making the case for a new constitutional convention in Hartford.&quot; -279
&quot;In the run-up to the Hartford Convention, New Englanders of all stripes championed succession.&quot; -280
&quot;Forty thousand dollars then was the equivalent of more than a million dollars today.&quot; -282
&quot;Though his [N.W.] politics kept waxing more and more reactionary, his approach to lexicography remained firmly democratic.&quot; -283
&quot;...the autocratic and judgemental Webster...&quot; -284
&quot;... developed a systematic protocol...&quot;

Ch. 11. //He finishes his dictionary, Amhearst College, Percival//
&quot;'Often, my dear Harriet, have I found in the course of my life, that frustrated hopes have been beneficial to me.&quot; -286
&quot;While Webster occasionally flirted with madness, [Dr. James Gates] Percival incarnated the thing in itself. Percival was the man Webster might have become had he not stumbled upon his reliable sources of comfort -- his loving wife, his religious faith, his sealed-off second-story hideaways and his dictionaries.&quot;-302</pre>
</div>
<div title="The happy introvert :" creator="Justin" modifier="Justin" created="201111200239" changecount="1">
<pre>The happy introvert : a wild and crazy guide for celebrating your true self / [by] Elizabeth Wagele. -- Berkeley, CA : Ulysses Press, c2006. -- 189 p. -- ISBN 159755469.

CH. 5:
&quot;What's important is to engage in a creative project and to applaud yourself for expressing yourself in a new way.&quot; -88
&quot;Creating - by exploring who we are, learning new things, and staying focused - is a healthy and positive way to spend time. Being consumed creatively feels like playing did when we were small.&quot; -91
&quot;Both introverts and extroverts gather information from outside themselves and process it together with information stored inside, resulting in new combinations and patterns.&quot; -92
&quot;The extraverted process is the journey of returning to conscious life and manifesting our findings in the world.&quot; -92</pre>
</div>
<div title="The measure of the magic /" creator="Justin" modifier="Justin" created="201111192335" tags="Fiction 813 y2011" changecount="1">
<pre>The measure of the magic / [by] Terry Brooks. -- New York : Ballantine Books, c2011. -- 383 p. -- ISBN 9780345484208.

CH. 1 //The ragpicker is a demon who kills two trolls.//
*&quot;Rags. I collect them and barter for food and drink. It's what I do.&quot; -6
*&quot;He had stayed alive this long by keeping his head down and staying out of harm's way.&quot; -4

CH. 2 //Prue (on the instructions of Deladion Inch goes to this place (which turns out to be a hospital) to hide, but is found. She ends up killing a troll that chases her.//</pre>
</div>
<div title="The nine : inside the secret world of the Supreme Court" creator="Justin" modifier="Justin" created="201110151429" tags="Non-Fiction 347 B y2011" changecount="1">
<pre>The nine : inside the secret world of the Supreme Court,
by Jeffrey Toobin

GRADE: B

READ: July 2011

REFLECTION
*For all the high talk about the independence and objectivity of the judiciary, Toobin sums up the real nature of judicial work, &quot;When it comes to the core of the court's work, determining the contemporary meaning of the constitution, it is ideology, not the craft or skill, that control the outcome of cases. (394)&quot; 
*The most obvious is Skalia, Thomas, and O'Connor. Scalia and Thomas have no problem throwing out decades (even centuries) of precedent. 
*I have lost most respect  for O'Connor. Her ruling in Bush v. Gore was clearly and beyond doubt partison, and her resignation during Bush's term allowed the court to say (or become) conservative. Her rules -- by trying to find the middle ground in American life -- reveals a dangerous jurisprudence leading to majority tyranny. 
*Stevens remains my favorite justice because of his jurisprudence. But I have also come to like Souter. His attitude, life style, and jurisprudence also attracts me. I do like reserved people who don't bluster around making waves, yet also have respect for the traditions of their job. </pre>
</div>
<div title="The pirates of Somalia :" creator="Justin" modifier="Justin" created="201109241442" modified="201110151413" tags="364 Non-Fiction B y2011" changecount="12">
<pre>THE PIRATES OF SOMALIA
by Jay Bahadur

Grade:  
Read: Sept. 2011
Notes:

Ch. 7: 
The effects of Khat on the pirates and on Somalia

Ch. 9. 
UNNAVFOR, NAFOR
Most effective methods of defence against pirates include not armed guards (prohibitively costly), but high-pressure water cannons, barbed wire, and saferooms if pirates come on board.
&quot;With $1-$1.5 billion per year being spent to clap down on a piracy 'industry' worth not more than $90 million, it is hard to argue that the international naval armada has provided a good return on investment.&quot; -153

Ch. 10
#International Law
## 1982 UNCLOS 
## SUA Convention
### Allows another state to assume jurisdiction over the accused
#### &quot;Since late 2008, the long-term solution has been, in effect, to 'rent out' the Kenyan justice system in order to process the back-log of pirate detainees captured by western warships.&quot; -158
*&quot;Like a tattered quilt that has been patched too many times, the international legal framework governing piracy is worn and inadequate, with legislative stitching like Resolution 1816 and the Merchant Shipping Act barely keeping it from coming apart at the seams. Still, given the array of imperfect solutions, the 'dumping ground' option [Kenya taking the pirates] may be the best choice for the present.&quot; -168

Ch. 11
Eli is considered pirate central. Yet, the townspeople don't particularly like that designation, and it is a quite run-down town. At the mention of Boyah, people laugh. There is a recognition of the collapse of the fisheries in the late 1990's.

Ch. 14
&quot;Despite the travelling int he Internationally Recommended Transit Corridor (IRTC) and being within 80 to 160 kilometers of a Turkish warship when she was attracted, the Victoria was captured with relative ease... in short, the Victoria was slow, low, and undermanned.&quot; 223-4
&quot;Of these, Hersi's and Levenescu's testimonies account for 15: Computer, Loyan the interpreter, Mustuku the accountant, the 'commander of the khat,' nine attackers, and two cooks.&quot; -225
&quot;The moment he steps into a pirate skiff, an attacker accepts about a 1-2 per cent chance of being killed, a 0.5-1 percent chance of being wounded, and a 5-6 per cent chance of being arrested and prosecuted.&quot; -226
&quot;The gang's operating expenses fell into four categories, in order of decreasing cost: khat, transportation and fuel, weapons, and food and beverage.&quot; -228
&quot;The necessary start-up capital - which went towards the purchase of ten-to-twelve-metre boat, two outboard motors, weapons, food, and fuel - could not have exceeded $50,000.&quot; -231
&quot;The parallels between crack and piracy go beyond finances. Like drug dealing for inner-city youth, piracy provides one of the few avenues for a young Somali to gain status and respect. &quot;-233
&quot;In Somalia, where the prospects for career development are undeniably worse than in even the most destitute of American ghettos, it is hardly surprising that piracy is the profession of choice for many ambitious young men.&quot; -233

Ch. 15: The road's end
&quot;He was hardly to blame for this cynical attitude, given the international media's failure to spare any ink for the scores of unreported attacks on Yemeni fishermen.&quot; -237

Ch. 16: Epilogue
#Somali piracy in five years
##more lucrative
##more organized
##encounters &quot;likely get a whole lot bloodier&quot; -245
#What can the international community do?
##Finance and effective and well-paid Puntland Police Task Force.
##Fund an expansion of the Puntland Prison System
##Foster intelligence coordination between Puntland and International Naval Forces.
##Clamp down on illegal fishing
##Encourage or require passive security measures aboard commercial vessels.
&quot;One thing, at least, is clear: when the situation on the ground produces men desperate enough to set out into the Indian ocean in four-metre skiffs without enough food and fuel to return - their only hope of survival either to capture a vessel or themselves be captured - military force alone will not be a sufficient deterrent. &quot;-249
&quot;Although Somali piracy began as a backlash by disaffected fisherman, the hijacking of commercial vessels is now a self-sustaining business that has far outgrown its original impetus.&quot; -251

</pre>
</div>
<div title="The plague /" creator="Justin" modifier="Justin" created="201110222057" tags="843 Fiction" changecount="1">
<pre>Source	NoteType-uote
	Othon, M	f	10
	Ramber, Raymond	f	11
	The language he [Rieux] used was that of a man who was sick of the world he lived in - though he had much liking for his fellow men - and had -	11
	resolved, for his part, to have no truck with injustice and compromises with the truth.
	Father paneloux	f	16
	Tarrou, Jean	f	21
	-town begins roomers about what is happening -Grant pays a visit to Rieux -A description of Grant.	s	21-
	-a description of Oran	s	2-6
	Oran	f	3
	Castel	f	33
	There have been as many plagues as wars in history; yet always plagues and wars take people equally by surprised.-	34
	Thursday, October 20, 2011	Page 50 of 76
	Grand, joseph	f	38
	… he [Joseph] had the walk of a shy young priest, sidling along walls and slipping mouselike into doorways.-	41
	… he [Joseph] refused to use expressions such as `your kindness,' 'gratitude,' or even 'solicit,' which, to his thinking, were incompatible with his -	42
	personal dignity.
	And lastly - this was the real trouble - Joseph Grand couldn`t find his words… this difficulty in finding his words had come to be the bane of his life.-	42,43
	… he [Joseph] was one of those rare people… who have the courage of their good feeling. What little he told of his personal life vouched for acts -	43
	of kindness and a capacity for affection that no one in our times dares own to.
	-Richard, Rieux, and the prefect discusses the situation -Richard wants action, Rieux wants caution, proper timing.	s	44-47
	-prefect closes Oran	s	48-59
	Cottard	f	49
	Like Cottard he [Rieux] felt a need for friendly contacts, human warmth.-	53
	Rigaud	f	54
	Never had Rieux known his profession to weigh on him so heavily.-	55
	People always talk… That`s only to be expected.-	55
	Castel went back to his old books and spent long hours in the public library.-	57
	Orders… when what`s needed is imagination.-	58
	Rieux, Bernard (Dr.)	f	7
	-story begins 4/17 -the dead rats begin -Michael dies -there are symptoms of plague	s	7-20
	Michel, M	f	9</pre>
</div>
<div title="The psychology of religion and coping" creator="Justin" modifier="Justin" created="201110081340" modified="201110081408" tags="Non-Fiction 100" changecount="2">
<pre>THE PSYCHOLOGY OF RELIGION AND COPING
by Kenneth I. Parament

Date	Source	NoteType	Quote
	131-	o	&quot;VI. Turning to religion
 A. reviewing the literature
  1. Summarizing the findings
  2. Results are self-reports
  3. The extent of religious coping
 B. turning to religion is a prevailing thing.
 C. When religion and coping converge
  1. Depends on
   a. nature of the person
   b. nature of event
   c. context of the enviroment
  2. Different levels
   a. personal level
   b. situational level
   c. contextual level&quot;
		o	&quot;I. Introduction
 A. Religion is intristelly involved with crisis.
  1. 90% believe in God.
  2. 82% Believe in mirracles
  3. 76% believe in life after death
  4. 79% believe God in their lives
 B. The role of religion when people are put to the test.&quot;
	138	q	To pray is to take notice of the woder, to regain a scense of the mystery that animates all beings, the divine margine in all attainments. -Abraham Joshua Heschel
1/23/2007	90-	o	&quot;V. Assumptions of Coping
 A. People seek significance.
 B. the meaning of events depend on that significance.
 C. people bring their paradygm to the coping process.
 D. and abstract paradigm is made into objective tools.
 E. Significance in the coping process come from
  1. conservation
   a. holding on to it.
  2. Transformation
 F. People cope in ways meaningful to them.
 G. Coping is embedded to culture.
 H. Keys to goo coping
  1. outcomes
  2. Process&quot;
3/12/2007	163-	o	&quot;VII. The many faces of religion in coping
 A. Religion in real life
  1. A seeming irrevelance in real life
 B. expressing religion in coping
  1. Religion as a defence
  2. Something more spiritual
  3. Search for human ends in suffering / Appraising life events
 C. forces of religion coping
  1. Purposes of religion in coping
   a. spiritual
   b. self-development
   c. resolve
   d. sharing
   e. restraint
  2. Religious coping activities
   a. spiritually based
   b. good deeds
   c. discontent (anger at god)
   d. religious support
   e. plead
   f. avoidence
 3. Intrinsic orientation
  a. more spiritually based
 4. Extrinsic orientation
  a. emphises of good deeds&quot;
1/23/2007	71-89	o	&quot;IV. Introduction to the concept of coping
 A. Historical context
  1. Cultural influences
   a. Rules
   b. roles
   c. standards
   d. morals
  2. Increasingly difficult for ppl to develop structures.
 B. Responses to tragedy / coping techniques
  1. Intrapsychic response
   a. Freud
   b. conflict btw the id and society
   c. Defensive mechanisms
    1) Denial
    2) Repression
    3) projection
    4) regression
    5) sublimation
    6) reaction formation
   d. forced to accept reality
  2. Physiological response
   a. bioloogical responses
   b. Cannon, Selye
   c. General Adaption Syndrome
    1) the alarm reaction
    2) the stage of resistance
    3) stage of exhaustion
  3. The psychological response to stress
   a. Grinker, Spriegel, Erich Lindemann
  4. Social Stressors
   a. identifies conditions that cause stress.
   b. Emiile Durkheim, Holmes, Rahe
 C. Beginning of the study of coping
  1. Focused on deterministic theories
  2. A move towards individuals striving for perfection and superiority.
 D. Central qualities of coping
  1. It is an encounter between person and situation.
  2. It is multidementional
   a. frustrations, fear, anger, etc...
  3. It is communial
  4. It can be viewed as possibilities and choices.
  5. It is diverse (see #2)&quot;
	178	q	Religious students were as likely as secular students to visualize the people of Israel again being in exile, see themselves or their parents, or imagine themselves choking someone.
	172	q	Much of religion`s power lies in its ability to appraise negative events from a different vantage point.
	165	q	A theology that confuses the truth of the moment with eternal truth is as untenable as a theology that is disconnected from present circumstances.</pre>
</div>
<div title="The psychology of religion and coping :" creator="Justin" modifier="Justin" created="201110222101" tags="200 Non-Fiction" changecount="1">
<pre>	Source	NoteType-uote
	I. Introduction	o
	 A. Religion is intristelly involved with crisis.
	  1. 90% believe in God.
	  2. 82% Believe in mirracles
	  3. 76% believe in life after death
	  4. 79% believe God in their lives
	 B. The role of religion when people are put to the test.
	Thursday, October 20, 2011	Page 53 of 76
	VI. Turning to religion	o	131-
	 A. reviewing the literature
	  1. Summarizing the findings
	  2. Results are self-reports
	  3. The extent of religious coping
	 B. turning to religion is a prevailing thing.
	 C. When religion and coping converge
	  1. Depends on
	   a. nature of the person
	   b. nature of event
	   c. context of the enviroment
	  2. Different levels
	   a. personal level
	   b. situational level
	   c. contextual level
	To pray is to take notice of the woder, to regain a scense of the mystery that animates all beings, the divine margine in all attainments. -Abraham -	138
	Joshua Heschel
	VII. The many faces of religion in coping	o	163-
	 A. Religion in real life
	  1. A seeming irrevelance in real life
	 B. expressing religion in coping
	  1. Religion as a defence
	  2. Something more spiritual
	  3. Search for human ends in suffering / Appraising life events
	 C. forces of religion coping
	  1. Purposes of religion in coping
	   a. spiritual
	   b. self-development
	   c. resolve
	   d. sharing
	   e. restraint
	  2. Religious coping activities
	   a. spiritually based
	   b. good deeds
	   c. discontent (anger at god)
	   d. religious support
	   e. plead
	   f. avoidence
	 3. Intrinsic orientation
	  a. more spiritually based
	 4. Extrinsic orientation
	  a. emphises of good deeds
	A theology that confuses the truth of the moment with eternal truth is as untenable as a theology that is disconnected from present circumstances.-	165
	Thursday, October 20, 2011	Page 54 of 76
	Much of religion`s power lies in its ability to appraise negative events from a different vantage point.-	172
	Religious students were as likely as secular students to visualize the people of Israel again being in exile, see themselves or their parents, or -	178
	imagine themselves choking someone.
	Thursday, October 20, 2011	Page 55 of 76
	IV. Introduction to the concept of coping	o	71-89
	 A. Historical context
	  1. Cultural influences
	   a. Rules
	   b. roles
	   c. standards
	   d. morals
	  2. Increasingly difficult for ppl to develop structures.
	 B. Responses to tragedy / coping techniques
	  1. Intrapsychic response
	   a. Freud
	   b. conflict btw the id and society
	   c. Defensive mechanisms
	    1) Denial
	    2) Repression
	    3) projection
	    4) regression
	    5) sublimation
	    6) reaction formation
	   d. forced to accept reality
	  2. Physiological response
	   a. bioloogical responses
	   b. Cannon, Selye
	   c. General Adaption Syndrome
	    1) the alarm reaction
	    2) the stage of resistance
	    3) stage of exhaustion
	  3. The psychological response to stress
	   a. Grinker, Spriegel, Erich Lindemann
	  4. Social Stressors
	   a. identifies conditions that cause stress.
	   b. Emiile Durkheim, Holmes, Rahe
	 C. Beginning of the study of coping
	  1. Focused on deterministic theories
	  2. A move towards individuals striving for perfection and superiority.
	 D. Central qualities of coping
	  1. It is an encounter between person and situation.
	  2. It is multidementional
	   a. frustrations, fear, anger, etc...
	  3. It is communial
	  4. It can be viewed as possibilities and choices.
	  5. It is diverse (see #2)
	Thursday, October 20, 2011	Page 56 of 76
	V. Assumptions of Coping	o	90-
	 A. People seek significance.
	 B. the meaning of events depend on that significance.
	 C. people bring their paradygm to the coping process.
	 D. and abstract paradigm is made into objective tools.
	 E. Significance in the coping process come from
	  1. conservation
	   a. holding on to it.
	  2. Transformation
	 F. People cope in ways meaningful to them.
	 G. Coping is embedded to culture.
	 H. Keys to goo coping
	  1. outcomes
	  2. Process
</pre>
</div>
<div title="The secret Gospel of Mark unveiled :" creator="Justin" modifier="Justin" created="201110222107" tags="229 Non-Fiction" changecount="1">
<pre>Source	NoteType-uote
	V. On Smith	o	149-
	
	A. Career as an anglican priest
	 1. Seemed to loose his faith
	
	B. Rigid ethical views
	Non-Parochial	d	150
	II. Questions	o	19-54
	
	A. The major issues
	 1. Is the manuscriput authentic
	 2. Is the letter really from Clement?
	
	B. Looking at the &quot;profiler&quot; of the document
	 1. The familiar gospel of Mark
	 2. The Secret Gospel
	 3. Oral Mark
	 4. The Carpocratian form of the gospel
	III. The Secret Gospel in terms of liturgy	o	55-90
	
	A. Liturgical elements
	 1. The resurrection themes
	 2. A linen cloth
	 3. A nocturnal initiation
	
	B. Alexandra
	 1. Baptism assoicated w/ John
	 2. Was the secret gospel read in secret initiations rites in church?
	  a. Doesn`t seem to fit the alexandrian pattern for epiphany
	
	C. Secret gospel doesn't seem to have a lot to do with Alexandrian worship.
	Thursday, October 20, 2011	Page 69 of 76
	IV. Content of Secret Gospel	o	91-225
	
	A. The homosexual encounter
	 1. simply seems to be a mosiac construction of selections from canonical gospels.
	 2. Text shows a series of double entendres
	  a. Implying ancient writing knew english
	 3. On Greek homosexuality
	  a. btw adult male and younger male.
	 4. The Uranian homosexual subculture
	  a. 19th century english universities
	  b. more misogynistic
	  c. less concerned w/ greek idea
	  d. particualarly drawned to the high chruch  
	  e. drawn to Oscar Wilde`s Salome.
	
	B. Jesus regecting a group of women
	 1. Seems also to be a mosaic
	 2. Made up of apocryphal scriputres
	
	C. Smiths interpretation of the Gospel
	 1. Using also the same mosaic of
	  a. Jewish hymns
	  b. Gnositic writings
	  c. Byzantine christian liturgy</pre>
</div>
<div title="The voyage of the Jerle Shannara." creator="Justin" modifier="Justin" created="201110222112" tags="813 Fiction" changecount="1">
<pre>	Source	NoteType-uote
	They are one step above rocks on the evolutionary latter.-
	The Trolls are always alone. It is a condition of life to which we are not only accustomed, but one that we prefer.-
	Consumed by the fires of the Netherworld that spawned you-	163
</pre>
</div>
<div title="The well-educated mind :" creator="Justin" modifier="YourName" created="201110060211" modified="201110151401" tags="Non-Fiction 028 A y2011" changecount="9">
<pre>THE WELL - EDUCATED MIND
by Susan Wise Bauer

READ:
GRADE: A
NOTES:
CH.5: The story of people: reading through history with a novel

#The first level of inquiry: grammar stage reading
##Look at the title, cover and table of contents
##Keep a list of characters as you read
##Briefly note the main event of each chapter
##Make initial notes on passages that seem interesting
##Give the book your own title and subtitle
###Who is the central character in this book (title)
###What is the book's most important event (subtitle)
### &quot;If you have difficulty answering these questions, ask yourself: is there some point in the book where the characters change? -70
#Second level of inquiry: logic - stage reading
##Overview
###&quot;What idea is she [the author] trying to convince you of?&quot; -71
###&quot;But fiction has a different end than philosophy, or science, or history&quot; -71
###&quot;Whenever you write down an answer, quote directly from the novel in order to support your answer.&quot; -71
##Is this novel a &quot;fable&quot; or a &quot;chronicle&quot;?
###&quot;In an allegory, the writer establishes a one-to-one correspondence between some part of her story (a character, an event, a place) and some other, literal reality.&quot; -73
##What does the central character (or characters) want? What is standing in his (or her) way? And what strategy does he (or she) pursue in order to overcome this block?
###The villain
##What is telling you this story? (point of view)
##Where is this story set?
##What style does the writer employ?
###Plain v.s complex v.s. ornamental.
##Images and metaphors
###&quot;Is any particular image repeated again and again?&quot; -78
###&quot;A metaphor is a physical object or act act that stands for something else - an attitude, a situation, a truth&quot; -78
##Beginning and endings
###&quot;That single sentence contains all of the novel's major themes...&quot; -78
###A resolution v.s. logical exhaustion.
#Third level of inquiry : rhetoric - stage reading
##Do you sympathize with the characters? Which ones, and why?&quot; -80
##Does the writer's technique give you a clue as to her &quot;argument&quot; - her take on the human condition? 
###&quot;What does the setting of the book tell you about the way human beings are shaped?&quot; -81
##Is the novel self-reflective?
##&quot;Is there an argument in this book? 
##Do you agree

CH. 6: The story of me: Autobiography and Memoir
&quot;He [Augustine] wasn't the first writer to jot down details of daily life; diaries and journals have been kept since humans have had a sense of the passage of time and posessed written language.&quot; -115
&quot;A diarist notes the events of each day, without bothering to fix them into an overall pattern.&quot; -114
&quot;And so Augustine is the first autobiographer because he chooses a meaning for his life and arranges the events of his life to reflect this meaning.&quot; -116
&quot;Rather, you read autobiography to find out what it's like to see the world from another point of view, from inside the skin of another person.&quot; -124

#The first read - through : Grammar - Stage Reading
##Look at the title, cover, and table of contents
## What are the central events in the writer's life?
##What historical events coincide - or merge - with these personal events
### &quot;As you list personal events on the left - hand side of your page, keep your eyes open for historical events... list these down the right had side of the page, across from the personal events with which they coincide.&quot; -126
##Who is the most important person (or people) in the writer's life?
##Give the book your own title and subtitle
### A [blank]'s story: in which [writer's name]... &quot; -127
#The second level of inquiry: Logic-stage reading
## &quot;What pattern has the writer discovered in his or her own life?&quot; -128
##What is the theme that ties the narrative together?
### &quot;First, determine whether the autobiography is primarily spiritual or skeptical...&quot; 128
##Where is life's turning point? Is there a 'conversion'?&quot; -129
##For what does the writer apologize? In apologizing, how does the writer justify?
##What is the model - the ideal - for his person's life?
##What is the end of the life: the place where the writer has arrived, found closure, discovered rest?
### &quot;Write a brief paragraph (two or three sentences) describing the writer's position at the end of the autobiography... and quote any evaluation that the writer herself supplies.&quot; -132
#The Third Level of Inquiry: Rhetoric - stage reading
##Is the writer writing for himself, or for a group?
##What are three moments, or timeframes, of the autobiography?
###the time during which the events happened
###the time during which the writer is putting the events on paper
###The time in which the autobiography is read.
##Where does the writer's judgement lie?
##Do you reach a different conclusion from the writer about the pattern of his life? 
&quot;Unlike earlier writers, Augustine sees decisions and thoughts, not big external events, as the true landmarks of a life...&quot; -116

CH. 7: The story of the past: The tales of historians (and politicians)
&quot;The overall task of the historian isn't just to tell you what happened, but to explain why...&quot; -164
&quot;Like the novel, the history tells a story about a 'hero,' an individual, or a country, or perhaps a particular group within a county...&quot; -164
&quot;These military chronicles have historical value, but they are not &quot;historical writing&quot; because they have a single, limited purpose: the immortalization of one particular king.&quot; -166
#The enlightenment
## Reason is &quot;autonomous&quot; or independent of any other part of man.
##Institutional authority is suspect.
##Effect has a cause, and that cause can be discovered.
&quot;By doubting we come to inquiry; and through inquiry we perceive truth.&quot; -183 -Peter Abelard
&quot;... Who? What? When? Where? Why? At the first level of inquiry, ask these questions about the story the writer tells... On the second level of inquiry, you'll scrutinize the historian's argument... on your third level of inquiry, ask: What does this historian tell us about human experience?&quot; -187</pre>
</div>
<div title="Themes in Fundamental Moral Theology." creator="Justin" modifier="Justin" created="201110222109" tags="? Non-Fiction" changecount="1">
<pre>Source	NoteType-uote
	I. Natural Law  -by Charles E. CurranA. Pope used natural law in Humanae VitueB. Problems with Natural Law 1. Not a monolithic system 2. Dangers	o
	 in Physicalism  a. Natural Law is that which teaches all animals   1) Aquantis accepted this view  b. Natural v.s. Ideal (dualism)C. A changed 
	worldview 1. The view  a. Static  b. immutable  c. Eternal   d. Unchanged 2. The more modern mind  a. Changing  b. Historical  c. Importance of 
	individual traits  d. Life as a revelation</pre>
</div>
<div title="Theology &amp; Literature." creator="Justin" modifier="Justin" created="201110222109" tags="? Non-Fiction" changecount="1">
<pre>	II. Death of Ivan Illich	o
	 A. General Notes
	  1. Death disappears.
	  2. A remarkable change of outlook
	  3. What is his sin? He`s a clone of convention. He's caught up in his &quot;roll&quot;.
	   a. inauthentic self
	  4. Guilt is &quot;existential guilt.
	  5.
	I. Pilgrims Regress	o
	 A. A superego formation in Freudian Terms
	 B. Card is the rules of parents v.s. friends
	  1. Scriptural v.s. worldly wisdom
	Thursday, October 20, 2011	Page 72 of 76
	III. Wellhausen Hypothosis	o
	 A. Torah written in three different schools
	 B. J
	  1. Yahwist
	  2. 950BCE
	 C. E
	  1. Elohist
	 D. D.
	  1. Dutoronomist
	 E. P.
	  1. Priestly
	  2. 7th - 6th BCE
	  3. Worked in Jerusalem
	 F. Redactist
	  1. Editor
	  2. After the Exile
	  3.
</pre>
</div>
<div title="Theology and Christian Ethics." creator="Justin" modifier="Justin" created="201110222110" tags="? Non-Fiction" changecount="1">
<pre>	Source	NoteType
	I. Ways of Using Scripture  -by James M. Gustafson A. Revelation of a Morality  1. In accordance with moral laws  2. Principles for ethical 	o
	interpretations  3. Problems for Christians has they have a new covenant   a. Rom. 8:2   b. `Christians have no codifications of the moral law of 
	scripture.' B. Revelation of the Actions of God  1. Answering the question 'what is god doing in our time'</pre>
</div>
<div title="Thousand Orcs" creator="Justin" modifier="Justin" created="201109230101" tags="Fiction 813" changecount="1">
<pre>CHARACTERS
Duggan: Brother, Employee of 	Tred
Tred

NOTES
&quot;It is strange, and somewhat unsettling, to come to the realization that no place will hold me for long, that no 'home' will ever truly suffice. I wonder if I am running toward something or away from something.&quot; -10

&quot;What is important is the  assurance that my life will continue to hold adventure, purpose, and go
</pre>
</div>
<div title="Time of the Twins" creator="Justin" modifier="Justin" created="201109230037" tags="Non-Fiction 813 A" changecount="1">
<pre>http://www.changetolink.com/e4fwS

Weis, Margaret, Tracy Hickman, Michael Williams, Matt Stawicki, and Valerie A. Valusek. Time of the Twins. Renton, WA: Wizards of the Coast, 2000. 
---- 

QUOTES 
------ 
But every morning whn I wake, I feel the fear. -182 
I want to do nothing more than stay in this room, ear this warm fire, and record in these books the knowledge I have acquired throug the years. -182 
&quot;As the blood flows from the heart, bringing nourishment to even the smallest toe, so our faith and our teachings flow from this great temple to the smallest most insignificant among us. -214 
As one touch upon the tiniest strand of the silken web will send tremors through the entire web, so your least action could spread tremors throughout Krynn. -215 
Carmon lapsed into gloomy silence. -247 
His power sprang from within -- so great, it had spanned the centuries, spanned even planes of existance. It could be felt, it shimmered around him like the heat from teh smith's furnace. 
You are virtuous, steadfast in your faith, and proud of both your virtue and your faith. This is a deadly combination... -257 
It was freedom that brought about evil -- freedom of choice. -263 
I don't understand... you mean people pay to be tricked? Surely they must have figured it out... -270 
They are clean and warm... There are not many in this would who can say that of where they sleep. Besides, if we lived in luxury, we would grow soft. 
Caramon was so nervous, he made very little sence. -302 
And who are you, little cutpurse? -305 
Clasping his hand over his mouth so that he wouldn't yelp, the kender pressed himself up against the wall and thought about dying, alone, in the dark. -309 
My council is mine to keep. -Raislin -318 
So Denubis had returned to his work, sitting day after day in peaceful solitude, translating the scrolls and the books and sending them off to Solamnia where they sat, unread, in some great library. -323 
Created by the gods, just as we were... do we have the right, in our imperfect understanding of the great scheme of things, to destroy anything the gods created? -Crysania -324 
Do not go to others for the answers. Look in your own heart, search your own faith. You will either find the answer or come to see that the answer is with the gods themselves, not with man. -Elistan -327 
...he [Raistlin] mentally stripped away Crysania's outer defences to see her soul. -329 
I know your doubts, Crystania... I know what you have seen. You hae found the church to be far more concerned with running the world than teaching the ways of the gods. You have seen its clerics double-dealing, dabbling in politics, spending money for show that might have feed the poor. -Raistlin -331 
What do you [Raistlin] know of lovemaking?... Of seduction? In this, you are a child, more stupid than your behemoth of a brother.&quot; -Raistlin -338 
He [Raistlin] found frue ecstasy only in his magic. -Raistlin 338 
I would end up destryoing myself. -Rastlin -338 
Having firmly resolved this and being long experienced in the practice of exerting strict mental control over his emotions, the young mage relaxed and sat back in his chair, letting weariness sweep over him. The fire died low, his eyes closed in the rest that would renew his flagging power. But, before he drifted off to sleep, still sitting in the chair, he saw once more, with unwanted vividness, a single tear glistening in the moonlight. -339 
It was an old kender proverb -- Don't change color to match the walls. Look like you belong and the walls will change color to match you. -345 
Drat. -Tas -345 
&quot;I plan to show you the ways of righteousness and truth, to prove to you that only by following those ways can we hope to bring peace to our world. But you always turn my words upside down.&quot; -Crysania -345 
&quot;Questions should lead to better understanding, and your questions only make me confused and miserable.&quot; -Crysania -347 
&quot;We both [Crysania and Raistlin] live lonely lives, dediated to our studies. We open our hearts to no one, not even those who would be closest to us.&quot; -Crysania -347 
&quot;I hesitate to say... I must study on this matter.&quot; -Raistlin -349 
&quot;And now... I need rest.&quot; -Raistlin -352 
&quot;He [Raistlin] simply wanted to pursue his studies in peace.&quot; -361 
&quot;A very ancient one, written during the age of dreams.&quot; -370 
&quot;Was there anyone, anyone in this bleak and desolate world she [Crysania] could trust?&quot; -372 
&quot;Thy time is thy own / Though across it you travel, / It's expances you see / Whirling through forever, / Obstruct not its flow. / Grasp firmly the end and the beginning, / Turn them back upon themselves, and / All that is loose shall be secure. / Destiny be over your own head. &quot; -383 
&quot;Where are you going? [said Tas] 'Where I choose,' said Raistlin.&quot; -384 
&quot;A true faith needs no demonstrations, no justification for believing what it knows in its heart to be right.&quot; -Loralon -388 
&quot;A frail, brilliant, sharp-tounged young man [Raistlin]&quot;. -415 

PEOPLE 
----- 
Arack Rockbreaker: -265 
Dewar: -265 
Darmook: a Minotaur -265 
Kiiri: a Sirine (shapeshifter) -402 

FACTUAL NOTES 
----- 
Thirteen days after Yule, the Cataclysm would strike. -336 </pre>
</div>
<div title="Unknown Sources" creator="Justin" modifier="Justin" created="201109230024" modified="201109230030" changecount="2">
<pre>----
DBID 0126
&quot;One concern is that, in the name of giving people what they want, the new libraries of the future will be closer in spirit to amusement complexes -- centers offering corporate-sponsored &quot;edutainment&quot; spectacles and tiered services to a paying clientele.&quot; -2

&quot;This trend should surprise no one. Libraries are increasingly modeled on big bisiness and directed not by librarians but by executives who are apt to have read more management books than literature.&quot; -2

&quot;Independent scholars, young dreamers, and tomorrow's world changers have always shared the library with the unwashed and the forgotton.&quot; -3

Effects
 -More latest technonovels and less scholarly works
 -fee-based research 
 -outsourcing
-----
dbid 8686

I.	A way of walking and acting in the world
A.	“For me the fundamental question of life is not why but how. How shall I live while I live? This is the bedrock question.” –1
B.	“My dear friend, in those days people had convictions. We moderns have opinions. And it takes more than opinions to build a Gothic cathedral.” –Heinrich Heine
C.	“The liberal spirit is wholistic.” –3
D.	“ I speak as a liberal in search of redemption and reconstruction – one whose soul is full o fholes burned by the evils of society.” –4
E.	“We keep trying to live like scientists, when in fact most of the important decisions we make – choosing a spouse, changing a job – are not scientific at all.” –6
F.	“His [Albert Schweitzer] view of human beings (including himself, of course) was pessimistic. It was his willing, hoping, and acting that were optimistic.” –9

II.	What do you say after you say “I’m a Unitarian Universalist”?
A.	Chapter Outline
1.	Earthy and Practical Reason
2.	Unity with Diviersity
B.	Quotes
1.	“We are Unitarian Universalists, not by substituting one confession of faith for another, but by opening our minds to receive truth and inspiration from every possible source” –39
2.	“Churches, Bibles, and creeds are thec creations of humans who once exercised their freedom to create” –39
3.	“They will do their own thinking about current matters of faith and belief” –40
4.	“We continue to evolve by the light of our growing understanding of ourselves and our world.” -45
5.	It’s goal is to be an “Earthy and practical” religion –40
6.	“Humans must accept responsibilibty for their choices and for their acts.
7.	“Unitarian Universalism, then, is a community of faith, with individual freedom as to its method and with reason as its guide.” –43
8.	“Truth for authority, not authority for truth.” –Susan B. Anthony
9.	“The goal of organized Unitarian Universalism is to provide maximum freedom combined with full fellowship for each individual.” =44
10.	“Let there be no mistake about the fact that Unitarian Universalist fellowship is a purposeful, positive, organized religious movement, dedicated to the spiritual, moral, and social fulfillment of the gift of life.” –45
11.	“Religion for us is no insulated segment of life. It is our entire being in search for meaning.” -45
------</pre>
</div>
<div title="WRESTLING WITH GOD AND CANCER :" creator="Justin" modifier="Justin" created="201110222117" tags="? Non-Fiction" changecount="1">
<pre>Source	NoteType-uote
	I. General Summary	s
	-Delivered baby while having flu. Baby had flu, then died. But the baby had a hole in heart. The flu covered up the problem.
	Thursday, October 20, 2011	Page 75 of 76
	What started out as a very restful day would end up sapping the very life force out of me and strain to the breaking point my relationship with my -	10
	I had trie best I could to come out on the side of God, but the evidence came in overwealmingly in favor of lived experience. It never entered my -	15
	mind to change my concept of God.
	I don`t have answers, only a story to tell… it does no good to ask 'why'… our energies should instead be in the pursuit of the quesiton 'how'.-	21
	II. The healing process	s	49-52
	-Bev. Would go into a mental prayer place while being radiated since her eye was too close to the cancer.
	How we humans need affirmation.-	53
	III. New Perspective	s	53-55
	It was in readign over my journal  that I recognized a gradual awareness unfolding.-	56
	IV. The dividing line.	s	56-59
	-Bev learns that God is no santa clause. Makes connection btw faith, wisdom, and love.
	V. The uphill struggle.	s	59-64
	-Bev sees suffering as part of faith journey.
	I realize now that if we can handle with gracefulness what life brings our way, we will do will.-	8</pre>
</div>
<div title="War and the Christian Consciousness." creator="Justin" modifier="Justin" created="201110222113" tags="? Non-Fiction" changecount="1">
<pre>#Problem of Protestant Ethics Today  -Paul Ramsey
##Making moral decisions btw two evils 
###How we do what we do is as important as our goals.
</pre>
</div>
<div title="Welcome" creator="Justin" modifier="Justin" created="201109230106" modified="201110210050" changecount="12">
<pre>&lt;html&gt;&lt;center&gt;&lt;b&gt;&quot;I want to do nothing more than stay in this room, near this warm fire, and record in these books the knowledge I have acquired through the years.&quot; &lt;br&gt;
&lt;u&gt;Time of the Twins&lt;/u&gt;, by Margaret Weis, page 182 . &lt;/b&gt;&lt;/center&gt; &lt;/html&gt;
------

Welcome to my Reading Journeys. The purpose of this page is to share my thoughts, reflections, and favorite quotes on what I have read.

On the right, by clicking on the tab titled &quot;All&quot;, you will find titles with notes or thoughts I have about the book. This is a work in progress, and new books will be added as I continue to build my site. 

On the right, you will find tags that categorize books into Fiction, Non - Fiction, and Dewey Decimal Numbers. Also included are my &quot;grades&quot;, A - F, which I assign to each book, and the year in which I read it.

Before linking to my site, please email me at justinleetyler @ yahoo . com . Thank - You.</pre>
</div>
<div title="Women in the world's religions, past and present /" creator="Justin" modifier="Justin" created="201110222116" tags="291 Non-Fiction" changecount="1">
<pre>Source	NoteType-uote
	In the doctrine of the Trinity we speak of three moments in the only self-communication of God.-
	The God of Abraham, Isaac and Jacob did not turn out to be, in the same way, the God of Sarah, Rebecca and Rachel.-
	I. The Image of the Biblical God	o
	God is Father, but above all Mother.-
	Others have noted the correspondence between the Christian doctrine of the Holy Spirit and the Hindu idea of shako, the generating strength, the -
	creative power of God, thought of as female in Hinduism
	theopathy	d
	The eternal feminine was joined to the feminine created to associate it eternally to the mystery of the Holy Trinity.-</pre>
</div>
</div>
<!--POST-STOREAREA-->
<!--POST-BODY-START-->
<!--POST-BODY-END-->
<script id="jsArea" type="text/javascript">
//<![CDATA[
//
// Please note:
//
// * This code is designed to be readable but for compactness it only includes brief comments. You can see fuller comments
//   in the project repository at https://github.com/TiddlyWiki/tiddlywiki
//
// * You should never need to modify this source code directly. TiddlyWiki is carefully designed to allow deep customisation
//   without changing the core code. Please consult the development group at http://groups.google.com/group/TiddlyWikiDev
//
// JSLint directives
/*global jQuery:false, version:false */
/*jslint bitwise:true, browser:true, confusion:true, eqeq:true, evil:true, forin:true, maxerr:100, plusplus:true, regexp:true, sloppy:true, sub:true, undef:true, unparam:true, vars:true, white:true */
//--
//-- Configuration repository
//--

// Miscellaneous options
var config = {
	numRssItems: 20, // Number of items in the RSS feed
	animDuration: 400, // Duration of UI animations in milliseconds
	cascadeFast: 20, // Speed for cascade animations (higher == slower)
	cascadeSlow: 60, // Speed for EasterEgg cascade animations
	cascadeDepth: 5, // Depth of cascade animation
	locale: "en" // W3C language tag
};

// Hashmap of alternative parsers for the wikifier
config.parsers = {};

// Adaptors
config.adaptors = {};
config.defaultAdaptor = null;

// Backstage tasks
config.tasks = {};

// Annotations
config.annotations = {};

// Custom fields to be automatically added to new tiddlers
config.defaultCustomFields = {};

// Messages
config.messages = {
	messageClose: {},
	dates: {},
	tiddlerPopup: {}
};

// Options that can be set in the options panel and/or cookies
config.options = {
	chkRegExpSearch: false,
	chkCaseSensitiveSearch: false,
	chkIncrementalSearch: true,
	chkAnimate: true,
	chkSaveBackups: true,
	chkAutoSave: false,
	chkGenerateAnRssFeed: false,
	chkSaveEmptyTemplate: false,
	chkOpenInNewWindow: true,
	chkToggleLinks: false,
	chkHttpReadOnly: true,
	chkForceMinorUpdate: false,
	chkConfirmDelete: true,
	chkInsertTabs: false,
	chkUsePreForStorage: true, // Whether to use <pre> format for storage
	chkDisplayInstrumentation: false,
	txtBackupFolder: "",
	txtEditorFocus: "text",
	txtMainTab: "tabTimeline",
	txtMoreTab: "moreTabAll",
	txtMaxEditRows: "30",
	txtFileSystemCharSet: "UTF-8",
	txtTheme: ""
	};
config.optionsDesc = {};

config.optionsSource = {};

// Default tiddler templates
var DEFAULT_VIEW_TEMPLATE = 1;
var DEFAULT_EDIT_TEMPLATE = 2;
config.tiddlerTemplates = {
	1: "ViewTemplate",
	2: "EditTemplate"
};

// More messages (rather a legacy layout that should not really be like this)
config.views = {
	wikified: {
		tag: {}
	},
	editor: {
		tagChooser: {}
	}
};

// Backstage tasks
config.backstageTasks = ["save","sync","importTask","tweak","upgrade","plugins"];

// Extensions
config.extensions = {};

// Macros; each has a 'handler' member that is inserted later
config.macros = {
	today: {},
	version: {},
	search: {sizeTextbox: 15},
	tiddler: {},
	tag: {},
	tags: {},
	tagging: {},
	timeline: {},
	allTags: {},
	list: {
		all: {},
		missing: {},
		orphans: {},
		shadowed: {},
		touched: {},
		filter: {}
	},
	closeAll: {},
	permaview: {},
	saveChanges: {},
	slider: {},
	option: {},
	options: {},
	newTiddler: {},
	newJournal: {},
	tabs: {},
	gradient: {},
	message: {},
	view: {defaultView: "text"},
	edit: {},
	tagChooser: {},
	toolbar: {},
	plugins: {},
	refreshDisplay: {},
	importTiddlers: {},
	upgrade: {
		source: "http://tiddlywiki-releases.tiddlyspace.com/upgrade",
		backupExtension: "pre.core.upgrade"
	},
	sync: {},
	annotations: {}
};

// Commands supported by the toolbar macro
config.commands = {
	closeTiddler: {},
	closeOthers: {},
	editTiddler: {},
	saveTiddler: {hideReadOnly: true},
	cancelTiddler: {},
	deleteTiddler: {hideReadOnly: true},
	permalink: {},
	references: {type: "popup"},
	jump: {type: "popup"},
	syncing: {type: "popup"},
	fields: {type: "popup"}
};

// Control of macro parameter evaluation
config.evaluateMacroParameters = "all";

// Basic regular expressions
config.textPrimitives = {
	upperLetter: "[A-Z\u00c0-\u00de\u0150\u0170]",
	lowerLetter: "[a-z0-9_\\-\u00df-\u00ff\u0151\u0171]",
	anyLetter:   "[A-Za-z0-9_\\-\u00c0-\u00de\u00df-\u00ff\u0150\u0170\u0151\u0171]",
	anyLetterStrict: "[A-Za-z0-9\u00c0-\u00de\u00df-\u00ff\u0150\u0170\u0151\u0171]"
};
if(!((new RegExp("[\u0150\u0170]","g")).test("\u0150"))) {
	config.textPrimitives = {
		upperLetter: "[A-Z\u00c0-\u00de]",
		lowerLetter: "[a-z0-9_\\-\u00df-\u00ff]",
		anyLetter:   "[A-Za-z0-9_\\-\u00c0-\u00de\u00df-\u00ff]",
		anyLetterStrict: "[A-Za-z0-9\u00c0-\u00de\u00df-\u00ff]"
	};
}
config.textPrimitives.sliceSeparator = "::";
config.textPrimitives.sectionSeparator = "##";
config.textPrimitives.urlPattern = "(?:file|http|https|mailto|ftp|irc|news|data):[^\\s'\"]+(?:/|\\b)";
config.textPrimitives.unWikiLink = "~";
config.textPrimitives.wikiLink = "(?:(?:" + config.textPrimitives.upperLetter + "+" +
	config.textPrimitives.lowerLetter + "+" +
	config.textPrimitives.upperLetter +
	config.textPrimitives.anyLetter + "*)|(?:" +
	config.textPrimitives.upperLetter + "{2,}" +
	config.textPrimitives.lowerLetter + "+))";

config.textPrimitives.cssLookahead = "(?:(" + config.textPrimitives.anyLetter + "+)\\(([^\\)\\|\\n]+)(?:\\):))|(?:(" + config.textPrimitives.anyLetter + "+):([^;\\|\\n]+);)";
config.textPrimitives.cssLookaheadRegExp = new RegExp(config.textPrimitives.cssLookahead,"mg");

config.textPrimitives.brackettedLink = "\\[\\[([^\\]]+)\\]\\]";
config.textPrimitives.titledBrackettedLink = "\\[\\[([^\\[\\]\\|]+)\\|([^\\[\\]\\|]+)\\]\\]";
config.textPrimitives.tiddlerForcedLinkRegExp = new RegExp("(?:" + config.textPrimitives.titledBrackettedLink + ")|(?:" +
	config.textPrimitives.brackettedLink + ")|(?:" +
	config.textPrimitives.urlPattern + ")","mg");
config.textPrimitives.tiddlerAnyLinkRegExp = new RegExp("("+ config.textPrimitives.wikiLink + ")|(?:" +
	config.textPrimitives.titledBrackettedLink + ")|(?:" +
	config.textPrimitives.brackettedLink + ")|(?:" +
	config.textPrimitives.urlPattern + ")","mg");

config.glyphs = {
	currBrowser: null,
	browsers: [],
	codes: {}
};

//--
//-- Shadow tiddlers
//--

config.shadowTiddlers = {
	StyleSheet: "",
	MarkupPreHead: "",
	MarkupPostHead: "",
	MarkupPreBody: "",
	MarkupPostBody: "",
	TabTimeline: '<<timeline>>',
	TabAll: '<<list all>>',
	TabTags: '<<allTags excludeLists>>',
	TabMoreMissing: '<<list missing>>',
	TabMoreOrphans: '<<list orphans>>',
	TabMoreShadowed: '<<list shadowed>>',
	AdvancedOptions: '<<options>>',
	PluginManager: '<<plugins>>',
	SystemSettings: '',
	ToolbarCommands: '|~ViewToolbar|closeTiddler closeOthers +editTiddler > fields syncing permalink references jump|\n|~EditToolbar|+saveTiddler -cancelTiddler deleteTiddler|',
	WindowTitle: '<<tiddler SiteTitle>> - <<tiddler SiteSubtitle>>'
};

// Browser detection... In a very few places, there's nothing else for it but to know what browser we're using.
config.userAgent = navigator.userAgent.toLowerCase();
config.browser = {
	isIE: config.userAgent.indexOf("msie") != -1 && config.userAgent.indexOf("opera") == -1,
	isGecko: navigator.product == "Gecko" && config.userAgent.indexOf("WebKit") == -1,
	ieVersion: /MSIE (\d.\d)/i.exec(config.userAgent), // config.browser.ieVersion[1], if it exists, will be the IE version string, eg "6.0"
	isSafari: config.userAgent.indexOf("applewebkit") != -1,
	isBadSafari: !((new RegExp("[\u0150\u0170]","g")).test("\u0150")),
	firefoxDate: /gecko\/(\d{8})/i.exec(config.userAgent), // config.browser.firefoxDate[1], if it exists, will be Firefox release date as "YYYYMMDD"
	isOpera: config.userAgent.indexOf("opera") != -1,
	isLinux: config.userAgent.indexOf("linux") != -1,
	isUnix: config.userAgent.indexOf("x11") != -1,
	isMac: config.userAgent.indexOf("mac") != -1,
	isWindows: config.userAgent.indexOf("win") != -1
};

merge(config.glyphs,{
	browsers: [
		function() {return config.browser.isIE;},
		function() {return true;}
		],
	codes: {
		downTriangle: ["\u25BC","\u25BE"],
		downArrow: ["\u2193","\u2193"],
		bentArrowLeft: ["\u2190","\u21A9"],
		bentArrowRight: ["\u2192","\u21AA"]
	}
});

//--
//-- Translateable strings
//--

// Strings in "double quotes" should be translated; strings in 'single quotes' should be left alone

merge(config.options,{
	txtUserName: "YourName"});

merge(config.tasks,{
	save: {text: "save", tooltip: "Save your changes to this TiddlyWiki"},
	sync: {text: "sync", tooltip: "Synchronise changes with other TiddlyWiki files and servers", content: '<<sync>>'},
	importTask: {text: "import", tooltip: "Import tiddlers and plugins from other TiddlyWiki files and servers", content: '<<importTiddlers>>'},
	tweak: {text: "tweak", tooltip: "Tweak the appearance and behaviour of TiddlyWiki", content: '<<options>>'},
	upgrade: {text: "upgrade", tooltip: "Upgrade TiddlyWiki core code", content: '<<upgrade>>'},
	plugins: {text: "plugins", tooltip: "Manage installed plugins", content: '<<plugins>>'}
});

// Options that can be set in the options panel and/or cookies
merge(config.optionsDesc,{
	txtUserName: "Username for signing your edits",
	chkRegExpSearch: "Enable regular expressions for searches",
	chkCaseSensitiveSearch: "Case-sensitive searching",
	chkIncrementalSearch: "Incremental key-by-key searching",
	chkAnimate: "Enable animations",
	chkSaveBackups: "Keep backup file when saving changes",
	chkAutoSave: "Automatically save changes",
	chkGenerateAnRssFeed: "Generate an RSS feed when saving changes",
	chkSaveEmptyTemplate: "Generate an empty template when saving changes",
	chkOpenInNewWindow: "Open external links in a new window",
	chkToggleLinks: "Clicking on links to open tiddlers causes them to close",
	chkHttpReadOnly: "Hide editing features when viewed over HTTP",
	chkForceMinorUpdate: "Don't update modifier username and date when editing tiddlers",
	chkConfirmDelete: "Require confirmation before deleting tiddlers",
	chkInsertTabs: "Use the tab key to insert tab characters instead of moving between fields",
	txtBackupFolder: "Name of folder to use for backups",
	txtMaxEditRows: "Maximum number of rows in edit boxes",
	txtTheme: "Name of the theme to use",
	txtFileSystemCharSet: "Default character set for saving changes (Firefox/Mozilla only)"});

merge(config.messages,{
	customConfigError: "Problems were encountered loading plugins. See PluginManager for details",
	pluginError: "Error: %0",
	pluginDisabled: "Not executed because disabled via 'systemConfigDisable' tag",
	pluginForced: "Executed because forced via 'systemConfigForce' tag",
	pluginVersionError: "Not executed because this plugin needs a newer version of TiddlyWiki",
	nothingSelected: "Nothing is selected. You must select one or more items first",
	savedSnapshotError: "It appears that this TiddlyWiki has been incorrectly saved. Please see http://www.tiddlywiki.com/#Download for details",
	subtitleUnknown: "(unknown)",
	undefinedTiddlerToolTip: "The tiddler '%0' doesn't yet exist",
	shadowedTiddlerToolTip: "The tiddler '%0' doesn't yet exist, but has a pre-defined shadow value",
	tiddlerLinkTooltip: "%0 - %1, %2",
	externalLinkTooltip: "External link to %0",
	noTags: "There are no tagged tiddlers",
	notFileUrlError: "You need to save this TiddlyWiki to a file before you can save changes",
	cantSaveError: "It's not possible to save changes. Possible reasons include:\n- your browser doesn't support saving (Firefox, Internet Explorer, Safari and Opera all work if properly configured)\n- the pathname to your TiddlyWiki file contains illegal characters\n- the TiddlyWiki HTML file has been moved or renamed",
	invalidFileError: "The original file '%0' does not appear to be a valid TiddlyWiki",
	backupSaved: "Backup saved",
	backupFailed: "Failed to save backup file",
	rssSaved: "RSS feed saved",
	rssFailed: "Failed to save RSS feed file",
	emptySaved: "Empty template saved",
	emptyFailed: "Failed to save empty template file",
	mainSaved: "Main TiddlyWiki file saved",
	mainFailed: "Failed to save main TiddlyWiki file. Your changes have not been saved",
	macroError: "Error in macro <<%0>>",
	macroErrorDetails: "Error while executing macro <<%0>>:\n%1",
	missingMacro: "No such macro",
	overwriteWarning: "A tiddler named '%0' already exists. Choose OK to overwrite it",
	unsavedChangesWarning: "WARNING! There are unsaved changes in TiddlyWiki\n\nChoose OK to save\nChoose CANCEL to discard",
	confirmExit: "--------------------------------\n\nThere are unsaved changes in TiddlyWiki. If you continue you will lose those changes\n\n--------------------------------",
	saveInstructions: "SaveChanges",
	unsupportedTWFormat: "Unsupported TiddlyWiki format '%0'",
	tiddlerSaveError: "Error when saving tiddler '%0'",
	tiddlerLoadError: "Error when loading tiddler '%0'",
	wrongSaveFormat: "Cannot save with storage format '%0'. Using standard format for save.",
	invalidFieldName: "Invalid field name %0",
	fieldCannotBeChanged: "Field '%0' cannot be changed",
	loadingMissingTiddler: "Attempting to retrieve the tiddler '%0' from the '%1' server at:\n\n'%2' in the workspace '%3'",
	upgradeDone: "The upgrade to version %0 is now complete\n\nClick 'OK' to reload the newly upgraded TiddlyWiki",
	invalidCookie: "Invalid cookie '%0'"});

merge(config.messages.messageClose,{
	text: "close",
	tooltip: "close this message area"});

config.messages.backstage = {
	open: {text: "backstage", tooltip: "Open the backstage area to perform authoring and editing tasks"},
	close: {text: "close", tooltip: "Close the backstage area"},
	prompt: "backstage: ",
	decal: {
		edit: {text: "edit", tooltip: "Edit the tiddler '%0'"}
	}
};

config.messages.listView = {
	tiddlerTooltip: "Click for the full text of this tiddler",
	previewUnavailable: "(preview not available)"
};

config.messages.dates.months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November","December"];
config.messages.dates.days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
config.messages.dates.shortMonths = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
config.messages.dates.shortDays = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
// suffixes for dates, eg "1st","2nd","3rd"..."30th","31st"
config.messages.dates.daySuffixes = ["st","nd","rd","th","th","th","th","th","th","th",
		"th","th","th","th","th","th","th","th","th","th",
		"st","nd","rd","th","th","th","th","th","th","th",
		"st"];
config.messages.dates.am = "am";
config.messages.dates.pm = "pm";

merge(config.messages.tiddlerPopup,{
	});

merge(config.views.wikified.tag,{
	labelNoTags: "no tags",
	labelTags: "tags: ",
	openTag: "Open tag '%0'",
	tooltip: "Show tiddlers tagged with '%0'",
	openAllText: "Open all",
	openAllTooltip: "Open all of these tiddlers",
	popupNone: "No other tiddlers tagged with '%0'"});

merge(config.views.wikified,{
	defaultText: "The tiddler '%0' doesn't yet exist. Double-click to create it",
	defaultModifier: "(missing)",
	shadowModifier: "(built-in shadow tiddler)",
	dateFormat: "DD MMM YYYY",
	createdPrompt: "created"});

merge(config.views.editor,{
	tagPrompt: "Type tags separated with spaces, [[use double square brackets]] if necessary, or add existing",
	defaultText: "Type the text for '%0'"});

merge(config.views.editor.tagChooser,{
	text: "tags",
	tooltip: "Choose existing tags to add to this tiddler",
	popupNone: "There are no tags defined",
	tagTooltip: "Add the tag '%0'"});

merge(config.messages,{
	sizeTemplates:
		[
		{unit: 1024*1024*1024, template: "%0\u00a0GB"},
		{unit: 1024*1024, template: "%0\u00a0MB"},
		{unit: 1024, template: "%0\u00a0KB"},
		{unit: 1, template: "%0\u00a0B"}
		]});

merge(config.macros.search,{
	label: "search",
	prompt: "Search this TiddlyWiki",
	placeholder: "",
	accessKey: "F",
	successMsg: "%0 tiddlers found matching %1",
	failureMsg: "No tiddlers found matching %0"});

merge(config.macros.tagging,{
	label: "tagging: ",
	labelNotTag: "not tagging",
	tooltip: "List of tiddlers tagged with '%0'"});

merge(config.macros.timeline,{
	dateFormat: "DD MMM YYYY"});

merge(config.macros.allTags,{
	tooltip: "Show tiddlers tagged with '%0'",
	noTags: "There are no tagged tiddlers"});

config.macros.list.all.prompt = "All tiddlers in alphabetical order";
config.macros.list.missing.prompt = "Tiddlers that have links to them but are not defined";
config.macros.list.orphans.prompt = "Tiddlers that are not linked to from any other tiddlers";
config.macros.list.shadowed.prompt = "Tiddlers shadowed with default contents";
config.macros.list.touched.prompt = "Tiddlers that have been modified locally";

merge(config.macros.closeAll,{
	label: "close all",
	prompt: "Close all displayed tiddlers (except any that are being edited)"});

merge(config.macros.permaview,{
	label: "permaview",
	prompt: "Link to an URL that retrieves all the currently displayed tiddlers"});

merge(config.macros.saveChanges,{
	label: "save changes",
	prompt: "Save all tiddlers to create a new TiddlyWiki",
	accessKey: "S"});

merge(config.macros.newTiddler,{
	label: "new tiddler",
	prompt: "Create a new tiddler",
	title: "New Tiddler",
	accessKey: "N"});

merge(config.macros.newJournal,{
	label: "new journal",
	prompt: "Create a new tiddler from the current date and time",
	accessKey: "J"});

merge(config.macros.options,{
	wizardTitle: "Tweak advanced options",
	step1Title: "These options are saved in cookies in your browser",
	step1Html: "<input type='hidden' name='markList'></input><br><input type='checkbox' checked='false' name='chkUnknown'>Show unknown options</input>",
	unknownDescription: "//(unknown)//",
	listViewTemplate: {
		columns: [
			{name: 'Option', field: 'option', title: "Option", type: 'String'},
			{name: 'Description', field: 'description', title: "Description", type: 'WikiText'},
			{name: 'Name', field: 'name', title: "Name", type: 'String'}
			],
		rowClasses: [
			{className: 'lowlight', field: 'lowlight'}
			]}
	});

merge(config.macros.plugins,{
	wizardTitle: "Manage plugins",
	step1Title: "Currently loaded plugins",
	step1Html: "<input type='hidden' name='markList'></input>", // DO NOT TRANSLATE
	skippedText: "(This plugin has not been executed because it was added since startup)",
	noPluginText: "There are no plugins installed",
	confirmDeleteText: "Are you sure you want to delete these plugins:\n\n%0",
	removeLabel: "remove systemConfig tag",
	removePrompt: "Remove systemConfig tag",
	deleteLabel: "delete",
	deletePrompt: "Delete these tiddlers forever",
	listViewTemplate: {
		columns: [
			{name: 'Selected', field: 'Selected', rowName: 'title', type: 'Selector'},
			{name: 'Tiddler', field: 'tiddler', title: "Tiddler", type: 'Tiddler'},
			{name: 'Description', field: 'Description', title: "Description", type: 'String'},
			{name: 'Version', field: 'Version', title: "Version", type: 'String'},
			{name: 'Size', field: 'size', tiddlerLink: 'size', title: "Size", type: 'Size'},
			{name: 'Forced', field: 'forced', title: "Forced", tag: 'systemConfigForce', type: 'TagCheckbox'},
			{name: 'Disabled', field: 'disabled', title: "Disabled", tag: 'systemConfigDisable', type: 'TagCheckbox'},
			{name: 'Executed', field: 'executed', title: "Loaded", type: 'Boolean', trueText: "Yes", falseText: "No"},
			{name: 'Startup Time', field: 'startupTime', title: "Startup Time", type: 'String'},
			{name: 'Error', field: 'error', title: "Status", type: 'Boolean', trueText: "Error", falseText: "OK"},
			{name: 'Log', field: 'log', title: "Log", type: 'StringList'}
			],
		rowClasses: [
			{className: 'error', field: 'error'},
			{className: 'warning', field: 'warning'}
			]},
	listViewTemplateReadOnly: {
		columns: [
			{name: 'Tiddler', field: 'tiddler', title: "Tiddler", type: 'Tiddler'},
			{name: 'Description', field: 'Description', title: "Description", type: 'String'},
			{name: 'Version', field: 'Version', title: "Version", type: 'String'},
			{name: 'Size', field: 'size', tiddlerLink: 'size', title: "Size", type: 'Size'},
			{name: 'Executed', field: 'executed', title: "Loaded", type: 'Boolean', trueText: "Yes", falseText: "No"},
			{name: 'Startup Time', field: 'startupTime', title: "Startup Time", type: 'String'},
			{name: 'Error', field: 'error', title: "Status", type: 'Boolean', trueText: "Error", falseText: "OK"},
			{name: 'Log', field: 'log', title: "Log", type: 'StringList'}
			],
		rowClasses: [
			{className: 'error', field: 'error'},
			{className: 'warning', field: 'warning'}
			]}
	});

merge(config.macros.toolbar,{
	moreLabel: "more",
	morePrompt: "Show additional commands",
	lessLabel: "less",
	lessPrompt: "Hide additional commands",
	separator: "|"
	});

merge(config.macros.refreshDisplay,{
	label: "refresh",
	prompt: "Redraw the entire TiddlyWiki display"
	});

merge(config.macros.importTiddlers,{
	readOnlyWarning: "You cannot import into a read-only TiddlyWiki file. Try opening it from a file:// URL",
	wizardTitle: "Import tiddlers from another file or server",
	step1Title: "Step 1: Locate the server or TiddlyWiki file",
	step1Html: "Specify the type of the server: <select name='selTypes'><option value=''>Choose...</option></select><br>Enter the URL or pathname here: <input type='text' size=50 name='txtPath'><br>...or browse for a file: <input type='file' size=50 name='txtBrowse'><br><hr>...or select a pre-defined feed: <select name='selFeeds'><option value=''>Choose...</option></select>",
	openLabel: "open",
	openPrompt: "Open the connection to this file or server",
	statusOpenHost: "Opening the host",
	statusGetWorkspaceList: "Getting the list of available workspaces",
	step2Title: "Step 2: Choose the workspace",
	step2Html: "Enter a workspace name: <input type='text' size=50 name='txtWorkspace'><br>...or select a workspace: <select name='selWorkspace'><option value=''>Choose...</option></select>",
	cancelLabel: "cancel",
	cancelPrompt: "Cancel this import",
	statusOpenWorkspace: "Opening the workspace",
	statusGetTiddlerList: "Getting the list of available tiddlers",
	errorGettingTiddlerList: "Error getting list of tiddlers, click Cancel to try again",
	step3Title: "Step 3: Choose the tiddlers to import",
	step3Html: "<input type='hidden' name='markList'></input><br><input type='checkbox' checked='true' name='chkSync'>Keep these tiddlers linked to this server so that you can synchronise subsequent changes</input><br><input type='checkbox' name='chkSave'>Save the details of this server in a 'systemServer' tiddler called:</input> <input type='text' size=25 name='txtSaveTiddler'>",
	importLabel: "import",
	importPrompt: "Import these tiddlers",
	confirmOverwriteText: "Are you sure you want to overwrite these tiddlers:\n\n%0",
	step4Title: "Step 4: Importing %0 tiddler(s)",
	step4Html: "<input type='hidden' name='markReport'></input>", // DO NOT TRANSLATE
	doneLabel: "done",
	donePrompt: "Close this wizard",
	statusDoingImport: "Importing tiddlers",
	statusDoneImport: "All tiddlers imported",
	systemServerNamePattern: "%2 on %1",
	systemServerNamePatternNoWorkspace: "%1",
	confirmOverwriteSaveTiddler: "The tiddler '%0' already exists. Click 'OK' to overwrite it with the details of this server, or 'Cancel' to leave it unchanged",
	serverSaveTemplate: "|''Type:''|%0|\n|''URL:''|%1|\n|''Workspace:''|%2|\n\nThis tiddler was automatically created to record the details of this server",
	serverSaveModifier: "(System)",
	listViewTemplate: {
		columns: [
			{name: 'Selected', field: 'Selected', rowName: 'title', type: 'Selector'},
			{name: 'Tiddler', field: 'tiddler', title: "Tiddler", type: 'Tiddler'},
			{name: 'Size', field: 'size', tiddlerLink: 'size', title: "Size", type: 'Size'},
			{name: 'Tags', field: 'tags', title: "Tags", type: 'Tags'}
			],
		rowClasses: [
			]}
	});

merge(config.macros.upgrade,{
	wizardTitle: "Upgrade TiddlyWiki core code",
	step1Title: "Update or repair this TiddlyWiki to the latest release",
	step1Html: "You are about to upgrade to the latest release of the TiddlyWiki core code (from <a href='%0' class='externalLink' target='_blank'>%1</a>). Your content will be preserved across the upgrade.<br><br>Note that core upgrades have been known to interfere with older plugins. If you run into problems with the upgraded file, see <a href='http://www.tiddlywiki.org/wiki/CoreUpgrades' class='externalLink' target='_blank'>http://www.tiddlywiki.org/wiki/CoreUpgrades</a>",
	errorCantUpgrade: "Unable to upgrade this TiddlyWiki. You can only perform upgrades on TiddlyWiki files stored locally",
	errorNotSaved: "You must save changes before you can perform an upgrade",
	step2Title: "Confirm the upgrade details",
	step2Html_downgrade: "You are about to downgrade to TiddlyWiki version %0 from %1.<br><br>Downgrading to an earlier version of the core code is not recommended",
	step2Html_restore: "This TiddlyWiki appears to be already using the latest version of the core code (%0).<br><br>You can continue to upgrade anyway to ensure that the core code hasn't been corrupted or damaged",
	step2Html_upgrade: "You are about to upgrade to TiddlyWiki version %0 from %1",
	upgradeLabel: "upgrade",
	upgradePrompt: "Prepare for the upgrade process",
	statusPreparingBackup: "Preparing backup",
	statusSavingBackup: "Saving backup file",
	errorSavingBackup: "There was a problem saving the backup file",
	statusLoadingCore: "Loading core code",
	errorLoadingCore: "Error loading the core code",
	errorCoreFormat: "Error with the new core code",
	statusSavingCore: "Saving the new core code",
	statusReloadingCore: "Reloading the new core code",
	startLabel: "start",
	startPrompt: "Start the upgrade process",
	cancelLabel: "cancel",
	cancelPrompt: "Cancel the upgrade process",
	step3Title: "Upgrade cancelled",
	step3Html: "You have cancelled the upgrade process"
	});

merge(config.macros.sync,{
	listViewTemplate: {
		columns: [
			{name: 'Selected', field: 'selected', rowName: 'title', type: 'Selector'},
			{name: 'Tiddler', field: 'tiddler', title: "Tiddler", type: 'Tiddler'},
			{name: 'Server Type', field: 'serverType', title: "Server type", type: 'String'},
			{name: 'Server Host', field: 'serverHost', title: "Server host", type: 'String'},
			{name: 'Server Workspace', field: 'serverWorkspace', title: "Server workspace", type: 'String'},
			{name: 'Status', field: 'status', title: "Synchronisation status", type: 'String'},
			{name: 'Server URL', field: 'serverUrl', title: "Server URL", text: "View", type: 'Link'}
			],
		rowClasses: [
			],
		buttons: [
			{caption: "Sync these tiddlers", name: 'sync'}
			]},
	wizardTitle: "Synchronize with external servers and files",
	step1Title: "Choose the tiddlers you want to synchronize",
	step1Html: "<input type='hidden' name='markList'></input>", // DO NOT TRANSLATE
	syncLabel: "sync",
	syncPrompt: "Sync these tiddlers",
	hasChanged: "Changed while unplugged",
	hasNotChanged: "Unchanged while unplugged",
	syncStatusList: {
		none: {text: "...", display:'none', className:'notChanged'},
		changedServer: {text: "Changed on server", display:null, className:'changedServer'},
		changedLocally: {text: "Changed while unplugged", display:null, className:'changedLocally'},
		changedBoth: {text: "Changed while unplugged and on server", display:null, className:'changedBoth'},
		notFound: {text: "Not found on server", display:null, className:'notFound'},
		putToServer: {text: "Saved update on server", display:null, className:'putToServer'},
		gotFromServer: {text: "Retrieved update from server", display:null, className:'gotFromServer'}
		}
	});

merge(config.macros.annotations,{
	});

merge(config.commands.closeTiddler,{
	text: "close",
	tooltip: "Close this tiddler"});

merge(config.commands.closeOthers,{
	text: "close others",
	tooltip: "Close all other tiddlers"});

merge(config.commands.editTiddler,{
	text: "edit",
	tooltip: "Edit this tiddler",
	readOnlyText: "view",
	readOnlyTooltip: "View the source of this tiddler"});

merge(config.commands.saveTiddler,{
	text: "done",
	tooltip: "Save changes to this tiddler"});

merge(config.commands.cancelTiddler,{
	text: "cancel",
	tooltip: "Undo changes to this tiddler",
	warning: "Are you sure you want to abandon your changes to '%0'?",
	readOnlyText: "done",
	readOnlyTooltip: "View this tiddler normally"});

merge(config.commands.deleteTiddler,{
	text: "delete",
	tooltip: "Delete this tiddler",
	warning: "Are you sure you want to delete '%0'?"});

merge(config.commands.permalink,{
	text: "permalink",
	tooltip: "Permalink for this tiddler"});

merge(config.commands.references,{
	text: "references",
	tooltip: "Show tiddlers that link to this one",
	popupNone: "No references"});

merge(config.commands.jump,{
	text: "jump",
	tooltip: "Jump to another open tiddler"});

merge(config.commands.syncing,{
	text: "syncing",
	tooltip: "Control synchronisation of this tiddler with a server or external file",
	currentlySyncing: "<div>Currently syncing via <span class='popupHighlight'>'%0'</span> to:</"+"div><div>host: <span class='popupHighlight'>%1</span></"+"div><div>workspace: <span class='popupHighlight'>%2</span></"+"div>", // Note escaping of closing <div> tag
	notCurrentlySyncing: "Not currently syncing",
	captionUnSync: "Stop synchronising this tiddler",
	chooseServer: "Synchronise this tiddler with another server:",
	currServerMarker: "\u25cf ",
	notCurrServerMarker: "  "});

merge(config.commands.fields,{
	text: "fields",
	tooltip: "Show the extended fields of this tiddler",
	emptyText: "There are no extended fields for this tiddler",
	listViewTemplate: {
		columns: [
			{name: 'Field', field: 'field', title: "Field", type: 'String'},
			{name: 'Value', field: 'value', title: "Value", type: 'String'}
			],
		rowClasses: [
			],
		buttons: [
			]}});

merge(config.shadowTiddlers,{
	DefaultTiddlers: "[[GettingStarted]]",
	MainMenu: "[[GettingStarted]]",
	SiteTitle: "My TiddlyWiki",
	SiteSubtitle: "a reusable non-linear personal web notebook",
	SiteUrl: "",
	SideBarOptions: '<<search>><<closeAll>><<permaview>><<newTiddler>><<newJournal "DD MMM YYYY" "journal">><<saveChanges>><<slider chkSliderOptionsPanel OptionsPanel "options \u00bb" "Change TiddlyWiki advanced options">>',
	SideBarTabs: '<<tabs txtMainTab "Timeline" "Timeline" TabTimeline "All" "All tiddlers" TabAll "Tags" "All tags" TabTags "More" "More lists" TabMore>>',
	TabMore: '<<tabs txtMoreTab "Missing" "Missing tiddlers" TabMoreMissing "Orphans" "Orphaned tiddlers" TabMoreOrphans "Shadowed" "Shadowed tiddlers" TabMoreShadowed>>'
	});

merge(config.annotations,{
	AdvancedOptions: "This shadow tiddler provides access to several advanced options",
	ColorPalette: "These values in this shadow tiddler determine the colour scheme of the ~TiddlyWiki user interface",
	DefaultTiddlers: "The tiddlers listed in this shadow tiddler will be automatically displayed when ~TiddlyWiki starts up",
	EditTemplate: "The HTML template in this shadow tiddler determines how tiddlers look while they are being edited",
	GettingStarted: "This shadow tiddler provides basic usage instructions",
	ImportTiddlers: "This shadow tiddler provides access to importing tiddlers",
	MainMenu: "This shadow tiddler is used as the contents of the main menu in the left-hand column of the screen",
	MarkupPreHead: "This tiddler is inserted at the top of the <head> section of the TiddlyWiki HTML file",
	MarkupPostHead: "This tiddler is inserted at the bottom of the <head> section of the TiddlyWiki HTML file",
	MarkupPreBody: "This tiddler is inserted at the top of the <body> section of the TiddlyWiki HTML file",
	MarkupPostBody: "This tiddler is inserted at the end of the <body> section of the TiddlyWiki HTML file immediately after the script block",
	OptionsPanel: "This shadow tiddler is used as the contents of the options panel slider in the right-hand sidebar",
	PageTemplate: "The HTML template in this shadow tiddler determines the overall ~TiddlyWiki layout",
	PluginManager: "This shadow tiddler provides access to the plugin manager",
	SideBarOptions: "This shadow tiddler is used as the contents of the option panel in the right-hand sidebar",
	SideBarTabs: "This shadow tiddler is used as the contents of the tabs panel in the right-hand sidebar",
	SiteSubtitle: "This shadow tiddler is used as the second part of the page title",
	SiteTitle: "This shadow tiddler is used as the first part of the page title",
	SiteUrl: "This shadow tiddler should be set to the full target URL for publication",
	StyleSheetColors: "This shadow tiddler contains CSS definitions related to the color of page elements. ''DO NOT EDIT THIS TIDDLER'', instead make your changes in the StyleSheet shadow tiddler",
	StyleSheet: "This tiddler can contain custom CSS definitions",
	StyleSheetLayout: "This shadow tiddler contains CSS definitions related to the layout of page elements. ''DO NOT EDIT THIS TIDDLER'', instead make your changes in the StyleSheet shadow tiddler",
	StyleSheetLocale: "This shadow tiddler contains CSS definitions related to the translation locale",
	StyleSheetPrint: "This shadow tiddler contains CSS definitions for printing",
	SystemSettings: "This tiddler is used to store configuration options for this TiddlyWiki document",
	TabAll: "This shadow tiddler contains the contents of the 'All' tab in the right-hand sidebar",
	TabMore: "This shadow tiddler contains the contents of the 'More' tab in the right-hand sidebar",
	TabMoreMissing: "This shadow tiddler contains the contents of the 'Missing' tab in the right-hand sidebar",
	TabMoreOrphans: "This shadow tiddler contains the contents of the 'Orphans' tab in the right-hand sidebar",
	TabMoreShadowed: "This shadow tiddler contains the contents of the 'Shadowed' tab in the right-hand sidebar",
	TabTags: "This shadow tiddler contains the contents of the 'Tags' tab in the right-hand sidebar",
	TabTimeline: "This shadow tiddler contains the contents of the 'Timeline' tab in the right-hand sidebar",
	ToolbarCommands: "This shadow tiddler determines which commands are shown in tiddler toolbars",
	ViewTemplate: "The HTML template in this shadow tiddler determines how tiddlers look"
	});
//--
//-- Main
//--

var params = null; // Command line parameters
var store = null; // TiddlyWiki storage
var story = null; // Main story
var formatter = null; // Default formatters for the wikifier
var anim = typeof Animator == "function" ? new Animator() : null; // Animation engine
var readOnly = false; // Whether we're in readonly mode
var highlightHack = null; // Embarrassing hack department...
var hadConfirmExit = false; // Don't warn more than once
var safeMode = false; // Disable all plugins and cookies
var showBackstage; // Whether to include the backstage area
var installedPlugins = []; // Information filled in when plugins are executed
var startingUp = false; // Whether we're in the process of starting up
var pluginInfo,tiddler; // Used to pass information to plugins in loadPlugins()

// Whether to use the JavaSaver applet
var useJavaSaver = (config.browser.isSafari || config.browser.isOpera) && (document.location.toString().substr(0,4) != "http");

if(!window || !window.console) {
	console = {tiddlywiki:true,log:function(message) {displayMessage(message);}};
}

// Starting up
function main()
{
	var t10,t9,t8,t7,t6,t5,t4,t3,t2,t1,t0 = new Date();
	startingUp = true;
	var doc = jQuery(document);
	jQuery.noConflict();
	window.onbeforeunload = function(e) {if(window.confirmExit) return confirmExit();};
	params = getParameters();
	if(params)
		params = params.parseParams("open",null,false);
	store = new TiddlyWiki();
	invokeParamifier(params,"oninit");
	story = new Story("tiddlerDisplay","tiddler");
	addEvent(document,"click",Popup.onDocumentClick);
	saveTest();
	var s;
	for(s=0; s<config.notifyTiddlers.length; s++)
		store.addNotification(config.notifyTiddlers[s].name,config.notifyTiddlers[s].notify);
	t1 = new Date();
	loadShadowTiddlers();
	doc.trigger("loadShadows");
	t2 = new Date();
	store.loadFromDiv("storeArea","store",true);
	doc.trigger("loadTiddlers");
	loadOptions();
	t3 = new Date();
	invokeParamifier(params,"onload");
	t4 = new Date();
	readOnly = (window.location.protocol == "file:") ? false : config.options.chkHttpReadOnly;
	var pluginProblem = loadPlugins("systemConfig");
	doc.trigger("loadPlugins");
	t5 = new Date();
	formatter = new Formatter(config.formatters);
	invokeParamifier(params,"onconfig");
	story.switchTheme(config.options.txtTheme);
	showBackstage = showBackstage !== undefined ? showBackstage : !readOnly;
	t6 = new Date();
	var m;
	for(m in config.macros) {
		if(config.macros[m].init)
			config.macros[m].init();
	}
	t7 = new Date();
	store.notifyAll();
	t8 = new Date();
	restart();
	refreshDisplay();
	t9 = new Date();
	if(pluginProblem) {
		story.displayTiddler(null,"PluginManager");
		displayMessage(config.messages.customConfigError);
	}
	if(showBackstage)
		backstage.init();
	t10 = new Date();
	if(config.options.chkDisplayInstrumentation) {
		displayMessage("LoadShadows " + (t2-t1) + " ms");
		displayMessage("LoadFromDiv " + (t3-t2) + " ms");
		displayMessage("LoadPlugins " + (t5-t4) + " ms");
		displayMessage("Macro init " + (t7-t6) + " ms");
		displayMessage("Notify " + (t8-t7) + " ms");
		displayMessage("Restart " + (t9-t8) + " ms");
		displayMessage("Total: " + (t10-t0) + " ms");
	}
	startingUp = false;
	doc.trigger("startup");
}

// Called on unload. All functions called conditionally since they themselves may have been unloaded.
function unload()
{
	if(window.checkUnsavedChanges)
		checkUnsavedChanges();
	if(window.scrubNodes)
		scrubNodes(document.body);
}

// Restarting
function restart()
{
	invokeParamifier(params,"onstart");
	if(story.isEmpty()) {
		story.displayDefaultTiddlers();
	}
	window.scrollTo(0,0);
}

function saveTest()
{
	var s = document.getElementById("saveTest");
	if(s.hasChildNodes())
		alert(config.messages.savedSnapshotError);
	s.appendChild(document.createTextNode("savetest"));
}

function loadShadowTiddlers()
{
	var shadows = new TiddlyWiki();
	shadows.loadFromDiv("shadowArea","shadows",true);
	shadows.forEachTiddler(function(title,tiddler){config.shadowTiddlers[title] = tiddler.text;});
}

function loadPlugins(tag)
{
	if(safeMode)
		return false;
	var tiddlers = store.getTaggedTiddlers(tag);
	tiddlers.sort(function(a,b) {return a.title < b.title ? -1 : (a.title == b.title ? 0 : 1);});
	var toLoad = [];
	var nLoaded = 0;
	var map = {};
	var nPlugins = tiddlers.length;
	installedPlugins = [];
	var i;
	for(i=0; i<nPlugins; i++) {
		var p = getPluginInfo(tiddlers[i]);
		installedPlugins[i] = p;
		var n = p.Name || p.title;
		if(n)
			map[n] = p;
		n = p.Source;
		if(n)
			map[n] = p;
	}
	var visit = function(p) {
		if(!p || p.done)
			return;
		p.done = 1;
		var reqs = p.Requires;
		if(reqs) {
			reqs = reqs.readBracketedList();
			var i;
			for(i=0; i<reqs.length; i++)
				visit(map[reqs[i]]);
		}
		toLoad.push(p);
	};
	for(i=0; i<nPlugins; i++)
		visit(installedPlugins[i]);
	for(i=0; i<toLoad.length; i++) {
		p = toLoad[i];
		pluginInfo = p;
		tiddler = p.tiddler;
		if(isPluginExecutable(p)) {
			if(isPluginEnabled(p)) {
				p.executed = true;
				var startTime = new Date();
				try {
					if(tiddler.text)
						window.eval(tiddler.text);
					nLoaded++;
				} catch(ex) {
					p.log.push(config.messages.pluginError.format([exceptionText(ex)]));
					p.error = true;
					if(!console.tiddlywiki) {
						console.log("error evaluating " + tiddler.title, ex);
					}
				}
				pluginInfo.startupTime = String((new Date()) - startTime) + "ms";
			} else {
				nPlugins--;
			}
		} else {
			p.warning = true;
		}
	}
	return nLoaded != nPlugins;
}

function getPluginInfo(tiddler)
{
	var p = store.getTiddlerSlices(tiddler.title,["Name","Description","Version","Requires","CoreVersion","Date","Source","Author","License","Browsers"]);
	p.tiddler = tiddler;
	p.title = tiddler.title;
	p.log = [];
	return p;
}

// Check that a particular plugin is valid for execution
function isPluginExecutable(plugin)
{
	if(plugin.tiddler.isTagged("systemConfigForce")) {
		plugin.log.push(config.messages.pluginForced);
		return true;
	}
	if(plugin["CoreVersion"]) {
		var coreVersion = plugin["CoreVersion"].split(".");
		var w = parseInt(coreVersion[0],10) - version.major;
		if(w == 0 && coreVersion[1])
			w = parseInt(coreVersion[1],10) - version.minor;
		if(w == 0 && coreVersion[2])
			w = parseInt(coreVersion[2],10) - version.revision;
		if(w > 0) {
			plugin.log.push(config.messages.pluginVersionError);
			return false;
		}
	}
	return true;
}

function isPluginEnabled(plugin)
{
	if(plugin.tiddler.isTagged("systemConfigDisable")) {
		plugin.log.push(config.messages.pluginDisabled);
		return false;
	}
	return true;
}

//--
//-- Paramifiers
//--

function getParameters()
{
	var p = null;
	if(window.location.hash) {
		p = decodeURIComponent(window.location.hash.substr(1));
		if(config.browser.firefoxDate != null && config.browser.firefoxDate[1] < "20051111")
			p = convertUTF8ToUnicode(p);
	}
	return p;
}

function invokeParamifier(params,handler)
{
	if(!params || params.length == undefined || params.length <= 1)
		return;
	var i;
	for(i=1; i<params.length; i++) {
		var p = config.paramifiers[params[i].name];
		if(p && p[handler] instanceof Function)
			p[handler](params[i].value);
		else {
			var h = config.optionHandlers[params[i].name.substr(0,3)];
			if(h && h.set instanceof Function)
				h.set(params[i].name,params[i].value);
		}
	}
}

config.paramifiers = {};

config.paramifiers.start = {
	oninit: function(v) {
		safeMode = v.toLowerCase() == "safe";
	}
};

config.paramifiers.open = {
	onstart: function(v) {
		if(!readOnly || store.tiddlerExists(v) || store.isShadowTiddler(v))
			story.displayTiddler("bottom",v,null,false,null);
	}
};

config.paramifiers.story = {
	onstart: function(v) {
		var list = store.getTiddlerText(v,"").parseParams("open",null,false);
		invokeParamifier(list,"onstart");
	}
};

config.paramifiers.search = {
	onstart: function(v) {
		story.search(v,false,false);
	}
};

config.paramifiers.searchRegExp = {
	onstart: function(v) {
		story.prototype.search(v,false,true);
	}
};

config.paramifiers.tag = {
	onstart: function(v) {
		story.displayTiddlers(null,store.filterTiddlers("[tag["+v+"]]"),null,false,null);
	}
};

config.paramifiers.newTiddler = {
	onstart: function(v) {
		var args = v.parseParams("anon", null, null)[0];
		var title = args.title ? args.title[0] : v;
		var customFields = args.fields ? args.fields[0] : null;
		if(!readOnly) {
			story.displayTiddler(null,title,DEFAULT_EDIT_TEMPLATE,false,null,customFields);
			story.focusTiddler(title,"text");
			var i,tags = args.tag || [];
			for(i=0;i<tags.length;i++) {
				story.setTiddlerTag(title,tags[i],+1);
			}
		}
	}
};

config.paramifiers.newJournal = {
	onstart: function(v) {
		if(!readOnly) {
			var now = new Date();
			var title = now.formatString(v.trim());
			story.displayTiddler(null,title,DEFAULT_EDIT_TEMPLATE);
			story.focusTiddler(title,"text");
		}
	}
};

config.paramifiers.readOnly = {
	onconfig: function(v) {
		var p = v.toLowerCase();
		readOnly = p == "yes" ? true : (p == "no" ? false : readOnly);
	}
};

config.paramifiers.theme = {
	onconfig: function(v) {
		story.switchTheme(v);
	}
};

config.paramifiers.upgrade = {
	onstart: function(v) {
		upgradeFrom(v);
	}
};

config.paramifiers.recent= {
	onstart: function(v) {
		var titles=[];
		var i,tiddlers=store.getTiddlers("modified","excludeLists").reverse();
		for(i=0; i<v && i<tiddlers.length; i++)
			titles.push(tiddlers[i].title);
		story.displayTiddlers(null,titles);
	}
};

config.paramifiers.filter = {
	onstart: function(v) {
		story.displayTiddlers(null,store.filterTiddlers(v),null,false);
	}
};

//--
//-- Formatter helpers
//--

function Formatter(formatters)
{
	var n;
	this.formatters = [];
	var pattern = [];
	for(n=0; n<formatters.length; n++) {
		pattern.push("(" + formatters[n].match + ")");
		this.formatters.push(formatters[n]);
	}
	this.formatterRegExp = new RegExp(pattern.join("|"),"mg");
}

config.formatterHelpers = {

	createElementAndWikify: function(w)
	{
		w.subWikifyTerm(createTiddlyElement(w.output,this.element),this.termRegExp);
	},

	inlineCssHelper: function(w)
	{
		var styles = [];
		config.textPrimitives.cssLookaheadRegExp.lastIndex = w.nextMatch;
		var lookaheadMatch = config.textPrimitives.cssLookaheadRegExp.exec(w.source);
		while(lookaheadMatch && lookaheadMatch.index == w.nextMatch) {
			var s,v;
			if(lookaheadMatch[1]) {
				s = lookaheadMatch[1].unDash();
				v = lookaheadMatch[2];
			} else {
				s = lookaheadMatch[3].unDash();
				v = lookaheadMatch[4];
			}
			if(s=="bgcolor")
				s = "backgroundColor";
			if(s=="float")
				s = "cssFloat";
			styles.push({style: s, value: v});
			w.nextMatch = lookaheadMatch.index + lookaheadMatch[0].length;
			config.textPrimitives.cssLookaheadRegExp.lastIndex = w.nextMatch;
			lookaheadMatch = config.textPrimitives.cssLookaheadRegExp.exec(w.source);
		}
		return styles;
	},

	applyCssHelper: function(e,styles)
	{
		var t;
		for(t=0; t< styles.length; t++) {
			try {
				e.style[styles[t].style] = styles[t].value;
			} catch (ex) {
			}
		}
	},

	enclosedTextHelper: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
			var text = lookaheadMatch[1];
			if(config.browser.isIE)
				text = text.replace(/\n/g,"\r");
			createTiddlyElement(w.output,this.element,null,null,text);
			w.nextMatch = lookaheadMatch.index + lookaheadMatch[0].length;
		}
	},

	isExternalLink: function(link)
	{
		if(store.tiddlerExists(link) || store.isShadowTiddler(link)) {
			return false;
		}
		var urlRegExp = new RegExp(config.textPrimitives.urlPattern,"mg");
		if(urlRegExp.exec(link)) {
			return true;
		}
		if(link.indexOf(".")!=-1 || link.indexOf("\\")!=-1 || link.indexOf("/")!=-1 || link.indexOf("#")!=-1) {
			return true;
		}
		return false;
	}

};

//--
//-- Standard formatters
//--

config.formatters = [
{
	name: "table",
	match: "^\\|(?:[^\\n]*)\\|(?:[fhck]?)$",
	lookaheadRegExp: /^\|([^\n]*)\|([fhck]?)$/mg,
	rowTermRegExp: /(\|(?:[fhck]?)$\n?)/mg,
	cellRegExp: /(?:\|([^\n\|]*)\|)|(\|[fhck]?$\n?)/mg,
	cellTermRegExp: /((?:\x20*)\|)/mg,
	rowTypes: {"c":"caption", "h":"thead", "":"tbody", "f":"tfoot"},
	handler: function(w)
	{
		var table = createTiddlyElement(w.output,"table",null,"twtable");
		var prevColumns = [];
		var currRowType = null;
		var rowContainer;
		var rowCount = 0;
		var onmouseover = function() {jQuery(this).addClass("hoverRow");};
		var onmouseout = function() {jQuery(this).removeClass("hoverRow");};
		w.nextMatch = w.matchStart;
		this.lookaheadRegExp.lastIndex = w.nextMatch;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		while(lookaheadMatch && lookaheadMatch.index == w.nextMatch) {
			var nextRowType = lookaheadMatch[2];
			if(nextRowType == "k") {
				table.className = lookaheadMatch[1];
				w.nextMatch += lookaheadMatch[0].length+1;
			} else {
				if(nextRowType != currRowType) {
					rowContainer = createTiddlyElement(table,this.rowTypes[nextRowType]);
					currRowType = nextRowType;
				}
				if(currRowType == "c") {
					// Caption
					w.nextMatch++;
					if(rowContainer != table.firstChild)
						table.insertBefore(rowContainer,table.firstChild);
					rowContainer.setAttribute("align",rowCount == 0?"top":"bottom");
					w.subWikifyTerm(rowContainer,this.rowTermRegExp);
				} else {
					var theRow = createTiddlyElement(rowContainer,"tr",null,rowCount%2?"oddRow":"evenRow");
					theRow.onmouseover = onmouseover;
					theRow.onmouseout = onmouseout;
					this.rowHandler(w,theRow,prevColumns);
					rowCount++;
				}
			}
			this.lookaheadRegExp.lastIndex = w.nextMatch;
			lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		}
	},
	rowHandler: function(w,e,prevColumns)
	{
		var col = 0;
		var colSpanCount = 1;
		var prevCell = null;
		this.cellRegExp.lastIndex = w.nextMatch;
		var cellMatch = this.cellRegExp.exec(w.source);
		while(cellMatch && cellMatch.index == w.nextMatch) {
			if(cellMatch[1] == "~") {
				// Rowspan
				var last = prevColumns[col];
				if(last) {
					last.rowSpanCount++;
					last.element.setAttribute("rowspan",last.rowSpanCount);
					last.element.setAttribute("rowSpan",last.rowSpanCount); // Needed for IE
					last.element.valign = "center";
					if(colSpanCount > 1) {
						last.element.setAttribute("colspan",colSpanCount);
						last.element.setAttribute("colSpan",colSpanCount); // Needed for IE
						colSpanCount = 1;
					}
				}
				w.nextMatch = this.cellRegExp.lastIndex-1;
			} else if(cellMatch[1] == ">") {
				// Colspan
				colSpanCount++;
				w.nextMatch = this.cellRegExp.lastIndex-1;
			} else if(cellMatch[2]) {
				// End of row
				if(prevCell && colSpanCount > 1) {
					prevCell.setAttribute("colspan",colSpanCount);
					prevCell.setAttribute("colSpan",colSpanCount); // Needed for IE
				}
				w.nextMatch = this.cellRegExp.lastIndex;
				break;
			} else {
				// Cell
				w.nextMatch++;
				var styles = config.formatterHelpers.inlineCssHelper(w);
				var spaceLeft = false;
				var chr = w.source.substr(w.nextMatch,1);
				while(chr == " ") {
					spaceLeft = true;
					w.nextMatch++;
					chr = w.source.substr(w.nextMatch,1);
				}
				var cell;
				if(chr == "!") {
					cell = createTiddlyElement(e,"th");
					w.nextMatch++;
				} else {
					cell = createTiddlyElement(e,"td");
				}
				prevCell = cell;
				prevColumns[col] = {rowSpanCount:1,element:cell};
				if(colSpanCount > 1) {
					cell.setAttribute("colspan",colSpanCount);
					cell.setAttribute("colSpan",colSpanCount); // Needed for IE
					colSpanCount = 1;
				}
				config.formatterHelpers.applyCssHelper(cell,styles);
				w.subWikifyTerm(cell,this.cellTermRegExp);
				if(w.matchText.substr(w.matchText.length-2,1) == " ") // spaceRight
					cell.align = spaceLeft ? "center" : "left";
				else if(spaceLeft)
					cell.align = "right";
				w.nextMatch--;
			}
			col++;
			this.cellRegExp.lastIndex = w.nextMatch;
			cellMatch = this.cellRegExp.exec(w.source);
		}
	}
},

{
	name: "heading",
	match: "^!{1,6}",
	termRegExp: /(\n)/mg,
	handler: function(w)
	{
		w.subWikifyTerm(createTiddlyElement(w.output,"h" + w.matchLength),this.termRegExp);
	}
},

{
	name: "list",
	match: "^(?:[\\*#;:]+)",
	lookaheadRegExp: /^(?:(?:(\*)|(#)|(;)|(:))+)/mg,
	termRegExp: /(\n)/mg,
	handler: function(w)
	{
		var stack = [w.output];
		var currLevel = 0, currType = null;
		var listLevel, listType, itemType, baseType;
		w.nextMatch = w.matchStart;
		this.lookaheadRegExp.lastIndex = w.nextMatch;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		while(lookaheadMatch && lookaheadMatch.index == w.nextMatch) {
			if(lookaheadMatch[1]) {
				listType = "ul";
				itemType = "li";
			} else if(lookaheadMatch[2]) {
				listType = "ol";
				itemType = "li";
			} else if(lookaheadMatch[3]) {
				listType = "dl";
				itemType = "dt";
			} else if(lookaheadMatch[4]) {
				listType = "dl";
				itemType = "dd";
			}
			if(!baseType)
				baseType = listType;
			listLevel = lookaheadMatch[0].length;
			w.nextMatch += lookaheadMatch[0].length;
			var t;
			if(listLevel > currLevel) {
				for(t=currLevel; t<listLevel; t++) {
					var target = (currLevel == 0) ? stack[stack.length-1] : stack[stack.length-1].lastChild;
					stack.push(createTiddlyElement(target,listType));
				}
			} else if(listType!=baseType && listLevel==1) {
				w.nextMatch -= lookaheadMatch[0].length;
				return;
			} else if(listLevel < currLevel) {
				for(t=currLevel; t>listLevel; t--)
					stack.pop();
			} else if(listLevel == currLevel && listType != currType) {
				stack.pop();
				stack.push(createTiddlyElement(stack[stack.length-1].lastChild,listType));
			}
			currLevel = listLevel;
			currType = listType;
			var e = createTiddlyElement(stack[stack.length-1],itemType);
			w.subWikifyTerm(e,this.termRegExp);
			this.lookaheadRegExp.lastIndex = w.nextMatch;
			lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		}
	}
},

{
	name: "quoteByBlock",
	match: "^<<<\\n",
	termRegExp: /(^<<<(\n|$))/mg,
	element: "blockquote",
	handler: config.formatterHelpers.createElementAndWikify
},

{
	name: "quoteByLine",
	match: "^>+",
	lookaheadRegExp: /^>+/mg,
	termRegExp: /(\n)/mg,
	element: "blockquote",
	handler: function(w)
	{
		var stack = [w.output];
		var currLevel = 0;
		var newLevel = w.matchLength;
		var t,matched;
		do {
			if(newLevel > currLevel) {
				for(t=currLevel; t<newLevel; t++)
					stack.push(createTiddlyElement(stack[stack.length-1],this.element));
			} else if(newLevel < currLevel) {
				for(t=currLevel; t>newLevel; t--)
					stack.pop();
			}
			currLevel = newLevel;
			w.subWikifyTerm(stack[stack.length-1],this.termRegExp);
			createTiddlyElement(stack[stack.length-1],"br");
			this.lookaheadRegExp.lastIndex = w.nextMatch;
			var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
			matched = lookaheadMatch && lookaheadMatch.index == w.nextMatch;
			if(matched) {
				newLevel = lookaheadMatch[0].length;
				w.nextMatch += lookaheadMatch[0].length;
			}
		} while(matched);
	}
},

{
	name: "rule",
	match: "^----+$\\n?|<hr ?/?>\\n?",
	handler: function(w)
	{
		createTiddlyElement(w.output,"hr");
	}
},

{
	name: "monospacedByLine",
	match: "^(?:/\\*\\{\\{\\{\\*/|\\{\\{\\{|//\\{\\{\\{|<!--\\{\\{\\{-->)\\n",
	element: "pre",
	handler: function(w)
	{
		switch(w.matchText) {
		case "/*{{{*/\n": // CSS
			this.lookaheadRegExp = /\/\*\{\{\{\*\/\n*((?:^[^\n]*\n)+?)(\n*^\f*\/\*\}\}\}\*\/$\n?)/mg;
			break;
		case "{{{\n": // monospaced block
			this.lookaheadRegExp = /^\{\{\{\n((?:^[^\n]*\n)+?)(^\f*\}\}\}$\n?)/mg;
			break;
		case "//{{{\n": // plugin
			this.lookaheadRegExp = /^\/\/\{\{\{\n\n*((?:^[^\n]*\n)+?)(\n*^\f*\/\/\}\}\}$\n?)/mg;
			break;
		case "<!--{{{-->\n": //template
			this.lookaheadRegExp = /<!--\{\{\{-->\n*((?:^[^\n]*\n)+?)(\n*^\f*<!--\}\}\}-->$\n?)/mg;
			break;
		default:
			break;
		}
		config.formatterHelpers.enclosedTextHelper.call(this,w);
	}
},

{
	name: "wikifyComment",
	match: "^(?:/\\*\\*\\*|<!---)\\n",
	handler: function(w)
	{
		var termRegExp = (w.matchText == "/***\n") ? (/(^\*\*\*\/\n)/mg) : (/(^--->\n)/mg);
		w.subWikifyTerm(w.output,termRegExp);
	}
},

{
	name: "macro",
	match: "<<",
	lookaheadRegExp: /<<([^>\s]+)(?:\s*)((?:[^>]|(?:>(?!>)))*)>>/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart && lookaheadMatch[1]) {
			w.nextMatch = this.lookaheadRegExp.lastIndex;
			invokeMacro(w.output,lookaheadMatch[1],lookaheadMatch[2],w,w.tiddler);
		}
	}
},

{
	name: "prettyLink",
	match: "\\[\\[",
	lookaheadRegExp: /\[\[(.*?)(?:\|(~)?(.*?))?\]\]/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
			var e;
			var text = lookaheadMatch[1];
			if(lookaheadMatch[3]) {
				// Pretty bracketted link
				var link = lookaheadMatch[3];
				e = (!lookaheadMatch[2] && config.formatterHelpers.isExternalLink(link)) ?
						createExternalLink(w.output,link) : createTiddlyLink(w.output,link,false,null,w.isStatic,w.tiddler);
			} else {
				// Simple bracketted link
				e = createTiddlyLink(w.output,text,false,null,w.isStatic,w.tiddler);
			}
			createTiddlyText(e,text);
			w.nextMatch = this.lookaheadRegExp.lastIndex;
		}
	}
},

{
	name: "wikiLink",
	match: config.textPrimitives.unWikiLink+"?"+config.textPrimitives.wikiLink,
	handler: function(w)
	{
		if(w.matchText.substr(0,1) == config.textPrimitives.unWikiLink) {
			w.outputText(w.output,w.matchStart+1,w.nextMatch);
			return;
		}
		if(w.matchStart > 0) {
			var preRegExp = new RegExp(config.textPrimitives.anyLetterStrict,"mg");
			preRegExp.lastIndex = w.matchStart-1;
			var preMatch = preRegExp.exec(w.source);
			if(preMatch.index == w.matchStart-1) {
				w.outputText(w.output,w.matchStart,w.nextMatch);
				return;
			}
		}
		if(w.autoLinkWikiWords || store.isShadowTiddler(w.matchText)) {
			var link = createTiddlyLink(w.output,w.matchText,false,null,w.isStatic,w.tiddler);
			w.outputText(link,w.matchStart,w.nextMatch);
		} else {
			w.outputText(w.output,w.matchStart,w.nextMatch);
		}
	}
},

{
	name: "urlLink",
	match: config.textPrimitives.urlPattern,
	handler: function(w)
	{
		w.outputText(createExternalLink(w.output,w.matchText),w.matchStart,w.nextMatch);
	}
},

{
	name: "image",
	match: "\\[[<>]?[Ii][Mm][Gg]\\[",
	lookaheadRegExp: /\[([<]?)(>?)[Ii][Mm][Gg]\[(?:([^\|\]]+)\|)?([^\[\]\|]+)\](?:\[([^\]]*)\])?\]/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
			var e = w.output;
			if(lookaheadMatch[5]) {
				var link = lookaheadMatch[5];
				e = config.formatterHelpers.isExternalLink(link) ? createExternalLink(w.output,link) : createTiddlyLink(w.output,link,false,null,w.isStatic,w.tiddler);
				jQuery(e).addClass("imageLink");
			}
			var img = createTiddlyElement(e,"img");
			if(lookaheadMatch[1])
				img.align = "left";
			else if(lookaheadMatch[2])
				img.align = "right";
			if(lookaheadMatch[3]) {
				img.title = lookaheadMatch[3];
				img.setAttribute("alt",lookaheadMatch[3]);
			}
			img.src = lookaheadMatch[4];
			w.nextMatch = this.lookaheadRegExp.lastIndex;
		}
	}
},

{
	name: "html",
	match: "<[Hh][Tt][Mm][Ll]>",
	lookaheadRegExp: /<[Hh][Tt][Mm][Ll]>((?:.|\n)*?)<\/[Hh][Tt][Mm][Ll]>/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
			createTiddlyElement(w.output,"span").innerHTML = lookaheadMatch[1];
			w.nextMatch = this.lookaheadRegExp.lastIndex;
		}
	}
},

{
	name: "commentByBlock",
	match: "/%",
	lookaheadRegExp: /\/%((?:.|\n)*?)%\//mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart)
			w.nextMatch = this.lookaheadRegExp.lastIndex;
	}
},

{
	name: "characterFormat",
	match: "''|//|__|\\^\\^|~~|--(?!\\s|$)|\\{\\{\\{",
	handler: function(w)
	{
		switch(w.matchText) {
		case "''":
			w.subWikifyTerm(w.output.appendChild(document.createElement("strong")),/('')/mg);
			break;
		case "//":
			w.subWikifyTerm(createTiddlyElement(w.output,"em"),/(\/\/)/mg);
			break;
		case "__":
			w.subWikifyTerm(createTiddlyElement(w.output,"u"),/(__)/mg);
			break;
		case "^^":
			w.subWikifyTerm(createTiddlyElement(w.output,"sup"),/(\^\^)/mg);
			break;
		case "~~":
			w.subWikifyTerm(createTiddlyElement(w.output,"sub"),/(~~)/mg);
			break;
		case "--":
			w.subWikifyTerm(createTiddlyElement(w.output,"strike"),/(--)/mg);
			break;
		case "{{{":
			var lookaheadRegExp = /\{\{\{((?:.|\n)*?)\}\}\}/mg;
			lookaheadRegExp.lastIndex = w.matchStart;
			var lookaheadMatch = lookaheadRegExp.exec(w.source);
			if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
				createTiddlyElement(w.output,"code",null,null,lookaheadMatch[1]);
				w.nextMatch = lookaheadRegExp.lastIndex;
			}
			break;
		}
	}
},

{
	name: "customFormat",
	match: "@@|\\{\\{",
	handler: function(w)
	{
		switch(w.matchText) {
		case "@@":
			var e = createTiddlyElement(w.output,"span");
			var styles = config.formatterHelpers.inlineCssHelper(w);
			if(styles.length == 0)
				e.className = "marked";
			else
				config.formatterHelpers.applyCssHelper(e,styles);
			w.subWikifyTerm(e,/(@@)/mg);
			break;
		case "{{":
			var lookaheadRegExp = /\{\{[\s]*([\w]+[\s\w]*)[\s]*\{(\n?)/mg;
			lookaheadRegExp.lastIndex = w.matchStart;
			var lookaheadMatch = lookaheadRegExp.exec(w.source);
			if(lookaheadMatch) {
				w.nextMatch = lookaheadRegExp.lastIndex;
				e = createTiddlyElement(w.output,lookaheadMatch[2] == "\n" ? "div" : "span",null,lookaheadMatch[1]);
				w.subWikifyTerm(e,/(\}\}\})/mg);
			}
			break;
		}
	}
},

{
	name: "mdash",
	match: "--",
	handler: function(w)
	{
		createTiddlyElement(w.output,"span").innerHTML = "&mdash;";
	}
},

{
	name: "lineBreak",
	match: "\\n|<br ?/?>",
	handler: function(w)
	{
		createTiddlyElement(w.output,"br");
	}
},

{
	name: "rawText",
	match: "\"{3}|<nowiki>",
	lookaheadRegExp: /(?:\"{3}|<nowiki>)((?:.|\n)*?)(?:\"{3}|<\/nowiki>)/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
			createTiddlyElement(w.output,"span",null,null,lookaheadMatch[1]);
			w.nextMatch = this.lookaheadRegExp.lastIndex;
		}
	}
},

{
	name: "htmlEntitiesEncoding",
	match: "(?:(?:&#?[a-zA-Z0-9]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9a-fA-F]|1D[c-fC-F][0-9a-fA-F]|20[d-fD-F][0-9a-fA-F]|FE2[0-9a-fA-F])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[a-zA-Z0-9]{2,8};)",
	handler: function(w)
	{
		createTiddlyElement(w.output,"span").innerHTML = w.matchText;
	}
}

];

//--
//-- Wikifier
//--

function getParser(tiddler,format)
{
	if(tiddler) {
		if(!format)
			format = tiddler.fields["wikiformat"];
		var i;
		if(format) {
			for(i in config.parsers) {
				if(format == config.parsers[i].format)
					return config.parsers[i];
			}
		} else {
			for(i in config.parsers) {
				if(tiddler.isTagged(config.parsers[i].formatTag))
					return config.parsers[i];
			}
		}
	}
	return formatter;
}

function Wikifier(source,formatter,highlightRegExp,tiddler)
{
	this.source = source;
	this.output = null;
	this.formatter = formatter;
	this.nextMatch = 0;
	this.autoLinkWikiWords = tiddler && tiddler.autoLinkWikiWords() == false ? false : true;
	this.highlightRegExp = highlightRegExp;
	this.highlightMatch = null;
	this.isStatic = false;
	if(highlightRegExp) {
		highlightRegExp.lastIndex = 0;
		this.highlightMatch = highlightRegExp.exec(source);
	}
	this.tiddler = tiddler;
}

Wikifier.prototype.wikifyPlain = function()
{
	var e = createTiddlyElement(document.body,"div");
	e.style.display = "none";
	this.subWikify(e);
	var text = jQuery(e).text();
	jQuery(e).remove();
	return text;
};

Wikifier.prototype.subWikify = function(output,terminator)
{
	try {
		if(terminator)
			this.subWikifyTerm(output,new RegExp("(" + terminator + ")","mg"));
		else
			this.subWikifyUnterm(output);
	} catch(ex) {
		showException(ex);
	}
};

Wikifier.prototype.subWikifyUnterm = function(output)
{
	var oldOutput = this.output;
	this.output = output;
	this.formatter.formatterRegExp.lastIndex = this.nextMatch;
	var formatterMatch = this.formatter.formatterRegExp.exec(this.source);
	while(formatterMatch) {
		// Output any text before the match
		if(formatterMatch.index > this.nextMatch)
			this.outputText(this.output,this.nextMatch,formatterMatch.index);
		// Set the match parameters for the handler
		this.matchStart = formatterMatch.index;
		this.matchLength = formatterMatch[0].length;
		this.matchText = formatterMatch[0];
		this.nextMatch = this.formatter.formatterRegExp.lastIndex;
		var t;
		for(t=1; t<formatterMatch.length; t++) {
			if(formatterMatch[t]) {
				this.formatter.formatters[t-1].handler(this);
				this.formatter.formatterRegExp.lastIndex = this.nextMatch;
				break;
			}
		}
		formatterMatch = this.formatter.formatterRegExp.exec(this.source);
	}
	if(this.nextMatch < this.source.length) {
		this.outputText(this.output,this.nextMatch,this.source.length);
		this.nextMatch = this.source.length;
	}
	this.output = oldOutput;
};

Wikifier.prototype.subWikifyTerm = function(output,terminatorRegExp)
{
	var oldOutput = this.output;
	this.output = output;
	terminatorRegExp.lastIndex = this.nextMatch;
	var terminatorMatch = terminatorRegExp.exec(this.source);
	this.formatter.formatterRegExp.lastIndex = this.nextMatch;
	var formatterMatch = this.formatter.formatterRegExp.exec(terminatorMatch ? this.source.substr(0,terminatorMatch.index) : this.source);
	while(terminatorMatch || formatterMatch) {
		if(terminatorMatch && (!formatterMatch || terminatorMatch.index <= formatterMatch.index)) {
			if(terminatorMatch.index > this.nextMatch)
				this.outputText(this.output,this.nextMatch,terminatorMatch.index);
			this.matchText = terminatorMatch[1];
			this.matchLength = terminatorMatch[1].length;
			this.matchStart = terminatorMatch.index;
			this.nextMatch = this.matchStart + this.matchLength;
			this.output = oldOutput;
			return;
		}
		if(formatterMatch.index > this.nextMatch)
			this.outputText(this.output,this.nextMatch,formatterMatch.index);
		this.matchStart = formatterMatch.index;
		this.matchLength = formatterMatch[0].length;
		this.matchText = formatterMatch[0];
		this.nextMatch = this.formatter.formatterRegExp.lastIndex;
		var t;
		for(t=1; t<formatterMatch.length; t++) {
			if(formatterMatch[t]) {
				this.formatter.formatters[t-1].handler(this);
				this.formatter.formatterRegExp.lastIndex = this.nextMatch;
				break;
			}
		}
		terminatorRegExp.lastIndex = this.nextMatch;
		terminatorMatch = terminatorRegExp.exec(this.source);
		formatterMatch = this.formatter.formatterRegExp.exec(terminatorMatch ? this.source.substr(0,terminatorMatch.index) : this.source);
	}
	if(this.nextMatch < this.source.length) {
		this.outputText(this.output,this.nextMatch,this.source.length);
		this.nextMatch = this.source.length;
	}
	this.output = oldOutput;
};

Wikifier.prototype.outputText = function(place,startPos,endPos)
{
	while(this.highlightMatch && (this.highlightRegExp.lastIndex > startPos) && (this.highlightMatch.index < endPos) && (startPos < endPos)) {
		if(this.highlightMatch.index > startPos) {
			createTiddlyText(place,this.source.substring(startPos,this.highlightMatch.index));
			startPos = this.highlightMatch.index;
		}
		var highlightEnd = Math.min(this.highlightRegExp.lastIndex,endPos);
		createTiddlyElement(place,"span",null,"highlight",this.source.substring(startPos,highlightEnd));
		startPos = highlightEnd;
		if(startPos >= this.highlightRegExp.lastIndex)
			this.highlightMatch = this.highlightRegExp.exec(this.source);
	}
	if(startPos < endPos) {
		createTiddlyText(place,this.source.substring(startPos,endPos));
	}
};

function wikify(source,output,highlightRegExp,tiddler)
{
	if(source) {
		var wikifier = new Wikifier(source,getParser(tiddler),highlightRegExp,tiddler);
		var t0 = new Date();
		wikifier.subWikify(output);
		if(tiddler && config.options.chkDisplayInstrumentation)
			displayMessage("wikify:" +tiddler.title+ " in " + (new Date()-t0) + " ms");
	}
}

function wikifyStatic(source,highlightRegExp,tiddler,format)
{
	var e = createTiddlyElement(document.body,"pre");
	e.style.display = "none";
	var html = "";
	if(source && source != "") {
		if(!tiddler)
			tiddler = new Tiddler("temp");
		var wikifier = new Wikifier(source,getParser(tiddler,format),highlightRegExp,tiddler);
		wikifier.isStatic = true;
		wikifier.subWikify(e);
		html = e.innerHTML;
		jQuery(e).remove();
	}
	return html;
}

function wikifyPlainText(text,limit,tiddler)
{
	if(limit > 0)
		text = text.substr(0,limit);
	var wikifier = new Wikifier(text,formatter,null,tiddler);
	return wikifier.wikifyPlain();
}

function highlightify(source,output,highlightRegExp,tiddler)
{
	if(source) {
		var wikifier = new Wikifier(source,formatter,highlightRegExp,tiddler);
		wikifier.outputText(output,0,source.length);
	}
}

//--
//-- Macro definitions
//--

function invokeMacro(place,macro,params,wikifier,tiddler)
{
	try {
		var m = config.macros[macro];
		if(m && m.handler) {
			var tiddlerElem = story.findContainingTiddler(place);
			window.tiddler = tiddlerElem ? store.getTiddler(tiddlerElem.getAttribute("tiddler")) : null;
			window.place = place;
			var allowEval = true;
			if(config.evaluateMacroParameters=="system") {
				if(!tiddler || tiddler.tags.indexOf("systemAllowEval") == -1) {
					allowEval = false;
				}
			}
			m.handler(place,macro,m.noPreParse?null:params.readMacroParams(!allowEval),wikifier,params,tiddler);
		} else {
			createTiddlyError(place,config.messages.macroError.format([macro]),config.messages.macroErrorDetails.format([macro,config.messages.missingMacro]));
		}
	} catch(ex) {
		createTiddlyError(place,config.messages.macroError.format([macro]),config.messages.macroErrorDetails.format([macro,ex.toString()]));
	}
}

config.macros.version.handler = function(place)
{
	jQuery("<span/>").text(formatVersion()).appendTo(place);
};

config.macros.today.handler = function(place,macroName,params)
{
	var now = new Date();
	var text = params[0] ? now.formatString(params[0].trim()) : now.toLocaleString();
	jQuery("<span/>").text(text).appendTo(place);
};

config.macros.list.template = "<<view title link>>";
config.macros.list.handler = function(place,macroName,params,wikifier,paramString)
{
	var list = document.createElement("ul");
	jQuery(list).attr({ refresh: "macro", macroName: macroName }).data("params", paramString);
	place.appendChild(list);
	this.refresh(list);
};

config.macros.list.refresh = function(list) {
	var paramString = jQuery(list).data("params");
	var params = paramString.readMacroParams();
	var args = paramString.parseParams("anon", null, null)[0];
	var type = args.anon ? args.anon[0] : "all";
	jQuery(list).empty().addClass("list list-" + type);
	var template = args.template ? store.getTiddlerText(args.template[0]) : false;
	if(!template) {
		template = config.macros.list.template;
	}
	if(this[type].prompt)
		createTiddlyElement(list,"li",null,"listTitle",this[type].prompt);
	var results;
	if(this[type].handler)
		results = this[type].handler(params);
	var t;
	for(t = 0; t < results.length; t++) {
		var li = document.createElement("li");
		list.appendChild(li);
		var tiddler = results[t];
		if(typeof(tiddler) == 'string') { // deal with missing etc..
				tiddler = store.getTiddler(tiddler) || new Tiddler(tiddler);
		}
		wikify(template, li, null, tiddler);
	}
	if(results.length === 0 && args.emptyMessage) {
		jQuery(list).addClass("emptyList");
		jQuery("<li />").text(args.emptyMessage[0]).appendTo(list);
	}
};

config.macros.list.all.handler = function(params)
{
	return store.reverseLookup("tags","excludeLists",false,"title");
};

config.macros.list.missing.handler = function(params)
{
	return store.getMissingLinks();
};

config.macros.list.orphans.handler = function(params)
{
	return store.getOrphans();
};

config.macros.list.shadowed.handler = function(params)
{
	return store.getShadowed();
};

config.macros.list.touched.handler = function(params)
{
	return store.getTouched();
};

config.macros.list.filter.handler = function(params)
{
	var filter = params[1];
	var results = [];
	if(filter) {
		var tiddlers = store.filterTiddlers(filter);
		var t;
		for(t=0; t<tiddlers.length; t++)
			results.push(tiddlers[t].title);
	}
	return results;
};

config.macros.allTags.handler = function(place,macroName,params)
{
	var tags = store.getTags(params[0]);
	var ul = createTiddlyElement(place,"ul");
	if(tags.length == 0)
		createTiddlyElement(ul,"li",null,"listTitle",this.noTags);
	var t;
	for(t=0; t<tags.length; t++) {
		var title = tags[t][0];
		var info = getTiddlyLinkInfo(title);
		var li = createTiddlyElement(ul,"li");
		var btn = createTiddlyButton(li,title + " (" + tags[t][1] + ")",this.tooltip.format([title]),onClickTag,info.classes);
		btn.setAttribute("tag",title);
		btn.setAttribute("refresh","link");
		btn.setAttribute("tiddlyLink",title);
		if(params[1]) {
			btn.setAttribute("sortby",params[1]);
		}
	}
};

var macro = config.macros.timeline;
merge(macro, {
	handler: function(place,macroName,params, wikifier, paramString, tiddler) {
		var container = jQuery("<div />").attr("params", paramString).
			attr("macroName", macroName).appendTo(place)[0];
		macro.refresh(container);
	},
	refresh: function(container) {
		jQuery(container).attr("refresh", "macro").empty();
		var paramString = jQuery(container).attr("params");
		var args = paramString.parseParams("anon", null, null)[0];
		var params = args.anon || [];

		var field = params[0] || "modified";
		var dateFormat = params[2] || this.dateFormat;
		var groupTemplate = macro.groupTemplate.format(field, dateFormat);
		groupTemplate = args.groupTemplate ? store.getTiddlerText(args.groupTemplate[0]) || groupTemplate :
			groupTemplate;

		var itemTemplate = macro.itemTemplate;
		itemTemplate = args.template ? store.getTiddlerText(args.template[0]) || itemTemplate :
			itemTemplate;

		var tiddlers = args.filter ? store.sortTiddlers(store.filterTiddlers(args.filter[0]), field) :
			store.reverseLookup("tags", "excludeLists", false, field);
		var lastGroup = "", ul;
		var last = params[1] ? tiddlers.length-Math.min(tiddlers.length,parseInt(params[1],10)) : 0;
		var t;
		for(t=tiddlers.length-1; t>=last; t--) {
			var tiddler = tiddlers[t];
			var theGroup = wikifyPlainText(groupTemplate,0,tiddler);
			if(typeof(ul) == "undefined" || theGroup != lastGroup) {
				ul = document.createElement("ul");
				jQuery(ul).addClass("timeline");
				container.appendChild(ul);
				createTiddlyElement(ul,"li",null,"listTitle",theGroup);
				lastGroup = theGroup;
			}
			var item = createTiddlyElement(ul,"li",null,"listLink");
			wikify(itemTemplate,item,null,tiddler);
		}
	},
	groupTemplate: "<<view %0 date '%1'>>", 
	itemTemplate: "<<view title link>>"
});

config.macros.tiddler.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var allowEval = true;
	var stack = config.macros.tiddler.tiddlerStack;
	if(stack.length > 0 && config.evaluateMacroParameters == "system") {
		// included tiddler and "system" evaluation required, so check tiddler tagged appropriately
		var title = stack[stack.length-1];
		var pos = title.indexOf(config.textPrimitives.sectionSeparator);
		if(pos != -1) {
			title = title.substr(0,pos); // get the base tiddler title
		}
		var t = store.getTiddler(title);
		if(!t || t.tags.indexOf("systemAllowEval") == -1) {
			allowEval = false;
		}
	}
	params = paramString.parseParams("name",null,allowEval,false,true);
	var names = params[0]["name"];
	var tiddlerName = names[0];
	var className = names[1] || null;
	var args = params[0]["with"];
	var wrapper = createTiddlyElement(place,"span",null,className,null,{
		refresh: "content", tiddler: tiddlerName
	});
	if(args!==undefined)
		wrapper.setAttribute("args","[["+args.join("]] [[")+"]]");
	this.transclude(wrapper,tiddlerName,args);
};

config.macros.tiddler.transclude = function(wrapper,tiddlerName,args)
{
	var text = store.getTiddlerText(tiddlerName);
	if(!text)
		return;
	var stack = config.macros.tiddler.tiddlerStack;
	if(stack.indexOf(tiddlerName) !== -1)
		return;
	stack.push(tiddlerName);
	try {
		if(typeof args == "string")
			args = args.readBracketedList();
		var n = args ? Math.min(args.length,9) : 0;
		var i;
		for(i=0; i<n; i++) {
			var placeholderRE = new RegExp("\\$" + (i + 1),"mg");
			text = text.replace(placeholderRE,args[i]);
		}
		config.macros.tiddler.renderText(wrapper,text,tiddlerName);
	} finally {
		stack.pop();
	}
};

config.macros.tiddler.renderText = function(place,text,tiddlerName)
{
	wikify(text,place,null,store.getTiddler(tiddlerName));
};

config.macros.tiddler.tiddlerStack = [];

config.macros.tag.handler = function(place,macroName,params)
{
	var btn = createTagButton(place,params[0],null,params[1],params[2]);
	if(params[3]) {
		btn.setAttribute('sortby',params[3]);
	}
};

config.macros.tags.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	params = paramString.parseParams("anon",null,true,false,false);
	var ul = createTiddlyElement(place,"ul");
	var title = getParam(params,"anon","");
	if(title && store.tiddlerExists(title))
		tiddler = store.getTiddler(title);
	var sep = getParam(params,"sep"," ");
	var lingo = config.views.wikified.tag;
	var label = null;
	var t;
	for(t=0; t<tiddler.tags.length; t++) {
		var tag = store.getTiddler(tiddler.tags[t]);
		if(!tag || !tag.tags.contains("excludeLists")) {
			if(!label)
				label = createTiddlyElement(ul,"li",null,"listTitle",lingo.labelTags.format([tiddler.title]));
			createTagButton(createTiddlyElement(ul,"li"),tiddler.tags[t],tiddler.title);
			if(t<tiddler.tags.length-1)
				createTiddlyText(ul,sep);
		}
	}
	if(!label)
		createTiddlyElement(ul,"li",null,"listTitle",lingo.labelNoTags.format([tiddler.title]));
};

config.macros.tagging.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	params = paramString.parseParams("anon",null,true,false,false);
	var ul = createTiddlyElement(place,"ul");
	var title = getParam(params,"anon","");
	if(title == "" && tiddler instanceof Tiddler)
		title = tiddler.title;
	var sep = getParam(params,"sep"," ");
	ul.setAttribute("title",this.tooltip.format([title]));
	var tagged = store.getTaggedTiddlers(title);
	var prompt = tagged.length == 0 ? this.labelNotTag : this.label;
	createTiddlyElement(ul,"li",null,"listTitle",prompt.format([title,tagged.length]));
	var t;
	for(t=0; t<tagged.length; t++) {
		createTiddlyLink(createTiddlyElement(ul,"li"),tagged[t].title,true);
		if(t<tagged.length-1)
			createTiddlyText(ul,sep);
	}
};

config.macros.closeAll.handler = function(place)
{
	createTiddlyButton(place,this.label,this.prompt,this.onClick);
};

config.macros.closeAll.onClick = function(e)
{
	story.closeAllTiddlers();
	return false;
};

config.macros.permaview.handler = function(place)
{
	createTiddlyButton(place,this.label,this.prompt,this.onClick);
};

config.macros.permaview.onClick = function(e)
{
	story.permaView();
	return false;
};

config.macros.saveChanges.handler = function(place,macroName,params)
{
	if(!readOnly)
		createTiddlyButton(place,params[0] || this.label,params[1] || this.prompt,this.onClick,null,null,this.accessKey);
};

config.macros.saveChanges.onClick = function(e)
{
	saveChanges();
	return false;
};

config.macros.slider.onClickSlider = function(ev)
{
	var n = this.nextSibling;
	var cookie = n.getAttribute("cookie");
	var isOpen = n.style.display != "none";
	if(config.options.chkAnimate && anim && typeof Slider == "function")
		anim.startAnimating(new Slider(n,!isOpen,null,"none"));
	else
		n.style.display = isOpen ? "none" : "block";
	config.options[cookie] = !isOpen;
	saveOption(cookie);
	return false;
};

config.macros.slider.createSlider = function(place,cookie,title,tooltip)
{
	var c = cookie || "";
	createTiddlyButton(place,title,tooltip,this.onClickSlider);
	var panel = createTiddlyElement(null,"div",null,"sliderPanel");
	panel.setAttribute("cookie",c);
	panel.style.display = config.options[c] ? "block" : "none";
	place.appendChild(panel);
	return panel;
};

config.macros.slider.handler = function(place,macroName,params)
{
	var panel = this.createSlider(place,params[0],params[2],params[3]);
	var text = store.getTiddlerText(params[1]);
	panel.setAttribute("refresh","content");
	panel.setAttribute("tiddler",params[1]);
	if(text)
		wikify(text,panel,null,store.getTiddler(params[1]));
};

// <<gradient [[tiddler name]] vert|horiz rgb rgb rgb rgb... >>
config.macros.gradient.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var panel = wikifier ? createTiddlyElement(place,"div",null,"gradient") : place;
	panel.style.position = "relative";
	panel.style.overflow = "hidden";
	panel.style.zIndex = "0";
	if(wikifier) {
		var styles = config.formatterHelpers.inlineCssHelper(wikifier);
		config.formatterHelpers.applyCssHelper(panel,styles);
	}
	params = paramString.parseParams("color");
	var locolors = [], hicolors = [];
	var t;
	for(t=2; t<params.length; t++) {
		var c = params[t].value;
		if(params[t].name == "snap") {
			hicolors[hicolors.length-1] = c;
		} else {
			locolors.push(c);
			hicolors.push(c);
		}
	}
	drawGradient(panel,params[1].value != "vert",locolors,hicolors);
	if(wikifier)
		wikifier.subWikify(panel,">>");
	if(document.all) {
		panel.style.height = "100%";
		panel.style.width = "100%";
	}
};

config.macros.message.handler = function(place,macroName,params)
{
	if(params[0]) {
		var names = params[0].split(".");
		var lookupMessage = function(root,nameIndex) {
				if(root[names[nameIndex]]) {
					if(nameIndex < names.length-1)
						return (lookupMessage(root[names[nameIndex]],nameIndex+1));
					else
						return root[names[nameIndex]];
				} else
					return null;
			};
		var m = lookupMessage(config,0);
		if(m == null)
			m = lookupMessage(window,0);
		createTiddlyText(place,m.toString().format(params.splice(1)));
	}
};


config.macros.view.depth = 0;
config.macros.view.values = [];
config.macros.view.views = {
	text: function(value,place,params,wikifier,paramString,tiddler) {
		highlightify(value,place,highlightHack,tiddler);
	},
	link: function(value,place,params,wikifier,paramString,tiddler) {
		createTiddlyLink(place,value,true);
	},
	wikified: function(value,place,params,wikifier,paramString,tiddler) {
		if(config.macros.view.depth>50)
			return;
		if(config.macros.view.depth>0) {
			if (value==config.macros.view.values[config.macros.view.depth-1]) {
				return;
			}
		}
		config.macros.view.values[config.macros.view.depth] = value;
		config.macros.view.depth++;
		if(params[2])
			value=params[2].unescapeLineBreaks().format([value]);
		wikify(value,place,highlightHack,tiddler);
		config.macros.view.depth--;
		config.macros.view.values[config.macros.view.depth] = null;
	},
	date: function(value,place,params,wikifier,paramString,tiddler) {
		value = Date.convertFromYYYYMMDDHHMM(value);
		createTiddlyText(place,value.formatString(params[2] || config.views.wikified.dateFormat));
	}
};

config.macros.view.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	if((tiddler instanceof Tiddler) && params[0]) {
		var value = store.getValue(tiddler,params[0]);
		if(value) {
			var type = params[1] || config.macros.view.defaultView;
			var handler = config.macros.view.views[type];
			if(handler)
				handler(value,place,params,wikifier,paramString,tiddler);
		}
	}
};

config.macros.edit.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var field = params[0];
	var rows = params[1] || 0;
	var defVal = params[2] || '';
	if((tiddler instanceof Tiddler) && field) {
		story.setDirty(tiddler.title,true);
		var e,v;
		if(field != "text" && !rows) {
			e = createTiddlyElement(null,"input",null,null,null,{
				type: "text", edit: field, size: "40", autocomplete: "off"
			});
			e.value = store.getValue(tiddler,field) || defVal;
			place.appendChild(e);
		} else {
			var wrapper1 = createTiddlyElement(null,"fieldset",null,"fieldsetFix");
			var wrapper2 = createTiddlyElement(wrapper1,"div");
			e = createTiddlyElement(wrapper2,"textarea");
			e.value = v = store.getValue(tiddler,field) || defVal;
			rows = rows || 10;
			var lines = v.match(/\n/mg);
			var maxLines = Math.max(parseInt(config.options.txtMaxEditRows,10),5);
			if(lines != null && lines.length > rows)
				rows = lines.length + 5;
			rows = Math.min(rows,maxLines);
			e.setAttribute("rows",rows);
			e.setAttribute("edit",field);
			place.appendChild(wrapper1);
		}
		if(tiddler.isReadOnly()) {
			e.setAttribute("readOnly","readOnly");
			jQuery(e).addClass("readOnly");
		}
		return e;
	}
};

config.macros.tagChooser.onClick = function(ev)
{
	var e = ev || window.event;
	var lingo = config.views.editor.tagChooser;
	var popup = Popup.create(this);
	var tags = store.getTags(this.getAttribute("tags"));
	if(tags.length == 0)
		jQuery("<li/>").text(lingo.popupNone).appendTo(popup);
	var t;
	for(t=0; t<tags.length; t++) {
		var tag = createTiddlyButton(createTiddlyElement(popup,"li"),tags[t][0],lingo.tagTooltip.format([tags[t][0]]),config.macros.tagChooser.onTagClick);
		tag.setAttribute("tag",tags[t][0]);
		tag.setAttribute("tiddler",this.getAttribute("tiddler"));
	}
	Popup.show();
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	return false;
};

config.macros.tagChooser.onTagClick = function(ev)
{
	var e = ev || window.event;
	if(e.metaKey || e.ctrlKey) stopEvent(e); //# keep popup open on CTRL-click
	var tag = this.getAttribute("tag");
	var title = this.getAttribute("tiddler");
	if(!readOnly)
		story.setTiddlerTag(title,tag,0);
	return false;
};

config.macros.tagChooser.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	if(tiddler instanceof Tiddler) {
		var lingo = config.views.editor.tagChooser;
		var btn = createTiddlyButton(place,lingo.text,lingo.tooltip,this.onClick);
		btn.setAttribute("tiddler",tiddler.title);
		btn.setAttribute("tags",params[0]);
	}
};

config.macros.refreshDisplay.handler = function(place)
{
	createTiddlyButton(place,this.label,this.prompt,this.onClick);
};

config.macros.refreshDisplay.onClick = function(e)
{
	refreshAll();
	return false;
};

config.macros.annotations.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var title = tiddler ? tiddler.title : null;
	var a = title ? config.annotations[title] : null;
	if(!tiddler || !title || !a)
		return;
	var text = a.format([title]);
	wikify(text,createTiddlyElement(place,"div",null,"annotation"),null,tiddler);
};
//--
//-- NewTiddler and NewJournal macros
//--

config.macros.newTiddler.createNewTiddlerButton = function(place,title,params,label,prompt,accessKey,newFocus,isJournal)
{
	var tags = [];
	var t;
	for(t=1; t<params.length; t++) {
		if((params[t].name == "anon" && t != 1) || (params[t].name == "tag"))
			tags.push(params[t].value);
	}
	label = getParam(params,"label",label);
	prompt = getParam(params,"prompt",prompt);
	accessKey = getParam(params,"accessKey",accessKey);
	newFocus = getParam(params,"focus",newFocus);
	var customFields = getParam(params,"fields","");
	if(!customFields && !store.isShadowTiddler(title))
		customFields = String.encodeHashMap(config.defaultCustomFields);
	var btn = createTiddlyButton(place,label,prompt,this.onClickNewTiddler,null,null,accessKey);
	btn.setAttribute("newTitle",title);
	btn.setAttribute("isJournal",isJournal ? "true" : "false");
	if(tags.length > 0)
		btn.setAttribute("params",tags.join("|"));
	btn.setAttribute("newFocus",newFocus);
	btn.setAttribute("newTemplate",getParam(params,"template",DEFAULT_EDIT_TEMPLATE));
	if(customFields !== "")
		btn.setAttribute("customFields",customFields);
	var text = getParam(params,"text");
	if(text !== undefined)
		btn.setAttribute("newText",text);
	return btn;
};

config.macros.newTiddler.onClickNewTiddler = function()
{
	var title = this.getAttribute("newTitle");
	if(this.getAttribute("isJournal") == "true") {
		title = new Date().formatString(title.trim());
	}
	var params = this.getAttribute("params");
	var tags = params ? params.split("|") : [];
	var focus = this.getAttribute("newFocus");
	var template = this.getAttribute("newTemplate");
	var customFields = this.getAttribute("customFields");
	if(!customFields && !store.isShadowTiddler(title))
		customFields = String.encodeHashMap(config.defaultCustomFields);
	story.displayTiddler(null,title,template,false,null,null);
	var tiddlerElem = story.getTiddler(title);
	if(customFields)
		story.addCustomFields(tiddlerElem,customFields);
	var text = this.getAttribute("newText");
	if(typeof text == "string" && story.getTiddlerField(title,"text"))
		story.getTiddlerField(title,"text").value = text.format([title]);
	var t;
	for(t=0;t<tags.length;t++)
		story.setTiddlerTag(title,tags[t],+1);
	story.focusTiddler(title,focus);
	return false;
};

config.macros.newTiddler.handler = function(place,macroName,params,wikifier,paramString)
{
	if(!readOnly) {
		params = paramString.parseParams("anon",null,true,false,false);
		var title = params[1] && params[1].name == "anon" ? params[1].value : this.title;
		title = getParam(params,"title",title);
		this.createNewTiddlerButton(place,title,params,this.label,this.prompt,this.accessKey,"title",false);
	}
};

config.macros.newJournal.handler = function(place,macroName,params,wikifier,paramString)
{
	if(!readOnly) {
		params = paramString.parseParams("anon",null,true,false,false);
		var title = params[1] && params[1].name == "anon" ? params[1].value : config.macros.timeline.dateFormat;
		title = getParam(params,"title",title);
		config.macros.newTiddler.createNewTiddlerButton(place,title,params,this.label,this.prompt,this.accessKey,"text",true);
	}
};

//--
//-- Search macro
//--

config.macros.search.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	params = paramString.parseParams("anon",null,false,false,false);
	createTiddlyButton(place,this.label,this.prompt,this.onClick,"searchButton");
	var txt = createTiddlyElement(null,"input",null,"txtOptionInput searchField");
	txt.value = getParam(params,"anon","");
	if(config.browser.isSafari) {
		txt.setAttribute("type","search");
		txt.setAttribute("results","5");
	} else {
		txt.setAttribute("type","text");
	}
	place.appendChild(txt);
	txt.onkeyup = this.onKeyPress;
	txt.onfocus = this.onFocus;
	txt.setAttribute("size",this.sizeTextbox);
	txt.setAttribute("accessKey",getParam(params,"accesskey",this.accessKey));
	txt.setAttribute("autocomplete","off");
	txt.setAttribute("lastSearchText","");
	txt.setAttribute("placeholder",getParam(params,"placeholder",this.placeholder));
};

// Global because there's only ever one outstanding incremental search timer
config.macros.search.timeout = null;

config.macros.search.doSearch = function(txt)
{
	if(txt.value.length > 0) {
		story.search(txt.value,config.options.chkCaseSensitiveSearch,config.options.chkRegExpSearch);
		txt.setAttribute("lastSearchText",txt.value);
	}
};

config.macros.search.onClick = function(e)
{
	config.macros.search.doSearch(this.nextSibling);
	return false;
};

config.macros.search.onKeyPress = function(ev)
{
	var me = config.macros.search;
	var e = ev || window.event;
	switch(e.keyCode) {
		case 9: // Tab
			return;
		case 13: // Ctrl-Enter
		case 10: // Ctrl-Enter on IE PC
			me.doSearch(this);
			break;
		case 27: // Escape
			this.value = "";
			clearMessage();
			break;
	}
	if(config.options.chkIncrementalSearch) {
		if(this.value.length > 2) {
			if(this.value != this.getAttribute("lastSearchText")) {
				if(me.timeout) {
					clearTimeout(me.timeout);
				}
				var txt = this;
				me.timeout = setTimeout(function() {me.doSearch(txt);},500);
			}
		} else {
			if(me.timeout) {
				clearTimeout(me.timeout);
			}
		}
	}
};

config.macros.search.onFocus = function(e)
{
	this.select();
};

//--
//-- Tabs macro
//--

config.macros.tabs.handler = function(place,macroName,params)
{
	var cookie = params[0];
	var numTabs = (params.length-1)/3;
	var wrapper = createTiddlyElement(null,"div",null,"tabsetWrapper " + cookie);
	var tabset = createTiddlyElement(wrapper,"div",null,"tabset");
	tabset.setAttribute("cookie",cookie);
	var validTab = false;
	var t;
	for(t=0; t<numTabs; t++) {
		var label = params[t*3+1];
		var prompt = params[t*3+2];
		var content = params[t*3+3];
		var tab = createTiddlyButton(tabset,label,prompt,this.onClickTab,"tab tabUnselected");
		createTiddlyElement(tab,"span",null,null," ",{style:"font-size:0pt;line-height:0px"});
		tab.setAttribute("tab",label);
		tab.setAttribute("content",content);
		tab.title = prompt;
		if(config.options[cookie] == label)
			validTab = true;
	}
	if(!validTab)
		config.options[cookie] = params[1];
	place.appendChild(wrapper);
	this.switchTab(tabset,config.options[cookie]);
};

config.macros.tabs.onClickTab = function(e)
{
	config.macros.tabs.switchTab(this.parentNode,this.getAttribute("tab"));
	return false;
};

config.macros.tabs.switchTab = function(tabset,tab)
{
	var cookie = tabset.getAttribute("cookie");
	var theTab = null;
	var nodes = tabset.childNodes;
	var t;
	for(t=0; t<nodes.length; t++) {
		if(nodes[t].getAttribute && nodes[t].getAttribute("tab") == tab) {
			theTab = nodes[t];
			theTab.className = "tab tabSelected";
		} else {
			nodes[t].className = "tab tabUnselected";
		}
	}
	if(theTab) {
		if(tabset.nextSibling && tabset.nextSibling.className == "tabContents")
			jQuery(tabset.nextSibling).remove();
		var tabContent = createTiddlyElement(null,"div",null,"tabContents");
		tabset.parentNode.insertBefore(tabContent,tabset.nextSibling);
		var contentTitle = theTab.getAttribute("content");
		wikify(store.getTiddlerText(contentTitle),tabContent,null,store.getTiddler(contentTitle));
		if(cookie) {
			config.options[cookie] = tab;
			saveOption(cookie);
		}
	}
};

//--
//-- Tiddler toolbar
//--

// Create a toolbar command button
config.macros.toolbar.createCommand = function(place,commandName,tiddler,className)
{
	if(typeof commandName != "string") {
		var c = null;
		var t;
		for(t in config.commands) {
			if(config.commands[t] == commandName)
				c = t;
		}
		commandName = c;
	}
	if((tiddler instanceof Tiddler) && (typeof commandName == "string")) {
		var command = config.commands[commandName];
		if(command.isEnabled ? command.isEnabled(tiddler) : this.isCommandEnabled(command,tiddler)) {
			var text = command.getText ? command.getText(tiddler) : this.getCommandText(command,tiddler);
			var tooltip = command.getTooltip ? command.getTooltip(tiddler) : this.getCommandTooltip(command,tiddler);
			var cmd = command.type == "popup" ? this.onClickPopup : this.onClickCommand;
			var btn = createTiddlyButton(null,text,tooltip,cmd);
			btn.setAttribute("commandName",commandName);
			btn.setAttribute("tiddler",tiddler.title);
			jQuery(btn).addClass("command_" + commandName);
			if(className)
				jQuery(btn).addClass(className);
			place.appendChild(btn);
		}
	}
};

config.macros.toolbar.isCommandEnabled = function(command,tiddler)
{
	var title = tiddler.title;
	var ro = tiddler.isReadOnly();
	var shadow = store.isShadowTiddler(title) && !store.tiddlerExists(title);
	return (!ro || (ro && !command.hideReadOnly)) && !(shadow && command.hideShadow);
};

config.macros.toolbar.getCommandText = function(command,tiddler)
{
	return (tiddler.isReadOnly() && command.readOnlyText) || command.text;
};

config.macros.toolbar.getCommandTooltip = function(command,tiddler)
{
	return (tiddler.isReadOnly() && command.readOnlyTooltip) || command.tooltip;
};

config.macros.toolbar.onClickCommand = function(ev)
{
	var e = ev || window.event;
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	var command = config.commands[this.getAttribute("commandName")];
	return command.handler(e,this,this.getAttribute("tiddler"));
};

config.macros.toolbar.onClickPopup = function(ev)
{
	var e = ev || window.event;
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	var popup = Popup.create(this);
	var command = config.commands[this.getAttribute("commandName")];
	var title = this.getAttribute("tiddler");
	popup.setAttribute("tiddler",title);
	command.handlePopup(popup,title);
	Popup.show();
	return false;
};

// Invoke the first command encountered from a given place that is tagged with a specified class
config.macros.toolbar.invokeCommand = function(place,className,event)
{
	var children = place.getElementsByTagName("a");
	var t;
	for(t=0; t<children.length; t++) {
		var c = children[t];
		if(jQuery(c).hasClass(className) && c.getAttribute && c.getAttribute("commandName")) {
			if(c.onclick instanceof Function)
				c.onclick.call(c,event);
			break;
		}
	}
};

config.macros.toolbar.onClickMore = function(ev)
{
	var e = this.nextSibling;
	e.style.display = "inline";
	this.style.display = "none";
	return false;
};

config.macros.toolbar.onClickLess = function(ev)
{
	var e = this.parentNode;
	var m = e.previousSibling;
	e.style.display = "none";
	m.style.display = "inline";
	return false;
};

config.macros.toolbar.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var t;
	for(t=0; t<params.length; t++) {
		var btn;
		var c = params[t];
		switch(c) {
		case "!":
			createTiddlyText(place,this.separator);
			break;
		case "*":
			createTiddlyElement(place,"br");
			break;
		case "<":
			btn = createTiddlyButton(place,this.lessLabel,this.lessPrompt,config.macros.toolbar.onClickLess);
			jQuery(btn).addClass("lessCommand");
			break;
		case ">":
			btn = createTiddlyButton(place,this.moreLabel,this.morePrompt,config.macros.toolbar.onClickMore);
			jQuery(btn).addClass("moreCommand");
			var e = createTiddlyElement(place,"span",null,"moreCommand");
			e.style.display = "none";
			place = e;
			break;
		default:
			var className = "";
			switch(c.substr(0,1)) {
			case "+":
				className = "defaultCommand";
				c = c.substr(1);
				break;
			case "-":
				className = "cancelCommand";
				c = c.substr(1);
				break;
			}
			if(config.commands[c]) {
				this.createCommand(place,c,tiddler,className);
			} else {
				this.customCommand(place,c,wikifier,tiddler);
			}
			break;
		}
	}
};

// Overrideable function to extend toolbar handler
config.macros.toolbar.customCommand = function(place,command,wikifier,tiddler)
{
};

//--
//-- Menu and toolbar commands
//--

config.commands.closeTiddler.handler = function(event,src,title)
{
	if(story.isDirty(title) && !readOnly) {
		if(!confirm(config.commands.cancelTiddler.warning.format([title])))
			return false;
	}
	story.setDirty(title,false);
	story.closeTiddler(title,true);
	return false;
};

config.commands.closeOthers.handler = function(event,src,title)
{
	story.closeAllTiddlers(title);
	return false;
};

config.commands.editTiddler.handler = function(event,src,title)
{
	clearMessage();
	var tiddlerElem = story.getTiddler(title);
	var fields = tiddlerElem.getAttribute("tiddlyFields");
	story.displayTiddler(null,title,DEFAULT_EDIT_TEMPLATE,false,null,fields);
	var e = story.getTiddlerField(title,config.options.txtEditorFocus||"text");
	if(e) {
		setCaretPosition(e,0);
	}
	return false;
};

config.commands.saveTiddler.handler = function(event,src,title)
{
	var newTitle = story.saveTiddler(title,event.shiftKey);
	if(newTitle)
		story.displayTiddler(null,newTitle);
	return false;
};

config.commands.cancelTiddler.handler = function(event,src,title)
{
	if(story.hasChanges(title) && !readOnly) {
		if(!confirm(this.warning.format([title])))
			return false;
	}
	story.setDirty(title,false);
	story.displayTiddler(null,title);
	return false;
};

config.commands.deleteTiddler.handler = function(event,src,title)
{
	var deleteIt = true;
	if(config.options.chkConfirmDelete)
		deleteIt = confirm(this.warning.format([title]));
	if(deleteIt) {
		store.removeTiddler(title);
		story.closeTiddler(title,true);
		autoSaveChanges();
	}
	return false;
};

config.commands.permalink.handler = function(event,src,title)
{
	var t = encodeURIComponent(String.encodeTiddlyLink(title));
	if(window.location.hash != t)
		window.location.hash = t;
	return false;
};

config.commands.references.handlePopup = function(popup,title)
{
	var references = store.getReferringTiddlers(title);
	var c = false;
	var r;
	for(r=0; r<references.length; r++) {
		if(references[r].title != title && !references[r].isTagged("excludeLists")) {
			createTiddlyLink(createTiddlyElement(popup,"li"),references[r].title,true);
			c = true;
		}
	}
	if(!c)
		createTiddlyElement(popup,"li",null,"disabled",this.popupNone);
};

config.commands.jump.handlePopup = function(popup,title)
{
	story.forEachTiddler(function(title,element) {
		createTiddlyLink(createTiddlyElement(popup,"li"),title,true,null,false,null,true);
		});
};

config.commands.syncing.handlePopup = function(popup,title)
{
	var me = config.commands.syncing;
	var tiddler = store.fetchTiddler(title);
	if(!tiddler)
		return;
	var serverType = tiddler.getServerType();
	var serverHost = tiddler.fields["server.host"];
	var serverWorkspace = tiddler.fields["server.workspace"];
	if(!serverWorkspace)
		serverWorkspace = "";
	if(serverType) {
		var e = createTiddlyElement(popup,"li",null,"popupMessage");
		e.innerHTML = me.currentlySyncing.format([serverType,serverHost,serverWorkspace]);
	} else {
		createTiddlyElement(popup,"li",null,"popupMessage",me.notCurrentlySyncing);
	}
	if(serverType) {
		createTiddlyElement(createTiddlyElement(popup,"li",null,"listBreak"),"div");
		var btn = createTiddlyButton(createTiddlyElement(popup,"li"),this.captionUnSync,null,me.onChooseServer);
		btn.setAttribute("tiddler",title);
		btn.setAttribute("server.type","");
	}
	createTiddlyElement(createTiddlyElement(popup,"li",null,"listBreak"),"div");
	createTiddlyElement(popup,"li",null,"popupMessage",me.chooseServer);
	var feeds = store.getTaggedTiddlers("systemServer","title");
	var t;
	for(t=0; t<feeds.length; t++) {
		var f = feeds[t];
		var feedServerType = store.getTiddlerSlice(f.title,"Type");
		if(!feedServerType)
			feedServerType = "file";
		var feedServerHost = store.getTiddlerSlice(f.title,"URL");
		if(!feedServerHost)
			feedServerHost = "";
		var feedServerWorkspace = store.getTiddlerSlice(f.title,"Workspace");
		if(!feedServerWorkspace)
			feedServerWorkspace = "";
		var caption = f.title;
		if(serverType == feedServerType && serverHost == feedServerHost && serverWorkspace == feedServerWorkspace) {
			caption = me.currServerMarker + caption;
		} else {
			caption = me.notCurrServerMarker + caption;
		}
		btn = createTiddlyButton(createTiddlyElement(popup,"li"),caption,null,me.onChooseServer);
		btn.setAttribute("tiddler",title);
		btn.setAttribute("server.type",feedServerType);
		btn.setAttribute("server.host",feedServerHost);
		btn.setAttribute("server.workspace",feedServerWorkspace);
	}
};

config.commands.syncing.onChooseServer = function(e)
{
	var tiddler = this.getAttribute("tiddler");
	var serverType = this.getAttribute("server.type");
	if(serverType) {
		store.addTiddlerFields(tiddler,{
			"server.type": serverType,
			"server.host": this.getAttribute("server.host"),
			"server.workspace": this.getAttribute("server.workspace")
			});
	} else {
		store.setValue(tiddler,"server",null);
	}
	return false;
};

config.commands.fields.handlePopup = function(popup,title)
{
	var tiddler = store.fetchTiddler(title);
	if(!tiddler)
		return;
	var items = [];
	store.forEachField(tiddler,function(tiddler,fieldName,value){items.push({field:fieldName,value:value});},true);
	items.sort(function(a,b) {return a.field < b.field ? -1 : (a.field == b.field ? 0 : +1);});
	if(items.length > 0)
		ListView.create(popup,items,this.listViewTemplate);
	else
		createTiddlyElement(popup,"div",null,null,this.emptyText);
};

//--
//-- Tiddler() object
//--

function Tiddler(title)
{
	this.title = title;
	this.text = "";
	this.creator = null;
	this.modifier = null;
	this.created = new Date();
	this.modified = this.created;
	this.links = [];
	this.linksUpdated = false;
	this.tags = [];
	this.fields = {};
	return this;
}

Tiddler.prototype.getLinks = function()
{
	if(this.linksUpdated==false)
		this.changed();
	return this.links;
};

// Returns the fields that are inherited in string field:"value" field2:"value2" format
Tiddler.prototype.getInheritedFields = function()
{
	var f = {};
	var i;
	for(i in this.fields) {
		if(i=="server.host" || i=="server.workspace" || i=="wikiformat"|| i=="server.type") {
			f[i] = this.fields[i];
		}
	}
	return String.encodeHashMap(f);
};

// Increment the changeCount of a tiddler
Tiddler.prototype.incChangeCount = function()
{
	var c = this.fields['changecount'];
	c = c ? parseInt(c,10) : 0;
	this.fields['changecount'] = String(c+1);
};

// Clear the changeCount of a tiddler
Tiddler.prototype.clearChangeCount = function()
{
	if(this.fields['changecount']) {
		delete this.fields['changecount'];
	}
};

Tiddler.prototype.doNotSave = function()
{
	return this.fields['doNotSave'];
};

// Returns true if the tiddler has been updated since the tiddler was created or downloaded
Tiddler.prototype.isTouched = function()
{
	var changecount = this.fields.changecount || 0;
	return changecount > 0;
};

// Change the text and other attributes of a tiddler
Tiddler.prototype.set = function(title,text,modifier,modified,tags,created,fields,creator)
{
	this.assign(title,text,modifier,modified,tags,created,fields,creator);
	this.changed();
	return this;
};

// Change the text and other attributes of a tiddler without triggered a tiddler.changed() call
Tiddler.prototype.assign = function(title,text,modifier,modified,tags,created,fields,creator)
{
	if(title != undefined)
		this.title = title;
	if(text != undefined)
		this.text = text;
	if(modifier != undefined)
		this.modifier = modifier;
	if(modified != undefined)
		this.modified = modified;
	if(creator != undefined)
		this.creator = creator;
	if(created != undefined)
		this.created = created;
	if(fields != undefined)
		this.fields = fields;
	if(tags != undefined)
		this.tags = (typeof tags == "string") ? tags.readBracketedList() : tags;
	else if(this.tags == undefined)
		this.tags = [];
	return this;
};

// Get the tags for a tiddler as a string (space delimited, using [[brackets]] for tags containing spaces)
Tiddler.prototype.getTags = function()
{
	return String.encodeTiddlyLinkList(this.tags);
};

// Test if a tiddler carries a tag
Tiddler.prototype.isTagged = function(tag)
{
	return this.tags.indexOf(tag) != -1;
};

// Static method to convert "\n" to newlines, "\s" to "\"
Tiddler.unescapeLineBreaks = function(text)
{
	return text ? text.unescapeLineBreaks() : "";
};

// Convert newlines to "\n", "\" to "\s"
Tiddler.prototype.escapeLineBreaks = function()
{
	return this.text.escapeLineBreaks();
};

// Updates the secondary information (like links[] array) after a change to a tiddler
Tiddler.prototype.changed = function()
{
	this.links = [];
	var text = this.text;
	// remove 'quoted' text before scanning tiddler source
	text = text.replace(/\/%((?:.|\n)*?)%\//g,"").
		replace(/\{{3}((?:.|\n)*?)\}{3}/g,"").
		replace(/"""((?:.|\n)*?)"""/g,"").
		replace(/<nowiki\>((?:.|\n)*?)<\/nowiki\>/g,"").
		replace(/<html\>((?:.|\n)*?)<\/html\>/g,"").
		replace(/<script((?:.|\n)*?)<\/script\>/g,"");
	var t = this.autoLinkWikiWords() ? 0 : 1;
	var tiddlerLinkRegExp = t==0 ? config.textPrimitives.tiddlerAnyLinkRegExp : config.textPrimitives.tiddlerForcedLinkRegExp;
	tiddlerLinkRegExp.lastIndex = 0;
	var formatMatch = tiddlerLinkRegExp.exec(text);
	while(formatMatch) {
		var lastIndex = tiddlerLinkRegExp.lastIndex;
		if(t==0 && formatMatch[1] && formatMatch[1] != this.title) {
			// wikiWordLink
			if(formatMatch.index > 0) {
				var preRegExp = new RegExp(config.textPrimitives.unWikiLink+"|"+config.textPrimitives.anyLetter,"mg");
				preRegExp.lastIndex = formatMatch.index-1;
				var preMatch = preRegExp.exec(text);
				if(preMatch.index != formatMatch.index-1)
					this.links.pushUnique(formatMatch[1]);
			} else {
				this.links.pushUnique(formatMatch[1]);
			}
		}
		else if(formatMatch[2-t] && !config.formatterHelpers.isExternalLink(formatMatch[3-t])) // titledBrackettedLink
			this.links.pushUnique(formatMatch[3-t]);
		else if(formatMatch[4-t] && formatMatch[4-t] != this.title) // brackettedLink
			this.links.pushUnique(formatMatch[4-t]);
		tiddlerLinkRegExp.lastIndex = lastIndex;
		formatMatch = tiddlerLinkRegExp.exec(text);
	}
	this.linksUpdated = true;
};

Tiddler.prototype.getSubtitle = function()
{
	var modifier = this.modifier;
	if(!modifier)
		modifier = config.messages.subtitleUnknown || "";
	var modified = this.modified;
	if(modified)
		modified = modified.toLocaleString();
	else
		modified = config.messages.subtitleUnknown || "";
	var f = config.messages.tiddlerLinkTooltip || "%0 - %1, %2";
	return f.format([this.title,modifier,modified]);
};

Tiddler.prototype.isReadOnly = function()
{
	return readOnly;
};

Tiddler.prototype.autoLinkWikiWords = function()
{
	return !(this.isTagged("systemConfig") || this.isTagged("excludeMissing"));
};

Tiddler.prototype.getServerType = function()
{
	var serverType = null;
	if(this.fields['server.type'])
		serverType = this.fields['server.type'];
	if(!serverType)
		serverType = this.fields['wikiformat'];
	if(serverType && !config.adaptors[serverType])
		serverType = null;
	return serverType;
};

Tiddler.prototype.getAdaptor = function()
{
	var serverType = this.getServerType();
	return serverType ? new config.adaptors[serverType]() : null;
};

//--
//-- TiddlyWiki instance contains TiddlerS
//--

function TiddlyWiki()
{
	var tiddlers = {}; // Hashmap by name of tiddlers
	this.tiddlersUpdated = false;
	this.namedNotifications = []; // Array of {name:,notify:} of notification functions
	this.notificationLevel = 0;
	this.slices = {}; // map tiddlerName->(map sliceName->sliceValue). Lazy.
	this.clear = function() {
		tiddlers = {};
		this.setDirty(false);
	};
	this.fetchTiddler = function(title) {
		var t = tiddlers[title];
		return t instanceof Tiddler ? t : null;
	};
	this.deleteTiddler = function(title) {
		delete this.slices[title];
		delete tiddlers[title];
	};
	this.addTiddler = function(tiddler) {
		delete this.slices[tiddler.title];
		tiddlers[tiddler.title] = tiddler;
	};
	this.forEachTiddler = function(callback) {
		var t;
		for(t in tiddlers) {
			var tiddler = tiddlers[t];
			if(tiddler instanceof Tiddler)
				callback.call(this,t,tiddler);
		}
	};
}

TiddlyWiki.prototype.setDirty = function(dirty)
{
	this.dirty = dirty;
};

TiddlyWiki.prototype.isDirty = function()
{
	return this.dirty;
};

TiddlyWiki.prototype.tiddlerExists = function(title)
{
	var t = this.fetchTiddler(title);
	return t != undefined;
};

TiddlyWiki.prototype.isShadowTiddler = function(title)
{
	return config.shadowTiddlers[title] === undefined ? false : true;
};

TiddlyWiki.prototype.createTiddler = function(title)
{
	var tiddler = this.fetchTiddler(title);
	if(!tiddler) {
		tiddler = new Tiddler(title);
		this.addTiddler(tiddler);
		this.setDirty(true);
	}
	return tiddler;
};

TiddlyWiki.prototype.getTiddler = function(title)
{
	var t = this.fetchTiddler(title);
	if(t != undefined)
		return t;
	else
		return null;
};

TiddlyWiki.prototype.getShadowTiddlerText = function(title)
{
	if(typeof config.shadowTiddlers[title] == "string")
		return config.shadowTiddlers[title];
	else
		return "";
};

// Retrieve tiddler contents
TiddlyWiki.prototype.getTiddlerText = function(title,defaultText)
{
	if(!title)
		return defaultText;
	var pos = title.indexOf(config.textPrimitives.sectionSeparator);
	var section = null;
	if(pos != -1) {
		section = title.substr(pos + config.textPrimitives.sectionSeparator.length);
		title = title.substr(0,pos);
	}
	pos = title.indexOf(config.textPrimitives.sliceSeparator);
	if(pos != -1) {
		var slice = this.getTiddlerSlice(title.substr(0,pos),title.substr(pos + config.textPrimitives.sliceSeparator.length));
		if(slice)
			return slice;
	}
	var tiddler = this.fetchTiddler(title);
	var text = tiddler ? tiddler.text : null;
	if(!tiddler && this.isShadowTiddler(title)) {
		text = this.getShadowTiddlerText(title);
	}
	if(text) {
		if(!section)
			return text;
		var re = new RegExp("(^!{1,6}[ \t]*" + section.escapeRegExp() + "[ \t]*\n)","mg");
		re.lastIndex = 0;
		var match = re.exec(text);
		if(match) {
			var t = text.substr(match.index+match[1].length);
			var re2 = /^!/mg;
			re2.lastIndex = 0;
			match = re2.exec(t); //# search for the next heading
			if(match)
				t = t.substr(0,match.index-1);//# don't include final \n
			return t;
		}
		return defaultText;
	}
	if(defaultText != undefined)
		return defaultText;
	return null;
};

TiddlyWiki.prototype.getRecursiveTiddlerText = function(title,defaultText,depth)
{
	var bracketRegExp = new RegExp("(?:\\[\\[([^\\]]+)\\]\\])","mg");
	var text = this.getTiddlerText(title,null);
	if(text == null)
		return defaultText;
	var textOut = [];
	var match,lastPos = 0;
	do {
		match = bracketRegExp.exec(text);
		if(match) {
			textOut.push(text.substr(lastPos,match.index-lastPos));
			if(match[1]) {
				if(depth <= 0)
					textOut.push(match[1]);
				else
					textOut.push(this.getRecursiveTiddlerText(match[1],"",depth-1));
			}
			lastPos = match.index + match[0].length;
		} else {
			textOut.push(text.substr(lastPos));
		}
	} while(match);
	return textOut.join("");
};

//TiddlyWiki.prototype.slicesRE = /(?:^([\'\/]{0,2})~?([\.\w]+)\:\1[\t\x20]*([^\n]+)[\t\x20]*$)|(?:^\|([\'\/]{0,2})~?([\.\w]+)\:?\4\|[\t\x20]*([^\n]+)[\t\x20]*\|$)/gm;
TiddlyWiki.prototype.slicesRE = /(?:^([\'\/]{0,2})~?([\.\w]+)\:\1[\t\x20]*([^\n]*)[\t\x20]*$)|(?:^\|([\'\/]{0,2})~?([\.\w]+)\:?\4\|[\t\x20]*([^\|\n]*)[\t\x20]*\|$)/gm;
// @internal
TiddlyWiki.prototype.calcAllSlices = function(title)
{
	var slices = {};
	var text = this.getTiddlerText(title,"");
	this.slicesRE.lastIndex = 0;
	var m = this.slicesRE.exec(text);
	while(m) {
		if(m[2])
			slices[m[2]] = m[3];
		else
			slices[m[5]] = m[6];
		m = this.slicesRE.exec(text);
	}
	return slices;
};

// Returns the slice of text of the given name
TiddlyWiki.prototype.getTiddlerSlice = function(title,sliceName)
{
	var slices = this.slices[title];
	if(!slices) {
		slices = this.calcAllSlices(title);
		this.slices[title] = slices;
	}
	return slices[sliceName];
};

// Build an hashmap of the specified named slices of a tiddler
TiddlyWiki.prototype.getTiddlerSlices = function(title,sliceNames)
{
	var t,r = {};
	for(t=0; t<sliceNames.length; t++) {
		var slice = this.getTiddlerSlice(title,sliceNames[t]);
		if(slice)
			r[sliceNames[t]] = slice;
	}
	return r;
};

TiddlyWiki.prototype.suspendNotifications = function()
{
	this.notificationLevel--;
};

TiddlyWiki.prototype.resumeNotifications = function()
{
	this.notificationLevel++;
};

// Invoke the notification handlers for a particular tiddler
TiddlyWiki.prototype.notify = function(title,doBlanket)
{
	if(!this.notificationLevel) {
	    var t;
		for(t=0; t<this.namedNotifications.length; t++) {
			var n = this.namedNotifications[t];
			if((n.name == null && doBlanket) || (n.name == title))
				n.notify(title);
		}
	}
};

// Invoke the notification handlers for all tiddlers
TiddlyWiki.prototype.notifyAll = function()
{
	if(!this.notificationLevel) {
	    var t;
		for(t=0; t<this.namedNotifications.length; t++) {
			var n = this.namedNotifications[t];
			if(n.name)
				n.notify(n.name);
		}
	}
};

// Add a notification handler to a tiddler
TiddlyWiki.prototype.addNotification = function(title,fn)
{
	var i;
	for(i=0; i<this.namedNotifications.length; i++) {
		if((this.namedNotifications[i].name == title) && (this.namedNotifications[i].notify == fn))
			return this;
	}
	this.namedNotifications.push({name: title, notify: fn});
	return this;
};

TiddlyWiki.prototype.removeTiddler = function(title)
{
	var tiddler = this.fetchTiddler(title);
	if(tiddler) {
		this.deleteTiddler(title);
		this.notify(title,true);
		this.setDirty(true);
	}
};

// Reset the sync status of a freshly synced tiddler
TiddlyWiki.prototype.resetTiddler = function(title)
{
	var tiddler = this.fetchTiddler(title);
	if(tiddler) {
		tiddler.clearChangeCount();
		this.notify(title,true);
		this.setDirty(true);
	}
};

TiddlyWiki.prototype.setTiddlerTag = function(title,status,tag)
{
	var tiddler = this.fetchTiddler(title);
	if(tiddler) {
		var t = tiddler.tags.indexOf(tag);
		if(t != -1)
			tiddler.tags.splice(t,1);
		if(status)
			tiddler.tags.push(tag);
		tiddler.changed();
		tiddler.incChangeCount();
		this.notify(title,true);
		this.setDirty(true);
	}
};

TiddlyWiki.prototype.addTiddlerFields = function(title,fields)
{
	var tiddler = this.fetchTiddler(title);
	if(!tiddler)
		return;
	merge(tiddler.fields,fields);
	tiddler.changed();
	tiddler.incChangeCount();
	this.notify(title,true);
	this.setDirty(true);
};

// Store tiddler in TiddlyWiki instance
TiddlyWiki.prototype.saveTiddler = function(title,newTitle,newBody,modifier,modified,tags,fields,clearChangeCount,created,creator)
{
	var tiddler;
	if(title instanceof Tiddler) {
		tiddler = title;
		title = tiddler.title;
		newTitle = title;
	} else {
		tiddler = this.fetchTiddler(title);
		if(tiddler) {
			created = created || tiddler.created; // Preserve created date
			creator = creator || tiddler.creator;
			this.deleteTiddler(title);
		} else {
			created = created || modified;
			tiddler = new Tiddler();
		}
		fields = merge({},fields);
		tiddler.set(newTitle,newBody,modifier,modified,tags,created,fields,creator);
	}
	this.addTiddler(tiddler);
	if(clearChangeCount)
		tiddler.clearChangeCount();
	else
		tiddler.incChangeCount();
	if(title != newTitle)
		this.notify(title,true);
	this.notify(newTitle,true);
	if(window.location.protocol == "file:")
		this.setDirty(true);
	return tiddler;
};

TiddlyWiki.prototype.incChangeCount = function(title)
{
	var tiddler = this.fetchTiddler(title);
	if(tiddler)
		tiddler.incChangeCount();
};

TiddlyWiki.prototype.getLoader = function()
{
	if(!this.loader)
		this.loader = new TW21Loader();
	return this.loader;
};

TiddlyWiki.prototype.getSaver = function()
{
	if(!this.saver)
		this.saver = new TW21Saver();
	return this.saver;
};

// Return all tiddlers formatted as an HTML string
TiddlyWiki.prototype.allTiddlersAsHtml = function()
{
	return this.getSaver().externalize(store);
};

// Load contents of a TiddlyWiki from an HTML DIV
TiddlyWiki.prototype.loadFromDiv = function(src,idPrefix,noUpdate)
{
	this.idPrefix = idPrefix;
	var storeElem = (typeof src == "string") ? document.getElementById(src) : src;
	if(!storeElem)
		return;
	var tiddlers = this.getLoader().loadTiddlers(this,storeElem.childNodes);
	this.setDirty(false);
	if(!noUpdate) {
		var i;
		for(i = 0;i<tiddlers.length; i++)
			tiddlers[i].changed();
	}
	jQuery(document).trigger("loadTiddlers");
};

// Load contents of a TiddlyWiki from a string
// Returns null if there's an error
TiddlyWiki.prototype.importTiddlyWiki = function(text)
{
	var posDiv = locateStoreArea(text);
	if(!posDiv)
		return null;
	var content = "<" + "html><" + "body>" + text.substring(posDiv[0],posDiv[1] + endSaveArea.length) + "<" + "/body><" + "/html>";
	// Create the iframe
	var iframe = document.createElement("iframe");
	iframe.style.display = "none";
	document.body.appendChild(iframe);
	var doc = iframe.document;
	if(iframe.contentDocument)
		doc = iframe.contentDocument; // For NS6
	else if(iframe.contentWindow)
		doc = iframe.contentWindow.document; // For IE5.5 and IE6
	// Put the content in the iframe
	doc.open();
	doc.writeln(content);
	doc.close();
	// Load the content into a TiddlyWiki() object
	var storeArea = doc.getElementById("storeArea");
	this.loadFromDiv(storeArea,"store");
	// Get rid of the iframe
	iframe.parentNode.removeChild(iframe);
	return this;
};

TiddlyWiki.prototype.updateTiddlers = function()
{
	this.tiddlersUpdated = true;
	this.forEachTiddler(function(title,tiddler) {
		tiddler.changed();
	});
};

// Return an array of tiddlers matching a search regular expression
TiddlyWiki.prototype.search = function(searchRegExp,sortField,excludeTag,match)
{
	var candidates = this.reverseLookup("tags",excludeTag,!!match);
	var t,results = [];
	for(t=0; t<candidates.length; t++) {
		if((candidates[t].title.search(searchRegExp) != -1) || (candidates[t].text.search(searchRegExp) != -1))
			results.push(candidates[t]);
	}
	if(!sortField)
		sortField = "title";
	results.sort(function(a,b) {return a[sortField] < b[sortField] ? -1 : (a[sortField] == b[sortField] ? 0 : +1);});
	return results;
};

// Returns a list of all tags in use
//   excludeTag - if present, excludes tags that are themselves tagged with excludeTag
// Returns an array of arrays where [tag][0] is the name of the tag and [tag][1] is the number of occurances
TiddlyWiki.prototype.getTags = function(excludeTag)
{
	var results = [];
	this.forEachTiddler(function(title,tiddler) {
	    var g,c;
		for(g=0; g<tiddler.tags.length; g++) {
			var tag = tiddler.tags[g];
			var n = true;
			for(c=0; c<results.length; c++) {
				if(results[c][0] == tag) {
					n = false;
					results[c][1]++;
				}
			}
			if(n && excludeTag) {
				var t = this.fetchTiddler(tag);
				if(t && t.isTagged(excludeTag))
					n = false;
			}
			if(n)
				results.push([tag,1]);
		}
	});
	results.sort(function(a,b) {return a[0].toLowerCase() < b[0].toLowerCase() ? -1 : (a[0].toLowerCase() == b[0].toLowerCase() ? 0 : +1);});
	return results;
};

// Return an array of the tiddlers that are tagged with a given tag
TiddlyWiki.prototype.getTaggedTiddlers = function(tag,sortField)
{
	return this.reverseLookup("tags",tag,true,sortField);
};

TiddlyWiki.prototype.getValueTiddlers = function(field,value,sortField)
{
	return this.reverseLookup(field,value,true,sortField);
};

// Return an array of the tiddlers that link to a given tiddler
TiddlyWiki.prototype.getReferringTiddlers = function(title,unusedParameter,sortField)
{
	if(!this.tiddlersUpdated)
		this.updateTiddlers();
	return this.reverseLookup("links",title,true,sortField);
};

// Return an array of the tiddlers that do or do not have a specified entry in the specified storage array (ie, "links" or "tags")
// lookupMatch == true to match tiddlers, false to exclude tiddlers
TiddlyWiki.prototype.reverseLookup = function(lookupField,lookupValue,lookupMatch,sortField)
{
	var results = [];
	this.forEachTiddler(function(title,tiddler) {
		var f = !lookupMatch;
		var values;
		if(["links", "tags"].contains(lookupField)) {
			values = tiddler[lookupField];
		} else {
			var accessor = TiddlyWiki.standardFieldAccess[lookupField];
			if(accessor) {
				values = [ accessor.get(tiddler) ];
			} else {
				values = tiddler.fields[lookupField] ? [tiddler.fields[lookupField]] : [];
			}
		}
		var lookup;
		for(lookup=0; lookup<values.length; lookup++) {
			if(values[lookup] == lookupValue)
				f = lookupMatch;
		}
		if(f)
			results.push(tiddler);
	});
	if(!sortField)
		sortField = "title";
	return this.sortTiddlers(results,sortField);
};

// Return the tiddlers as a sorted array
TiddlyWiki.prototype.getTiddlers = function(field,excludeTag)
{
	var results = [];
	this.forEachTiddler(function(title,tiddler) {
		if(excludeTag == undefined || !tiddler.isTagged(excludeTag))
			results.push(tiddler);
	});
	if(field)
		results.sort(function(a,b) {return a[field] < b[field] ? -1 : (a[field] == b[field] ? 0 : +1);});
	return results;
};

// Return array of names of tiddlers that are referred to but not defined
TiddlyWiki.prototype.getMissingLinks = function()
{
	if(!this.tiddlersUpdated)
		this.updateTiddlers();
	var results = [];
	this.forEachTiddler(function (title,tiddler) {
		if(tiddler.isTagged("excludeMissing") || tiddler.isTagged("systemConfig"))
			return;
		var n;
		for(n=0; n<tiddler.links.length;n++) {
			var link = tiddler.links[n];
			if(this.getTiddlerText(link,null) == null && !this.isShadowTiddler(link) && !config.macros[link])
				results.pushUnique(link);
		}
	});
	results.sort();
	return results;
};

// Return an array of names of tiddlers that are defined but not referred to
TiddlyWiki.prototype.getOrphans = function()
{
	var results = [];
	this.forEachTiddler(function (title,tiddler) {
		if(this.getReferringTiddlers(title).length == 0 && !tiddler.isTagged("excludeLists"))
			results.push(title);
	});
	results.sort();
	return results;
};

// Return an array of names of all the shadow tiddlers
TiddlyWiki.prototype.getShadowed = function()
{
	var t,results = [];
	for(t in config.shadowTiddlers) {
		if(this.isShadowTiddler(t))
			results.push(t);
	}
	results.sort();
	return results;
};

// Return an array of tiddlers that have been touched since they were downloaded or created
TiddlyWiki.prototype.getTouched = function()
{
	var results = [];
	this.forEachTiddler(function(title,tiddler) {
		if(tiddler.isTouched())
			results.push(tiddler);
		});
	results.sort();
	return results;
};

// Resolves a Tiddler reference or tiddler title into a Tiddler object, or null if it doesn't exist
TiddlyWiki.prototype.resolveTiddler = function(tiddler)
{
	var t = (typeof tiddler == "string") ? this.getTiddler(tiddler) : tiddler;
	return t instanceof Tiddler ? t : null;
};

// Sort a list of tiddlers
TiddlyWiki.prototype.sortTiddlers = function(tiddlers,field)
{
	var asc = +1;
	switch(field.substr(0,1)) {
	case "-":
		asc = -1;
		field = field.substr(1);
		break;
	case "+":
		field = field.substr(1);
		break;
	}
	if(TiddlyWiki.standardFieldAccess[field]) {
		if(field=="title") {
			tiddlers.sort(function(a,b) {return a[field].toLowerCase() < b[field].toLowerCase() ? -asc : (a[field].toLowerCase() == b[field].toLowerCase() ? 0 : asc);});
		} else {
			tiddlers.sort(function(a,b) {return a[field] < b[field] ? -asc : (a[field] == b[field] ? 0 : asc);});
		}
	} else {
		tiddlers.sort(function(a,b) {return a.fields[field] < b.fields[field] ? -asc : (a.fields[field] == b.fields[field] ? 0 : +asc);});
	}
	return tiddlers;
};

//--
//-- Filter a list of tiddlers
//--

config.filters = {
	tiddler: function(results,match) {
		var title = match[1]||match[4];
		var tiddler = this.fetchTiddler(title);
		if(tiddler) {
			results.pushUnique(tiddler);
		} else if(this.isShadowTiddler(title)) {
			tiddler = new Tiddler();
			tiddler.set(title,this.getTiddlerText(title));
			results.pushUnique(tiddler);
		} else {
			results.pushUnique(new Tiddler(title));
		}
		return results;
	},
	tag: function(results,match) {
		var m,matched = this.getTaggedTiddlers(match[3]);
		for(m=0; m<matched.length; m++) {
			results.pushUnique(matched[m]);
		}
		return results;
	},
	sort: function(results,match) {
		return this.sortTiddlers(results,match[3]);
	},
	limit: function(results,match) {
		return results.slice(0,parseInt(match[3],10));
	},
	field: function(results,match) {
		var m,matched = this.getValueTiddlers(match[2],match[3]);
		for (m = 0; m < matched.length; m++) {
			results.pushUnique(matched[m]);
		}
		return results;
	}
};

// Filter a list of tiddlers
TiddlyWiki.prototype.filterTiddlers = function(filter)
{
	var re = /([^\s\[\]]+)|(?:\[([ \w\.\-]+)\[([^\]]+)\]\])|(?:\[\[([^\]]+)\]\])/mg;

	var results = [];
	if(filter) {
		var match = re.exec(filter);
		while(match) {
			var handler = (match[1]||match[4])?'tiddler':config.filters[match[2]]?match[2]:'field';
			results = config.filters[handler].call(this,results,match);
			match = re.exec(filter);
		}
	}
	return results;
};
// Returns true if path is a valid field name (path),
// i.e. a sequence of identifiers, separated by "."
TiddlyWiki.isValidFieldName = function(name)
{
	var match = /[a-zA-Z_]\w*(\.[a-zA-Z_]\w*)*/.exec(name);
	return match && (match[0] == name);
};

// Throws an exception when name is not a valid field name.
TiddlyWiki.checkFieldName = function(name)
{
	if(!TiddlyWiki.isValidFieldName(name))
		throw config.messages.invalidFieldName.format([name]);
};

function StringFieldAccess(n,readOnly)
{
	this.set = readOnly ?
			function(t,v) {if(v != t[n]) throw config.messages.fieldCannotBeChanged.format([n]);} :
			function(t,v) {if(v != t[n]) {t[n] = v; return true;}};
	this.get = function(t) {return t[n];};
}

function DateFieldAccess(n)
{
	this.set = function(t,v) {
		var d = v instanceof Date ? v : Date.convertFromYYYYMMDDHHMM(v);
		if(d != t[n]) {
			t[n] = d; return true;
		}
	};
	this.get = function(t) {return t[n].convertToYYYYMMDDHHMM();};
}

function LinksFieldAccess(n)
{
	this.set = function(t,v) {
		var s = (typeof v == "string") ? v.readBracketedList() : v;
		if(s.toString() != t[n].toString()) {
			t[n] = s; return true;
		}
	};
	this.get = function(t) {return String.encodeTiddlyLinkList(t[n]);};
}

TiddlyWiki.standardFieldAccess = {
	// The set functions return true when setting the data has changed the value.
	"title":    new StringFieldAccess("title",true),
	// Handle the "tiddler" field name as the title
	"tiddler":  new StringFieldAccess("title",true),
	"text":     new StringFieldAccess("text"),
	"modifier": new StringFieldAccess("modifier"),
	"modified": new DateFieldAccess("modified"),
	"creator":  new StringFieldAccess("creator"),
	"created":  new DateFieldAccess("created"),
	"tags":     new LinksFieldAccess("tags")
};

TiddlyWiki.isStandardField = function(name)
{
	return TiddlyWiki.standardFieldAccess[name] != undefined;
};

// Sets the value of the given field of the tiddler to the value.
// Setting an ExtendedField's value to null or undefined removes the field.
// Setting a namespace to undefined removes all fields of that namespace.
// The fieldName is case-insensitive.
// All values will be converted to a string value.
TiddlyWiki.prototype.setValue = function(tiddler,fieldName,value)
{
	TiddlyWiki.checkFieldName(fieldName);
	var t = this.resolveTiddler(tiddler);
	if(!t)
		return;
	fieldName = fieldName.toLowerCase();
	var isRemove = (value === undefined) || (value === null);
	var accessor = TiddlyWiki.standardFieldAccess[fieldName];
	if(accessor) {
		if(isRemove)
			// don't remove StandardFields
			return;
		var h = TiddlyWiki.standardFieldAccess[fieldName];
		if(!h.set(t,value))
			return;
	} else {
		var oldValue = t.fields[fieldName];
		if(isRemove) {
			if(oldValue !== undefined) {
				// deletes a single field
				delete t.fields[fieldName];
			} else {
				// no concrete value is defined for the fieldName
				// so we guess this is a namespace path.
				// delete all fields in a namespace
				var re = new RegExp("^"+fieldName+"\\.");
				var dirty = false;
				var n;
				for(n in t.fields) {
					if(n.match(re)) {
						delete t.fields[n];
						dirty = true;
					}
				}
				if(!dirty)
					return;
			}
		} else {
			// the "normal" set case. value is defined (not null/undefined)
			// For convenience provide a nicer conversion Date->String
			value = value instanceof Date ? value.convertToYYYYMMDDHHMMSSMMM() : String(value);
			if(oldValue == value)
				return;
			t.fields[fieldName] = value;
		}
	}
	// When we are here the tiddler/store really was changed.
	this.notify(t.title,true);
	if(!fieldName.match(/^temp\./))
		this.setDirty(true);
};

// Returns the value of the given field of the tiddler.
// The fieldName is case-insensitive.
// Will only return String values (or undefined).
TiddlyWiki.prototype.getValue = function(tiddler,fieldName)
{
	var t = this.resolveTiddler(tiddler);
	if(!t)
		return undefined;
	if(fieldName.indexOf(config.textPrimitives.sectionSeparator) === 0 || fieldName.indexOf(config.textPrimitives.sliceSeparator) === 0) {
		var sliceType = fieldName.substr(0, 2);
		var sliceName = fieldName.substring(2);
		return store.getTiddlerText("%0%1%2".format(t.title,sliceType,sliceName));
	} else {
		fieldName = fieldName.toLowerCase();
		var accessor = TiddlyWiki.standardFieldAccess[fieldName];
		if(accessor) {
			return accessor.get(t);
		}
	}
	return t.fields[fieldName];
};

// Calls the callback function for every field in the tiddler.
// When callback function returns a non-false value the iteration stops
// and that value is returned.
// The order of the fields is not defined.
// @param callback a function(tiddler,fieldName,value).
TiddlyWiki.prototype.forEachField = function(tiddler,callback,onlyExtendedFields)
{
	var t = this.resolveTiddler(tiddler);
	if(!t)
		return undefined;
	var n,result;
	for(n in t.fields) {
		result = callback(t,n,t.fields[n]);
		if(result)
			return result;
		}
	if(onlyExtendedFields)
		return undefined;
	for(n in TiddlyWiki.standardFieldAccess) {
		if(n != "tiddler") {
			// even though the "title" field can also be referenced through the name "tiddler"
			// we only visit this field once.
			result = callback(t,n,TiddlyWiki.standardFieldAccess[n].get(t));
			if(result)
				return result;
		}
	}
	return undefined;
};

//--
//-- Story functions
//--

function Story(containerId,idPrefix)
{
	this.container = containerId;
	this.idPrefix = idPrefix;
	this.highlightRegExp = null;
	this.tiddlerId = function(title) {
		title = title.replace(/_/g, "__").replace(/ /g, "_");
		var id = this.idPrefix + title;
		return id==this.container ? this.idPrefix + "_" + title : id;
	};
	this.containerId = function() {
		return this.container;
	};
}

Story.prototype.getTiddler = function(title)
{
	return document.getElementById(this.tiddlerId(title));
};

Story.prototype.getContainer = function()
{
	return document.getElementById(this.containerId());
};

Story.prototype.forEachTiddler = function(fn)
{
	var place = this.getContainer();
	if(!place)
		return;
	var e = place.firstChild;
	while(e) {
		var n = e.nextSibling;
		var title = e.getAttribute("tiddler");
		fn.call(this,title,e);
		e = n;
	}
};

Story.prototype.displayDefaultTiddlers = function()
{
	this.displayTiddlers(null,store.filterTiddlers(store.getTiddlerText("DefaultTiddlers")));
};

Story.prototype.displayTiddlers = function(srcElement,titles,template,animate,unused,customFields,toggle)
{
	var t;
	for(t = titles.length-1;t>=0;t--)
		this.displayTiddler(srcElement,titles[t],template,animate,unused,customFields);
};

Story.prototype.displayTiddler = function(srcElement,tiddler,template,animate,unused,customFields,toggle,animationSrc)
{
	var title = (tiddler instanceof Tiddler) ? tiddler.title : tiddler;
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem) {
		if(toggle) {
			if(tiddlerElem.getAttribute("dirty") != "true")
				this.closeTiddler(title,true);
		} else {
			this.refreshTiddler(title,template,false,customFields);
		}
	} else {
		var place = this.getContainer();
		var before = this.positionTiddler(srcElement);
		tiddlerElem = this.createTiddler(place,before,title,template,customFields);
	}
	if(animationSrc && typeof animationSrc !== "string") {
		srcElement = animationSrc;
	}
	if(srcElement && typeof srcElement !== "string") {
		if(config.options.chkAnimate && (animate == undefined || animate == true) && anim && typeof Zoomer == "function" && typeof Scroller == "function")
			anim.startAnimating(new Zoomer(title,srcElement,tiddlerElem),new Scroller(tiddlerElem));
		else
			window.scrollTo(0,ensureVisible(tiddlerElem));
	}
	return tiddlerElem;
};

Story.prototype.positionTiddler = function(srcElement)
{
	var place = this.getContainer();
	var before = null;
	if(typeof srcElement == "string") {
		switch(srcElement) {
		case "top":
			before = place.firstChild;
			break;
		case "bottom":
			before = null;
			break;
		}
	} else {
		var after = this.findContainingTiddler(srcElement);
		if(after == null) {
			before = place.firstChild;
		} else if(after.nextSibling) {
			before = after.nextSibling;
			if(before.nodeType != 1)
				before = null;
		}
	}
	return before;
};

Story.prototype.createTiddler = function(place,before,title,template,customFields)
{
	var tiddlerElem = createTiddlyElement(null,"div",this.tiddlerId(title),"tiddler");
	tiddlerElem.setAttribute("refresh","tiddler");
	if(customFields)
		tiddlerElem.setAttribute("tiddlyFields",customFields);
	place.insertBefore(tiddlerElem,before);
	var defaultText = null;
	if(!store.tiddlerExists(title) && !store.isShadowTiddler(title))
		defaultText = this.loadMissingTiddler(title,customFields);
	this.refreshTiddler(title,template,false,customFields,defaultText);
	return tiddlerElem;
};

Story.prototype.loadMissingTiddler = function(title,fields,callback)
{
	var getTiddlerCallback = function(context)
	{
		if(context.status) {
			var t = context.tiddler;
			if(!t.created)
				t.created = new Date();
			if(!t.modified)
				t.modified = t.created;
			context.tiddler = store.saveTiddler(t.title,t.title,t.text,t.modifier,t.modified,t.tags,t.fields,true,t.created,t.creator);
			autoSaveChanges();
		} else {
			story.refreshTiddler(context.title,null,true);
		}
		context.adaptor.close();
		if(callback) {
			callback(context);
		}
	};
	var tiddler = new Tiddler(title);
	tiddler.fields = typeof fields == "string" ? fields.decodeHashMap() : fields||{};
	var context = {serverType:tiddler.getServerType()};
	if(!context.serverType)
		return "";
	context.host = tiddler.fields['server.host'];
	context.workspace = tiddler.fields['server.workspace'];
	var adaptor = new config.adaptors[context.serverType]();
	adaptor.getTiddler(title,context,null,getTiddlerCallback);
	return config.messages.loadingMissingTiddler.format([title,context.serverType,context.host,context.workspace]);
};

Story.prototype.chooseTemplateForTiddler = function(title,template)
{
	if(!template)
		template = DEFAULT_VIEW_TEMPLATE;
	if(template == DEFAULT_VIEW_TEMPLATE || template == DEFAULT_EDIT_TEMPLATE)
		template = config.tiddlerTemplates[template];
	return template;
};

Story.prototype.getTemplateForTiddler = function(title,template,tiddler)
{
	return store.getRecursiveTiddlerText(template,null,10);
};

Story.prototype.refreshTiddler = function(title,template,force,customFields,defaultText)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem) {
		if(tiddlerElem.getAttribute("dirty") == "true" && !force)
			return tiddlerElem;
		template = this.chooseTemplateForTiddler(title,template);
		var currTemplate = tiddlerElem.getAttribute("template");
		if((template != currTemplate) || force) {
			var tiddler = store.getTiddler(title);
			if(!tiddler) {
				tiddler = new Tiddler();
				if(store.isShadowTiddler(title)) {
					var tags = [];
					tiddler.set(title,store.getTiddlerText(title),config.views.wikified.shadowModifier,version.date,tags,version.date);
				} else {
					var text = template=="EditTemplate" ?
								config.views.editor.defaultText.format([title]) :
								config.views.wikified.defaultText.format([title]);
					text = defaultText || text;
					var fields = customFields ? customFields.decodeHashMap() : null;
					tiddler.set(title,text,config.views.wikified.defaultModifier,version.date,[],version.date,fields);
				}
			}
			tiddlerElem.setAttribute("tags",tiddler.tags.join(" "));
			tiddlerElem.setAttribute("tiddler",title);
			tiddlerElem.setAttribute("template",template);
			tiddlerElem.onmouseover = this.onTiddlerMouseOver;
			tiddlerElem.onmouseout = this.onTiddlerMouseOut;
			tiddlerElem.ondblclick = this.onTiddlerDblClick;
			tiddlerElem[window.event?"onkeydown":"onkeypress"] = this.onTiddlerKeyPress;
			tiddlerElem.innerHTML = this.getTemplateForTiddler(title,template,tiddler);
			applyHtmlMacros(tiddlerElem,tiddler);
			if(store.getTaggedTiddlers(title).length > 0)
				jQuery(tiddlerElem).addClass("isTag");
			else
				jQuery(tiddlerElem).removeClass("isTag");
			if(store.tiddlerExists(title)) {
				jQuery(tiddlerElem).removeClass("shadow");
				jQuery(tiddlerElem).removeClass("missing");
			} else {
				jQuery(tiddlerElem).addClass(store.isShadowTiddler(title) ? "shadow" : "missing");
			}
			if(customFields)
				this.addCustomFields(tiddlerElem,customFields);
		}
	}
	return tiddlerElem;
};

Story.prototype.addCustomFields = function(place,customFields)
{
	var fields = customFields.decodeHashMap();
	var w = createTiddlyElement(place,"div",null,"customFields");
	w.style.display = "none";
	var t;
	for(t in fields) {
		var e = document.createElement("input");
		e.setAttribute("type","text");
		e.setAttribute("value",fields[t]);
		w.appendChild(e);
		e.setAttribute("edit",t);
	}
};

Story.prototype.refreshAllTiddlers = function(force)
{
	var e = this.getContainer().firstChild;
	while(e) {
		var template = e.getAttribute("template");
		if(template && e.getAttribute("dirty") != "true") {
			this.refreshTiddler(e.getAttribute("tiddler"),force ? null : template,true);
		}
		e = e.nextSibling;
	}
};

Story.prototype.onTiddlerMouseOver = function(e)
{
	jQuery(this).addClass("selected");
};

Story.prototype.onTiddlerMouseOut = function(e)
{
	jQuery(this).removeClass("selected");
};

Story.prototype.onTiddlerDblClick = function(ev)
{
	var e = ev || window.event;
	var target = resolveTarget(e);
	if(target && target.nodeName.toLowerCase() != "input" && target.nodeName.toLowerCase() != "textarea") {
		if(document.selection && document.selection.empty)
			document.selection.empty();
		config.macros.toolbar.invokeCommand(this,"defaultCommand",e);
		e.cancelBubble = true;
		if(e.stopPropagation) e.stopPropagation();
		return true;
	}
	return false;
};

Story.prototype.onTiddlerKeyPress = function(ev)
{
	var e = ev || window.event;
	clearMessage();
	var consume = false;
	var title = this.getAttribute("tiddler");
	var target = resolveTarget(e);
	switch(e.keyCode) {
	case 9: // Tab
		var ed = story.getTiddlerField(title,"text");
		if(target.tagName.toLowerCase() == "input" && ed.value==config.views.editor.defaultText.format([title])) {
			// moving from input field and editor still contains default text, so select it
			ed.focus();
			ed.select();
			consume = true;
		}
		if(config.options.chkInsertTabs && target.tagName.toLowerCase() == "textarea") {
			replaceSelection(target,String.fromCharCode(9));
			consume = true;
		}
		if(config.isOpera) {
			target.onblur = function() {
				this.focus();
				this.onblur = null;
			};
		}
		break;
	case 13: // Ctrl-Enter
	case 10: // Ctrl-Enter on IE PC
	case 77: // Ctrl-Enter is "M" on some platforms
		if(e.ctrlKey) {
			blurElement(this);
			config.macros.toolbar.invokeCommand(this,"defaultCommand",e);
			consume = true;
		}
		break;
	case 27: // Escape
		blurElement(this);
		config.macros.toolbar.invokeCommand(this,"cancelCommand",e);
		consume = true;
		break;
	}
	e.cancelBubble = consume;
	if(consume) {
		if(e.stopPropagation) e.stopPropagation(); // Stop Propagation
		e.returnValue = true; // Cancel The Event in IE
		if(e.preventDefault ) e.preventDefault(); // Cancel The Event in Moz
	}
	return !consume;
};

Story.prototype.getTiddlerField = function(title,field)
{
	var tiddlerElem = this.getTiddler(title);
	var e = null;
	if(tiddlerElem) {
		var t,children = tiddlerElem.getElementsByTagName("*");
		for(t=0; t<children.length; t++) {
			var c = children[t];
			if(c.tagName.toLowerCase() == "input" || c.tagName.toLowerCase() == "textarea") {
				if(!e)
					e = c;
				if(c.getAttribute("edit") == field)
					e = c;
			}
		}
	}
	return e;
};

Story.prototype.focusTiddler = function(title,field)
{
	var e = this.getTiddlerField(title,field);
	if(e) {
		e.focus();
		e.select();
	}
};

Story.prototype.blurTiddler = function(title)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem && tiddlerElem.focus && tiddlerElem.blur) {
		tiddlerElem.focus();
		tiddlerElem.blur();
	}
};

Story.prototype.setTiddlerField = function(title,tag,mode,field)
{
	var c = this.getTiddlerField(title,field);
	var tags = c.value.readBracketedList();
	tags.setItem(tag,mode);
	c.value = String.encodeTiddlyLinkList(tags);
};

Story.prototype.setTiddlerTag = function(title,tag,mode)
{
	this.setTiddlerField(title,tag,mode,"tags");
};

Story.prototype.closeTiddler = function(title,animate,unused)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem) {
		clearMessage();
		this.scrubTiddler(tiddlerElem);
		if(config.options.chkAnimate && animate && anim && typeof Slider == "function")
			anim.startAnimating(new Slider(tiddlerElem,false,null,"all"));
		else {
			jQuery(tiddlerElem).remove();
		}
	}
};

Story.prototype.scrubTiddler = function(tiddlerElem)
{
	tiddlerElem.id = null;
};

Story.prototype.setDirty = function(title,dirty)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem)
		tiddlerElem.setAttribute("dirty",dirty ? "true" : "false");
};

Story.prototype.isDirty = function(title)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem)
		return tiddlerElem.getAttribute("dirty") == "true";
	return null;
};

Story.prototype.areAnyDirty = function()
{
	var r = false;
	this.forEachTiddler(function(title,element) {
		if(this.isDirty(title))
			r = true;
	});
	return r;
};

Story.prototype.closeAllTiddlers = function(exclude)
{
	clearMessage();
	this.forEachTiddler(function(title,element) {
		if((title != exclude) && element.getAttribute("dirty") != "true")
			this.closeTiddler(title);
	});
	window.scrollTo(0,ensureVisible(this.container));
};

Story.prototype.isEmpty = function()
{
	var place = this.getContainer();
	return place && place.firstChild == null;
};

Story.prototype.search = function(text,useCaseSensitive,useRegExp)
{
	this.closeAllTiddlers();
	highlightHack = new RegExp(useRegExp ? text : text.escapeRegExp(),useCaseSensitive ? "mg" : "img");
	var matches = store.search(highlightHack,"title","excludeSearch");
	this.displayTiddlers(null,matches);
	highlightHack = null;
	var q = useRegExp ? "/" : "'";
	if(matches.length > 0)
		displayMessage(config.macros.search.successMsg.format([matches.length.toString(),q + text + q]));
	else
		displayMessage(config.macros.search.failureMsg.format([q + text + q]));
};

Story.prototype.findContainingTiddler = function(e)
{
	while(e && !jQuery(e).hasClass("tiddler")) {
		e = jQuery(e).hasClass("popup") && Popup.stack[0] ? Popup.stack[0].root : e.parentNode;
	}
	return e;
};

Story.prototype.gatherSaveFields = function(e,fields)
{
	if(e && e.getAttribute) {
		var f = e.getAttribute("edit");
		if(f)
			fields[f] = e.value.replace(/\r/mg,"");
		if(e.hasChildNodes()) {
			var t,c = e.childNodes;
			for(t=0; t<c.length; t++)
				this.gatherSaveFields(c[t],fields);
		}
	}
};

Story.prototype.hasChanges = function(title)
{
	var e = this.getTiddler(title);
	if(e) {
		var fields = {};
		this.gatherSaveFields(e,fields);
		if(store.fetchTiddler(title)) {
		    var n;
			for(n in fields) {
				if(store.getValue(title,n) != fields[n]) //# tiddler changed
					return true;
			}
		} else {
			if(store.isShadowTiddler(title) && store.getShadowTiddlerText(title) == fields.text) { //# not checking for title or tags
				return false;
			} else { //# changed shadow or new tiddler
				return true;
			}
		}
	}
	return false;
};

Story.prototype.saveTiddler = function(title,minorUpdate)
{
	var tiddlerElem = this.getTiddler(title);
	if(tiddlerElem) {
		var fields = {};
		this.gatherSaveFields(tiddlerElem,fields);
		var newTitle = fields.title || title;
		if(!store.tiddlerExists(newTitle)) {
			newTitle = newTitle.trim();
			var creator = config.options.txtUserName;
		}
		if(store.tiddlerExists(newTitle) && newTitle != title) {
			if(!confirm(config.messages.overwriteWarning.format([newTitle.toString()])))
				return null;
				title = newTitle;
		}
		if(newTitle != title)
			this.closeTiddler(newTitle,false);
		tiddlerElem.id = this.tiddlerId(newTitle);
		tiddlerElem.setAttribute("tiddler",newTitle);
		tiddlerElem.setAttribute("template",DEFAULT_VIEW_TEMPLATE);
		tiddlerElem.setAttribute("dirty","false");
		if(config.options.chkForceMinorUpdate)
			minorUpdate = !minorUpdate;
		if(!store.tiddlerExists(newTitle))
			minorUpdate = false;
		var newDate = new Date();
		if(store.tiddlerExists(title)) {
			var t = store.fetchTiddler(title);
			var extendedFields = t.fields;
			creator = t.creator;
		} else {
			extendedFields = merge({},config.defaultCustomFields);
		}
		var n;
		for(n in fields) {
			if(!TiddlyWiki.isStandardField(n))
				extendedFields[n] = fields[n];
		}
		var tiddler = store.saveTiddler(title,newTitle,fields.text,minorUpdate ? undefined : config.options.txtUserName,minorUpdate ? undefined : newDate,fields.tags,extendedFields,null,null,creator);
		autoSaveChanges(null,[tiddler]);
		return newTitle;
	}
	return null;
};

Story.prototype.permaView = function()
{
	var links = [];
	this.forEachTiddler(function(title,element) {
		links.push(String.encodeTiddlyLink(title));
	});
	var t = encodeURIComponent(links.join(" "));
	if(t == "")
		t = "#";
	if(window.location.hash != t)
		window.location.hash = t;
};

Story.prototype.switchTheme = function(theme)
{
	if(safeMode)
		return;

	var isAvailable = function(title) {
		var s = title ? title.indexOf(config.textPrimitives.sectionSeparator) : -1;
		if(s!=-1)
			title = title.substr(0,s);
		return store.tiddlerExists(title) || store.isShadowTiddler(title);
	};

	var getSlice = function(theme,slice) {
		var r;
		if(readOnly)
			r = store.getTiddlerSlice(theme,slice+"ReadOnly") || store.getTiddlerSlice(theme,"Web"+slice);
		r = r || store.getTiddlerSlice(theme,slice);
		if(r && r.indexOf(config.textPrimitives.sectionSeparator)==0)
			r = theme + r;
		return isAvailable(r) ? r : slice;
	};

	var replaceNotification = function(i,name,theme,slice) {
		var newName = getSlice(theme,slice);
		if(name!=newName && store.namedNotifications[i].name==name) {
			store.namedNotifications[i].name = newName;
			return newName;
		}
		return name;
	};

	var pt = config.refresherData.pageTemplate;
	var vi = DEFAULT_VIEW_TEMPLATE;
	var vt = config.tiddlerTemplates[vi];
	var ei = DEFAULT_EDIT_TEMPLATE;
	var et = config.tiddlerTemplates[ei];

	var i;
	for(i=0; i<config.notifyTiddlers.length; i++) {
		var name = config.notifyTiddlers[i].name;
		switch(name) {
		case "PageTemplate":
			config.refresherData.pageTemplate = replaceNotification(i,config.refresherData.pageTemplate,theme,name);
			break;
		case "StyleSheet":
			removeStyleSheet(config.refresherData.styleSheet);
			config.refresherData.styleSheet = replaceNotification(i,config.refresherData.styleSheet,theme,name);
			break;
		case "ColorPalette":
			config.refresherData.colorPalette = replaceNotification(i,config.refresherData.colorPalette,theme,name);
			break;
		default:
			break;
		}
	}
	config.tiddlerTemplates[vi] = getSlice(theme,"ViewTemplate");
	config.tiddlerTemplates[ei] = getSlice(theme,"EditTemplate");
	if(!startingUp) {
		if(config.refresherData.pageTemplate!=pt || config.tiddlerTemplates[vi]!=vt || config.tiddlerTemplates[ei]!=et) {
			refreshAll();
			this.refreshAllTiddlers(true);
		} else {
			setStylesheet(store.getRecursiveTiddlerText(config.refresherData.styleSheet,"",10),config.refreshers.styleSheet);
		}
		config.options.txtTheme = theme;
		saveOption("txtTheme");
	}
};

//--
//-- Backstage
//--
// Backstage tasks
config.tasks.save.action = saveChanges;

var backstage = {
	area: null,
	toolbar: null,
	button: null,
	showButton: null,
	hideButton: null,
	cloak: null,
	panel: null,
	panelBody: null,
	panelFooter: null,
	currTabName: null,
	currTabElem: null,
	content: null,

	init: function() {
		var cmb = config.messages.backstage;
		this.area = document.getElementById("backstageArea");
		this.toolbar = jQuery("#backstageToolbar").empty()[0];
		this.button = jQuery("#backstageButton").empty()[0];
		this.button.style.display = "block";
		var t = cmb.open.text + " " + glyph("bentArrowLeft");
		this.showButton = createTiddlyButton(this.button,t,cmb.open.tooltip,
						function(e) {backstage.show(); return false;},null,"backstageShow");
		t = glyph("bentArrowRight") + " " + cmb.close.text;
		this.hideButton = createTiddlyButton(this.button,t,cmb.close.tooltip,
						function(e) {backstage.hide(); return false;},null,"backstageHide");
		this.cloak = document.getElementById("backstageCloak");
		this.panel = document.getElementById("backstagePanel");
		this.panelFooter = createTiddlyElement(this.panel,"div",null,"backstagePanelFooter");
		this.panelBody = createTiddlyElement(this.panel,"div",null,"backstagePanelBody");
		this.cloak.onmousedown = function(e) {backstage.switchTab(null);};
		createTiddlyText(this.toolbar,cmb.prompt);
		for(t=0; t<config.backstageTasks.length; t++) {
			var taskName = config.backstageTasks[t];
			var task = config.tasks[taskName];
			var handler = task.action ? this.onClickCommand : this.onClickTab;
			var text = task.text + (task.action ? "" : glyph("downTriangle"));
			var btn = createTiddlyButton(this.toolbar,text,task.tooltip,handler,"backstageTab");
			jQuery(btn).addClass(task.action ? "backstageAction" : "backstageTask");
			btn.setAttribute("task", taskName);
			}
		this.content = document.getElementById("contentWrapper");
		if(config.options.chkBackstage)
			this.show();
		else
			this.hide();
	},

	isVisible: function() {
		return this.area ? this.area.style.display == "block" : false;
	},

	show: function() {
		this.area.style.display = "block";
		if(anim && config.options.chkAnimate) {
			backstage.toolbar.style.left = findWindowWidth() + "px";
			var p = [{style: "left", start: findWindowWidth(), end: 0, template: "%0px"}];
			anim.startAnimating(new Morpher(backstage.toolbar,config.animDuration,p));
		} else {
			backstage.area.style.left = "0px";
		}
		jQuery(this.showButton).hide();
		jQuery(this.hideButton).show();
		config.options.chkBackstage = true;
		saveOption("chkBackstage");
		jQuery(this.content).addClass("backstageVisible");
	},

	hide: function() {
		if(this.currTabElem) {
			this.switchTab(null);
		} else {
			backstage.toolbar.style.left = "0px";
			if(anim && config.options.chkAnimate) {
				var p = [{style: "left", start: 0, end: findWindowWidth(), template: "%0px"}];
				var c = function(element,properties) {backstage.area.style.display = "none";};
				anim.startAnimating(new Morpher(backstage.toolbar,config.animDuration,p,c));
			} else {
				this.area.style.display = "none";
			}
			this.showButton.style.display = "block";
			this.hideButton.style.display = "none";
			config.options.chkBackstage = false;
			saveOption("chkBackstage");
			jQuery(this.content).removeClass("backstageVisible");
		}
	},

	onClickCommand: function(e) {
		var task = config.tasks[this.getAttribute("task")];
		if(task.action) {
			backstage.switchTab(null);
			task.action();
		}
		return false;
	},

	onClickTab: function(e) {
		backstage.switchTab(this.getAttribute("task"));
		return false;
	},

	// Switch to a given tab, or none if null is passed
	switchTab: function(tabName) {
		var tabElem = null;
		var e = this.toolbar.firstChild;
		while(e) {
			if(e.getAttribute && e.getAttribute("task") == tabName)
				tabElem = e;
			e = e.nextSibling;
		}
		if(tabName == backstage.currTabName) {
			backstage.hidePanel();
			return;
		}
		if(backstage.currTabElem) {
			jQuery(this.currTabElem).removeClass("backstageSelTab");
		}
		if(tabElem && tabName) {
			backstage.preparePanel();
			jQuery(tabElem).addClass("backstageSelTab");
			var task = config.tasks[tabName];
			wikify(task.content,backstage.panelBody,null,null);
			backstage.showPanel();
		} else if(backstage.currTabElem) {
			backstage.hidePanel();
		}
		backstage.currTabName = tabName;
		backstage.currTabElem = tabElem;
	},

	isPanelVisible: function() {
		return backstage.panel ? backstage.panel.style.display == "block" : false;
	},

	preparePanel: function() {
		backstage.cloak.style.height = findWindowHeight() + "px";
		backstage.cloak.style.display = "block";
		jQuery(backstage.panelBody).empty();
		return backstage.panelBody;
	},

	showPanel: function() {
		backstage.panel.style.display = "block";
		if(anim && config.options.chkAnimate) {
			backstage.panel.style.top = (-backstage.panel.offsetHeight) + "px";
			var p = [{style: "top", start: -backstage.panel.offsetHeight, end: 0, template: "%0px"}];
			anim.startAnimating(new Morpher(backstage.panel,config.animDuration,p),new Scroller(backstage.panel,false));
		} else {
			backstage.panel.style.top = "0px";
		}
		return backstage.panelBody;
	},

	hidePanel: function() {
		if(backstage.currTabElem)
			jQuery(backstage.currTabElem).removeClass("backstageSelTab");
		backstage.currTabElem = null;
		backstage.currTabName = null;
		if(anim && config.options.chkAnimate) {
			var p = [
				{style: "top", start: 0, end: -(backstage.panel.offsetHeight), template: "%0px"},
				{style: "display", atEnd: "none"}
			];
			var c = function(element,properties) {backstage.cloak.style.display = "none";};
			anim.startAnimating(new Morpher(backstage.panel,config.animDuration,p,c));
		} else {
			jQuery([backstage.panel,backstage.cloak]).hide();
		}
	}
};

config.macros.backstage = {};

config.macros.backstage.handler = function(place,macroName,params)
{
	var backstageTask = config.tasks[params[0]];
	if(backstageTask)
		createTiddlyButton(place,backstageTask.text,backstageTask.tooltip,function(e) {backstage.switchTab(params[0]); return false;});
};

//--
//-- ImportTiddlers macro
//--

config.macros.importTiddlers.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	if(readOnly) {
		createTiddlyElement(place,"div",null,"marked",this.readOnlyWarning);
		return;
	}
	var w = new Wizard();
	w.createWizard(place,this.wizardTitle);
	this.restart(w);
};

config.macros.importTiddlers.onCancel = function(e)
{
	var wizard = new Wizard(this);
	wizard.clear();
	config.macros.importTiddlers.restart(wizard);
	return false;
};

config.macros.importTiddlers.onClose = function(e)
{
	backstage.hidePanel();
	return false;
};

config.macros.importTiddlers.restart = function(wizard)
{
	var me = config.macros.importTiddlers;
	wizard.addStep(this.step1Title,this.step1Html);
	var t,s = wizard.getElement("selTypes");
	for(t in config.adaptors) {
		var e = createTiddlyElement(s,"option",null,null,config.adaptors[t].serverLabel || t);
		e.value = t;
	}
	if(config.defaultAdaptor)
		s.value = config.defaultAdaptor;
	s = wizard.getElement("selFeeds");
	var feeds = this.getFeeds();
	for(t in feeds) {
		e = createTiddlyElement(s,"option",null,null,t);
		e.value = t;
	}
	wizard.setValue("feeds",feeds);
	s.onchange = me.onFeedChange;
	var fileInput = wizard.getElement("txtBrowse");
	fileInput.onchange = me.onBrowseChange;
	fileInput.onkeyup = me.onBrowseChange;
	wizard.setButtons([{caption: this.openLabel, tooltip: this.openPrompt, onClick: me.onOpen}]);
	wizard.formElem.action = "javascript:;";
	wizard.formElem.onsubmit = function() {
		if(!this.txtPath || this.txtPath.value.length) //# check for manually entered path in first step
			this.lastChild.firstChild.onclick();
	};
};

config.macros.importTiddlers.getFeeds = function()
{
	var feeds = {};
	var t,tagged = store.getTaggedTiddlers("systemServer","title");
	for(t=0; t<tagged.length; t++) {
		var title = tagged[t].title;
		var serverType = store.getTiddlerSlice(title,"Type");
		if(!serverType)
			serverType = "file";
		feeds[title] = {title: title,
						url: store.getTiddlerSlice(title,"URL"),
						workspace: store.getTiddlerSlice(title,"Workspace"),
						workspaceList: store.getTiddlerSlice(title,"WorkspaceList"),
						tiddlerFilter: store.getTiddlerSlice(title,"TiddlerFilter"),
						serverType: serverType,
						description: store.getTiddlerSlice(title,"Description")};
	}
	return feeds;
};

config.macros.importTiddlers.onFeedChange = function(e)
{
	var wizard = new Wizard(this);
	var selTypes = wizard.getElement("selTypes");
	var fileInput = wizard.getElement("txtPath");
	var feeds = wizard.getValue("feeds");
	var f = feeds[this.value];
	if(f) {
		selTypes.value = f.serverType;
		fileInput.value = f.url;
		wizard.setValue("feedName",f.serverType);
		wizard.setValue("feedHost",f.url);
		wizard.setValue("feedWorkspace",f.workspace);
		wizard.setValue("feedWorkspaceList",f.workspaceList);
		wizard.setValue("feedTiddlerFilter",f.tiddlerFilter);
	}
	return false;
};

config.macros.importTiddlers.onBrowseChange = function(e)
{
	var wizard = new Wizard(this);
	if(this.files && this.files[0]) {
		try {
			netscape.security.PrivilegeManager.enablePrivilege("UniversalFileRead");
		} catch (ex) {
			showException(ex);
		}
	}
	var fileInput = wizard.getElement("txtPath");
	fileInput.value = config.macros.importTiddlers.getURLFromLocalPath(this.value);
	var serverType = wizard.getElement("selTypes");
	serverType.value = "file";
	return true;
};

config.macros.importTiddlers.getURLFromLocalPath = function(v)
{
	if(!v || !v.length)
		return v;
	v = v.replace(/\\/g,"/"); // use "/" for cross-platform consistency
	var u;
	var t = v.split(":");
	var p = t[1] || t[0]; // remove drive letter (if any)
	if(t[1] && (t[0] == "http" || t[0] == "https" || t[0] == "file")) {
		u = v;
	} else if(p.substr(0,1)=="/") {
		u = document.location.protocol + "//" + document.location.hostname + (t[1] ? "/" : "") + v;
	} else {
		var c = document.location.href.replace(/\\/g,"/");
		var pos = c.lastIndexOf("/");
		if(pos!=-1)
			c = c.substr(0,pos); // remove filename
		u = c + "/" + p;
	}
	return u;
};

config.macros.importTiddlers.onOpen = function(e)
{
	var me = config.macros.importTiddlers;
	var wizard = new Wizard(this);
	var fileInput = wizard.getElement("txtPath");
	var url = fileInput.value;
	var serverType = wizard.getElement("selTypes").value || config.defaultAdaptor;
	var adaptor = new config.adaptors[serverType]();
	wizard.setValue("adaptor",adaptor);
	wizard.setValue("serverType",serverType);
	wizard.setValue("host",url);
	adaptor.openHost(url,null,wizard,me.onOpenHost);
	wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],me.statusOpenHost);
	return false;
};

config.macros.importTiddlers.onOpenHost = function(context,wizard)
{
	var me = config.macros.importTiddlers;
	var adaptor = wizard.getValue("adaptor");
	if(context.status !== true)
		displayMessage("Error in importTiddlers.onOpenHost: " + context.statusText);
	adaptor.getWorkspaceList(context,wizard,me.onGetWorkspaceList);
	wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],me.statusGetWorkspaceList);
};

config.macros.importTiddlers.onGetWorkspaceList = function(context,wizard)
{
	var me = config.macros.importTiddlers;
	if(context.status !== true)
		displayMessage("Error in importTiddlers.onGetWorkspaceList: " + context.statusText);
	wizard.setValue("context",context);
	var workspace = wizard.getValue("feedWorkspace");
	if(!workspace && context.workspaces.length==1)
		workspace = context.workspaces[0].title;
	if(workspace) {
		context.adaptor.openWorkspace(workspace,context,wizard,me.onOpenWorkspace);
		wizard.setValue("workspace",workspace);
		wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],me.statusOpenWorkspace);
		return;
	}
	wizard.addStep(me.step2Title,me.step2Html);
	var t,s = wizard.getElement("selWorkspace");
	s.onchange = me.onWorkspaceChange;
	for(t=0; t<context.workspaces.length; t++) {
		var e = createTiddlyElement(s,"option",null,null,context.workspaces[t].title);
		e.value = context.workspaces[t].title;
	}
	var workspaceList = wizard.getValue("feedWorkspaceList");
	if(workspaceList) {
		var n,list = workspaceList.parseParams("workspace",null,false,true);
		for(n=1; n<list.length; n++) {
			if(context.workspaces.findByField("title",list[n].value) == null) {
				e = createTiddlyElement(s,"option",null,null,list[n].value);
				e.value = list[n].value;
			}
		}
	}
	if(workspace) {
		t = wizard.getElement("txtWorkspace");
		t.value = workspace;
	}
	wizard.setButtons([{caption: me.openLabel, tooltip: me.openPrompt, onClick: me.onChooseWorkspace}]);
};

config.macros.importTiddlers.onWorkspaceChange = function(e)
{
	var wizard = new Wizard(this);
	var t = wizard.getElement("txtWorkspace");
	t.value = this.value;
	this.selectedIndex = 0;
	return false;
};

config.macros.importTiddlers.onChooseWorkspace = function(e)
{
	var me = config.macros.importTiddlers;
	var wizard = new Wizard(this);
	var adaptor = wizard.getValue("adaptor");
	var workspace = wizard.getElement("txtWorkspace").value;
	wizard.setValue("workspace",workspace);
	var context = wizard.getValue("context");
	adaptor.openWorkspace(workspace,context,wizard,me.onOpenWorkspace);
	wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],me.statusOpenWorkspace);
	return false;
};

config.macros.importTiddlers.onOpenWorkspace = function(context,wizard)
{
	var me = config.macros.importTiddlers;
	if(context.status !== true)
		displayMessage("Error in importTiddlers.onOpenWorkspace: " + context.statusText);
	var adaptor = wizard.getValue("adaptor");
	adaptor.getTiddlerList(context,wizard,me.onGetTiddlerList,wizard.getValue("feedTiddlerFilter"));
	wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],me.statusGetTiddlerList);
};

config.macros.importTiddlers.onGetTiddlerList = function(context,wizard)
{
	var me = config.macros.importTiddlers;
	if(context.status !== true) {
		wizard.setButtons([{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}],context.statusText||me.errorGettingTiddlerList);
		return;
	}
	// Extract data for the listview
	var listedTiddlers = [];
	if(context.tiddlers) {
		var n;
		for(n=0; n<context.tiddlers.length; n++) {
			var tiddler = context.tiddlers[n];
			listedTiddlers.push({
				title: tiddler.title,
				modified: tiddler.modified,
				modifier: tiddler.modifier,
				text: tiddler.text ? wikifyPlainText(tiddler.text,100) : "",
				tags: tiddler.tags,
				size: tiddler.text ? tiddler.text.length : 0,
				tiddler: tiddler
			});
		}
	}
	listedTiddlers.sort(function(a,b) {return a.title < b.title ? -1 : (a.title == b.title ? 0 : +1);});
	// Display the listview
	wizard.addStep(me.step3Title,me.step3Html);
	var markList = wizard.getElement("markList");
	var listWrapper = document.createElement("div");
	markList.parentNode.insertBefore(listWrapper,markList);
	var listView = ListView.create(listWrapper,listedTiddlers,me.listViewTemplate);
	wizard.setValue("listView",listView);
	wizard.setValue("context",context);
	var txtSaveTiddler = wizard.getElement("txtSaveTiddler");
	txtSaveTiddler.value = me.generateSystemServerName(wizard);
	wizard.setButtons([
			{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel},
			{caption: me.importLabel, tooltip: me.importPrompt, onClick: me.doImport}
		]);
};

config.macros.importTiddlers.generateSystemServerName = function(wizard)
{
	var serverType = wizard.getValue("serverType");
	var host = wizard.getValue("host");
	var workspace = wizard.getValue("workspace");
	var pattern = config.macros.importTiddlers[workspace ? "systemServerNamePattern" : "systemServerNamePatternNoWorkspace"];
	return pattern.format([serverType,host,workspace]);
};

config.macros.importTiddlers.saveServerTiddler = function(wizard)
{
	var me = config.macros.importTiddlers;
	var txtSaveTiddler = wizard.getElement("txtSaveTiddler").value;
	if(store.tiddlerExists(txtSaveTiddler)) {
		if(!confirm(me.confirmOverwriteSaveTiddler.format([txtSaveTiddler])))
			return;
		store.suspendNotifications();
		store.removeTiddler(txtSaveTiddler);
		store.resumeNotifications();
	}
	var serverType = wizard.getValue("serverType");
	var host = wizard.getValue("host");
	var workspace = wizard.getValue("workspace");
	var text = me.serverSaveTemplate.format([serverType,host,workspace]);
	store.saveTiddler(txtSaveTiddler,txtSaveTiddler,text,me.serverSaveModifier,new Date(),["systemServer"]);
};

config.macros.importTiddlers.doImport = function(e)
{
	var me = config.macros.importTiddlers;
	var wizard = new Wizard(this);
	if(wizard.getElement("chkSave").checked)
		me.saveServerTiddler(wizard);
	var chkSync = wizard.getElement("chkSync").checked;
	wizard.setValue("sync",chkSync);
	var listView = wizard.getValue("listView");
	var rowNames = ListView.getSelectedRows(listView);
	var adaptor = wizard.getValue("adaptor");
	var overwrite = [];
	var t;
	for(t=0; t<rowNames.length; t++) {
		if(store.tiddlerExists(rowNames[t]))
			overwrite.push(rowNames[t]);
	}
	if(overwrite.length > 0) {
		if(!confirm(me.confirmOverwriteText.format([overwrite.join(", ")])))
			return false;
	}
	wizard.addStep(me.step4Title.format([rowNames.length]),me.step4Html);
	for(t=0; t<rowNames.length; t++) {
		var link = document.createElement("div");
		createTiddlyLink(link,rowNames[t],true);
		var place = wizard.getElement("markReport");
		place.parentNode.insertBefore(link,place);
	}
	wizard.setValue("remainingImports",rowNames.length);
	wizard.setButtons([
			{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}
		],me.statusDoingImport);
	var wizardContext = wizard.getValue("context");
	var tiddlers = wizardContext ? wizardContext.tiddlers : [];
	for(t=0; t<rowNames.length; t++) {
		var context = {
			allowSynchronous:true,
			tiddler:tiddlers[tiddlers.findByField("title",rowNames[t])]
		};
		adaptor.getTiddler(rowNames[t],context,wizard,me.onGetTiddler);
	}
	return false;
};

config.macros.importTiddlers.onGetTiddler = function(context,wizard)
{
	var me = config.macros.importTiddlers;
	if(!context.status)
		displayMessage("Error in importTiddlers.onGetTiddler: " + context.statusText);
	var tiddler = context.tiddler;
	store.suspendNotifications();
	store.saveTiddler(tiddler.title, tiddler.title, tiddler.text, tiddler.modifier, tiddler.modified, tiddler.tags, tiddler.fields, true, tiddler.created);
	if(!wizard.getValue("sync")) {
		store.setValue(tiddler.title,'server',null);
	}
	store.resumeNotifications();
	if(!context.isSynchronous)
		store.notify(tiddler.title,true);
	var remainingImports = wizard.getValue("remainingImports")-1;
	wizard.setValue("remainingImports",remainingImports);
	if(remainingImports == 0) {
		if(context.isSynchronous) {
			store.notifyAll();
			refreshDisplay();
		}
		wizard.setButtons([
				{caption: me.doneLabel, tooltip: me.donePrompt, onClick: me.onClose}
			],me.statusDoneImport);
		autoSaveChanges();
	}
};

//--
//-- Upgrade macro
//--

config.macros.upgrade.handler = function(place)
{
	var w = new Wizard();
	w.createWizard(place,this.wizardTitle);
	w.addStep(this.step1Title,this.step1Html.format([this.source,this.source]));
	w.setButtons([{caption: this.upgradeLabel, tooltip: this.upgradePrompt, onClick: this.onClickUpgrade}]);
};

config.macros.upgrade.onClickUpgrade = function(e)
{
	var me = config.macros.upgrade;
	var w = new Wizard(this);
	if(window.location.protocol != "file:") {
		alert(me.errorCantUpgrade);
		return false;
	}
	if(story.areAnyDirty() || store.isDirty()) {
		alert(me.errorNotSaved);
		return false;
	}
	var localPath = getLocalPath(document.location.toString());
	var backupPath = getBackupPath(localPath,me.backupExtension);
	w.setValue("backupPath",backupPath);
	w.setButtons([],me.statusPreparingBackup);
	var original = loadOriginal(localPath);
	w.setButtons([],me.statusSavingBackup);
	var backup = copyFile(backupPath,localPath);
	if(!backup)
		backup = saveFile(backupPath,original);
	if(!backup) {
		w.setButtons([],me.errorSavingBackup);
		alert(me.errorSavingBackup);
		return false;
	}
	w.setButtons([],me.statusLoadingCore);
	var options = {
		type:"GET",
		url:me.source,
		processData:false,
		success:function(data,textStatus,jqXHR) {
			me.onLoadCore(true,w,jqXHR.responseText,me.source,jqXHR);
		},
		error:function(jqXHR,textStatus,errorThrown) {
			me.onLoadCore(false,w,null,me.source,jqXHR);
		}
	};
	ajaxReq(options);
	return false;
};

config.macros.upgrade.onLoadCore = function(status,params,responseText,url,xhr)
{
	var me = config.macros.upgrade;
	var w = params;
	var errMsg;
	if(!status)
		errMsg = me.errorLoadingCore;
	var newVer = me.extractVersion(responseText);
	if(!newVer)
		errMsg = me.errorCoreFormat;
	if(errMsg) {
		w.setButtons([],errMsg);
		alert(errMsg);
		return;
	}
	var onStartUpgrade = function(e) {
		w.setButtons([],me.statusSavingCore);
		var localPath = getLocalPath(document.location.toString());
		saveFile(localPath,responseText);
		w.setButtons([],me.statusReloadingCore);
		var backupPath = w.getValue("backupPath");
		var newLoc = document.location.toString() + "?time=" + new Date().convertToYYYYMMDDHHMM() + "#upgrade:[[" + encodeURI(backupPath) + "]]";
		window.setTimeout(function () {window.location = newLoc;},10);
	};
	var step2 = [me.step2Html_downgrade,me.step2Html_restore,me.step2Html_upgrade][compareVersions(version,newVer) + 1];
	w.addStep(me.step2Title,step2.format([formatVersion(newVer),formatVersion(version)]));
	w.setButtons([{caption: me.startLabel, tooltip: me.startPrompt, onClick: onStartUpgrade},{caption: me.cancelLabel, tooltip: me.cancelPrompt, onClick: me.onCancel}]);
};

config.macros.upgrade.onCancel = function(e)
{
	var me = config.macros.upgrade;
	var w = new Wizard(this);
	w.addStep(me.step3Title,me.step3Html);
	w.setButtons([]);
	return false;
};

config.macros.upgrade.extractVersion = function(upgradeFile)
{
	var re = /^var version = \{title: "([^"]+)", major: (\d+), minor: (\d+), revision: (\d+)(, beta: (\d+)){0,1}, date: new Date\("([^"]+)"\)/mg;
	var m = re.exec(upgradeFile);
	return m ? {title: m[1], major: m[2], minor: m[3], revision: m[4], beta: m[6], date: new Date(m[7])} : null;
};

function upgradeFrom(path)
{
	var importStore = new TiddlyWiki();
	var tw = loadFile(path);
	if(window.netscape !== undefined)
		tw = convertUTF8ToUnicode(tw);
	importStore.importTiddlyWiki(tw);
	importStore.forEachTiddler(function(title,tiddler) {
		if(!store.getTiddler(title)) {
			store.addTiddler(tiddler);
		}
	});
	refreshDisplay();
	saveChanges(); //# To create appropriate Markup* sections
	alert(config.messages.upgradeDone.format([formatVersion()]));
	window.location = window.location.toString().substr(0,window.location.toString().lastIndexOf("?"));
}

//--
//-- Sync macro
//--

// Synchronisation handlers
config.syncers = {};

// Sync state.
var currSync = null;

// sync macro
config.macros.sync.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	if(!wikifier.isStatic)
		this.startSync(place);
};

config.macros.sync.cancelSync = function()
{
	currSync = null;
};

config.macros.sync.startSync = function(place)
{
	if(currSync)
		config.macros.sync.cancelSync();
	currSync = {};
	currSync.syncList = this.getSyncableTiddlers();
	currSync.syncTasks = this.createSyncTasks(currSync.syncList);
	this.preProcessSyncableTiddlers(currSync.syncList);
	var wizard = new Wizard();
	currSync.wizard = wizard;
	wizard.createWizard(place,this.wizardTitle);
	wizard.addStep(this.step1Title,this.step1Html);
	var markList = wizard.getElement("markList");
	var listWrapper = document.createElement("div");
	markList.parentNode.insertBefore(listWrapper,markList);
	currSync.listView = ListView.create(listWrapper,currSync.syncList,this.listViewTemplate);
	this.processSyncableTiddlers(currSync.syncList);
	wizard.setButtons([{caption: this.syncLabel, tooltip: this.syncPrompt, onClick: this.doSync}]);
};

config.macros.sync.getSyncableTiddlers = function()
{
	var list = [];
	store.forEachTiddler(function(title,tiddler) {
		var syncItem = {};
		syncItem.serverType = tiddler.getServerType();
		syncItem.serverHost = tiddler.fields['server.host'];
		if(syncItem.serverType && syncItem.serverHost) {
			syncItem.adaptor = new config.adaptors[syncItem.serverType]();
			syncItem.serverHost = syncItem.adaptor.fullHostName(syncItem.serverHost);
			syncItem.serverWorkspace = tiddler.fields['server.workspace'];
			syncItem.tiddler = tiddler;
			syncItem.title = tiddler.title;
			syncItem.isTouched = tiddler.isTouched();
			syncItem.selected = syncItem.isTouched;
			syncItem.syncStatus = config.macros.sync.syncStatusList[syncItem.isTouched ? "changedLocally" : "none"];
			syncItem.status = syncItem.syncStatus.text;
			list.push(syncItem);
		}
		});
	list.sort(function(a,b) {return a.title < b.title ? -1 : (a.title == b.title ? 0 : +1);});
	return list;
};

config.macros.sync.preProcessSyncableTiddlers = function(syncList)
{
	var i;
	for(i=0; i<syncList.length; i++) {
		var si = syncList[i];
		si.serverUrl = si.adaptor.generateTiddlerInfo(si.tiddler).uri;
	}
};

config.macros.sync.processSyncableTiddlers = function(syncList)
{
	var i;
	for(i=0; i<syncList.length; i++) {
		var si = syncList[i];
		if(si.syncStatus.display)
			si.rowElement.style.display = si.syncStatus.display;
		if(si.syncStatus.className)
			si.rowElement.className = si.syncStatus.className;
	}
};

config.macros.sync.createSyncTasks = function(syncList)
{
	var i,syncTasks = [];
	for(i=0; i<syncList.length; i++) {
		var si = syncList[i];
		var j,r = null;
		for(j=0; j<syncTasks.length; j++) {
			var cst = syncTasks[j];
			if(si.serverType == cst.serverType && si.serverHost == cst.serverHost && si.serverWorkspace == cst.serverWorkspace)
				r = cst;
		}
		if(r) {
			si.syncTask = r;
			r.syncItems.push(si);
		} else {
			si.syncTask = this.createSyncTask(si);
			syncTasks.push(si.syncTask);
		}
	}
	return syncTasks;
};

config.macros.sync.createSyncTask = function(syncItem)
{
	var st = {};
	st.serverType = syncItem.serverType;
	st.serverHost = syncItem.serverHost;
	st.serverWorkspace = syncItem.serverWorkspace;
	st.syncItems = [syncItem];

	var getTiddlerListCallback = function(context,sycnItems) {
		var me = config.macros.sync;
		if(!context.status) {
			displayMessage(context.statusText);
			return false;
		}
		syncItems = context.userParams;
		var i,tiddlers = context.tiddlers;
		for(i=0; i<syncItems.length; i++) {
			var si = syncItems[i];
			var f = tiddlers.findByField("title",si.title);
			if(f !== null) {
				if(tiddlers[f].fields['server.page.revision'] > si.tiddler.fields['server.page.revision']) {
					si.syncStatus = me.syncStatusList[si.isTouched ? 'changedBoth' : 'changedServer'];
				}
			} else {
				si.syncStatus = me.syncStatusList.notFound;
			}
			me.updateSyncStatus(si);
		}
		return true;
	};

	var openWorkspaceCallback = function(context,syncItems) {
		if(context.status) {
			context.adaptor.getTiddlerList(context,syncItems,getTiddlerListCallback);
			return true;
		}
		displayMessage(context.statusText);
		return false;
	};

	var context = {host:st.serverHost,workspace:st.serverWorkspace};
	syncItem.adaptor.openHost(st.serverHost);
	syncItem.adaptor.openWorkspace(st.serverWorkspace,context,st.syncItems,openWorkspaceCallback);
	return st;
};

config.macros.sync.updateSyncStatus = function(syncItem)
{
	var e = syncItem.colElements["status"];
	jQuery(e).empty();
	createTiddlyText(e,syncItem.syncStatus.text);
	syncItem.rowElement.style.display = syncItem.syncStatus.display;
	if(syncItem.syncStatus.className)
		syncItem.rowElement.className = syncItem.syncStatus.className;
};

config.macros.sync.doSync = function(e)
{
	var me = config.macros.sync;
	var getTiddlerCallback = function(context,syncItem) {
		if(syncItem) {
			var tiddler = context.tiddler;
			store.saveTiddler(tiddler.title,tiddler.title,tiddler.text,tiddler.modifier,tiddler.modified,tiddler.tags,tiddler.fields,true,tiddler.created);
			syncItem.syncStatus = me.syncStatusList.gotFromServer;
			me.updateSyncStatus(syncItem);
		}
	};
	var putTiddlerCallback = function(context,syncItem) {
		if(syncItem) {
			store.resetTiddler(context.title);
			syncItem.syncStatus = me.syncStatusList.putToServer;
			me.updateSyncStatus(syncItem);
		}
	};

	var rowNames = ListView.getSelectedRows(currSync.listView);
	var i,sl = me.syncStatusList;
	for(i=0; i<currSync.syncList.length; i++) {
		var si = currSync.syncList[i];
		if(rowNames.indexOf(si.title) != -1) {
			var errorMsg = "Error in doSync: ";
			try {
				var r = true;
				switch(si.syncStatus) {
				case sl.changedServer:
					var context = {"workspace": si.serverWorkspace};
					r = si.adaptor.getTiddler(si.title,context,si,getTiddlerCallback);
					break;
				case sl.notFound:
				case sl.changedLocally:
				case sl.changedBoth:
					r = si.adaptor.putTiddler(si.tiddler,null,si,putTiddlerCallback);
					break;
				default:
					break;
				}
				if(!r)
					displayMessage(errorMsg + r);
			} catch(ex) {
				if(ex.name == "TypeError")
					displayMessage("sync operation unsupported: " + ex.message);
				else
					displayMessage(errorMsg + ex.message);
			}
		}
	}
	return false;
};

//--
//-- Manager UI for groups of tiddlers
//--

config.macros.plugins.handler = function(place,macroName,params,wikifier,paramString)
{
	var wizard = new Wizard();
	wizard.createWizard(place,this.wizardTitle);
	wizard.addStep(this.step1Title,this.step1Html);
	var markList = wizard.getElement("markList");
	var listWrapper = document.createElement("div");
	markList.parentNode.insertBefore(listWrapper,markList);
	listWrapper.setAttribute("refresh","macro");
	listWrapper.setAttribute("macroName","plugins");
	listWrapper.setAttribute("params",paramString);
	this.refresh(listWrapper,paramString);
};

config.macros.plugins.refresh = function(listWrapper,params)
{
	var me = config.macros.plugins;
	var wizard = new Wizard(listWrapper);
	var selectedRows = [];
	ListView.forEachSelector(listWrapper,function(e,rowName) {
			if(e.checked)
				selectedRows.push(e.getAttribute("rowName"));
		});
	jQuery(listWrapper).empty();
	params = params.parseParams("anon");
	var plugins = installedPlugins.slice(0);
	var t,tiddler,p;
	var configTiddlers = store.getTaggedTiddlers("systemConfig");
	for(t=0; t<configTiddlers.length; t++) {
		tiddler = configTiddlers[t];
		if(plugins.findByField("title",tiddler.title) == null) {
			p = getPluginInfo(tiddler);
			p.executed = false;
			p.log.splice(0,0,this.skippedText);
			plugins.push(p);
		}
	}
	for(t=0; t<plugins.length; t++) {
		p = plugins[t];
		p.size = p.tiddler.text ? p.tiddler.text.length : 0;
		p.forced = p.tiddler.isTagged("systemConfigForce");
		p.disabled = p.tiddler.isTagged("systemConfigDisable");
		p.Selected = selectedRows.indexOf(plugins[t].title) != -1;
	}
	if(plugins.length == 0) {
		createTiddlyElement(listWrapper,"em",null,null,this.noPluginText);
		wizard.setButtons([]);
	} else {
		var template = readOnly ? this.listViewTemplateReadOnly : this.listViewTemplate;
		var listView = ListView.create(listWrapper,plugins,template,this.onSelectCommand);
		wizard.setValue("listView",listView);
		if(!readOnly) {
			wizard.setButtons([
				{caption: me.removeLabel, tooltip: me.removePrompt, onClick: me.doRemoveTag},
				{caption: me.deleteLabel, tooltip: me.deletePrompt, onClick: me.doDelete}
			]);
		}
	}
};

config.macros.plugins.doRemoveTag = function(e)
{
	var wizard = new Wizard(this);
	var listView = wizard.getValue("listView");
	var rowNames = ListView.getSelectedRows(listView);
	if(rowNames.length == 0) {
		alert(config.messages.nothingSelected);
	} else {
		var t;
		for(t=0; t<rowNames.length; t++) {
			store.setTiddlerTag(rowNames[t],false,"systemConfig");
		}
		autoSaveChanges();
	}
};

config.macros.plugins.doDelete = function(e)
{
	var wizard = new Wizard(this);
	var listView = wizard.getValue("listView");
	var rowNames = ListView.getSelectedRows(listView);
	if(rowNames.length == 0) {
		alert(config.messages.nothingSelected);
	} else {
		if(confirm(config.macros.plugins.confirmDeleteText.format([rowNames.join(", ")]))) {
			var t;
			for(t=0; t<rowNames.length; t++) {
				store.removeTiddler(rowNames[t]);
				story.closeTiddler(rowNames[t],true);
			}
		}
		autoSaveChanges();
	}
};

//--
//-- Message area
//--

function getMessageDiv()
{
	var msgArea = document.getElementById("messageArea");
	if(!msgArea)
		return null;
	if(!msgArea.hasChildNodes())
		createTiddlyButton(createTiddlyElement(msgArea,"div",null,"messageToolbar"),
			config.messages.messageClose.text,
			config.messages.messageClose.tooltip,
			clearMessage);
	msgArea.style.display = "block";
	return createTiddlyElement(msgArea,"div");
}

function displayMessage(text,linkText)
{
	var e = getMessageDiv();
	if(!e) {
		alert(text);
		return;
	}
	if(linkText) {
		var link = createTiddlyElement(e,"a",null,null,text);
		link.href = linkText;
		link.target = "_blank";
	} else {
		e.appendChild(document.createTextNode(text));
	}
}

function clearMessage()
{
	var msgArea = document.getElementById("messageArea");
	if(msgArea) {
		jQuery(msgArea).empty();
		msgArea.style.display = "none";
	}
	return false;
}

//--
//-- Refresh mechanism
//--

config.notifyTiddlers = [
	{name: "SystemSettings", notify: onSystemSettingsChange},
	{name: "StyleSheetLayout", notify: refreshStyles},
	{name: "StyleSheetColors", notify: refreshStyles},
	{name: "StyleSheet", notify: refreshStyles},
	{name: "StyleSheetPrint", notify: refreshStyles},
	{name: "PageTemplate", notify: refreshPageTemplate},
	{name: "SiteTitle", notify: refreshPageTitle},
	{name: "SiteSubtitle", notify: refreshPageTitle},
	{name: "WindowTitle", notify: refreshPageTitle},
	{name: "ColorPalette", notify: refreshColorPalette},
	{name: null, notify: refreshDisplay}
];

config.refreshers = {
	link: function(e,changeList)
		{
		var title = e.getAttribute("tiddlyLink");
		refreshTiddlyLink(e,title);
		return true;
		},

	tiddler: function(e,changeList)
		{
		var title = e.getAttribute("tiddler");
		var template = e.getAttribute("template");
		if(changeList && (changeList.indexOf && changeList.indexOf(title) != -1) && !story.isDirty(title))
			story.refreshTiddler(title,template,true);
		else
			refreshElements(e,changeList);
		return true;
		},

	content: function(e,changeList)
		{
		var title = e.getAttribute("tiddler");
		var force = e.getAttribute("force");
		var args = e.getAttribute("args");
		if(force != null || changeList == null || (changeList.indexOf && changeList.indexOf(title) != -1)) {
			jQuery(e).empty();
			config.macros.tiddler.transclude(e,title,args);
			return true;
		} else
			return false;
		},

	macro: function(e,changeList)
		{
		var macro = e.getAttribute("macroName");
		var params = e.getAttribute("params");
		if(macro)
			macro = config.macros[macro];
		if(macro && macro.refresh)
			macro.refresh(e,params);
		return true;
		}
};

config.refresherData = {
	styleSheet: "StyleSheet",
	defaultStyleSheet: "StyleSheet",
	pageTemplate: "PageTemplate",
	defaultPageTemplate: "PageTemplate",
	colorPalette: "ColorPalette",
	defaultColorPalette: "ColorPalette"
};

function refreshElements(root,changeList)
{
	var c,nodes = root.childNodes;
	for(c=0; c<nodes.length; c++) {
		var e = nodes[c], type = null;
		if(e.getAttribute && (e.tagName ? e.tagName != "IFRAME" : true))
			type = e.getAttribute("refresh");
		var refresher = config.refreshers[type];
		var refreshed = false;
		if(refresher != undefined)
			refreshed = refresher(e,changeList);
		if(e.hasChildNodes() && !refreshed)
			refreshElements(e,changeList);
	}
}

function applyHtmlMacros(root,tiddler)
{
	var e = root.firstChild;
	while(e) {
		var nextChild = e.nextSibling;
		if(e.getAttribute) {
			var macro = e.getAttribute("macro");
			if(macro) {
				e.removeAttribute("macro");
				var params = "";
				var p = macro.indexOf(" ");
				if(p != -1) {
					params = macro.substr(p+1);
					macro = macro.substr(0,p);
				}
				invokeMacro(e,macro,params,null,tiddler);
			}
		}
		if(e.hasChildNodes())
			applyHtmlMacros(e,tiddler);
		e = nextChild;
	}
}

function refreshPageTemplate(title)
{
	var stash = jQuery("<div/>").appendTo("body").hide()[0];
	var display = story.getContainer();
	var nodes,t;
	if(display) {
		nodes = display.childNodes;
		for(t=nodes.length-1; t>=0; t--)
			stash.appendChild(nodes[t]);
	}
	var wrapper = document.getElementById("contentWrapper");

	var isAvailable = function(title) {
		var s = title ? title.indexOf(config.textPrimitives.sectionSeparator) : -1;
		if(s!=-1)
			title = title.substr(0,s);
		return store.tiddlerExists(title) || store.isShadowTiddler(title);
	};
	if(!title || !isAvailable(title))
		title = config.refresherData.pageTemplate;
	if(!isAvailable(title))
		title = config.refresherData.defaultPageTemplate; //# this one is always avaialable
	wrapper.innerHTML = store.getRecursiveTiddlerText(title,null,10);
	applyHtmlMacros(wrapper);
	refreshElements(wrapper);
	display = story.getContainer();
	jQuery(display).empty();
	if(!display)
		display = createTiddlyElement(wrapper,"div",story.containerId());
	nodes = stash.childNodes;
	for(t=nodes.length-1; t>=0; t--)
		display.appendChild(nodes[t]);
	jQuery(stash).remove();
}

function refreshDisplay(hint)
{
	if(typeof hint == "string")
		hint = [hint];
	var e = document.getElementById("contentWrapper");
	refreshElements(e,hint);
	if(backstage.isPanelVisible()) {
		e = document.getElementById("backstage");
		refreshElements(e,hint);
	}
}

function refreshPageTitle()
{
	document.title = getPageTitle();
}

function getPageTitle()
{
	return wikifyPlainText(store.getTiddlerText("WindowTitle",""),null,tiddler);
}

function refreshStyles(title,doc)
{
	setStylesheet(title == null ? "" : store.getRecursiveTiddlerText(title,"",10),title,doc || document);
}

function refreshColorPalette(title)
{
	if(!startingUp)
		refreshAll();
}

function refreshAll()
{
	refreshPageTemplate();
	refreshDisplay();
	refreshStyles("StyleSheetLayout");
	refreshStyles("StyleSheetColors");
	refreshStyles(config.refresherData.styleSheet);
	refreshStyles("StyleSheetPrint");
}

//--
//-- Option handling
//--

config.optionHandlers = {
	'txt': {
		get: function(name) {return encodeCookie(config.options[name].toString());},
		set: function(name,value) {config.options[name] = decodeCookie(value);}
	},
	'chk': {
		get: function(name) {return config.options[name] ? 'true' : 'false';},
		set: function(name,value) {config.options[name] = value == 'true';}
	}
};

function setOption(name,value)
{
	var optType = name.substr(0,3);
	if(config.optionHandlers[optType] && config.optionHandlers[optType].set)
		config.optionHandlers[optType].set(name,value);
}

// Gets the value of an option as a string. Most code should just read from config.options.* directly
function getOption(name)
{
	var optType = name.substr(0,3);
	return config.optionHandlers[optType] && config.optionHandlers[optType].get ? config.optionHandlers[optType].get(name) : null;
}

function loadOptions()
{
	if(safeMode)
		return;
	loadCookies();
	loadSystemSettings();
}
// @Deprecated; retained for backwards compatibility
var loadOptionsCookie = loadOptions;

function getCookies()
{
	var cookieList = document.cookie.split(';');
	var i,cookies = {};
	for(i=0; i<cookieList.length; i++) {
		var p = cookieList[i].indexOf('=');
		if(p != -1) {
			var name = cookieList[i].substr(0,p).trim();
			var value = cookieList[i].substr(p+1).trim();
			cookies[name] = value;
		}
	}
	return cookies;
}

function loadCookies()
{
	var i,cookies = getCookies();
	if(cookies['TiddlyWiki']) {
		cookies = cookies['TiddlyWiki'].decodeHashMap();
	}
	for(i in cookies) {
		if(config.optionsSource[i] != 'setting') {
			setOption(i,cookies[i]);
		}
	}
}

function loadSystemSettings()
{
	var key,settings = store.calcAllSlices('SystemSettings');
	config.optionsSource = {};
	for(key in settings) {
		setOption(key,settings[key]);
		config.optionsSource[key] = 'setting';
	}
}

function onSystemSettingsChange()
{
	if(!startingUp) {
		loadSystemSettings();
	}
}

function saveOption(name)
{
	if(safeMode)
		return;
	if(name.match(/[()\s]/g, '_')) {
		alert(config.messages.invalidCookie.format([name]));
		return;
	}
	saveCookie(name);
	if(config.optionsSource[name] == 'setting') {
		saveSystemSetting(name,true);
	}
}
// @Deprecated; retained for backwards compatibility
var saveOptionCookie = saveOption;

function removeCookie(name)
{
	document.cookie = name + '=; expires=Thu, 01-Jan-1970 00:00:01 UTC; path=/;';
}

function saveCookie(name)
{
	var key,cookies = {};
	for(key in config.options) {
		var value = getOption(key);
		value = value == null ? 'false' : value;
		cookies[key] = value;
	}
	document.cookie = 'TiddlyWiki=' + String.encodeHashMap(cookies) + '; expires=Fri, 1 Jan 2038 12:00:00 UTC; path=/';
	cookies = getCookies();
	var c;
	for(c in cookies) {
		var optType = c.substr(0,3);
		if(config.optionHandlers[optType])
			removeCookie(c);
	}
}

var systemSettingSave;
function commitSystemSettings(storeWasDirty)
{
	if(systemSettingSave) {
		window.clearTimeout(systemSettingSave);
	}
	systemSettingSave = window.setTimeout(function() {
		var tiddler = store.getTiddler('SystemSettings');
		if(storeWasDirty == false && story.areAnyDirty() == false) {
			saveChanges(null,[tiddler]);
		} else {
			autoSaveChanges(null,[tiddler]);
		}
	}, 1000);
}

function saveSystemSetting(name,saveFile)
{
	var title = 'SystemSettings';
	var slice = store.getTiddlerSlice(title,name);
	if(readOnly || slice === getOption(name)) {
		return; //# don't save if read-only or the option hasn't changed
	}
	var slices = store.calcAllSlices(title);
	var key;
	for(key in config.optionsSource) {
		var value = getOption(key) || '';
		if(slices[key] !== value) {
			slices[key] = value;
		}
	}
	var text = [];
	for(key in slices) {
		text.push('%0: %1'.format([key,slices[key]]));
	}
	text = text.sort().join('\n');
	var storeWasDirty = store.isDirty();
	var tiddler = store.getTiddler(title);
	if(tiddler) {
		tiddler.text = text;
		tiddler = store.saveTiddler(tiddler);
	} else {
		tiddler = store.saveTiddler(title,title,text,'System',new Date(),['excludeLists'],config.defaultCustomFields);
	}
	if(saveFile) {
		commitSystemSettings(storeWasDirty);
	}
}

function encodeCookie(s)
{
	return escape(convertUnicodeToHtmlEntities(s));
}

function decodeCookie(s)
{
	s = unescape(s);
	var re = /&#[0-9]{1,5};/g;
	return s.replace(re,function($0) {return String.fromCharCode(eval($0.replace(/[&#;]/g,'')));});
}

config.macros.option.genericCreate = function(place,type,opt,className,desc)
{
	var typeInfo = config.macros.option.types[type];
	var c = document.createElement(typeInfo.elementType);
	if(typeInfo.typeValue)
		c.setAttribute('type',typeInfo.typeValue);
	c[typeInfo.eventName] = typeInfo.onChange;
	c.setAttribute('option',opt);
	c.className = className || typeInfo.className;
	if(config.optionsDesc[opt])
		c.setAttribute('title',config.optionsDesc[opt]);
	place.appendChild(c);
	if(desc != 'no')
		createTiddlyText(place,config.optionsDesc[opt] || opt);
	c[typeInfo.valueField] = config.options[opt];
	return c;
};

config.macros.option.genericOnChange = function(e)
{
	var opt = this.getAttribute('option');
	if(opt) {
		var optType = opt.substr(0,3);
		var handler = config.macros.option.types[optType];
		if(handler.elementType && handler.valueField)
			config.macros.option.propagateOption(opt,handler.valueField,this[handler.valueField],handler.elementType,this);
	}
	return true;
};

config.macros.option.types = {
	'txt': {
		elementType: 'input',
		valueField: 'value',
		eventName: 'onchange',
		className: 'txtOptionInput',
		create: config.macros.option.genericCreate,
		onChange: config.macros.option.genericOnChange
	},
	'chk': {
		elementType: 'input',
		valueField: 'checked',
		eventName: 'onclick',
		className: 'chkOptionInput',
		typeValue: 'checkbox',
		create: config.macros.option.genericCreate,
		onChange: config.macros.option.genericOnChange
	}
};

config.macros.option.propagateOption = function(opt,valueField,value,elementType,elem)
{
	config.options[opt] = value;
	saveOption(opt);
	var t,nodes = document.getElementsByTagName(elementType);
	for(t=0; t<nodes.length; t++) {
		var optNode = nodes[t].getAttribute('option');
		if(opt == optNode && nodes[t]!=elem)
			nodes[t][valueField] = value;
	}
};

config.macros.option.handler = function(place,macroName,params,wikifier,paramString)
{
	params = paramString.parseParams('anon',null,true,false,false);
	var opt = (params[1] && params[1].name == 'anon') ? params[1].value : getParam(params,'name',null);
	var className = (params[2] && params[2].name == 'anon') ? params[2].value : getParam(params,'class',null);
	var desc = getParam(params,'desc','no');
	var type = opt.substr(0,3);
	var h = config.macros.option.types[type];
	if(h && h.create)
		h.create(place,type,opt,className,desc);
};

config.macros.options.handler = function(place,macroName,params,wikifier,paramString)
{
	params = paramString.parseParams('anon',null,true,false,false);
	var showUnknown = getParam(params,'showUnknown','no');
	var wizard = new Wizard();
	wizard.createWizard(place,this.wizardTitle);
	wizard.addStep(this.step1Title,this.step1Html);
	var markList = wizard.getElement('markList');
	var chkUnknown = wizard.getElement('chkUnknown');
	chkUnknown.checked = showUnknown == 'yes';
	chkUnknown.onchange = this.onChangeUnknown;
	var listWrapper = document.createElement('div');
	markList.parentNode.insertBefore(listWrapper,markList);
	wizard.setValue('listWrapper',listWrapper);
	this.refreshOptions(listWrapper,showUnknown == 'yes');
};

config.macros.options.refreshOptions = function(listWrapper,showUnknown)
{
	var n,opts = [];
	for(n in config.options) {
		var opt = {};
		opt.option = '';
		opt.name = n;
		opt.lowlight = !config.optionsDesc[n];
		opt.description = opt.lowlight ? this.unknownDescription : config.optionsDesc[n];
		if(!opt.lowlight || showUnknown)
			opts.push(opt);
	}
	opts.sort(function(a,b) {return a.name.substr(3) < b.name.substr(3) ? -1 : (a.name.substr(3) == b.name.substr(3) ? 0 : +1);});
	ListView.create(listWrapper,opts,this.listViewTemplate);
	for(n=0; n<opts.length; n++) {
		var type = opts[n].name.substr(0,3);
		var h = config.macros.option.types[type];
		if(h && h.create) {
			h.create(opts[n].colElements['option'],type,opts[n].name,null,'no');
		}
	}
};

config.macros.options.onChangeUnknown = function(e)
{
	var wizard = new Wizard(this);
	var listWrapper = wizard.getValue('listWrapper');
	jQuery(listWrapper).empty();
	config.macros.options.refreshOptions(listWrapper,this.checked);
	return false;
};

//--
//-- Saving
//--

var saveUsingSafari = false;

var startSaveArea = '<div id="' + 'storeArea">'; // Split up into two so that indexOf() of this source doesn't find it
var startSaveAreaRE = /<((div)|(DIV)) ((id)|(ID))=["']?storeArea['"]?>/; // Used for IE6
var endSaveArea = '</d' + 'iv>';
var endSaveAreaCaps = '</D' + 'IV>';

// If there are unsaved changes, force the user to confirm before exitting
function confirmExit()
{
	hadConfirmExit = true;
	if((store && store.isDirty && store.isDirty()) || (story && story.areAnyDirty && story.areAnyDirty()))
		return config.messages.confirmExit;
}

// Give the user a chance to save changes before exitting
function checkUnsavedChanges()
{
	if(store && store.isDirty && store.isDirty() && window.hadConfirmExit === false) {
		if(confirm(config.messages.unsavedChangesWarning))
			saveChanges();
	}
}

function updateLanguageAttribute(s)
{
	if(config.locale) {
		var mRE = /(<html(?:.*?)?)(?: xml:lang\="([a-z]+)")?(?: lang\="([a-z]+)")?>/;
		var m = mRE.exec(s);
		if(m) {
			var t = m[1];
			if(m[2])
				t += ' xml:lang="' + config.locale + '"';
			if(m[3])
				t += ' lang="' + config.locale + '"';
			t += ">";
			s = s.substr(0,m.index) + t + s.substr(m.index+m[0].length);
		}
	}
	return s;
}

function updateMarkupBlock(s,blockName,tiddlerName)
{
	return s.replaceChunk(
			"<!--%0-START-->".format([blockName]),
			"<!--%0-END-->".format([blockName]),
			"\n" + convertUnicodeToFileFormat(store.getRecursiveTiddlerText(tiddlerName,"")) + "\n");
}

function updateOriginal(original,posDiv,localPath)
{
	if(!posDiv)
		posDiv = locateStoreArea(original);
	if(!posDiv) {
		alert(config.messages.invalidFileError.format([localPath]));
		return null;
	}
	var revised = original.substr(0,posDiv[0] + startSaveArea.length) + "\n" +
				convertUnicodeToFileFormat(store.allTiddlersAsHtml()) + "\n" +
				original.substr(posDiv[1]);
	var newSiteTitle = convertUnicodeToFileFormat(getPageTitle()).htmlEncode();
	revised = revised.replaceChunk("<title"+">","</title"+">"," " + newSiteTitle + " ");
	revised = updateLanguageAttribute(revised);
	revised = updateMarkupBlock(revised,"PRE-HEAD","MarkupPreHead");
	revised = updateMarkupBlock(revised,"POST-HEAD","MarkupPostHead");
	revised = updateMarkupBlock(revised,"PRE-BODY","MarkupPreBody");
	revised = updateMarkupBlock(revised,"POST-SCRIPT","MarkupPostBody");
	return revised;
}

function locateStoreArea(original)
{
	// Locate the storeArea divs
	if(!original)
		return null;
	var posOpeningDiv = original.search(startSaveAreaRE);
	var limitClosingDiv = original.indexOf("<"+"!--POST-STOREAREA--"+">");
	if(limitClosingDiv == -1)
		limitClosingDiv = original.indexOf("<"+"!--POST-BODY-START--"+">");
	var start = limitClosingDiv == -1 ? original.length : limitClosingDiv;
	var posClosingDiv = original.lastIndexOf(endSaveArea,start);
	if(posClosingDiv == -1)
		posClosingDiv = original.lastIndexOf(endSaveAreaCaps,start);
	return (posOpeningDiv != -1 && posClosingDiv != -1) ? [posOpeningDiv,posClosingDiv] : null;
}

function autoSaveChanges(onlyIfDirty,tiddlers)
{
	if(config.options.chkAutoSave)
		saveChanges(onlyIfDirty,tiddlers);
}

function loadOriginal(localPath)
{
	return loadFile(localPath);
}

// Save this tiddlywiki with the pending changes
function saveChanges(onlyIfDirty,tiddlers)
{
	if(onlyIfDirty && !store.isDirty())
		return;
	clearMessage();
	var t0 = new Date();
	var msg = config.messages;
	var originalPath = document.location.toString();
	if(originalPath.substr(0,5) != "file:") {
		alert(msg.notFileUrlError);
		if(store.tiddlerExists(msg.saveInstructions))
			story.displayTiddler(null,msg.saveInstructions);
		return;
	}
	var localPath = getLocalPath(originalPath);
	var original = loadOriginal(localPath);
	if(original == null) {
		alert(msg.cantSaveError);
		if(store.tiddlerExists(msg.saveInstructions))
			story.displayTiddler(null,msg.saveInstructions);
		return;
	}
	var posDiv = locateStoreArea(original);
	if(!posDiv) {
		alert(msg.invalidFileError.format([localPath]));
		return;
	}
	saveMain(localPath,original,posDiv);
	if(config.options.chkSaveBackups)
		saveBackup(localPath,original);
	if(config.options.chkSaveEmptyTemplate)
		saveEmpty(localPath,original,posDiv);
	if(config.options.chkGenerateAnRssFeed && saveRss instanceof Function)
		saveRss(localPath);
	if(config.options.chkDisplayInstrumentation)
		displayMessage("saveChanges " + (new Date()-t0) + " ms");
}

function saveMain(localPath,original,posDiv)
{
	var save;
	try {
		var revised = updateOriginal(original,posDiv,localPath);
		save = saveFile(localPath,revised);
	} catch (ex) {
		showException(ex);
	}
	if(save) {
		displayMessage(config.messages.mainSaved,"file://" + localPath);
		store.setDirty(false);
	} else {
		alert(config.messages.mainFailed);
	}
}

function saveBackup(localPath,original)
{
	var backupPath = getBackupPath(localPath);
	var backup = copyFile(backupPath,localPath);
	if(!backup)
		backup = saveFile(backupPath,original);
	if(backup)
		displayMessage(config.messages.backupSaved,"file://" + backupPath);
	else
		alert(config.messages.backupFailed);
}

function saveEmpty(localPath,original,posDiv)
{
	var emptyPath,p;
	if((p = localPath.lastIndexOf("/")) != -1)
		emptyPath = localPath.substr(0,p) + "/";
	else if((p = localPath.lastIndexOf("\\")) != -1)
		emptyPath = localPath.substr(0,p) + "\\";
	else
		emptyPath = localPath + ".";
	emptyPath += "empty.html";
	var empty = original.substr(0,posDiv[0] + startSaveArea.length) + original.substr(posDiv[1]);
	var emptySave = saveFile(emptyPath,empty);
	if(emptySave)
		displayMessage(config.messages.emptySaved,"file://" + emptyPath);
	else
		alert(config.messages.emptyFailed);
}

function getLocalPath(origPath)
{
	var originalPath = convertUriToUTF8(origPath,config.options.txtFileSystemCharSet);
	// Remove any location or query part of the URL
	var argPos = originalPath.indexOf("?");
	if(argPos != -1)
		originalPath = originalPath.substr(0,argPos);
	var hashPos = originalPath.indexOf("#");
	if(hashPos != -1)
		originalPath = originalPath.substr(0,hashPos);
	// Convert file://localhost/ to file:///
	if(originalPath.indexOf("file://localhost/") == 0)
		originalPath = "file://" + originalPath.substr(16);
	// Convert to a native file format
	var localPath;
	if(originalPath.charAt(9) == ":") // pc local file
		localPath = unescape(originalPath.substr(8)).replace(new RegExp("/","g"),"\\");
	else if(originalPath.indexOf("file://///") == 0) // FireFox pc network file
		localPath = "\\\\" + unescape(originalPath.substr(10)).replace(new RegExp("/","g"),"\\");
	else if(originalPath.indexOf("file:///") == 0) // mac/unix local file
		localPath = unescape(originalPath.substr(7));
	else if(originalPath.indexOf("file:/") == 0) // mac/unix local file
		localPath = unescape(originalPath.substr(5));
	else // pc network file
		localPath = "\\\\" + unescape(originalPath.substr(7)).replace(new RegExp("/","g"),"\\");
	return localPath;
}

function getBackupPath(localPath,title,extension)
{
	var slash = "\\";
	var dirPathPos = localPath.lastIndexOf("\\");
	if(dirPathPos == -1) {
		dirPathPos = localPath.lastIndexOf("/");
		slash = "/";
	}
	var backupFolder = config.options.txtBackupFolder;
	if(!backupFolder || backupFolder == "")
		backupFolder = ".";
	var backupPath = localPath.substr(0,dirPathPos) + slash + backupFolder + localPath.substr(dirPathPos);
	backupPath = backupPath.substr(0,backupPath.lastIndexOf(".")) + ".";
	if(title)
		backupPath += title.replace(/[\\\/\*\?\":<> ]/g,"_") + ".";
	backupPath += (new Date()).convertToYYYYMMDDHHMMSSMMM() + "." + (extension || "html");
	return backupPath;
}

//--
//-- RSS Saving
//--

function saveRss(localPath)
{
	var rssPath = localPath.substr(0,localPath.lastIndexOf(".")) + ".xml";
	if(saveFile(rssPath,convertUnicodeToFileFormat(generateRss())))
		displayMessage(config.messages.rssSaved,"file://" + rssPath);
	else
		alert(config.messages.rssFailed);
}

tiddlerToRssItem = function(tiddler,uri)
{
	var s = "<title" + ">" + tiddler.title.htmlEncode() + "</title" + ">\n";
	s += "<description>" + wikifyStatic(tiddler.text,null,tiddler).htmlEncode() + "</description>\n";
	var i;
	for(i=0; i<tiddler.tags.length; i++)
		s += "<category>" + tiddler.tags[i] + "</category>\n";
	s += "<link>" + uri + "#" + encodeURIComponent(String.encodeTiddlyLink(tiddler.title)) + "</link>\n";
	s +="<pubDate>" + tiddler.modified.toGMTString() + "</pubDate>\n";
	return s;
};

function generateRss()
{
	var s = [];
	var d = new Date();
	var u = store.getTiddlerText("SiteUrl");
	// Assemble the header
	s.push("<" + "?xml version=\"1.0\"?" + ">");
	s.push("<rss version=\"2.0\">");
	s.push("<channel>");
	s.push("<title" + ">" + wikifyPlainText(store.getTiddlerText("SiteTitle",""),null,tiddler).htmlEncode() + "</title" + ">");
	if(u)
		s.push("<link>" + u.htmlEncode() + "</link>");
	s.push("<description>" + wikifyPlainText(store.getTiddlerText("SiteSubtitle",""),null,tiddler).htmlEncode() + "</description>");
	s.push("<language>" + config.locale + "</language>");
	s.push("<copyright>Copyright " + d.getFullYear() + " " + config.options.txtUserName.htmlEncode() + "</copyright>");
	s.push("<pubDate>" + d.toGMTString() + "</pubDate>");
	s.push("<lastBuildDate>" + d.toGMTString() + "</lastBuildDate>");
	s.push("<docs>http://blogs.law.harvard.edu/tech/rss</docs>");
	s.push("<generator>TiddlyWiki " + formatVersion() + "</generator>");
	// The body
	var tiddlers = store.getTiddlers("modified","excludeLists");
	var i,n = config.numRssItems > tiddlers.length ? 0 : tiddlers.length-config.numRssItems;
	for(i=tiddlers.length-1; i>=n; i--) {
		s.push("<item>\n" + tiddlerToRssItem(tiddlers[i],u) + "\n</item>");
	}
	// And footer
	s.push("</channel>");
	s.push("</rss>");
	// Save it all
	return s.join("\n");
}

//--
//-- Filesystem code
//--

function convertUTF8ToUnicode(u)
{
	return config.browser.isOpera || !window.netscape ? manualConvertUTF8ToUnicode(u) : mozConvertUTF8ToUnicode(u);
}

function manualConvertUTF8ToUnicode(utf)
{
	var uni = utf;
	var src = 0;
	var dst = 0;
	var b1, b2, b3;
	var c;
	while(src < utf.length) {
		b1 = utf.charCodeAt(src++);
		if(b1 < 0x80) {
			dst++;
		} else if(b1 < 0xE0) {
			b2 = utf.charCodeAt(src++);
			c = String.fromCharCode(((b1 & 0x1F) << 6) | (b2 & 0x3F));
			uni = uni.substring(0,dst++).concat(c,utf.substr(src));
		} else {
			b2 = utf.charCodeAt(src++);
			b3 = utf.charCodeAt(src++);
			c = String.fromCharCode(((b1 & 0xF) << 12) | ((b2 & 0x3F) << 6) | (b3 & 0x3F));
			uni = uni.substring(0,dst++).concat(c,utf.substr(src));
		}
	}
	return uni;
}

function mozConvertUTF8ToUnicode(u)
{
	try {
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
		var converter = Components.classes["@mozilla.org/intl/scriptableunicodeconverter"].createInstance(Components.interfaces.nsIScriptableUnicodeConverter);
		converter.charset = "UTF-8";
	} catch(ex) {
		return manualConvertUTF8ToUnicode(u);
	} // fallback
	var s = converter.ConvertToUnicode(u);
	var fin = converter.Finish();
	return fin.length > 0 ? s+fin : s;
}

function convertUnicodeToFileFormat(s)
{
	return config.browser.isOpera || !window.netscape ? (config.browser.isIE ? convertUnicodeToHtmlEntities(s) : s) : mozConvertUnicodeToUTF8(s);
}

function convertUnicodeToHtmlEntities(s)
{
	var re = /[^\u0000-\u007F]/g;
	return s.replace(re,function($0) {return "&#" + $0.charCodeAt(0).toString() + ";";});
}

function convertUnicodeToUTF8(s)
{
// return convertUnicodeToFileFormat to allow plugin migration
	return convertUnicodeToFileFormat(s);
}

function manualConvertUnicodeToUTF8(s)
{
	return unescape(encodeURIComponent(s));
}

function mozConvertUnicodeToUTF8(s)
{
	try {
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
		var converter = Components.classes["@mozilla.org/intl/scriptableunicodeconverter"].createInstance(Components.interfaces.nsIScriptableUnicodeConverter);
		converter.charset = "UTF-8";
	} catch(ex) {
		return manualConvertUnicodeToUTF8(s);
	} // fallback
	var u = converter.ConvertFromUnicode(s);
	var fin = converter.Finish();
	return fin.length > 0 ? u + fin : u;
}

function convertUriToUTF8(uri,charSet)
{
	if(window.netscape == undefined || charSet == undefined || charSet == "")
		return uri;
	try {
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
		var converter = Components.classes["@mozilla.org/intl/utf8converterservice;1"].getService(Components.interfaces.nsIUTF8ConverterService);
	} catch(ex) {
		return uri;
	}
	return converter.convertURISpecToUTF8(uri,charSet);
}

function copyFile(dest,source)
{
	return config.browser.isIE ? ieCopyFile(dest,source) : false;
}

function saveFile(fileUrl,content)
{
	var r = mozillaSaveFile(fileUrl,content);
	if(!r)
		r = ieSaveFile(fileUrl,content);
	if(!r)
		r = javaSaveFile(fileUrl,content);
	return r;
}

function loadFile(fileUrl)
{
	var r = mozillaLoadFile(fileUrl);
	if((r == null) || (r == false))
		r = ieLoadFile(fileUrl);
	if((r == null) || (r == false))
		r = javaLoadFile(fileUrl);
	return r;
}

function ieCreatePath(path)
{
	try {
		var fso = new ActiveXObject("Scripting.FileSystemObject");
	} catch(ex) {
		return null;
	}

	var pos = path.lastIndexOf("\\");
	if(pos==-1)
		pos = path.lastIndexOf("/");
	if(pos!=-1)
		path = path.substring(0,pos+1);

	var scan = [path];
	var parent = fso.GetParentFolderName(path);
	while(parent && !fso.FolderExists(parent)) {
		scan.push(parent);
		parent = fso.GetParentFolderName(parent);
	}

	for(i=scan.length-1;i>=0;i--) {
		if(!fso.FolderExists(scan[i])) {
			fso.CreateFolder(scan[i]);
		}
	}
	return true;
}

// Returns null if it can't do it, false if there's an error, true if it saved OK
function ieSaveFile(filePath,content)
{
	ieCreatePath(filePath);
	try {
		var fso = new ActiveXObject("Scripting.FileSystemObject");
	} catch(ex) {
		return null;
	}
	var file = fso.OpenTextFile(filePath,2,-1,0);
	file.Write(content);
	file.Close();
	return true;
}

// Returns null if it can't do it, false if there's an error, or a string of the content if successful
function ieLoadFile(filePath)
{
	try {
		var fso = new ActiveXObject("Scripting.FileSystemObject");
		var file = fso.OpenTextFile(filePath,1);
		var content = file.ReadAll();
		file.Close();
	} catch(ex) {
		return null;
	}
	return content;
}

function ieCopyFile(dest,source)
{
	ieCreatePath(dest);
	try {
		var fso = new ActiveXObject("Scripting.FileSystemObject");
		fso.GetFile(source).Copy(dest);
	} catch(ex) {
		return false;
	}
	return true;
}

// Returns null if it can't do it, false if there's an error, true if it saved OK
function mozillaSaveFile(filePath,content)
{
	if(window.Components) {
		try {
			netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
			var file = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
			file.initWithPath(filePath);
			if(!file.exists())
				file.create(0,0x01B4);// 0x01B4 = 0664
			var out = Components.classes["@mozilla.org/network/file-output-stream;1"].createInstance(Components.interfaces.nsIFileOutputStream);
			out.init(file,0x22,0x04,null);
			out.write(content,content.length);
			out.flush();
			out.close();
			return true;
		} catch(ex) {
			return false;
		}
	}
	return null;
}

// Returns null if it can't do it, false if there's an error, or a string of the content if successful
function mozillaLoadFile(filePath)
{
	if(window.Components) {
		try {
			netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
			var file = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
			file.initWithPath(filePath);
			if(!file.exists())
				return null;
			var inputStream = Components.classes["@mozilla.org/network/file-input-stream;1"].createInstance(Components.interfaces.nsIFileInputStream);
			inputStream.init(file,0x01,0x04,null);
			var sInputStream = Components.classes["@mozilla.org/scriptableinputstream;1"].createInstance(Components.interfaces.nsIScriptableInputStream);
			sInputStream.init(inputStream);
			var contents = sInputStream.read(sInputStream.available());
			sInputStream.close();
			inputStream.close();
			return contents;
		} catch(ex) {
			return false;
		}
	}
	return null;
}

function javaUrlToFilename(url)
{
	var f = "//localhost";
	if(url.indexOf(f) == 0)
		return url.substring(f.length);
	var i = url.indexOf(":");
	return i > 0 ? url.substring(i-1) : url;
}

function javaSaveFile(filePath,content)
{
	try {
		if(document.applets["TiddlySaver"])
			return document.applets["TiddlySaver"].saveFile(javaUrlToFilename(filePath),"UTF-8",content);
	} catch(ex) {
	}
	try {
		var s = new java.io.PrintStream(new java.io.FileOutputStream(javaUrlToFilename(filePath)));
		s.print(content);
		s.close();
	} catch(ex2) {
		return null;
	}
	return true;
}

function javaLoadFile(filePath)
{
	try {
		if(document.applets["TiddlySaver"])
			return String(document.applets["TiddlySaver"].loadFile(javaUrlToFilename(filePath),"UTF-8"));
	} catch(ex) {
	}
	var content = [];
	try {
		var r = new java.io.BufferedReader(new java.io.FileReader(javaUrlToFilename(filePath)));
		var line;
		while((line = r.readLine()) != null)
			content.push(String(line));
		r.close();
	} catch(ex2) {
		return null;
	}
	return content.join("\n");
}

//--
//-- Server adaptor base class
//--

function AdaptorBase()
{
	this.host = null;
	this.store = null;
	return this;
}

AdaptorBase.prototype.close = function()
{
	return true;
};

AdaptorBase.prototype.fullHostName = function(host)
{
	if(!host)
		return '';
	host = host.trim();
	if(!host.match(/:\/\//))
		host = 'http://' + host;
	if(host.substr(host.length-1) == '/')
		host = host.substr(0,host.length-1);
	return host;
};

AdaptorBase.minHostName = function(host)
{
	return host;
};

AdaptorBase.prototype.setContext = function(context,userParams,callback)
{
	if(!context) context = {};
	context.userParams = userParams;
	if(callback) context.callback = callback;
	context.adaptor = this;
	if(!context.host)
		context.host = this.host;
	context.host = this.fullHostName(context.host);
	if(!context.workspace)
		context.workspace = this.workspace;
	return context;
};

// Open the specified host
AdaptorBase.prototype.openHost = function(host,context,userParams,callback)
{
	this.host = host;
	context = this.setContext(context,userParams,callback);
	context.status = true;
	if(callback)
		window.setTimeout(function() {context.callback(context,userParams);},10);
	return true;
};

// Open the specified workspace
AdaptorBase.prototype.openWorkspace = function(workspace,context,userParams,callback)
{
	this.workspace = workspace;
	context = this.setContext(context,userParams,callback);
	context.status = true;
	if(callback)
		window.setTimeout(function() {callback(context,userParams);},10);
	return true;
};

//--
//-- Server adaptor for talking to static TiddlyWiki files
//--

function FileAdaptor()
{
}

FileAdaptor.prototype = new AdaptorBase();

FileAdaptor.serverType = 'file';
FileAdaptor.serverLabel = 'TiddlyWiki';

FileAdaptor.loadTiddlyWikiSuccess = function(context,jqXHR)
{
	context.status = true;
	context.adaptor.store = new TiddlyWiki();
	if(!context.adaptor.store.importTiddlyWiki(jqXHR.responseText)) {
		context.statusText = config.messages.invalidFileError.format([context.host]);
		context.status = false;
	}
	context.complete(context,context.userParams);
};

FileAdaptor.loadTiddlyWikiError = function(context,jqXHR)
{
	context.status = false;
	context.statusText = jqXHR.message;
	context.complete(context,context.userParams);
};

// Get the list of workspaces on a given server
FileAdaptor.prototype.getWorkspaceList = function(context,userParams,callback)
{
	context = this.setContext(context,userParams,callback);
	context.workspaces = [{title:"(default)"}];
	context.status = true;
	if(callback)
		window.setTimeout(function() {callback(context,userParams);},10);
	return true;
};

// Gets the list of tiddlers within a given workspace
FileAdaptor.prototype.getTiddlerList = function(context,userParams,callback,filter)
{
	context = this.setContext(context,userParams,callback);
	if(!context.filter)
		context.filter = filter;
	context.complete = FileAdaptor.getTiddlerListComplete;
	if(this.store) {
		return context.complete(context,context.userParams);
	}
	var options = {
		type:"GET",
		url:context.host,
		processData:false,
		success:function(data,textStatus,jqXHR) {
			FileAdaptor.loadTiddlyWikiSuccess(context,jqXHR);
		},
		error:function(jqXHR,textStatus,errorThrown) {
			FileAdaptor.loadTiddlyWikiError(context,jqXHR);
		}
	};
	return ajaxReq(options);
};

FileAdaptor.getTiddlerListComplete = function(context,userParams)
{
	if(context.status) {
		if(context.filter) {
			context.tiddlers = context.adaptor.store.filterTiddlers(context.filter);
		} else {
			context.tiddlers = [];
			context.adaptor.store.forEachTiddler(function(title,tiddler) {context.tiddlers.push(tiddler);});
		}
		var i;
		for(i=0; i<context.tiddlers.length; i++) {
			context.tiddlers[i].fields['server.type'] = FileAdaptor.serverType;
			context.tiddlers[i].fields['server.host'] = AdaptorBase.minHostName(context.host);
			context.tiddlers[i].fields['server.page.revision'] = context.tiddlers[i].modified.convertToYYYYMMDDHHMM();
		}
		context.status = true;
	}
	if(context.callback) {
		window.setTimeout(function() {context.callback(context,userParams);},10);
	}
	return true;
};

FileAdaptor.prototype.generateTiddlerInfo = function(tiddler)
{
	var info = {};
	info.uri = tiddler.fields['server.host'] + "#" + tiddler.title;
	return info;
};

// Retrieve a tiddler from a given workspace on a given server
FileAdaptor.prototype.getTiddler = function(title,context,userParams,callback)
{
	context = this.setContext(context,userParams,callback);
	context.title = title;
	context.complete = FileAdaptor.getTiddlerComplete;
	if(context.adaptor.store) {
		return context.complete(context,context.userParams);
	}
	var options = {
		type:"GET",
		url:context.host,
		processData:false,
		success:function(data,textStatus,jqXHR) {
			FileAdaptor.loadTiddlyWikiSuccess(context,jqXHR);
		},
		error:function(jqXHR,textStatus,errorThrown) {
			FileAdaptor.loadTiddlyWikiError(context,jqXHR);
		}
	};
	return ajaxReq(options);
};

FileAdaptor.getTiddlerComplete = function(context,userParams)
{
	var t = context.adaptor.store.fetchTiddler(context.title);
	if(t) {
		t.fields['server.type'] = FileAdaptor.serverType;
		t.fields['server.host'] = AdaptorBase.minHostName(context.host);
		t.fields['server.page.revision'] = t.modified.convertToYYYYMMDDHHMM();
		context.tiddler = t;
		context.status = true;
	} else { //# tiddler does not exist in document
		context.status = false;
	}
	if(context.allowSynchronous) {
		context.isSynchronous = true;
		context.callback(context,userParams);
	} else {
		window.setTimeout(function() {context.callback(context,userParams);},10);
	}
	return true;
};

FileAdaptor.prototype.close = function()
{
	this.store = null;
};

config.adaptors[FileAdaptor.serverType] = FileAdaptor;

config.defaultAdaptor = FileAdaptor.serverType;

//--
//-- HTTP request code
//--

function ajaxReq(args)
{
	if(window.Components && window.netscape && window.netscape.security && document.location.protocol.indexOf("http") == -1)
		window.netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");
	return jQuery.ajax(args);
}

function httpReq(type,url,callback,params,headers,data,contentType,username,password,allowCache)
{
	var httpSuccess = function(xhr) {
		try {
			// IE error sometimes returns 1223 when it should be 204 so treat it as success, see #1450
			return (!xhr.status && location.protocol === "file:") ||
				(xhr.status >= 200 && xhr.status < 300) ||
				xhr.status === 304 || xhr.status === 1223;
		} catch(e) {}
		return false;
	};

	var options = {
		type:type,
		url:url,
		processData:false,
		data:data,
		cache:!!allowCache,
		beforeSend: function(xhr) {
			var i;
			for(i in headers)
				xhr.setRequestHeader(i,headers[i]);
			xhr.setRequestHeader("X-Requested-With", "TiddlyWiki " + formatVersion());
		}
	};

	if(callback) {
		options.complete = function(xhr,textStatus) {
			if(httpSuccess(xhr))
				callback(true,params,xhr.responseText,url,xhr);
			else
				callback(false,params,null,url,xhr);
		};
	}
	if(contentType)
		options.contentType = contentType;
	if(username)
		options.username = username;
	if(password)
		options.password = password;
	if(window.Components && window.netscape && window.netscape.security && document.location.protocol.indexOf("http") == -1)
		window.netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");
	return jQuery.ajax(options);
}
//--
//-- TiddlyWiki-specific utility functions
//--

// Returns TiddlyWiki version string
function formatVersion(v)
{
	v = v || version;
	return v.major + "." + v.minor + "." + v.revision +
		(v.alpha ? " (alpha " + v.alpha + ")" : "") +
		(v.beta ? " (beta " + v.beta + ")" : "");
}

function compareVersions(v1,v2)
{
	var x1,x2,i,a = ["major","minor","revision"];
	for(i = 0; i<a.length; i++) {
		x1 = v1[a[i]] || 0;
		x2 = v2[a[i]] || 0;
		if(x1<x2)
			return 1;
		if(x1>x2)
			return -1;
	}
	x1 = v1.beta || 9999;
	x2 = v2.beta || 9999;
	if(x1<x2)
		return 1;
	return x1 > x2 ? -1 : 0;
}

function merge(dst,src,preserveExisting)
{
	var i;
	for(i in src) {
		if(!preserveExisting || dst[i] === undefined)
			dst[i] = src[i];
	}
	return dst;
}

// Resolve the target object of an event
function resolveTarget(e)
{
	var obj;
	if(e.target)
		obj = e.target;
	else if(e.srcElement)
		obj = e.srcElement;
	if(obj.nodeType == 3) // defeat Safari bug
		obj = obj.parentNode;
	return obj;
}

// Returns a string containing the description of an exception, optionally prepended by a message
function exceptionText(e,message)
{
	var s = e.description || e.toString();
	return message ? "%0:\n%1".format([message,s]) : s;
}

// Displays an alert of an exception description with optional message
function showException(e,message)
{
	alert(exceptionText(e,message));
}

function alertAndThrow(m)
{
	alert(m);
	throw(m);
}

function glyph(name)
{
	var g = config.glyphs;
	var b = g.currBrowser;
	if(b == null) {
		b = 0;
		while(b < g.browsers.length-1 && !g.browsers[b]())
			b++;
		g.currBrowser = b;
	}
	if(!g.codes[name])
		return "";
	return g.codes[name][b];
}

function createTiddlyText(parent,text)
{
	return parent.appendChild(document.createTextNode(text));
}

function createTiddlyCheckbox(parent,caption,checked,onChange)
{
	var cb = document.createElement("input");
	cb.setAttribute("type","checkbox");
	cb.onclick = onChange;
	parent.appendChild(cb);
	cb.checked = checked;
	cb.className = "chkOptionInput";
	if(caption)
		wikify(caption,parent);
	return cb;
}

function createTiddlyElement(parent,element,id,className,text,attribs)
{
	var n,e = document.createElement(element);
	if(className != null)
		e.className = className;
	if(id != null)
		e.setAttribute("id",id);
	if(text != null)
		e.appendChild(document.createTextNode(text));
	if(attribs) {
		for(n in attribs) {
			e.setAttribute(n,attribs[n]);
		}
	}
	if(parent != null)
		parent.appendChild(e);
	return e;
}

function createTiddlyButton(parent,text,tooltip,action,className,id,accessKey,attribs)
{
	var i,btn = document.createElement("a");
	btn.setAttribute("href","javascript:;");
	if(action) {
		btn.onclick = action;
	}
	if(tooltip)
		btn.setAttribute("title",tooltip);
	if(text)
		btn.appendChild(document.createTextNode(text));
	btn.className = className || "button";
	if(id)
		btn.id = id;
	if(attribs) {
		for(i in attribs) {
			btn.setAttribute(i,attribs[i]);
		}
	}
	if(parent)
		parent.appendChild(btn);
	if(accessKey)
		btn.setAttribute("accessKey",accessKey);
	return btn;
}

function createExternalLink(place,url,label)
{
	var link = document.createElement("a");
	link.className = "externalLink";
	link.href = url;
	var f = config.messages.externalLinkTooltip;
	link.title = f ? f.format([url]) : url;
	if(config.options.chkOpenInNewWindow)
		link.target = "_blank";
	place.appendChild(link);
	if(label)
		createTiddlyText(link, label);
	return link;
}

function getTiddlyLinkInfo(title,currClasses)
{
	var classes = currClasses ? currClasses.split(" ") : [];
	classes.pushUnique("tiddlyLink");
	var tiddler = store.fetchTiddler(title);
	var subTitle;
	if(tiddler) {
		subTitle = tiddler.getSubtitle();
		classes.pushUnique("tiddlyLinkExisting");
		classes.remove("tiddlyLinkNonExisting");
		classes.remove("shadow");
	} else {
	    var f;
		classes.remove("tiddlyLinkExisting");
		classes.pushUnique("tiddlyLinkNonExisting");
		if(store.isShadowTiddler(title)) {
			f = config.messages.shadowedTiddlerToolTip;
			classes.pushUnique("shadow");
		} else {
			f = config.messages.undefinedTiddlerToolTip;
			classes.remove("shadow");
		}
		subTitle = f ? f.format([title]) : "";
	}
	if(typeof config.annotations[title]=="string")
		subTitle = config.annotations[title];
	return {classes: classes.join(" "),subTitle: subTitle};
}

// Event handler for clicking on a tiddly link
function onClickTiddlerLink(ev)
{
	var e = ev || window.event;
	var target = resolveTarget(e);
	var link = target;
	var title = null;
	var fields = null;
	var noToggle = null;
	do {
		title = link.getAttribute("tiddlyLink");
		fields = link.getAttribute("tiddlyFields");
		noToggle = link.getAttribute("noToggle");
		link = link.parentNode;
	} while(title == null && link != null);
	if(!store.isShadowTiddler(title)) {
		var f = fields ? fields.decodeHashMap() : {};
		fields = String.encodeHashMap(merge(f,config.defaultCustomFields,true));
	}
	if(title) {
		var toggling = e.metaKey || e.ctrlKey;
		if(config.options.chkToggleLinks)
			toggling = !toggling;
		if(noToggle)
			toggling = false;
		if(store.getTiddler(title))
			fields = null;
		story.displayTiddler(target,title,null,true,null,fields,toggling);
	}
	clearMessage();
	return false;
}

function createTiddlyLink(place,title,includeText,className,isStatic,linkedFromTiddler,noToggle)
{
	var text = includeText ? title : null;
	var i = getTiddlyLinkInfo(title,className);
	var btn = isStatic ? createExternalLink(place,store.getTiddlerText("SiteUrl",null) + "#" + title) : createTiddlyButton(place,text,i.subTitle,onClickTiddlerLink,i.classes);
	if(isStatic)
		btn.className += ' ' + className;
	btn.setAttribute("refresh","link");
	btn.setAttribute("tiddlyLink",title);
	if(noToggle)
		btn.setAttribute("noToggle","true");
	if(linkedFromTiddler) {
		var fields = linkedFromTiddler.getInheritedFields();
		if(fields)
			btn.setAttribute("tiddlyFields",fields);
	}
	return btn;
}

function refreshTiddlyLink(e,title)
{
	var i = getTiddlyLinkInfo(title,e.className);
	e.className = i.classes;
	e.title = i.subTitle;
}

function createTiddlyDropDown(place,onchange,options,defaultValue)
{
	var sel = createTiddlyElement(place,"select");
	sel.onchange = onchange;
	var t;
	for(t=0; t<options.length; t++) {
		var e = createTiddlyElement(sel,"option",null,null,options[t].caption);
		e.value = options[t].name;
		if(options[t].name == defaultValue)
			e.selected = true;
	}
	return sel;
}

//--
//-- TiddlyWiki-specific popup utility functions
//--

// Event handler for 'open all' on a tiddler popup
function onClickTagOpenAll(ev)
{
	var tiddlers = store.getTaggedTiddlers(this.getAttribute("tag"));
	var sortby = this.getAttribute("sortby");
	if(sortby&&sortby.length) {
		store.sortTiddlers(tiddlers,sortby);
	}
	story.displayTiddlers(this,tiddlers);
	return false;
}

// Event handler for clicking on a tiddler tag
function onClickTag(ev)
{
	var e = ev || window.event;
	var popup = Popup.create(this);
	jQuery(popup).addClass("taggedTiddlerList");
	var tag = this.getAttribute("tag");
	var title = this.getAttribute("tiddler");
	if(popup && tag) {
		var tagged = tag.indexOf("[")==-1 ? store.getTaggedTiddlers(tag) : store.filterTiddlers(tag);
		var sortby = this.getAttribute("sortby");
		if(sortby&&sortby.length) {
			store.sortTiddlers(tagged,sortby);
		}
		var titles = [];
		var r;
		for(r=0;r<tagged.length;r++) {
			if(tagged[r].title != title)
				titles.push(tagged[r].title);
		}
		var lingo = config.views.wikified.tag;
		if(titles.length > 0) {
			var openAll = createTiddlyButton(createTiddlyElement(popup,"li"),lingo.openAllText.format([tag]),lingo.openAllTooltip,onClickTagOpenAll);
			openAll.setAttribute("tag",tag);
			openAll.setAttribute("sortby",sortby);
			createTiddlyElement(createTiddlyElement(popup,"li",null,"listBreak"),"div");
			for(r=0; r<titles.length; r++) {
				createTiddlyLink(createTiddlyElement(popup,"li"),titles[r],true);
			}
		} else {
			createTiddlyElement(popup,"li",null,"disabled",lingo.popupNone.format([tag]));
		}
		createTiddlyElement(createTiddlyElement(popup,"li",null,"listBreak"),"div");
		var h = createTiddlyLink(createTiddlyElement(popup,"li"),tag,false);
		createTiddlyText(h,lingo.openTag.format([tag]));
	}
	Popup.show();
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	return false;
}

// Create a button for a tag with a popup listing all the tiddlers that it tags
function createTagButton(place,tag,excludeTiddler,title,tooltip)
{
	var btn = createTiddlyButton(place,title||tag,(tooltip||config.views.wikified.tag.tooltip).format([tag]),onClickTag);
	btn.setAttribute("tag",tag);
	if(excludeTiddler)
		btn.setAttribute("tiddler",excludeTiddler);
	return btn;
}

function onClickTiddlyPopup(ev)
{
	var e = ev || window.event;
	var tiddler = this.tiddler;
	if(tiddler.text) {
		var popup = Popup.create(this,"div","popupTiddler");
		wikify(tiddler.text,popup,null,tiddler);
		Popup.show();
	}
	if(e) e.cancelBubble = true;
	if(e && e.stopPropagation) e.stopPropagation();
	return false;
}

function createTiddlyPopup(place,caption,tooltip,tiddler)
{
	if(tiddler.text) {
		createTiddlyLink(place,caption,true);
		var btn = createTiddlyButton(place,glyph("downArrow"),tooltip,onClickTiddlyPopup,"tiddlerPopupButton");
		btn.tiddler = tiddler;
	} else {
		createTiddlyText(place,caption);
	}
}

function onClickError(ev)
{
	var e = ev || window.event;
	var popup = Popup.create(this);
	var lines = this.getAttribute("errorText").split("\n");
	var t;
	for(t=0; t<lines.length; t++)
		createTiddlyElement(popup,"li",null,null,lines[t]);
	Popup.show();
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	return false;
}

function createTiddlyError(place,title,text)
{
	var btn = createTiddlyButton(place,title,null,onClickError,"errorButton");
	if(text) btn.setAttribute("errorText",text);
}
//-
//- Animation engine
//-

function Animator()
{
	this.running = 0; // Incremented at start of each animation, decremented afterwards. If zero, the interval timer is disabled
	this.timerID = 0; // ID of the timer used for animating
	this.animations = []; // List of animations in progress
	return this;
}

// Start animation engine
Animator.prototype.startAnimating = function() //# Variable number of arguments
{
	var t;
	for(t=0; t<arguments.length; t++)
		this.animations.push(arguments[t]);
	if(this.running == 0) {
		var me = this;
		this.timerID = window.setInterval(function() {me.doAnimate(me);},10);
	}
	this.running += arguments.length;
};

// Perform an animation engine tick, calling each of the known animation modules
Animator.prototype.doAnimate = function(me)
{
	var a = 0;
	while(a < me.animations.length) {
		var animation = me.animations[a];
		if(animation.tick()) {
			a++;
		} else {
			me.animations.splice(a,1);
			if(--me.running == 0)
				window.clearInterval(me.timerID);
		}
	}
};

Animator.slowInSlowOut = function(progress)
{
	return(1-((Math.cos(progress * Math.PI)+1)/2));
};

//--
//-- Morpher animation
//--

// Animate a set of properties of an element
function Morpher(element,duration,properties,callback)
{
	this.element = element;
	this.duration = duration;
	this.properties = properties;
	this.startTime = new Date();
	this.endTime = Number(this.startTime) + duration;
	this.callback = callback;
	this.tick();
	return this;
}

Morpher.prototype.assignStyle = function(element,style,value)
{
	switch(style) {
	case "-tw-vertScroll":
		window.scrollTo(findScrollX(),value);
		break;
	case "-tw-horizScroll":
		window.scrollTo(value,findScrollY());
		break;
	default:
		element.style[style] = value;
		break;
	}
};

Morpher.prototype.stop = function()
{
	var t;
	for(t=0; t<this.properties.length; t++) {
		var p = this.properties[t];
		if(p.atEnd !== undefined) {
			this.assignStyle(this.element,p.style,p.atEnd);
		}
	}
	if(this.callback)
		this.callback(this.element,this.properties);
};

Morpher.prototype.tick = function()
{
	var currTime = Number(new Date());
	var t,progress = Animator.slowInSlowOut(Math.min(1,(currTime-this.startTime)/this.duration));
	for(t=0; t<this.properties.length; t++) {
		var p = this.properties[t];
		if(p.start !== undefined && p.end !== undefined) {
			var template = p.template || "%0";
			switch(p.format) {
			case undefined:
			case "style":
				var v = p.start + (p.end-p.start) * progress;
				this.assignStyle(this.element,p.style,template.format([v]));
				break;
			case "color":
				break;
			}
		}
	}
	if(currTime >= this.endTime) {
		this.stop();
		return false;
	}
	return true;
};

//--
//-- Zoomer animation
//--

function Zoomer(text,startElement,targetElement,unused)
{
	var e = createTiddlyElement(document.body,"div",null,"zoomer");
	createTiddlyElement(e,"div",null,null,text);
	var winWidth = findWindowWidth();
	var winHeight = findWindowHeight();
	var p = [
		{style: 'left', start: findPosX(startElement), end: findPosX(targetElement), template: '%0px'},
		{style: 'top', start: findPosY(startElement), end: findPosY(targetElement), template: '%0px'},
		{style: 'width', start: Math.min(startElement.scrollWidth,winWidth), end: Math.min(targetElement.scrollWidth,winWidth), template: '%0px', atEnd: 'auto'},
		{style: 'height', start: Math.min(startElement.scrollHeight,winHeight), end: Math.min(targetElement.scrollHeight,winHeight), template: '%0px', atEnd: 'auto'},
		{style: 'fontSize', start: 8, end: 24, template: '%0pt'}
	];
	var c = function(element,properties) {jQuery(element).remove();};
	return new Morpher(e,config.animDuration,p,c);
}

//--
//-- Scroller animation
//--

function Scroller(targetElement)
{
	var p = [{style: '-tw-vertScroll', start: findScrollY(), end: ensureVisible(targetElement)}];
	return new Morpher(targetElement,config.animDuration,p);
}

//--
//-- Slider animation
//--

// deleteMode - "none", "all" [delete target element and it's children], [only] "children" [but not the target element]
function Slider(element,opening,unused,deleteMode)
{
	element.style.overflow = 'hidden';
	if(opening)
		element.style.height = '0px'; // Resolves a Firefox flashing bug
	element.style.display = 'block';
	var height = element.scrollHeight;
	var p = [];
	var c = null;
	if(opening) {
		p.push({style: 'height', start: 0, end: height, template: '%0px', atEnd: 'auto'});
		p.push({style: 'opacity', start: 0, end: 1, template: '%0'});
		p.push({style: 'filter', start: 0, end: 100, template: 'alpha(opacity:%0)'});
	} else {
		p.push({style: 'height', start: height, end: 0, template: '%0px'});
		p.push({style: 'display', atEnd: 'none'});
		p.push({style: 'opacity', start: 1, end: 0, template: '%0'});
		p.push({style: 'filter', start: 100, end: 0, template: 'alpha(opacity:%0)'});
		switch(deleteMode) {
		case "all":
			c = function(element,properties) {jQuery(element).remove();};
			break;
		case "children":
			c = function(element,properties) {jQuery(element).empty();};
			break;
		}
	}
	return new Morpher(element,config.animDuration,p,c);
}

//--
//-- Popup menu
//--

var Popup = {
	stack: [] // Array of objects with members root: and popup:
	};

Popup.create = function(root,elem,className)
{
	var stackPosition = this.find(root,"popup");
	Popup.remove(stackPosition+1);
	var popup = createTiddlyElement(document.body,elem || "ol","popup",className || "popup");
	popup.stackPosition = stackPosition;
	Popup.stack.push({root: root, popup: popup});
	return popup;
};

Popup.onDocumentClick = function(ev)
{
	var e = ev || window.event;
	if(e.eventPhase == undefined)
		Popup.remove();
	else if(e.eventPhase == Event.BUBBLING_PHASE || e.eventPhase == Event.AT_TARGET)
		Popup.remove();
	return true;
};

Popup.show = function(valign,halign,offset)
{
	var curr = Popup.stack[Popup.stack.length-1];
	this.place(curr.root,curr.popup,valign,halign,offset);
	jQuery(curr.root).addClass("highlight");
	if(config.options.chkAnimate && anim && typeof Scroller == "function")
		anim.startAnimating(new Scroller(curr.popup));
	else
		window.scrollTo(0,ensureVisible(curr.popup));
};

Popup.place = function(root,popup,valign,halign,offset)
{
	if(!offset)
		offset = {x:0,y:0};
	if(popup.stackPosition >= 0 && !valign && !halign) {
		offset.x = offset.x + root.offsetWidth;
	} else {
		offset.x = (halign == "right") ? offset.x + root.offsetWidth : offset.x;
		offset.y = (valign == "top") ? offset.y : offset.y + root.offsetHeight;
	}
	var rootLeft = findPosX(root);
	var rootTop = findPosY(root);
	var popupLeft = rootLeft + offset.x;
	var popupTop = rootTop + offset.y;
	var winWidth = findWindowWidth();
	if(popup.offsetWidth > winWidth*0.75)
		popup.style.width = winWidth*0.75 + "px";
	var popupWidth = popup.offsetWidth;
	var scrollWidth = winWidth - document.body.offsetWidth;
	if(popupLeft + popupWidth > winWidth - scrollWidth - 1) {
		if(halign == "right")
			popupLeft = popupLeft - root.offsetWidth - popupWidth;
		else
			popupLeft = winWidth - popupWidth - scrollWidth - 1;
	}
	popup.style.left = popupLeft + "px";
	popup.style.top = popupTop + "px";
	popup.style.display = "block";
};

Popup.find = function(e)
{
	var t,pos = -1;
	for(t=this.stack.length-1; t>=0; t--) {
		if(isDescendant(e,this.stack[t].popup))
			pos = t;
	}
	return pos;
};

Popup.remove = function(pos)
{
	if(!pos) pos = 0;
	if(Popup.stack.length > pos) {
		Popup.removeFrom(pos);
	}
};

Popup.removeFrom = function(from)
{
	var t;
	for(t=Popup.stack.length-1; t>=from; t--) {
		var p = Popup.stack[t];
		jQuery(p.root).removeClass("highlight");
		jQuery(p.popup).remove();
	}
	Popup.stack = Popup.stack.slice(0,from);
};

//--
//-- Wizard support
//--

function Wizard(elem)
{
	if(elem) {
		this.formElem = findRelated(elem,"wizard","className");
		this.bodyElem = findRelated(this.formElem.firstChild,"wizardBody","className","nextSibling");
		this.footElem = findRelated(this.formElem.firstChild,"wizardFooter","className","nextSibling");
	} else {
		this.formElem = null;
		this.bodyElem = null;
		this.footElem = null;
	}
}

Wizard.prototype.setValue = function(name,value)
{
	jQuery(this.formElem).data(name, value);
};

Wizard.prototype.getValue = function(name)
{
	return this.formElem ? jQuery(this.formElem).data(name) : null;
};

Wizard.prototype.createWizard = function(place,title)
{
	this.formElem = createTiddlyElement(place,"form",null,"wizard");
	createTiddlyElement(this.formElem,"h1",null,null,title);
	this.bodyElem = createTiddlyElement(this.formElem,"div",null,"wizardBody");
	this.footElem = createTiddlyElement(this.formElem,"div",null,"wizardFooter");
	return this.formElem;
};

Wizard.prototype.clear = function()
{
	jQuery(this.bodyElem).empty();
};

Wizard.prototype.setButtons = function(buttonInfo,status)
{
	jQuery(this.footElem).empty();
	var t;
	for(t=0; t<buttonInfo.length; t++) {
		createTiddlyButton(this.footElem,buttonInfo[t].caption,buttonInfo[t].tooltip,buttonInfo[t].onClick);
		insertSpacer(this.footElem);
		}
	if(typeof status == "string") {
		createTiddlyElement(this.footElem,"span",null,"status",status);
	}
};

Wizard.prototype.addStep = function(stepTitle,html)
{
	jQuery(this.bodyElem).empty();
	var w = createTiddlyElement(this.bodyElem,"div");
	createTiddlyElement(w,"h2",null,null,stepTitle);
	var step = createTiddlyElement(w,"div",null,"wizardStep");
	step.innerHTML = html;
	applyHtmlMacros(step,tiddler);
};

Wizard.prototype.getElement = function(name)
{
	return this.formElem.elements[name];
};

//--
//-- ListView gadget
//--

var ListView = {};

// Create a listview
ListView.create = function(place,listObject,listTemplate,callback,className)
{
	var table = createTiddlyElement(place,"table",null,className || "listView twtable");
	var thead = createTiddlyElement(table,"thead");
	var t,r = createTiddlyElement(thead,"tr");
	for(t=0; t<listTemplate.columns.length; t++) {
		var columnTemplate = listTemplate.columns[t];
		var c = createTiddlyElement(r,"th");
		var colType = ListView.columnTypes[columnTemplate.type];
		if(colType && colType.createHeader) {
			colType.createHeader(c,columnTemplate,t);
			if(columnTemplate.className)
				jQuery(c).addClass(columnTemplate.className);
		}
	}
	var rc,tbody = createTiddlyElement(table,"tbody");
	for(rc=0; rc<listObject.length; rc++) {
		var rowObject = listObject[rc];
		r = createTiddlyElement(tbody,"tr");
		for(c=0; c<listTemplate.rowClasses.length; c++) {
			if(rowObject[listTemplate.rowClasses[c].field])
				jQuery(r).addClass(listTemplate.rowClasses[c].className);
		}
		rowObject.rowElement = r;
		rowObject.colElements = {};
		var cc;
		for(cc=0; cc<listTemplate.columns.length; cc++) {
			c = createTiddlyElement(r,"td");
			columnTemplate = listTemplate.columns[cc];
			var field = columnTemplate.field;
			colType = ListView.columnTypes[columnTemplate.type];
			if(colType && colType.createItem) {
				colType.createItem(c,rowObject,field,columnTemplate,cc,rc);
				if(columnTemplate.className)
					jQuery(c).addClass(columnTemplate.className);
			}
			rowObject.colElements[field] = c;
		}
	}
	if(callback && listTemplate.actions)
		createTiddlyDropDown(place,ListView.getCommandHandler(callback),listTemplate.actions);
	if(callback && listTemplate.buttons) {
		for(t=0; t<listTemplate.buttons.length; t++) {
			var a = listTemplate.buttons[t];
			if(a && a.name != "")
				createTiddlyButton(place,a.caption,null,ListView.getCommandHandler(callback,a.name,a.allowEmptySelection));
		}
	}
	return table;
};

ListView.getCommandHandler = function(callback,name,allowEmptySelection)
{
	return function(e) {
		var view = findRelated(this,"TABLE",null,"previousSibling");
		var tiddlers = [];
		ListView.forEachSelector(view,function(e,rowName) {
					if(e.checked)
						tiddlers.push(rowName);
					});
		if(tiddlers.length == 0 && !allowEmptySelection) {
			alert(config.messages.nothingSelected);
		} else {
			if(this.nodeName.toLowerCase() == "select") {
				callback(view,this.value,tiddlers);
				this.selectedIndex = 0;
			} else {
				callback(view,name,tiddlers);
			}
		}
	};
};

// Invoke a callback for each selector checkbox in the listview
ListView.forEachSelector = function(view,callback)
{
	var checkboxes = view.getElementsByTagName("input");
	var t,hadOne = false;
	for(t=0; t<checkboxes.length; t++) {
		var cb = checkboxes[t];
		if(cb.getAttribute("type") == "checkbox") {
			var rn = cb.getAttribute("rowName");
			if(rn) {
				callback(cb,rn);
				hadOne = true;
			}
		}
	}
	return hadOne;
};

ListView.getSelectedRows = function(view)
{
	var rowNames = [];
	ListView.forEachSelector(view,function(e,rowName) {
				if(e.checked)
					rowNames.push(rowName);
				});
	return rowNames;
};

ListView.columnTypes = {};

ListView.columnTypes.String = {
	createHeader: function(place,columnTemplate,col)
		{
			createTiddlyText(place,columnTemplate.title);
		},
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined)
				createTiddlyText(place,v);
		}
};

ListView.columnTypes.WikiText = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined)
				wikify(v,place,null,null);
		}
};

ListView.columnTypes.Tiddler = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined && v.title)
				createTiddlyPopup(place,v.title,config.messages.listView.tiddlerTooltip,v);
		}
};

ListView.columnTypes.Size = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var msg = config.messages.sizeTemplates;
			var v = listObject[field];
			if(v != undefined) {
				var t = 0;
				while(t<msg.length-1 && v<msg[t].unit)
					t++;
				createTiddlyText(place,msg[t].template.format([Math.round(v/msg[t].unit)]));
			}
		}
};

ListView.columnTypes.Link = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			var c = columnTemplate.text;
			if(v != undefined)
				createExternalLink(place,v,c || v);
		}
};

ListView.columnTypes.Date = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined)
				createTiddlyText(place,v.formatString(columnTemplate.dateFormat));
		}
};

ListView.columnTypes.StringList = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined) {
				var t;
				for(t=0; t<v.length; t++) {
					createTiddlyText(place,v[t]);
					createTiddlyElement(place,"br");
				}
			}
		}
};

ListView.columnTypes.Selector = {
	createHeader: function(place,columnTemplate,col)
		{
			createTiddlyCheckbox(place,null,false,this.onHeaderChange);
		},
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var e = createTiddlyCheckbox(place,null,listObject[field],null);
			e.setAttribute("rowName",listObject[columnTemplate.rowName]);
		},
	onHeaderChange: function(e)
		{
			var state = this.checked;
			var view = findRelated(this,"TABLE");
			if(!view)
				return;
			ListView.forEachSelector(view,function(e,rowName) {
								e.checked = state;
							});
		}
};

ListView.columnTypes.Tags = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var tags = listObject[field];
			createTiddlyText(place,String.encodeTiddlyLinkList(tags));
		}
};

ListView.columnTypes.Boolean = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			if(listObject[field] == true)
				createTiddlyText(place,columnTemplate.trueText);
			if(listObject[field] == false)
				createTiddlyText(place,columnTemplate.falseText);
		}
};

ListView.columnTypes.TagCheckbox = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var e = createTiddlyCheckbox(place,null,listObject[field],this.onChange);
			e.setAttribute("tiddler",listObject.title);
			e.setAttribute("tag",columnTemplate.tag);
		},
	onChange : function(e)
		{
			var tag = this.getAttribute("tag");
			var tiddler = this.getAttribute("tiddler");
			store.setTiddlerTag(tiddler,this.checked,tag);
		}
};

ListView.columnTypes.TiddlerLink = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined) {
				var link = createTiddlyLink(place,listObject[columnTemplate.tiddlerLink],false,null);
				createTiddlyText(link,listObject[field]);
			}
		}
};

//--
//-- Augmented methods for the JavaScript Array() object
//--

// Add indexOf function if browser does not support it
if(!Array.indexOf) {
Array.prototype.indexOf = function(item,from)
{
	if(!from)
		from = 0;
	var i;
	for(i=from; i<this.length; i++) {
		if(this[i] === item)
			return i;
	}
	return -1;
};}

// Find an entry in a given field of the members of an array
Array.prototype.findByField = function(field,value)
{
	var t;
	for(t=0; t<this.length; t++) {
		if(this[t][field] === value)
			return t;
	}
	return null;
};

// Return whether an entry exists in an array
Array.prototype.contains = function(item)
{
	return this.indexOf(item) != -1;
};

// Adds, removes or toggles a particular value within an array
//  value - value to add
//  mode - +1 to add value, -1 to remove value, 0 to toggle it
Array.prototype.setItem = function(value,mode)
{
	var p = this.indexOf(value);
	if(mode == 0)
		mode = (p == -1) ? +1 : -1;
	if(mode == +1) {
		if(p == -1)
			this.push(value);
	} else if(mode == -1) {
		if(p != -1)
			this.splice(p,1);
	}
};

// Return whether one of a list of values exists in an array
Array.prototype.containsAny = function(items)
{
	var i;
	for(i=0; i<items.length; i++) {
		if(this.indexOf(items[i]) != -1)
			return true;
	}
	return false;
};

// Return whether all of a list of values exists in an array
Array.prototype.containsAll = function(items)
{
	var i;
	for(i = 0; i<items.length; i++) {
		if(this.indexOf(items[i]) == -1)
			return false;
	}
	return true;
};

// Push a new value into an array only if it is not already present in the array. If the optional unique parameter is false, it reverts to a normal push
Array.prototype.pushUnique = function(item,unique)
{
	if(unique === false) {
		this.push(item);
	} else {
		if(this.indexOf(item) == -1)
			this.push(item);
	}
};

Array.prototype.remove = function(item)
{
	var p = this.indexOf(item);
	if(p != -1)
		this.splice(p,1);
};

if(!Array.prototype.map) {
Array.prototype.map = function(fn,thisObj)
{
	var scope = thisObj || window;
	var i,j,a = [];
	for(i=0, j=this.length; i < j; ++i) {
		a.push(fn.call(scope,this[i],i,this));
	}
	return a;
};}

//--
//-- Augmented methods for the JavaScript String() object
//--

// Get characters from the right end of a string
String.prototype.right = function(n)
{
	return n < this.length ? this.slice(this.length-n) : this;
};

// Trim whitespace from both ends of a string
String.prototype.trim = function()
{
	return this.replace(/^\s*|\s*$/g,"");
};

// Convert a string from a CSS style property name to a JavaScript style name ("background-color" -> "backgroundColor")
String.prototype.unDash = function()
{
	var t,s = this.split("-");
	if(s.length > 1) {
		for(t=1; t<s.length; t++)
			s[t] = s[t].substr(0,1).toUpperCase() + s[t].substr(1);
	}
	return s.join("");
};

// Substitute substrings from an array into a format string that includes '%1'-type specifiers
String.prototype.format = function(s)
{
	var substrings = s && s.constructor == Array ? s : arguments;
	var subRegExp = /(?:%(\d+))/mg;
	var currPos = 0;
	var match,r = [];
	do {
		match = subRegExp.exec(this);
		if(match && match[1]) {
			if(match.index > currPos)
				r.push(this.substring(currPos,match.index));
			r.push(substrings[parseInt(match[1],10)]);
			currPos = subRegExp.lastIndex;
		}
	} while(match);
	if(currPos < this.length)
		r.push(this.substring(currPos,this.length));
	return r.join("");
};

// Escape any special RegExp characters with that character preceded by a backslash
String.prototype.escapeRegExp = function()
{
	var s = "\\^$*+?()=!|,{}[].";
	var t,c = this;
	for(t=0; t<s.length; t++)
		c = c.replace(new RegExp("\\" + s.substr(t,1),"g"),"\\" + s.substr(t,1));
	return c;
};

// Convert "\" to "\s", newlines to "\n" (and remove carriage returns)
String.prototype.escapeLineBreaks = function()
{
	return this.replace(/\\/mg,"\\s").replace(/\n/mg,"\\n").replace(/\r/mg,"");
};

// Convert "\n" to newlines, "\b" to " ", "\s" to "\" (and remove carriage returns)
String.prototype.unescapeLineBreaks = function()
{
	return this.replace(/\\n/mg,"\n").replace(/\\b/mg," ").replace(/\\s/mg,"\\").replace(/\r/mg,"");
};

// Convert & to "&amp;", < to "&lt;", > to "&gt;" and " to "&quot;"
String.prototype.htmlEncode = function()
{
	return this.replace(/&/mg,"&amp;").replace(/</mg,"&lt;").replace(/>/mg,"&gt;").replace(/\"/mg,"&quot;");
};

// Convert "&amp;" to &, "&lt;" to <, "&gt;" to > and "&quot;" to "
String.prototype.htmlDecode = function()
{
	return this.replace(/&lt;/mg,"<").replace(/&gt;/mg,">").replace(/&quot;/mg,"\"").replace(/&amp;/mg,"&");
};

// Parse a space-separated string of name:value parameters
// The result is an array of objects:
//   result[0] = object with a member for each parameter name, value of that member being an array of values
//   result[1..n] = one object for each parameter, with 'name' and 'value' members
String.prototype.parseParams = function(defaultName,defaultValue,allowEval,noNames,cascadeDefaults)
{
	var parseToken = function(match,p) {
		var n;
		if(match[p]) // Double quoted
			n = match[p];
		else if(match[p+1]) // Single quoted
			n = match[p+1];
		else if(match[p+2]) // Double-square-bracket quoted
			n = match[p+2];
		else if(match[p+3]) // Double-brace quoted
			try {
				n = match[p+3];
				if(allowEval && config.evaluateMacroParameters != "none") {
					if(config.evaluateMacroParameters == "restricted") {
						if(window.restrictedEval) {
							n = window.restrictedEval(n);
						}
					} else {
						n = window.eval(n);
					}
				}
			} catch(ex) {
				throw "Unable to evaluate {{" + match[p+3] + "}}: " + exceptionText(ex);
			}
		else if(match[p+4]) // Unquoted
			n = match[p+4];
		else if(match[p+5]) // empty quote
			n = "";
		return n;
	};
	var r = [{}];
	var dblQuote = "(?:\"((?:(?:\\\\\")|[^\"])+)\")";
	var sngQuote = "(?:'((?:(?:\\\\\')|[^'])+)')";
	var dblSquare = "(?:\\[\\[((?:\\s|\\S)*?)\\]\\])";
	var dblBrace = "(?:\\{\\{((?:\\s|\\S)*?)\\}\\})";
	var unQuoted = noNames ? "([^\"'\\s]\\S*)" : "([^\"':\\s][^\\s:]*)";
	var emptyQuote = "((?:\"\")|(?:''))";
	var skipSpace = "(?:\\s*)";
	var token = "(?:" + dblQuote + "|" + sngQuote + "|" + dblSquare + "|" + dblBrace + "|" + unQuoted + "|" + emptyQuote + ")";
	var re = noNames ? new RegExp(token,"mg") : new RegExp(skipSpace + token + skipSpace + "(?:(\\:)" + skipSpace + token + ")?","mg");
	var match;
	do {
		match = re.exec(this);
		if(match) {
			var n = parseToken(match,1);
			if(noNames) {
				r.push({name:"",value:n});
			} else {
				var v = parseToken(match,8);
				if(v == null && defaultName) {
					v = n;
					n = defaultName;
				} else if(v == null && defaultValue) {
					v = defaultValue;
				}
				r.push({name:n,value:v});
				if(cascadeDefaults) {
					defaultName = n;
					defaultValue = v;
				}
			}
		}
	} while(match);
	// Summarise parameters into first element
	var t;
	for(t=1; t<r.length; t++) {
		if(r[0][r[t].name])
			r[0][r[t].name].push(r[t].value);
		else
			r[0][r[t].name] = [r[t].value];
	}
	return r;
};

// Process a string list of macro parameters into an array. Parameters can be quoted with "", '',
// [[]], {{ }} or left unquoted (and therefore space-separated). Double-braces {{}} results in
// an *evaluated* parameter: e.g. {{config.options.txtUserName}} results in the current user's name.
String.prototype.readMacroParams = function(notAllowEval)
{
	var p = this.parseParams("list",null,!notAllowEval,true);
	var t,n = [];
	for(t=1; t<p.length; t++)
		n.push(p[t].value);
	return n;
};

// Process a string list of unique tiddler names into an array. Tiddler names that have spaces in them must be [[bracketed]]
String.prototype.readBracketedList = function(unique)
{
	var p = this.parseParams("list",null,false,true);
	var t,n = [];
	for(t=1; t<p.length; t++) {
		if(p[t].value)
			n.pushUnique(p[t].value,unique);
	}
	return n;
};

// Returns array with start and end index of chunk between given start and end marker, or undefined.
String.prototype.getChunkRange = function(start,end)
{
	var s = this.indexOf(start);
	if(s != -1) {
		s += start.length;
		var e = this.indexOf(end,s);
		if(e != -1)
			return [s,e];
	}
};

// Replace a chunk of a string given start and end markers
String.prototype.replaceChunk = function(start,end,sub)
{
	var r = this.getChunkRange(start,end);
	return r ? this.substring(0,r[0]) + sub + this.substring(r[1]) : this;
};

// Returns a chunk of a string between start and end markers, or undefined
String.prototype.getChunk = function(start,end)
{
	var r = this.getChunkRange(start,end);
	if(r)
		return this.substring(r[0],r[1]);
};


// Static method to bracket a string with double square brackets if it contains a space
String.encodeTiddlyLink = function(title)
{
	return title.indexOf(" ") == -1 ? title : "[[" + title + "]]";
};

// Static method to encodeTiddlyLink for every item in an array and join them with spaces
String.encodeTiddlyLinkList = function(list)
{
	if(list) {
		var t,results = [];
		for(t=0; t<list.length; t++)
			results.push(String.encodeTiddlyLink(list[t]));
		return results.join(" ");
	} else {
		return "";
	}
};

// Convert a string as a sequence of name:"value" pairs into a hashmap
String.prototype.decodeHashMap = function()
{
	var fields = this.parseParams("anon","",false);
	var t,r = {};
	for(t=1; t<fields.length; t++)
		r[fields[t].name] = fields[t].value;
	return r;
};

// Static method to encode a hashmap into a name:"value"... string
String.encodeHashMap = function(hashmap)
{
	var t,r = [];
	for(t in hashmap)
		r.push(t + ':"' + hashmap[t] + '"');
	return r.join(" ");
};

// Static method to left-pad a string with 0s to a certain width
String.zeroPad = function(n,d)
{
	var s = n.toString();
	if(s.length < d)
		s = "000000000000000000000000000".substr(0,d-s.length) + s;
	return s;
};

String.prototype.startsWith = function(prefix)
{
	return !prefix || this.substring(0,prefix.length) == prefix;
};

// Returns the first value of the given named parameter.
function getParam(params,name,defaultValue)
{
	if(!params)
		return defaultValue;
	var p = params[0][name];
	return p ? p[0] : defaultValue;
}

// Returns the first value of the given boolean named parameter.
function getFlag(params,name,defaultValue)
{
	return !!getParam(params,name,defaultValue);
}

//--
//-- Augmented methods for the JavaScript Date() object
//--

// Substitute date components into a string
Date.prototype.formatString = function(template)
{
	var t = template.replace(/0hh12/g,String.zeroPad(this.getHours12(),2));
	t = t.replace(/hh12/g,this.getHours12());
	t = t.replace(/0hh/g,String.zeroPad(this.getHours(),2));
	t = t.replace(/hh/g,this.getHours());
	t = t.replace(/mmm/g,config.messages.dates.shortMonths[this.getMonth()]);
	t = t.replace(/0mm/g,String.zeroPad(this.getMinutes(),2));
	t = t.replace(/mm/g,this.getMinutes());
	t = t.replace(/0ss/g,String.zeroPad(this.getSeconds(),2));
	t = t.replace(/ss/g,this.getSeconds());
	t = t.replace(/[ap]m/g,this.getAmPm().toLowerCase());
	t = t.replace(/[AP]M/g,this.getAmPm().toUpperCase());
	t = t.replace(/wYYYY/g,this.getYearForWeekNo());
	t = t.replace(/wYY/g,String.zeroPad(this.getYearForWeekNo()-2000,2));
	t = t.replace(/YYYY/g,this.getFullYear());
	t = t.replace(/YY/g,String.zeroPad(this.getFullYear()-2000,2));
	t = t.replace(/MMM/g,config.messages.dates.months[this.getMonth()]);
	t = t.replace(/0MM/g,String.zeroPad(this.getMonth()+1,2));
	t = t.replace(/MM/g,this.getMonth()+1);
	t = t.replace(/0WW/g,String.zeroPad(this.getWeek(),2));
	t = t.replace(/WW/g,this.getWeek());
	t = t.replace(/DDD/g,config.messages.dates.days[this.getDay()]);
	t = t.replace(/ddd/g,config.messages.dates.shortDays[this.getDay()]);
	t = t.replace(/0DD/g,String.zeroPad(this.getDate(),2));
	t = t.replace(/DDth/g,this.getDate()+this.daySuffix());
	t = t.replace(/DD/g,this.getDate());
	var tz = this.getTimezoneOffset();
	var atz = Math.abs(tz);
	t = t.replace(/TZD/g,(tz < 0 ? '+' : '-') + String.zeroPad(Math.floor(atz / 60),2) + ':' + String.zeroPad(atz % 60,2));
	t = t.replace(/\\/g,"");
	return t;
};

Date.prototype.getWeek = function()
{
	var dt = new Date(this.getTime());
	var d = dt.getDay();
	if(d==0) d=7;// JavaScript Sun=0, ISO Sun=7
	dt.setTime(dt.getTime()+(4-d)*86400000);// shift day to Thurs of same week to calculate weekNo
	var n = Math.floor((dt.getTime()-new Date(dt.getFullYear(),0,1)+3600000)/86400000);
	return Math.floor(n/7)+1;
};

Date.prototype.getYearForWeekNo = function()
{
	var dt = new Date(this.getTime());
	var d = dt.getDay();
	if(d==0) d=7;// JavaScript Sun=0, ISO Sun=7
	dt.setTime(dt.getTime()+(4-d)*86400000);// shift day to Thurs of same week
	return dt.getFullYear();
};

Date.prototype.getHours12 = function()
{
	var h = this.getHours();
	return h > 12 ? h-12 : ( h > 0 ? h : 12 );
};

Date.prototype.getAmPm = function()
{
	return this.getHours() >= 12 ? config.messages.dates.pm : config.messages.dates.am;
};

Date.prototype.daySuffix = function()
{
	return config.messages.dates.daySuffixes[this.getDate()-1];
};

// Convert a date to local YYYYMMDDHHMM string format
Date.prototype.convertToLocalYYYYMMDDHHMM = function()
{
	return this.getFullYear() + String.zeroPad(this.getMonth()+1,2) + String.zeroPad(this.getDate(),2) + String.zeroPad(this.getHours(),2) + String.zeroPad(this.getMinutes(),2);
};

// Convert a date to UTC YYYYMMDDHHMM string format
Date.prototype.convertToYYYYMMDDHHMM = function()
{
	return this.getUTCFullYear() + String.zeroPad(this.getUTCMonth()+1,2) + String.zeroPad(this.getUTCDate(),2) + String.zeroPad(this.getUTCHours(),2) + String.zeroPad(this.getUTCMinutes(),2);
};

// Convert a date to UTC YYYYMMDD.HHMMSSMMM string format
Date.prototype.convertToYYYYMMDDHHMMSSMMM = function()
{
	return this.getUTCFullYear() + String.zeroPad(this.getUTCMonth()+1,2) + String.zeroPad(this.getUTCDate(),2) + "." + String.zeroPad(this.getUTCHours(),2) + String.zeroPad(this.getUTCMinutes(),2) + String.zeroPad(this.getUTCSeconds(),2) + String.zeroPad(this.getUTCMilliseconds(),3) +"0";
};

// Static method to create a date from a UTC YYYYMMDDHHMM format string
Date.convertFromYYYYMMDDHHMM = function(d)
{
	d = d?d.replace(/[^0-9]/g, ""):"";
	return Date.convertFromYYYYMMDDHHMMSSMMM(d.substr(0,12));
};

// Static method to create a date from a UTC YYYYMMDDHHMMSS format string
Date.convertFromYYYYMMDDHHMMSS = function(d)
{
	d = d?d.replace(/[^0-9]/g, ""):"";
	return Date.convertFromYYYYMMDDHHMMSSMMM(d.substr(0,14));
};

// Static method to create a date from a UTC YYYYMMDDHHMMSSMMM format string
Date.convertFromYYYYMMDDHHMMSSMMM = function(d)
{
	d = d ? d.replace(/[^0-9]/g, "") : "";
	return new Date(Date.UTC(parseInt(d.substr(0,4),10),
			parseInt(d.substr(4,2),10)-1,
			parseInt(d.substr(6,2),10),
			parseInt(d.substr(8,2)||"00",10),
			parseInt(d.substr(10,2)||"00",10),
			parseInt(d.substr(12,2)||"00",10),
			parseInt(d.substr(14,3)||"000",10)));
};

//--
//-- RGB colour object
//--

// Construct an RGB colour object from a '#rrggbb', '#rgb' or 'rgb(n,n,n)' string or from separate r,g,b values
function RGB(r,g,b)
{
	this.r = 0;
	this.g = 0;
	this.b = 0;
	if(typeof r == "string") {
		if(r.substr(0,1) == "#") {
			if(r.length == 7) {
				this.r = parseInt(r.substr(1,2),16)/255;
				this.g = parseInt(r.substr(3,2),16)/255;
				this.b = parseInt(r.substr(5,2),16)/255;
			} else {
				this.r = parseInt(r.substr(1,1),16)/15;
				this.g = parseInt(r.substr(2,1),16)/15;
				this.b = parseInt(r.substr(3,1),16)/15;
			}
		} else {
			var rgbPattern = /rgb\s*\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/;
			var c = r.match(rgbPattern);
			if(c) {
				this.r = parseInt(c[1],10)/255;
				this.g = parseInt(c[2],10)/255;
				this.b = parseInt(c[3],10)/255;
			}
		}
	} else {
		this.r = r;
		this.g = g;
		this.b = b;
	}
	return this;
}

// Mixes this colour with another in a specified proportion
// c = other colour to mix
// f = 0..1 where 0 is this colour and 1 is the new colour
// Returns an RGB object
RGB.prototype.mix = function(c,f)
{
	return new RGB(this.r + (c.r-this.r) * f,this.g + (c.g-this.g) * f,this.b + (c.b-this.b) * f);
};

// Return an rgb colour as a #rrggbb format hex string
RGB.prototype.toString = function()
{
	var clamp = function(x,min,max) {
		return x < min ? min : (x > max ? max : x);
	};
	return "#" +
			("0" + Math.floor(clamp(this.r,0,1) * 255).toString(16)).right(2) +
			("0" + Math.floor(clamp(this.g,0,1) * 255).toString(16)).right(2) +
			("0" + Math.floor(clamp(this.b,0,1) * 255).toString(16)).right(2);
};

//--
//-- DOM utilities - many derived from www.quirksmode.org
//--

function drawGradient(place,horiz,locolors,hicolors)
{
	if(!hicolors)
		hicolors = locolors;
	var t;
	for(t=0; t<= 100; t+=2) {
		var bar = document.createElement("div");
		place.appendChild(bar);
		bar.style.position = "absolute";
		bar.style.left = horiz ? t + "%" : 0;
		bar.style.top = horiz ? 0 : t + "%";
		bar.style.width = horiz ? (101-t) + "%" : "100%";
		bar.style.height = horiz ? "100%" : (101-t) + "%";
		bar.style.zIndex = -1;
		var p = t/100*(locolors.length-1);
		var hc = hicolors[Math.floor(p)];
		if(typeof hc == "string")
			hc = new RGB(hc);
		var lc = locolors[Math.ceil(p)];
		if(typeof lc == "string")
			lc = new RGB(lc);
		bar.style.backgroundColor = hc.mix(lc,p-Math.floor(p)).toString();
	}
}

function addEvent(obj,type,fn)
{
	if(obj.attachEvent) {
		obj["e"+type+fn] = fn;
		obj[type+fn] = function(){obj["e"+type+fn](window.event);};
		obj.attachEvent("on"+type,obj[type+fn]);
	} else {
		obj.addEventListener(type,fn,false);
	}
}

function removeEvent(obj,type,fn)
{
	if(obj.detachEvent) {
		obj.detachEvent("on"+type,obj[type+fn]);
		obj[type+fn] = null;
	} else {
		obj.removeEventListener(type,fn,false);
	}
}

// Find the closest relative with a given property value (property defaults to tagName, relative defaults to parentNode)
function findRelated(e,value,name,relative)
{
	name = name || "tagName";
	relative = relative || "parentNode";
	if(name == "className") {
		while(e && !jQuery(e).hasClass(value)) {
			e = e[relative];
		}
	} else {
		while(e && e[name] != value) {
			e = e[relative];
		}
	}
	return e;
}

// Get the scroll position for window.scrollTo necessary to scroll a given element into view
function ensureVisible(e)
{
	var posTop = findPosY(e);
	var posBot = posTop + e.offsetHeight;
	var winTop = findScrollY();
	var winHeight = findWindowHeight();
	var winBot = winTop + winHeight;
	if(posTop < winTop) {
		return posTop;
	} else if(posBot > winBot) {
		if(e.offsetHeight < winHeight)
			return posTop - (winHeight - e.offsetHeight);
		else
			return posTop;
	} else {
		return winTop;
	}
}

// Get the current width of the display window
function findWindowWidth()
{
	return window.innerWidth || document.documentElement.clientWidth;
}

// Get the current height of the display window
function findWindowHeight()
{
	return window.innerHeight || document.documentElement.clientHeight;
}

// Get the current horizontal page scroll position
function findScrollX()
{
	return window.scrollX || document.documentElement.scrollLeft;
}

// Get the current vertical page scroll position
function findScrollY()
{
	return window.scrollY || document.documentElement.scrollTop;
}

function findPosX(obj)
{
	var curleft = 0;
	while(obj.offsetParent) {
		curleft += obj.offsetLeft;
		obj = obj.offsetParent;
	}
	return curleft;
}

function findPosY(obj)
{
	var curtop = 0;
	while(obj.offsetParent) {
		curtop += obj.offsetTop;
		obj = obj.offsetParent;
	}
	return curtop;
}

// Blur a particular element
function blurElement(e)
{
	if(e && e.focus && e.blur) {
		e.focus();
		e.blur();
	}
}

// Create a non-breaking space
function insertSpacer(place)
{
	var e = document.createTextNode(String.fromCharCode(160));
	if(place)
		place.appendChild(e);
	return e;
}

// Replace the current selection of a textarea or text input and scroll it into view
function replaceSelection(e,text)
{
	if(e.setSelectionRange) {
		var oldpos = e.selectionStart;
		var isRange = e.selectionEnd > e.selectionStart;
		e.value = e.value.substr(0,e.selectionStart) + text + e.value.substr(e.selectionEnd);
		e.setSelectionRange(isRange ? oldpos : oldpos + text.length,oldpos + text.length);
		var linecount = e.value.split("\n").length;
		var thisline = e.value.substr(0,e.selectionStart).split("\n").length-1;
		e.scrollTop = Math.floor((thisline - e.rows / 2) * e.scrollHeight / linecount);
	} else if(document.selection) {
		var range = document.selection.createRange();
		if(range.parentElement() == e) {
			var isCollapsed = range.text == "";
			range.text = text;
			if(!isCollapsed) {
				range.moveStart("character", -text.length);
				range.select();
			}
		}
	}
}

// Set the caret position in a text area
function setCaretPosition(e,pos)
{
	if(e.selectionStart || e.selectionStart == '0') {
		e.selectionStart = pos;
		e.selectionEnd = pos;
		e.focus();
	} else if(document.selection) {
		// IE support
		e.focus ();
		var sel = document.selection.createRange();
		sel.moveStart('character', -e.value.length);
		sel.moveStart('character',pos);
		sel.moveEnd('character',0);
		sel.select();
	}
}

// Returns the text of the given (text) node, possibly merging subsequent text nodes
function getNodeText(e)
{
	var t = "";
	while(e && e.nodeName == "#text") {
		t += e.nodeValue;
		e = e.nextSibling;
	}
	return t;
}

// Returns true if the element e has a given ancestor element
function isDescendant(e,ancestor)
{
	while(e) {
		if(e === ancestor)
			return true;
		e = e.parentNode;
	}
	return false;
}


// deprecate the following...

// Prevent an event from bubbling
function stopEvent(e)
{
	var ev = e || window.event;
	ev.cancelBubble = true;
	if(ev.stopPropagation) ev.stopPropagation();
	return false;
}

// Remove any event handlers or non-primitve custom attributes
function scrubNode(e)
{
	if(!config.browser.isIE)
		return;
	var att = e.attributes;
	if(att) {
		var t;
		for(t=0; t<att.length; t++) {
			var n = att[t].name;
			if(n !== "style" && (typeof e[n] === "function" || (typeof e[n] === "object" && e[n] != null))) {
				try {
					e[n] = null;
				} catch(ex) {
				}
			}
		}
	}
	var c = e.firstChild;
	while(c) {
		scrubNode(c);
		c = c.nextSibling;
	}
}

function setStylesheet(s,id,doc)
{
	jQuery.twStylesheet(s,{id:id,doc:doc});
}

function removeStyleSheet(id)
{
	jQuery.twStylesheet.remove({id:id});
}

//--
//-- LoaderBase and SaverBase
//--

function LoaderBase() {}

LoaderBase.prototype.loadTiddler = function(store,node,tiddlers)
{
	var title = this.getTitle(store,node);
	if(safeMode && store.isShadowTiddler(title))
		return;
	if(title) {
		var tiddler = store.createTiddler(title);
		this.internalizeTiddler(store,tiddler,title,node);
		tiddlers.push(tiddler);
	}
};

LoaderBase.prototype.loadTiddlers = function(store,nodes)
{
	var t,tiddlers = [];
	for(t = 0; t < nodes.length; t++) {
		try {
			this.loadTiddler(store,nodes[t],tiddlers);
		} catch(ex) {
			showException(ex,config.messages.tiddlerLoadError.format([this.getTitle(store,nodes[t])]));
		}
	}
	return tiddlers;
};

function SaverBase() {}

SaverBase.prototype.externalize = function(store)
{
	var results = [];
	var t,tiddlers = store.getTiddlers("title");
	for(t = 0; t < tiddlers.length; t++) {
		if(!tiddlers[t].doNotSave())
			results.push(this.externalizeTiddler(store, tiddlers[t]));
	}
	return results.join("\n");
};

//--
//-- TW21Loader (inherits from LoaderBase)
//--

function TW21Loader() {}

TW21Loader.prototype = new LoaderBase();

TW21Loader.prototype.getTitle = function(store,node)
{
	var title = null;
	if(node.getAttribute) {
		title = node.getAttribute("title");
		if(!title)
			title = node.getAttribute("tiddler");
	}
	if(!title && node.id) {
		var lenPrefix = store.idPrefix.length;
		if(node.id.substr(0,lenPrefix) == store.idPrefix)
			title = node.id.substr(lenPrefix);
	}
	return title;
};

TW21Loader.prototype.internalizeTiddler = function(store,tiddler,title,node)
{
	var e = node.firstChild;
	var text = null;
	if(node.getAttribute("tiddler")) {
		text = getNodeText(e).unescapeLineBreaks();
	} else {
		while(e.nodeName!="PRE" && e.nodeName!="pre") {
			e = e.nextSibling;
		}
		text = e.innerHTML.replace(/\r/mg,"").htmlDecode();
	}
	var creator = node.getAttribute("creator");
	var modifier = node.getAttribute("modifier");
	var c = node.getAttribute("created");
	var m = node.getAttribute("modified");
	var created = c ? Date.convertFromYYYYMMDDHHMMSS(c) : version.date;
	var modified = m ? Date.convertFromYYYYMMDDHHMMSS(m) : created;
	var tags = node.getAttribute("tags");
	var fields = {};
	var i,attrs = node.attributes;
	for(i = attrs.length-1; i >= 0; i--) {
		var name = attrs[i].name;
		if(attrs[i].specified && !TiddlyWiki.isStandardField(name)) {
			fields[name] = attrs[i].value.unescapeLineBreaks();
		}
	}
	tiddler.assign(title,text,modifier,modified,tags,created,fields,creator);
	return tiddler;
};

//--
//-- TW21Saver (inherits from SaverBase)
//--

function TW21Saver() {}

TW21Saver.prototype = new SaverBase();

TW21Saver.prototype.externalizeTiddler = function(store,tiddler)
{
	try {
		var extendedAttributes = "";
		var usePre = config.options.chkUsePreForStorage;
		store.forEachField(tiddler,
			function(tiddler,fieldName,value) {
				// don't store stuff from the temp namespace
				if(typeof value != "string")
					value = "";
				if(!fieldName.match(/^temp\./))
					extendedAttributes += ' %0="%1"'.format([fieldName,value.escapeLineBreaks().htmlEncode()]);
			},true);
		var created = tiddler.created;
		var modified = tiddler.modified;
		var attributes = tiddler.creator ? ' creator="' + tiddler.creator.htmlEncode() + '"' : "";
		attributes += tiddler.modifier ? ' modifier="' + tiddler.modifier.htmlEncode() + '"' : "";
		attributes += (usePre && created == version.date) ? "" :' created="' + created.convertToYYYYMMDDHHMM() + '"';
		attributes += (usePre && modified == created) ? "" : ' modified="' + modified.convertToYYYYMMDDHHMM() +'"';
		var tags = tiddler.getTags();
		if(!usePre || tags)
			attributes += ' tags="' + tags.htmlEncode() + '"';
		return ('<div %0="%1"%2%3>%4</'+'div>').format([
				usePre ? "title" : "tiddler",
				tiddler.title.htmlEncode(),
				attributes,
				extendedAttributes,
				usePre ? "\n<pre>" + tiddler.text.htmlEncode() + "</pre>\n" : tiddler.text.escapeLineBreaks().htmlEncode()
			]);
	} catch (ex) {
		throw exceptionText(ex,config.messages.tiddlerSaveError.format([tiddler.title]));
	}
};

//]]>
</script>
<script id="jsdeprecatedArea" type="text/javascript">
//<![CDATA[
//--
//-- Deprecated Crypto functions and associated conversion routines.
//-- Use the jQuery.encoding functions directly instead.
//--

// Crypto 'namespace'
function Crypto() {}

// Convert a string to an array of big-endian 32-bit words
Crypto.strToBe32s = function(str)
{
	return jQuery.encoding.strToBe32s(str);
};

// Convert an array of big-endian 32-bit words to a string
Crypto.be32sToStr = function(be)
{
	return jQuery.encoding.be32sToStr(be);
};

// Convert an array of big-endian 32-bit words to a hex string
Crypto.be32sToHex = function(be)
{
	return jQuery.encoding.be32sToHex(be);
};

// Return, in hex, the SHA-1 hash of a string
Crypto.hexSha1Str = function(str)
{
	return jQuery.encoding.digests.hexSha1Str(str);
};

// Return the SHA-1 hash of a string
Crypto.sha1Str = function(str)
{
	return jQuery.encoding.digests.sha1Str(str);
};

// Calculate the SHA-1 hash of an array of blen bytes of big-endian 32-bit words
Crypto.sha1 = function(x,blen)
{
	return jQuery.encoding.digests.sha1(x,blen);
};

//--
//-- Deprecated code
//--

// @Deprecated: Use createElementAndWikify and this.termRegExp instead
config.formatterHelpers.charFormatHelper = function(w)
{
	w.subWikify(createTiddlyElement(w.output,this.element),this.terminator);
};

// @Deprecated: Use enclosedTextHelper and this.lookaheadRegExp instead
config.formatterHelpers.monospacedByLineHelper = function(w)
{
	var lookaheadRegExp = new RegExp(this.lookahead,"mg");
	lookaheadRegExp.lastIndex = w.matchStart;
	var lookaheadMatch = lookaheadRegExp.exec(w.source);
	if(lookaheadMatch && lookaheadMatch.index == w.matchStart) {
		var text = lookaheadMatch[1];
		if(config.browser.isIE)
			text = text.replace(/\n/g,"\r");
		createTiddlyElement(w.output,"pre",null,null,text);
		w.nextMatch = lookaheadRegExp.lastIndex;
	}
};

// @Deprecated: Use <br> or <br /> instead of <<br>>
config.macros.br = {};
config.macros.br.handler = function(place)
{
	createTiddlyElement(place,"br");
};

// Find an entry in an array. Returns the array index or null
// @Deprecated: Use indexOf instead
Array.prototype.find = function(item)
{
	var i = this.indexOf(item);
	return i == -1 ? null : i;
};

// Load a tiddler from an HTML DIV. The caller should make sure to later call Tiddler.changed()
// @Deprecated: Use store.getLoader().internalizeTiddler instead
Tiddler.prototype.loadFromDiv = function(divRef,title)
{
	return store.getLoader().internalizeTiddler(store,this,title,divRef);
};

// Format the text for storage in an HTML DIV
// @Deprecated Use store.getSaver().externalizeTiddler instead.
Tiddler.prototype.saveToDiv = function()
{
	return store.getSaver().externalizeTiddler(store,this);
};

// @Deprecated: Use store.allTiddlersAsHtml() instead
function allTiddlersAsHtml()
{
	return store.allTiddlersAsHtml();
}

// @Deprecated: Use refreshPageTemplate instead
function applyPageTemplate(title)
{
	refreshPageTemplate(title);
}

// @Deprecated: Use story.displayTiddlers instead
function displayTiddlers(srcElement,titles,template,unused1,unused2,animate,unused3)
{
	story.displayTiddlers(srcElement,titles,template,animate);
}

// @Deprecated: Use story.displayTiddler instead
function displayTiddler(srcElement,title,template,unused1,unused2,animate,unused3)
{
	story.displayTiddler(srcElement,title,template,animate);
}

// @Deprecated: Use functions on right hand side directly instead
var createTiddlerPopup = Popup.create;
var scrollToTiddlerPopup = Popup.show;
var hideTiddlerPopup = Popup.remove;

// @Deprecated: Use right hand side directly instead
var regexpBackSlashEn = new RegExp("\\\\n","mg");
var regexpBackSlash = new RegExp("\\\\","mg");
var regexpBackSlashEss = new RegExp("\\\\s","mg");
var regexpNewLine = new RegExp("\n","mg");
var regexpCarriageReturn = new RegExp("\r","mg");

//--
//-- Deprecated FileAdaptor functions
//--

FileAdaptor.loadTiddlyWikiCallback = function(status,context,responseText,url,xhr)
{
	context.status = status;
	if(!status) {
		context.statusText = "Error reading file";
	} else {
		context.adaptor.store = new TiddlyWiki();
		if(!context.adaptor.store.importTiddlyWiki(responseText)) {
			context.statusText = config.messages.invalidFileError.format([url]);
			context.status = false;
		}
	}
	context.complete(context,context.userParams);
};

//--
//-- Deprecated HTTP request code
//-- Use the jQuery ajax functions directly instead
//--

function loadRemoteFile(url,callback,params)
{
	return httpReq("GET",url,callback,params);
}

function doHttp(type,url,data,contentType,username,password,callback,params,headers,allowCache)
{
	return httpReq(type,url,callback,params,headers,data,contentType,username,password,allowCache);
}

//--
//-- Deprecated String functions
//--

// @Deprecated: no direct replacement, since not used in core code
String.prototype.toJSONString = function()
{
	// Convert a string to it's JSON representation by encoding control characters, double quotes and backslash. See json.org
	var m = {
		'\b': '\\b',
		'\f': '\\f',
		'\n': '\\n',
		'\r': '\\r',
		'\t': '\\t',
		'"' : '\\"',
		'\\': '\\\\'
		};
	var replaceFn = function(a,b) {
		var c = m[b];
		if(c)
			return c;
		c = b.charCodeAt();
		return '\\u00' + Math.floor(c / 16).toString(16) + (c % 16).toString(16);
		};
	if(/["\\\x00-\x1f]/.test(this))
		return '"' + this.replace(/([\x00-\x1f\\"])/g,replaceFn) + '"';
	return '"' + this + '"';
};

//--
//-- Deprecated Tiddler code
//--

// @Deprecated: Use tiddlerToRssItem(tiddler,uri) instead
Tiddler.prototype.toRssItem = function(uri)
{
	return tiddlerToRssItem(this,uri);
};

// @Deprecated: Use "<item>\n" + tiddlerToRssItem(tiddler,uri)  + "\n</item>" instead
Tiddler.prototype.saveToRss = function(uri)
{
	return "<item>\n" + tiddlerToRssItem(this,uri) + "\n</item>";
};

// @Deprecated: Use jQuery.encoding.digests.hexSha1Str instead
Tiddler.prototype.generateFingerprint = function()
{
	return "0x" + Crypto.hexSha1Str(this.text);
};

//--
//-- Deprecated Number functions
//--

// @Deprecated: no direct replacement, since not used in core code
// Clamp a number to a range
Number.prototype.clamp = function(min,max)
{
	var c = this;
	if(c < min)
		c = min;
	if(c > max)
		c = max;
	return Number(c);
};

//--
//-- Deprecated utility functions
//-- Use the jQuery functions directly instead
//--

// Remove all children of a node
function removeChildren(e)
{
	jQuery(e).empty();
}

// Remove a node and all it's children
function removeNode(e)
{
	jQuery(e).remove();
}

// Return the content of an element as plain text with no formatting
function getPlainText(e)
{
	return jQuery(e).text();
}

function addClass(e,className)
{
	jQuery(e).addClass(className);
}

function removeClass(e,className)
{
	jQuery(e).removeClass(className);
}

function hasClass(e,className)
{
	return jQuery(e).hasClass(className);
}

//--
//-- Deprecated Wikifier code
//--

function wikifyPlain(title,theStore,limit)
{
	if(!theStore)
		theStore = store;
	if(theStore.tiddlerExists(title) || theStore.isShadowTiddler(title)) {
		return wikifyPlainText(theStore.getTiddlerText(title),limit,tiddler);
	} else {
		return "";
	}
}

//]]>
</script>
<script id="jslibArea" type="text/javascript">
//<![CDATA[
/*!
 * jQuery JavaScript Library v1.6.2
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Thu Jun 30 14:16:56 2011 -0400
 */
(function(a,b){function cv(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cs(a){if(!cg[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){ch||(ch=c.createElement("iframe"),ch.frameBorder=ch.width=ch.height=0),b.appendChild(ch);if(!ci||!ch.createElement)ci=(ch.contentWindow||ch.contentDocument).document,ci.write((c.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),ci.close();d=ci.createElement(a),ci.body.appendChild(d),e=f.css(d,"display"),b.removeChild(ch)}cg[a]=e}return cg[a]}function cr(a,b){var c={};f.each(cm.concat.apply([],cm.slice(0,b)),function(){c[this]=a});return c}function cq(){cn=b}function cp(){setTimeout(cq,0);return cn=f.now()}function cf(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ce(){try{return new a.XMLHttpRequest}catch(b){}}function b$(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function bZ(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function bY(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bC.test(a)?d(a,e):bY(a+"["+(typeof e=="object"||f.isArray(e)?b:"")+"]",e,c,d)});else if(!c&&b!=null&&typeof b=="object")for(var e in b)bY(a+"["+e+"]",b[e],c,d);else d(a,b)}function bX(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bR,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=bX(a,c,d,e,l,g)));(k||!l)&&!g["*"]&&(l=bX(a,c,d,e,"*",g));return l}function bW(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bN),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function bA(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bv:bw;if(d>0){c!=="border"&&f.each(e,function(){c||(d-=parseFloat(f.css(a,"padding"+this))||0),c==="margin"?d+=parseFloat(f.css(a,c+this))||0:d-=parseFloat(f.css(a,"border"+this+"Width"))||0});return d+"px"}d=bx(a,b,b);if(d<0||d==null)d=a.style[b]||0;d=parseFloat(d)||0,c&&f.each(e,function(){d+=parseFloat(f.css(a,"padding"+this))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+this+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+this))||0)});return d+"px"}function bm(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(be,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function bl(a){f.nodeName(a,"input")?bk(a):"getElementsByTagName"in a&&f.grep(a.getElementsByTagName("input"),bk)}function bk(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bj(a){return"getElementsByTagName"in a?a.getElementsByTagName("*"):"querySelectorAll"in a?a.querySelectorAll("*"):[]}function bi(a,b){var c;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(f.expando)}}function bh(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c=f.expando,d=f.data(a),e=f.data(b,d);if(d=d[c]){var g=d.events;e=e[c]=f.extend({},d);if(g){delete e.handle,e.events={};for(var h in g)for(var i=0,j=g[h].length;i<j;i++)f.event.add(b,h+(g[h][i].namespace?".":"")+g[h][i].namespace,g[h][i],g[h][i].data)}}}}function bg(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function W(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(R.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function V(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function N(a,b){return(a&&a!=="*"?a+".":"")+b.replace(z,"`").replace(A,"&")}function M(a){var b,c,d,e,g,h,i,j,k,l,m,n,o,p=[],q=[],r=f._data(this,"events");if(!(a.liveFired===this||!r||!r.live||a.target.disabled||a.button&&a.type==="click")){a.namespace&&(n=new RegExp("(^|\\.)"+a.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")),a.liveFired=this;var s=r.live.slice(0);for(i=0;i<s.length;i++)g=s[i],g.origType.replace(x,"")===a.type?q.push(g.selector):s.splice(i--,1);e=f(a.target).closest(q,a.currentTarget);for(j=0,k=e.length;j<k;j++){m=e[j];for(i=0;i<s.length;i++){g=s[i];if(m.selector===g.selector&&(!n||n.test(g.namespace))&&!m.elem.disabled){h=m.elem,d=null;if(g.preType==="mouseenter"||g.preType==="mouseleave")a.type=g.preType,d=f(a.relatedTarget).closest(g.selector)[0],d&&f.contains(h,d)&&(d=h);(!d||d!==h)&&p.push({elem:h,handleObj:g,level:m.level})}}}for(j=0,k=p.length;j<k;j++){e=p[j];if(c&&e.level>c)break;a.currentTarget=e.elem,a.data=e.handleObj.data,a.handleObj=e.handleObj,o=e.handleObj.origHandler.apply(e.elem,arguments);if(o===!1||a.isPropagationStopped()){c=e.level,o===!1&&(b=!1);if(a.isImmediatePropagationStopped())break}}return b}}function K(a,c,d){var e=f.extend({},d[0]);e.type=a,e.originalEvent={},e.liveFired=b,f.event.handle.call(c,e),e.isDefaultPrevented()&&d[0].preventDefault()}function E(){return!0}function D(){return!1}function m(a,c,d){var e=c+"defer",g=c+"queue",h=c+"mark",i=f.data(a,e,b,!0);i&&(d==="queue"||!f.data(a,g,b,!0))&&(d==="mark"||!f.data(a,h,b,!0))&&setTimeout(function(){!f.data(a,g,b,!0)&&!f.data(a,h,b,!0)&&(f.removeData(a,e,!0),i.resolve())},0)}function l(a){for(var b in a)if(b!=="toJSON")return!1;return!0}function k(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(j,"$1-$2").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNaN(d)?i.test(d)?f.parseJSON(d):d:parseFloat(d)}catch(g){}f.data(a,c,d)}else d=b}return d}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/\d/,n=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,o=/^[\],:{}\s]*$/,p=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,q=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,r=/(?:^|:|,)(?:\s*\[)+/g,s=/(webkit)[ \/]([\w.]+)/,t=/(opera)(?:.*version)?[ \/]([\w.]+)/,u=/(msie) ([\w.]+)/,v=/(mozilla)(?:.*? rv:([\w.]+))?/,w=/-([a-z])/ig,x=function(a,b){return b.toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=n.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a))return f.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.6.2",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.done(a);return this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;A.resolveWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").unbind("ready")}},bindReady:function(){if(!A){A=e._Deferred();if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval"in a},isNaN:function(a){return a==null||!m.test(a)||isNaN(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf"))return!1;var c;for(c in a);return c===b||D.call(a,c)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw a},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(o.test(b.replace(p,"@").replace(q,"]").replace(r,"")))return(new Function("return "+b))();e.error("Invalid JSON: "+b)},parseXML:function(b,c,d){a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b)),d=c.documentElement,(!d||!d.nodeName||d.nodeName==="parsererror")&&e.error("Invalid XML: "+b);return c},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b){if(H)return H.call(b,a);for(var c=0,d=b.length;c<d;c++)if(b[c]===a)return c;return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c)e.access(a,j,c[j],f,g,d);return a}if(d!==b){f=!h&&f&&e.isFunction(d);for(var k=0;k<i;k++)g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=s.exec(a)||t.exec(a)||u.exec(a)||a.indexOf("compatible")<0&&v.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())});return e}(),g="done fail isResolved isRejected promise then always pipe".split(" "),h=[].slice;f.extend({_Deferred:function(){var a=[],b,c,d,e={done:function(){if(!d){var c=arguments,g,h,i,j,k;b&&(k=b,b=0);for(g=0,h=c.length;g<h;g++)i=c[g],j=f.type(i),j==="array"?e.done.apply(e,i):j==="function"&&a.push(i);k&&e.resolveWith(k[0],k[1])}return this},resolveWith:function(e,f){if(!d&&!b&&!c){f=f||[],c=1;try{while(a[0])a.shift().apply(e,f)}finally{b=[e,f],c=0}}return this},resolve:function(){e.resolveWith(this,arguments);return this},isResolved:function(){return!!c||!!b},cancel:function(){d=1,a=[];return this}};return e},Deferred:function(a){var b=f._Deferred(),c=f._Deferred(),d;f.extend(b,{then:function(a,c){b.done(a).fail(c);return this},always:function(){return b.done.apply(b,arguments).fail.apply(this,arguments)},fail:c.done,rejectWith:c.resolveWith,reject:c.resolve,isRejected:c.isResolved,pipe:function(a,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[c,"reject"]},function(a,c){var e=c[0],g=c[1],h;f.isFunction(e)?b[a](function(){h=e.apply(this,arguments),h&&f.isFunction(h.promise)?h.promise().then(d.resolve,d.reject):d[g](h)}):b[a](d[g])})}).promise()},promise:function(a){if(a==null){if(d)return d;d=a={}}var c=g.length;while(c--)a[g[c]]=b[g[c]];return a}}),b.done(c.cancel).fail(b.cancel),delete b.cancel,a&&a.call(b,b);return b},when:function(a){function i(a){return function(c){b[a]=arguments.length>1?h.call(arguments,0):c,--e||g.resolveWith(g,h.call(b,0))}}var b=arguments,c=0,d=b.length,e=d,g=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred();if(d>1){for(;c<d;c++)b[c]&&f.isFunction(b[c].promise)?b[c].promise().then(i(c),g.reject):--e;e||g.resolveWith(g,b)}else g!==a&&g.resolveWith(g,d?[a]:[]);return g.promise()}}),f.support=function(){var a=c.createElement("div"),b=c.documentElement,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;a.setAttribute("className","t"),a.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=a.getElementsByTagName("*"),e=a.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=a.getElementsByTagName("input")[0],k={leadingWhitespace:a.firstChild.nodeType===3,tbody:!a.getElementsByTagName("tbody").length,htmlSerialize:!!a.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55$/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:a.className!=="t",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,k.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,k.optDisabled=!h.disabled;try{delete a.test}catch(v){k.deleteExpando=!1}!a.addEventListener&&a.attachEvent&&a.fireEvent&&(a.attachEvent("onclick",function(){k.noCloneEvent=!1}),a.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),k.radioValue=i.value==="t",i.setAttribute("checked","checked"),a.appendChild(i),l=c.createDocumentFragment(),l.appendChild(a.firstChild),k.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,a.innerHTML="",a.style.width=a.style.paddingLeft="1px",m=c.getElementsByTagName("body")[0],o=c.createElement(m?"div":"body"),p={visibility:"hidden",width:0,height:0,border:0,margin:0},m&&f.extend(p,{position:"absolute",left:-1e3,top:-1e3});for(t in p)o.style[t]=p[t];o.appendChild(a),n=m||b,n.insertBefore(o,n.firstChild),k.appendChecked=i.checked,k.boxModel=a.offsetWidth===2,"zoom"in a.style&&(a.style.display="inline",a.style.zoom=1,k.inlineBlockNeedsLayout=a.offsetWidth===2,a.style.display="",a.innerHTML="<div style='width:4px;'></div>",k.shrinkWrapBlocks=a.offsetWidth!==2),a.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",q=a.getElementsByTagName("td"),u=q[0].offsetHeight===0,q[0].style.display="",q[1].style.display="none",k.reliableHiddenOffsets=u&&q[0].offsetHeight===0,a.innerHTML="",c.defaultView&&c.defaultView.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",a.appendChild(j),k.reliableMarginRight=(parseInt((c.defaultView.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0),o.innerHTML="",n.removeChild(o);if(a.attachEvent)for(t in{submit:1,change:1,focusin:1})s="on"+t,u=s in a,u||(a.setAttribute(s,"return;"),u=typeof a[s]=="function"),k[t+"Bubbles"]=u;o=l=g=h=m=j=a=i=null;return k}(),f.boxModel=f.support.boxModel;var i=/^(?:\{.*\}|\[.*\])$/,j=/([a-z])([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return!!a&&!l(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g=f.expando,h=typeof c=="string",i,j=a.nodeType,k=j?f.cache:a,l=j?a[f.expando]:a[f.expando]&&f.expando;if((!l||e&&l&&!k[l][g])&&h&&d===b)return;l||(j?a[f.expando]=l=++f.uuid:l=f.expando),k[l]||(k[l]={},j||(k[l].toJSON=f.noop));if(typeof c=="object"||typeof c=="function")e?k[l][g]=f.extend(k[l][g],c):k[l]=f.extend(k[l],c);i=k[l],e&&(i[g]||(i[g]={}),i=i[g]),d!==b&&(i[f.camelCase(c)]=d);if(c==="events"&&!i[c])return i[g]&&i[g].events;return h?i[f.camelCase(c)]||i[c]:i}},removeData:function(b,c,d){if(!!f.acceptData(b)){var e=f.expando,g=b.nodeType,h=g?f.cache:b,i=g?b[f.expando]:f.expando;if(!h[i])return;if(c){var j=d?h[i][e]:h[i];if(j){delete j[c];if(!l(j))return}}if(d){delete h[i][e];if(!l(h[i]))return}var k=h[i][e];f.support.deleteExpando||h!=a?delete h[i]:h[i]=null,k?(h[i]={},g||(h[i].toJSON=f.noop),h[i][e]=k):g&&(f.support.deleteExpando?delete b[f.expando]:b.removeAttribute?b.removeAttribute(f.expando):b[f.expando]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d=null;if(typeof a=="undefined"){if(this.length){d=f.data(this[0]);if(this[0].nodeType===1){var e=this[0].attributes,g;for(var h=0,i=e.length;h<i;h++)g=e[h].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),k(this[0],g,d[g]))}}return d}if(typeof a=="object")return this.each(function(){f.data(this,a)});var j=a.split(".");j[1]=j[1]?"."+j[1]:"";if(c===b){d=this.triggerHandler("getData"+j[1]+"!",[j[0]]),d===b&&this.length&&(d=f.data(this[0],a),d=k(this[0],a,d));return d===b&&j[1]?this.data(j[0]):d}return this.each(function(){var b=f(this),d=[j[0],c];b.triggerHandler("setData"+j[1]+"!",d),f.data(this,a,c),b.triggerHandler("changeData"+j[1]+"!",d)})},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,c){a&&(c=(c||"fx")+"mark",f.data(a,c,(f.data(a,c,b,!0)||0)+1,!0))},_unmark:function(a,c,d){a!==!0&&(d=c,c=a,a=!1);if(c){d=d||"fx";var e=d+"mark",g=a?0:(f.data(c,e,b,!0)||1)-1;g?f.data(c,e,g,!0):(f.removeData(c,e,!0),m(c,d,"mark"))}},queue:function(a,c,d){if(a){c=(c||"fx")+"queue";var e=f.data(a,c,b,!0);d&&(!e||f.isArray(d)?e=f.data(a,c,f.makeArray(d),!0):e.push(d));return e||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e;d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),d.call(a,function(){f.dequeue(a,b)})),c.length||(f.removeData(a,b+"queue",!0),m(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){typeof a!="string"&&(c=a,a="fx");if(c===b)return f.queue(this[0],a);return this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(){var c=this;setTimeout(function(){f.dequeue(c,b)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f._Deferred(),!0))h++,l.done(m);m();return d.promise()}});var n=/[\n\t\r]/g,o=/\s+/,p=/\r/g,q=/^(?:button|input)$/i,r=/^(?:button|input|object|select|textarea)$/i,s=/^a(?:rea)?$/i,t=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,u=/\:|^on/,v,w;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(o);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(o);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(" "+g.className+" ").replace(n," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a))return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)});return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(o);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ";for(var c=0,d=this.length;c<d;c++)if((" "+this[c].className+" ").replace(n," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e=this[0];if(!arguments.length){if(e){c=f.valHooks[e.nodeName.toLowerCase()]||f.valHooks[e.type];if(c&&"get"in c&&(d=c.get(e,"value"))!==b)return d;d=e.value;return typeof d=="string"?d.replace(p,""):d==null?"":d}return b}var g=f.isFunction(a);return this.each(function(d){var e=f(this),h;if(this.nodeType===1){g?h=a.call(this,d,e.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h}})}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c=a.selectedIndex,d=[],e=a.options,g=a.type==="select-one";if(c<0)return null;for(var h=g?c:0,i=g?c+1:e.length;h<i;h++){var j=e[h];if(j.selected&&(f.support.optDisabled?!j.disabled:j.getAttribute("disabled")===null)&&(!j.parentNode.disabled||!f.nodeName(j.parentNode,"optgroup"))){b=f(j).val();if(g)return b;d.push(b)}}if(g&&!d.length&&e.length)return f(e[c]).val();return d},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attrFix:{tabindex:"tabIndex"},attr:function(a,c,d,e){var g=a.nodeType;if(!a||g===3||g===8||g===2)return b;if(e&&c in f.attrFn)return f(a)[c](d);if(!("getAttribute"in a))return f.prop(a,c,d);var h,i,j=g!==1||!f.isXMLDoc(a);j&&(c=f.attrFix[c]||c,i=f.attrHooks[c],i||(t.test(c)?i=w:v&&c!=="className"&&(f.nodeName(a,"form")||u.test(c))&&(i=v)));if(d!==b){if(d===null){f.removeAttr(a,c);return b}if(i&&"set"in i&&j&&(h=i.set(a,d,c))!==b)return h;a.setAttribute(c,""+d);return d}if(i&&"get"in i&&j&&(h=i.get(a,c))!==null)return h;h=a.getAttribute(c);return h===null?b:h},removeAttr:function(a,b){var c;a.nodeType===1&&(b=f.attrFix[b]||b,f.support.getSetAttribute?a.removeAttribute(b):(f.attr(a,b,""),a.removeAttributeNode(a.getAttributeNode(b))),t.test(b)&&(c=f.propFix[b]||b)in a&&(a[c]=!1))},attrHooks:{type:{set:function(a,b){if(q.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}},tabIndex:{get:function(a){var c=a.getAttributeNode("tabIndex");return c&&c.specified?parseInt(c.value,10):r.test(a.nodeName)||s.test(a.nodeName)&&a.href?0:b}},value:{get:function(a,b){if(v&&f.nodeName(a,"button"))return v.get(a,b);return b in a?a.value:null},set:function(a,b,c){if(v&&f.nodeName(a,"button"))return v.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e=a.nodeType;if(!a||e===3||e===8||e===2)return b;var g,h,i=e!==1||!f.isXMLDoc(a);i&&(c=f.propFix[c]||c,h=f.propHooks[c]);return d!==b?h&&"set"in h&&(g=h.set(a,d,c))!==b?g:a[c]=d:h&&"get"in h&&(g=h.get(a,c))!==b?g:a[c]},propHooks:{}}),w={get:function(a,c){return f.prop(a,c)?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},f.support.getSetAttribute||(f.attrFix=f.propFix,v=f.attrHooks.name=f.attrHooks.title=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&d.nodeValue!==""?d.nodeValue:b},set:function(a,b,c){var d=a.getAttributeNode(c);if(d){d.nodeValue=b;return b}}},f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})})),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}})),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var x=/\.(.*)$/,y=/^(?:textarea|input|select)$/i,z=/\./g,A=/ /g,B=/[^\w\s.|`]/g,C=function(a){return a.replace(B,"\\$&")};f.event={add:function(a,c,d,e){if(a.nodeType!==3&&a.nodeType!==8){if(d===!1)d=D;else if(!d)return;var g,h;d.handler&&(g=d,d=g.handler),d.guid||(d.guid=f.guid++);var i=f._data(a);if(!i)return;var j=i.events,k=i.handle;j||(i.events=j={}),k||(i.handle=k=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.handle.apply(k.elem,arguments):b}),k.elem=a,c=c.split(" ");var l,m=0,n;while(l=c[m++]){h=g?f.extend({},g):{handler:d,data:e},l.indexOf(".")>-1?(n=l.split("."),l=n.shift(),h.namespace=n.slice(0).sort().join(".")):(n=[],h.namespace=""),h.type=l,h.guid||(h.guid=d.guid);var o=j[l],p=f.event.special[l]||{};if(!o){o=j[l]=[];if(!p.setup||p.setup.call(a,e,n,k)===!1)a.addEventListener?a.addEventListener(l,k,!1):a.attachEvent&&a.attachEvent("on"+l,k)}p.add&&(p.add.call(a,h),h.handler.guid||(h.handler.guid=d.guid)),o.push(h),f.event.global[l]=!0}a=null}},global:{},remove:function(a,c,d,e){if(a.nodeType!==3&&a.nodeType!==8){d===!1&&(d=D);var g,h,i,j,k=0,l,m,n,o,p,q,r,s=f.hasData(a)&&f._data(a),t=s&&s.events;if(!s||!t)return;c&&c.type&&(d=c.handler,c=c.type);if(!c||typeof c=="string"&&c.charAt(0)==="."){c=c||"";for(h in t)f.event.remove(a,h+c);return}c=c.split(" ");while(h=c[k++]){r=h,q=null,l=h.indexOf(".")<0,m=[],l||(m=h.split("."),h=m.shift(),n=new RegExp("(^|\\.)"+f.map(m.slice(0).sort(),C).join("\\.(?:.*\\.)?")+"(\\.|$)")),p=t[h];if(!p)continue;if(!d){for(j=0;j<p.length;j++){q=p[j];if(l||n.test(q.namespace))f.event.remove(a,r,q.handler,j),p.splice(j--,1)}continue}o=f.event.special[h]||{};for(j=e||0;j<p.length;j++){q=p[j];if(d.guid===q.guid){if(l||n.test(q.namespace))e==null&&p.splice(j--,1),o.remove&&o.remove.call(a,q);if(e!=null)break}}if(p.length===0||e!=null&&p.length===1)(!o.teardown||o.teardown.call(a,m)===!1)&&f.removeEvent(a,h,s.handle),g=null,delete t[h]}if(f.isEmptyObject(t)){var u=s.handle;u&&(u.elem=null),delete s.events,delete s.handle,f.isEmptyObject(s)&&f.removeData(a,b,!0)}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){var h=c.type||c,i=[],j;h.indexOf("!")>=0&&(h=h.slice(0,-1),j=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.
shift(),i.sort());if(!!e&&!f.event.customEvent[h]||!!f.event.global[h]){c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.exclusive=j,c.namespace=i.join("."),c.namespace_re=new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)");if(g||!e)c.preventDefault(),c.stopPropagation();if(!e){f.each(f.cache,function(){var a=f.expando,b=this[a];b&&b.events&&b.events[h]&&f.event.trigger(c,d,b.handle.elem)});return}if(e.nodeType===3||e.nodeType===8)return;c.result=b,c.target=e,d=d!=null?f.makeArray(d):[],d.unshift(c);var k=e,l=h.indexOf(":")<0?"on"+h:"";do{var m=f._data(k,"handle");c.currentTarget=k,m&&m.apply(k,d),l&&f.acceptData(k)&&k[l]&&k[l].apply(k,d)===!1&&(c.result=!1,c.preventDefault()),k=k.parentNode||k.ownerDocument||k===c.target.ownerDocument&&a}while(k&&!c.isPropagationStopped());if(!c.isDefaultPrevented()){var n,o=f.event.special[h]||{};if((!o._default||o._default.call(e.ownerDocument,c)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)){try{l&&e[h]&&(n=e[l],n&&(e[l]=null),f.event.triggered=h,e[h]())}catch(p){}n&&(e[l]=n),f.event.triggered=b}}return c.result}},handle:function(c){c=f.event.fix(c||a.event);var d=((f._data(this,"events")||{})[c.type]||[]).slice(0),e=!c.exclusive&&!c.namespace,g=Array.prototype.slice.call(arguments,0);g[0]=c,c.currentTarget=this;for(var h=0,i=d.length;h<i;h++){var j=d[h];if(e||c.namespace_re.test(j.namespace)){c.handler=j.handler,c.data=j.data,c.handleObj=j;var k=j.handler.apply(this,g);k!==b&&(c.result=k,k===!1&&(c.preventDefault(),c.stopPropagation()));if(c.isImmediatePropagationStopped())break}}return c.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(a){if(a[f.expando])return a;var d=a;a=f.Event(d);for(var e=this.props.length,g;e;)g=this.props[--e],a[g]=d[g];a.target||(a.target=a.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement);if(a.pageX==null&&a.clientX!=null){var h=a.target.ownerDocument||c,i=h.documentElement,j=h.body;a.pageX=a.clientX+(i&&i.scrollLeft||j&&j.scrollLeft||0)-(i&&i.clientLeft||j&&j.clientLeft||0),a.pageY=a.clientY+(i&&i.scrollTop||j&&j.scrollTop||0)-(i&&i.clientTop||j&&j.clientTop||0)}a.which==null&&(a.charCode!=null||a.keyCode!=null)&&(a.which=a.charCode!=null?a.charCode:a.keyCode),!a.metaKey&&a.ctrlKey&&(a.metaKey=a.ctrlKey),!a.which&&a.button!==b&&(a.which=a.button&1?1:a.button&2?3:a.button&4?2:0);return a},guid:1e8,proxy:f.proxy,special:{ready:{setup:f.bindReady,teardown:f.noop},live:{add:function(a){f.event.add(this,N(a.origType,a.selector),f.extend({},a,{handler:M,guid:a.handler.guid}))},remove:function(a){f.event.remove(this,N(a.origType,a.selector),a)}},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}}},f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!this.preventDefault)return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?E:D):this.type=a,b&&f.extend(this,b),this.timeStamp=f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=E;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=E;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=E,this.stopPropagation()},isDefaultPrevented:D,isPropagationStopped:D,isImmediatePropagationStopped:D};var F=function(a){var b=a.relatedTarget,c=!1,d=a.type;a.type=a.data,b!==this&&(b&&(c=f.contains(this,b)),c||(f.event.handle.apply(this,arguments),a.type=d))},G=function(a){a.type=a.data,f.event.handle.apply(this,arguments)};f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={setup:function(c){f.event.add(this,b,c&&c.selector?G:F,a)},teardown:function(a){f.event.remove(this,b,a&&a.selector?G:F)}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(a,b){if(!f.nodeName(this,"form"))f.event.add(this,"click.specialSubmit",function(a){var b=a.target,c=b.type;(c==="submit"||c==="image")&&f(b).closest("form").length&&K("submit",this,arguments)}),f.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,c=b.type;(c==="text"||c==="password")&&f(b).closest("form").length&&a.keyCode===13&&K("submit",this,arguments)});else return!1},teardown:function(a){f.event.remove(this,".specialSubmit")}});if(!f.support.changeBubbles){var H,I=function(a){var b=a.type,c=a.value;b==="radio"||b==="checkbox"?c=a.checked:b==="select-multiple"?c=a.selectedIndex>-1?f.map(a.options,function(a){return a.selected}).join("-"):"":f.nodeName(a,"select")&&(c=a.selectedIndex);return c},J=function(c){var d=c.target,e,g;if(!!y.test(d.nodeName)&&!d.readOnly){e=f._data(d,"_change_data"),g=I(d),(c.type!=="focusout"||d.type!=="radio")&&f._data(d,"_change_data",g);if(e===b||g===e)return;if(e!=null||g)c.type="change",c.liveFired=b,f.event.trigger(c,arguments[1],d)}};f.event.special.change={filters:{focusout:J,beforedeactivate:J,click:function(a){var b=a.target,c=f.nodeName(b,"input")?b.type:"";(c==="radio"||c==="checkbox"||f.nodeName(b,"select"))&&J.call(this,a)},keydown:function(a){var b=a.target,c=f.nodeName(b,"input")?b.type:"";(a.keyCode===13&&!f.nodeName(b,"textarea")||a.keyCode===32&&(c==="checkbox"||c==="radio")||c==="select-multiple")&&J.call(this,a)},beforeactivate:function(a){var b=a.target;f._data(b,"_change_data",I(b))}},setup:function(a,b){if(this.type==="file")return!1;for(var c in H)f.event.add(this,c+".specialChange",H[c]);return y.test(this.nodeName)},teardown:function(a){f.event.remove(this,".specialChange");return y.test(this.nodeName)}},H=f.event.special.change.filters,H.focus=H.beforeactivate}f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){function e(a){var c=f.event.fix(a);c.type=b,c.originalEvent={},f.event.trigger(c,null,c.target),c.isDefaultPrevented()&&a.preventDefault()}var d=0;f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.each(["bind","one"],function(a,c){f.fn[c]=function(a,d,e){var g;if(typeof a=="object"){for(var h in a)this[c](h,d,a[h],e);return this}if(arguments.length===2||d===!1)e=d,d=b;c==="one"?(g=function(a){f(this).unbind(a,g);return e.apply(this,arguments)},g.guid=e.guid||f.guid++):g=e;if(a==="unload"&&c!=="one")this.one(a,d,e);else for(var i=0,j=this.length;i<j;i++)f.event.add(this[i],a,g,d);return this}}),f.fn.extend({unbind:function(a,b){if(typeof a=="object"&&!a.preventDefault)for(var c in a)this.unbind(c,a[c]);else for(var d=0,e=this.length;d<e;d++)f.event.remove(this[d],a,b);return this},delegate:function(a,b,c,d){return this.live(b,c,d,a)},undelegate:function(a,b,c){return arguments.length===0?this.unbind("live"):this.die(b,null,c,a)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f.data(this,"lastToggle"+a.guid)||0)%d;f.data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var L={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};f.each(["live","die"],function(a,c){f.fn[c]=function(a,d,e,g){var h,i=0,j,k,l,m=g||this.selector,n=g?this:f(this.context);if(typeof a=="object"&&!a.preventDefault){for(var o in a)n[c](o,d,a[o],m);return this}if(c==="die"&&!a&&g&&g.charAt(0)==="."){n.unbind(g);return this}if(d===!1||f.isFunction(d))e=d||D,d=b;a=(a||"").split(" ");while((h=a[i++])!=null){j=x.exec(h),k="",j&&(k=j[0],h=h.replace(x,""));if(h==="hover"){a.push("mouseenter"+k,"mouseleave"+k);continue}l=h,L[h]?(a.push(L[h]+k),h=h+k):h=(L[h]||h)+k;if(c==="live")for(var p=0,q=n.length;p<q;p++)f.event.add(n[p],"live."+N(h,m),{data:d,selector:m,handler:e,origType:h,origHandler:e,preType:l});else n.unbind("live."+N(h,m),e)}return this}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.bind(b,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0)}),function(){function u(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){var j=!1;i=i[a];while(i){if(i.sizcache===c){j=d[i.sizset];break}if(i.nodeType===1){f||(i.sizcache=c,i.sizset=g);if(typeof b!="string"){if(i===b){j=!0;break}}else if(k.filter(b,[i]).length>0){j=i;break}}i=i[a]}d[g]=j}}}function t(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){var j=!1;i=i[a];while(i){if(i.sizcache===c){j=d[i.sizset];break}i.nodeType===1&&!f&&(i.sizcache=c,i.sizset=g);if(i.nodeName.toLowerCase()===b){j=i;break}i=i[a]}d[g]=j}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d=0,e=Object.prototype.toString,g=!1,h=!0,i=/\\/g,j=/\W/;[0,0].sort(function(){h=!1;return 0});var k=function(b,d,f,g){f=f||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return f;var i,j,n,o,q,r,s,t,u=!0,w=k.isXML(d),x=[],y=b;do{a.exec(""),i=a.exec(y);if(i){y=i[3],x.push(i[1]);if(i[2]){o=i[3];break}}}while(i);if(x.length>1&&m.exec(b))if(x.length===2&&l.relative[x[0]])j=v(x[0]+x[1],d);else{j=l.relative[x[0]]?[d]:k(x.shift(),d);while(x.length)b=x.shift(),l.relative[b]&&(b+=x.shift()),j=v(b,j)}else{!g&&x.length>1&&d.nodeType===9&&!w&&l.match.ID.test(x[0])&&!l.match.ID.test(x[x.length-1])&&(q=k.find(x.shift(),d,w),d=q.expr?k.filter(q.expr,q.set)[0]:q.set[0]);if(d){q=g?{expr:x.pop(),set:p(g)}:k.find(x.pop(),x.length===1&&(x[0]==="~"||x[0]==="+")&&d.parentNode?d.parentNode:d,w),j=q.expr?k.filter(q.expr,q.set):q.set,x.length>0?n=p(j):u=!1;while(x.length)r=x.pop(),s=r,l.relative[r]?s=x.pop():r="",s==null&&(s=d),l.relative[r](n,s,w)}else n=x=[]}n||(n=j),n||k.error(r||b);if(e.call(n)==="[object Array]")if(!u)f.push.apply(f,n);else if(d&&d.nodeType===1)for(t=0;n[t]!=null;t++)n[t]&&(n[t]===!0||n[t].nodeType===1&&k.contains(d,n[t]))&&f.push(j[t]);else for(t=0;n[t]!=null;t++)n[t]&&n[t].nodeType===1&&f.push(j[t]);else p(n,f);o&&(k(o,h,f,g),k.uniqueSort(f));return f};k.uniqueSort=function(a){if(r){g=h,a.sort(r);if(g)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},k.matches=function(a,b){return k(a,null,null,b)},k.matchesSelector=function(a,b){return k(b,null,null,[a]).length>0},k.find=function(a,b,c){var d;if(!a)return[];for(var e=0,f=l.order.length;e<f;e++){var g,h=l.order[e];if(g=l.leftMatch[h].exec(a)){var j=g[1];g.splice(1,1);if(j.substr(j.length-1)!=="\\"){g[1]=(g[1]||"").replace(i,""),d=l.find[h](g,b,c);if(d!=null){a=a.replace(l.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},k.filter=function(a,c,d,e){var f,g,h=a,i=[],j=c,m=c&&c[0]&&k.isXML(c[0]);while(a&&c.length){for(var n in l.filter)if((f=l.leftMatch[n].exec(a))!=null&&f[2]){var o,p,q=l.filter[n],r=f[1];g=!1,f.splice(1,1);if(r.substr(r.length-1)==="\\")continue;j===i&&(i=[]);if(l.preFilter[n]){f=l.preFilter[n](f,j,d,i,e,m);if(!f)g=o=!0;else if(f===!0)continue}if(f)for(var s=0;(p=j[s])!=null;s++)if(p){o=q(p,f,s,j);var t=e^!!o;d&&o!=null?t?g=!0:j[s]=!1:t&&(i.push(p),g=!0)}if(o!==b){d||(j=i),a=a.replace(l.match[n],"");if(!g)return[];break}}if(a===h)if(g==null)k.error(a);else break;h=a}return j},k.error=function(a){throw"Syntax error, unrecognized expression: "+a};var l=k.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!j.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&k.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!j.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&k.filter(b,a,!0)}},"":function(a,b,c){var e,f=d++,g=u;typeof b=="string"&&!j.test(b)&&(b=b.toLowerCase(),e=b,g=t),g("parentNode",b,f,a,e,c)},"~":function(a,b,c){var e,f=d++,g=u;typeof b=="string"&&!j.test(b)&&(b=b.toLowerCase(),e=b,g=t),g("previousSibling",b,f,a,e,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(i,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(i,"")},TAG:function(a,b){return a[1].replace(i,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||k.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&k.error(a[0]);a[0]=d++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(i,"");!f&&l.attrMap[g]&&(a[1]=l.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(i,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=k(b[3],null,null,c);else{var g=k.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return!1}else if(l.match.POS.test(b[0])||l.match.CHILD.test(b[0]))return!0;return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!k(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=l.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||k.getText([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}k.error(e)},CHILD:function(a,b){var c=b[1],d=a;switch(c){case"only":case"first":while(d=d.previousSibling)if(d.nodeType===1)return!1;if(c==="first")return!0;d=a;case"last":while(d=d.nextSibling)if(d.nodeType===1)return!1;return!0;case"nth":var e=b[2],f=b[3];if(e===1&&f===0)return!0;var g=b[0],h=a.parentNode;if(h&&(h.sizcache!==g||!a.nodeIndex)){var i=0;for(d=h.firstChild;d;d=d.nextSibling)d.nodeType===1&&(d.nodeIndex=++i);h.sizcache=g}var j=a.nodeIndex-f;return e===0?j===0:j%e===0&&j/e>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=l.attrHandle[c]?l.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=l.setFilters[e];if(f)return f(a,c,b,d)}}},m=l.match.POS,n=function(a,b){return"\\"+(b-0+1)};for(var o in l.match)l.match[o]=new RegExp(l.match[o].source+/(?![^\[]*\])(?![^\(]*\))/.source),l.leftMatch[o]=new RegExp(/(^(?:.|\r|\n)*?)/.source+l.match[o].source.replace(/\\(\d+)/g,n));var p=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(q){p=function(a,b){var c=0,d=b||[];if(e.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var f=a.length;c<f;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var r,s;c.documentElement.compareDocumentPosition?r=function(a,b){if(a===b){g=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return a.compareDocumentPosition(b)&4?-1:1}:(r=function(a,b){if(a===b){g=!0;return 0}if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return s(a,b);if(!h)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return s(e[k],f[k]);return k===c?s(a,f[k],-1):s(e[k],b,1)},s=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),k.getText=function(a){var b="",c;for(var d=0;a[d];d++)c=a[d],c.nodeType===3||c.nodeType===4?b+=c.nodeValue:c.nodeType!==8&&(b+=k.getText(c.childNodes));return b},function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(l.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},l.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(l.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(l.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=k,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){k=function(b,e,f,g){e=e||c;if(!g&&!k.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return p(e.getElementsByTagName(b),f);if(h[2]&&l.find.CLASS&&e.getElementsByClassName)return p(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return p([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return p([],f);if(i.id===h[3])return p([i],f)}try{return p(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var m=e,n=e.getAttribute("id"),o=n||d,q=e.parentNode,r=/^\s*[+~]/.test(b);n?o=o.replace(/'/g,"\\$&"):e.setAttribute("id",o),r&&q&&(e=e.parentNode);try{if(!r||q)return p(e.querySelectorAll("[id='"+o+"'] "+b),f)}catch(s){}finally{n||m.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)k[e]=a[e];b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}k.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!k.isXML(a))try{if(e||!l.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return k(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;l.order.splice(1,0,"CLASS"),l.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),c.documentElement.contains?k.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?k.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:k.contains=function(){return!1},k.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var v=function(a,b){var c,d=[],e="",f=b.nodeType?[b]:b;while(c=l.match.PSEUDO.exec(a))e+=c[0],a=a.replace(l.match.PSEUDO,"");a=l.relative[a]?a+"*":a;for(var g=0,h=f.length;g<h;g++)k(a,f[g],d);return k.filter(e,d)};f.find=k,f.expr=k.selectors,f.expr[":"]=f.expr.filters,f.unique=k.uniqueSort,f.text=k.getText,f.isXMLDoc=k.isXML,f.contains=k.contains}();var O=/Until$/,P=/^(?:parents|prevUntil|prevAll)/,Q=/,/,R=/^.[^:#\[\.,]*$/,S=Array.prototype.slice,T=f.expr.match.POS,U={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(W(this,a,!1),"not",a)},filter:function(a){return this.pushStack(W(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h,i,j={},k=1;if(g&&a.length){for(d=0,e=a.length;d<e;d++)i=a[d],j[i]||(j[i]=T.test(i)?f(i,b||this.context):i);while(g&&g.ownerDocument&&g!==b){for(i in j)h=j[i],(h.jquery?h.index(g)>-1:f(g).is(h))&&c.push({selector:i,elem:g,level:k});g=g.parentNode,k++}}return c}var l=T.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(l?l.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a||typeof a=="string")return f.inArray(this[0],a?f(a):this.parent().children());return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(V(c[0])||V(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c),g=S.call(arguments);O.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!U[a]?f.unique(e):e,(this.length>1||Q.test(d))&&P.test(a)&&(e=e.reverse());return this.pushStack(e,a,g.join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var X=/ jQuery\d+="(?:\d+|null)"/g,Y=/^\s+/,Z=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,$=/<([\w:]+)/,_=/<tbody/i,ba=/<|&#?\w+;/,bb=/<(?:script|object|embed|option|style)/i,bc=/checked\s*(?:[^=]|=\s*.checked.)/i,bd=/\/(java|ecma)script/i,be=/^\s*<!(?:\[CDATA\[|\-\-)/,bf={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};bf.optgroup=bf.option,bf.tbody=bf.tfoot=bf.colgroup=bf.caption=bf.thead,bf.th=bf.td,f.support.htmlSerialize||(bf._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){if(f.isFunction(a))return this.each(function(b){var c=f(this);c.text(a.call(this,b,c.text()))});if(typeof a!="object"&&a!==b)return this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a));return f.text(this)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapInner(a.call(this,b))});return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){f(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f(arguments[0]).toArray());return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(X,""):null;if(typeof a=="string"&&!bb.test(a)&&(f.support.leadingWhitespace||!Y.test(a))&&!bf[($.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Z,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else f.isFunction(a)?this.each(function(b){var c=f(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a))return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bc.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bg(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,bm)}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i;b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof a[0]=="string"&&a[0].length<512&&i===c&&a[0].charAt(0)==="<"&&!bb.test(a[0])&&(f.support.checkClone||!bc.test(a[0]))&&(g=!0,h=f.fragments[a[0]],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[a[0]]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j
)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d=a.cloneNode(!0),e,g,h;if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bi(a,d),e=bj(a),g=bj(d);for(h=0;e[h];++h)bi(e[h],g[h])}if(b){bh(a,d);if(c){e=bj(a),g=bj(d);for(h=0;e[h];++h)bh(e[h],g[h])}}e=g=null;return d},clean:function(a,b,d,e){var g;b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);var h=[],i;for(var j=0,k;(k=a[j])!=null;j++){typeof k=="number"&&(k+="");if(!k)continue;if(typeof k=="string")if(!ba.test(k))k=b.createTextNode(k);else{k=k.replace(Z,"<$1></$2>");var l=($.exec(k)||["",""])[1].toLowerCase(),m=bf[l]||bf._default,n=m[0],o=b.createElement("div");o.innerHTML=m[1]+k+m[2];while(n--)o=o.lastChild;if(!f.support.tbody){var p=_.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];for(i=q.length-1;i>=0;--i)f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])}!f.support.leadingWhitespace&&Y.test(k)&&o.insertBefore(b.createTextNode(Y.exec(k)[0]),o.firstChild),k=o.childNodes}var r;if(!f.support.appendChecked)if(k[0]&&typeof (r=k.length)=="number")for(i=0;i<r;i++)bl(k[i]);else bl(k);k.nodeType?h.push(k):h=f.merge(h,k)}if(d){g=function(a){return!a.type||bd.test(a.type)};for(j=0;h[j];j++)if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript"))e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j]);else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);h.splice.apply(h,[j+1,0].concat(s))}d.appendChild(h[j])}}return h},cleanData:function(a){var b,c,d=f.cache,e=f.expando,g=f.event.special,h=f.support.deleteExpando;for(var i=0,j;(j=a[i])!=null;i++){if(j.nodeName&&f.noData[j.nodeName.toLowerCase()])continue;c=j[f.expando];if(c){b=d[c]&&d[c][e];if(b&&b.events){for(var k in b.events)g[k]?f.event.remove(j,k):f.removeEvent(j,k,b.handle);b.handle&&(b.handle.elem=null)}h?delete j[f.expando]:j.removeAttribute&&j.removeAttribute(f.expando),delete d[c]}}}});var bn=/alpha\([^)]*\)/i,bo=/opacity=([^)]*)/,bp=/([A-Z]|^ms)/g,bq=/^-?\d+(?:px)?$/i,br=/^-?\d/,bs=/^[+\-]=/,bt=/[^+\-\.\de]+/g,bu={position:"absolute",visibility:"hidden",display:"block"},bv=["Left","Right"],bw=["Top","Bottom"],bx,by,bz;f.fn.css=function(a,c){if(arguments.length===2&&c===b)return this;return f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)})},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bx(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get"in k&&(g=k.get(a,!1,e))!==b)return g;return j[c]}h=typeof d;if(h==="number"&&isNaN(d)||d==null)return;h==="string"&&bs.test(d)&&(d=+d.replace(bt,"")+parseFloat(f.css(a,c)),h="number"),h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(bx)return bx(a,c)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;if(c){if(a.offsetWidth!==0)return bA(a,b,d);f.swap(a,bu,function(){e=bA(a,b,d)});return e}},set:function(a,b){if(!bq.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bo.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle;c.zoom=1;var e=f.isNaN(b)?"":"alpha(opacity="+b*100+")",g=d&&d.filter||c.filter||"";c.filter=bn.test(g)?g.replace(bn,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;f.swap(a,{display:"inline-block"},function(){b?c=bx(a,"margin-right","marginRight"):c=a.style.marginRight});return c}})}),c.defaultView&&c.defaultView.getComputedStyle&&(by=function(a,c){var d,e,g;c=c.replace(bp,"-$1").toLowerCase();if(!(e=a.ownerDocument.defaultView))return b;if(g=e.getComputedStyle(a,null))d=g.getPropertyValue(c),d===""&&!f.contains(a.ownerDocument.documentElement,a)&&(d=f.style(a,c));return d}),c.documentElement.currentStyle&&(bz=function(a,b){var c,d=a.currentStyle&&a.currentStyle[b],e=a.runtimeStyle&&a.runtimeStyle[b],f=a.style;!bq.test(d)&&br.test(d)&&(c=f.left,e&&(a.runtimeStyle.left=a.currentStyle.left),f.left=b==="fontSize"?"1em":d||0,d=f.pixelLeft+"px",f.left=c,e&&(a.runtimeStyle.left=e));return d===""?"auto":d}),bx=by||bz,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)});var bB=/%20/g,bC=/\[\]$/,bD=/\r?\n/g,bE=/#.*$/,bF=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bG=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bH=/^(?:about|app|app\-storage|.+\-extension|file|widget):$/,bI=/^(?:GET|HEAD)$/,bJ=/^\/\//,bK=/\?/,bL=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bM=/^(?:select|textarea)/i,bN=/\s+/,bO=/([?&])_=[^&]*/,bP=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bQ=f.fn.load,bR={},bS={},bT,bU;try{bT=e.href}catch(bV){bT=c.createElement("a"),bT.href="",bT=bT.href}bU=bP.exec(bT.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bQ)return bQ.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bL,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bM.test(this.nodeName)||bG.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bD,"\r\n")}}):{name:b.name,value:c.replace(bD,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.bind(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?f.extend(!0,a,f.ajaxSettings,b):(b=a,a=f.extend(!0,f.ajaxSettings,b));for(var c in{context:1,url:1})c in b?a[c]=b[c]:c in f.ajaxSettings&&(a[c]=f.ajaxSettings[c]);return a},ajaxSettings:{url:bT,isLocal:bH.test(bU[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML}},ajaxPrefilter:bW(bR),ajaxTransport:bW(bS),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a?4:0;var o,r,u,w=l?bZ(d,v,l):b,x,y;if(a>=200&&a<300||a===304){if(d.ifModified){if(x=v.getResponseHeader("Last-Modified"))f.lastModified[k]=x;if(y=v.getResponseHeader("Etag"))f.etag[k]=y}if(a===304)c="notmodified",o=!0;else try{r=b$(d,w),c="success",o=!0}catch(z){c="parsererror",u=z}}else{u=c;if(!c||a)c="error",a<0&&(a=0)}v.status=a,v.statusText=c,o?h.resolveWith(e,[r,c,v]):h.rejectWith(e,[v,c,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.resolveWith(e,[v,c]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f._Deferred(),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bF.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.done,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bE,"").replace(bJ,bU[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bN),d.crossDomain==null&&(r=bP.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bU[1]&&r[2]==bU[2]&&(r[3]||(r[1]==="http:"?80:443))==(bU[3]||(bU[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),bX(bR,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bI.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bK.test(d.url)?"&":"?")+d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bO,"$1_="+x);d.url=y+(y===d.url?(bK.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", */*; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return!1}for(u in{success:1,error:1,complete:1})v[u](d[u]);p=bX(bS,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){status<2?w(-1,z):f.error(z)}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)bY(g,a[g],c,e);return d.join("&").replace(bB,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var b_=f.now(),ca=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+b_++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ca.test(b.url)||e&&ca.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(ca,l),b.url===j&&(e&&(k=k.replace(ca,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var cb=a.ActiveXObject?function(){for(var a in cd)cd[a](0,1)}:!1,cc=0,cd;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ce()||cf()}:ce,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,cb&&delete cd[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cc,cb&&(cd||(cd={},f(a).unload(cb)),cd[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cg={},ch,ci,cj=/^(?:toggle|show|hide)$/,ck=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cl,cm=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cn,co=a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(cr("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cs(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(cr("hide",3),a,b,c);for(var d=0,e=this.length;d<e;d++)if(this[d].style){var g=f.css(this[d],"display");g!=="none"&&!f._data(this[d],"olddisplay")&&f._data(this[d],"olddisplay",g)}for(d=0;d<e;d++)this[d].style&&(this[d].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(cr("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=f.speed(b,c,d);if(f.isEmptyObject(a))return this.each(e.complete,[!1]);a=f.extend({},a);return this[e.queue===!1?"each":"queue"](function(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(f.support.inlineBlockNeedsLayout?(j=cs(this.nodeName),j==="inline"?this.style.display="inline-block":(this.style.display="inline",this.style.zoom=1)):this.style.display="inline-block"))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)k=new f.fx(this,b,i),h=a[i],cj.test(h)?k[h==="toggle"?d?"show":"hide":h]():(l=ck.exec(h),m=k.cur(),l?(n=parseFloat(l[2]),o=l[3]||(f.cssNumber[i]?"":"px"),o!=="px"&&(f.style(this,i,(n||1)+o),m=(n||1)/k.cur()*m,f.style(this,i,m+o)),l[1]&&(n=(l[1]==="-="?-1:1)*n+m),k.custom(m,n,o)):k.custom(m,h,""));return!0})},stop:function(a,b){a&&this.queue([]),this.each(function(){var a=f.timers,c=a.length;b||f._unmark(!0,this);while(c--)a[c].elem===this&&(b&&a[c](!0),a.splice(c,1))}),b||this.dequeue();return this}}),f.each({slideDown:cr("show",1),slideUp:cr("hide",1),slideToggle:cr("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default,d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue!==!1?f.dequeue(this):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,b,c){function h(a){return d.step(a)}var d=this,e=f.fx,g;this.startTime=cn||cp(),this.start=a,this.end=b,this.unit=c||this.unit||(f.cssNumber[this.prop]?"":"px"),this.now=this.start,this.pos=this.state=0,h.elem=this.elem,h()&&f.timers.push(h)&&!cl&&(co?(cl=!0,g=function(){cl&&(co(g),e.tick())},co(g)):cl=setInterval(e.tick,e.interval))},show:function(){this.options.orig[this.prop]=f.style(this.elem,this.prop),this.options.show=!0,this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b=cn||cp(),c=!0,d=this.elem,e=this.options,g,h;if(a||b>=e.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),e.animatedProperties[this.prop]=!0;for(g in e.animatedProperties)e.animatedProperties[g]!==!0&&(c=!1);if(c){e.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){d.style["overflow"+b]=e.overflow[a]}),e.hide&&f(d).hide();if(e.hide||e.show)for(var i in e.animatedProperties)f.style(d,i,e.orig[i]);e.complete.call(d)}return!1}e.duration==Infinity?this.now=b:(h=b-this.startTime,this.state=h/e.duration,this.pos=f.easing[e.animatedProperties[this.prop]](this.state,h,0,1,e.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return!0}},f.extend(f.fx,{tick:function(){for(var a=f.timers,b=0;b<a.length;++b)a[b]()||a.splice(b--,1);a.length||f.fx.stop()},interval:13,stop:function(){clearInterval(cl),cl=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit:a.elem[a.prop]=a.now}}}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var ct=/^t(?:able|d|h)$/i,cu=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?f.fn.offset=function(a){var b=this[0],c;if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b))return c?{top:c.top,left:c.left}:{top:0,left:0};var h=e.body,i=cv(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o}}:f.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);f.offset.initialize();var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(f.offset.supportsFixedPosition&&k.position==="fixed")break;c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.offset.doesNotAddBorder&&(!f.offset.doesAddBorderForTableAndCells||!ct.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.offset.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c}if(k.position==="relative"||k.position==="static")l+=i.offsetTop,m+=i.offsetLeft;f.offset.supportsFixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft));return{top:l,left:m}},f.offset={initialize:function(){var a=c.body,b=c.createElement("div"),d,e,g,h,i=parseFloat(f.css(a,"marginTop"))||0,j="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";f.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"}),b.innerHTML=j,a.insertBefore(b,a.firstChild),d=b.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,this.doesNotAddBorder=e.offsetTop!==5,this.doesAddBorderForTableAndCells=h.offsetTop===5,e.style.position="fixed",e.style.top="20px",this.supportsFixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",this.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==i,a.removeChild(b),f.offset.initialize=f.noop},bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.offset.initialize(),f.offset.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cu.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cu.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;f.fn[d]=function(c){var e,g;if(c===b){e=this[0];if(!e)return null;g=cv(e);return g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]}return this.each(function(){g=cv(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c})}}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();f.fn["inner"+c]=function(){var a=this[0];return a&&a.style?parseFloat(f.css(a,d,"padding")):null},f.fn["outer"+c]=function(a){var b=this[0];return b&&b.style?parseFloat(f.css(b,d,a?"margin":"border")):null},f.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(f.isFunction(a))return this.each(function(b){var c=f(this);c[d](a.call(this,b,c[d]()))});if(f.isWindow(e)){var g=e.document.documentElement["client"+c];return e.document.compatMode==="CSS1Compat"&&g||e.document.body["client"+c]||g}if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var h=f.css(e,d),i=parseFloat(h);return f.isNaN(i)?h:i}return this.css(d,typeof a=="string"?a:a+"px")}}),a.jQuery=a.$=f})(window);
//]]>
</script>
<script id="jqueryArea" type="text/javascript">
//<![CDATA[
/*
jQuery.encoding.digests.sha1.js

SHA-1 digest and associated utility functions

Copyright (c) UnaMesa Association 2009

Dual licensed under the MIT and GPL licenses:
  http://www.opensource.org/licenses/mit-license.php
  http://www.gnu.org/licenses/gpl.html
*/

(function($) {

if(!$.encoding)
	$.encoding = {};
	$.extend($.encoding,{
		strToBe32s: function(str) {
			// Convert a string to an array of big-endian 32-bit words
			var be=[];
			var len=Math.floor(str.length/4);
			var i, j;
			for(i=0, j=0; i<len; i++, j+=4) {
				be[i]=((str.charCodeAt(j)&0xff) << 24)|((str.charCodeAt(j+1)&0xff) << 16)|((str.charCodeAt(j+2)&0xff) << 8)|(str.charCodeAt(j+3)&0xff);
			}
			while(j<str.length) {
				be[j>>2] |= (str.charCodeAt(j)&0xff)<<(24-(j*8)%32);
				j++;
			}
			return be;
		},
		be32sToStr: function(be) {
			// Convert an array of big-endian 32-bit words to a string
			var str='';
			for(var i=0;i<be.length*32;i+=8) {
				str += String.fromCharCode((be[i>>5]>>>(24-i%32)) & 0xff);
			}
			return str;
		},
		be32sToHex: function(be) {
			// Convert an array of big-endian 32-bit words to a hex string
			var hex='0123456789ABCDEF';
			var str='';
			for(var i=0;i<be.length*4;i++) {
				str += hex.charAt((be[i>>2]>>((3-i%4)*8+4))&0xF) + hex.charAt((be[i>>2]>>((3-i%4)*8))&0xF);
			}
			return str;
		}
	});
})(jQuery);


(function($) {

if(!$.encoding.digests)
	$.encoding.digests = {};
	$.extend($.encoding.digests,{
		hexSha1Str: function(str) {
			// Return, in hex, the SHA-1 hash of a string
			return $.encoding.be32sToHex($.encoding.digests.sha1Str(str));
		},
		sha1Str: function(str) {
			// Return the SHA-1 hash of a string
			return sha1($.encoding.strToBe32s(str),str.length);
		},
		sha1: function(x,blen) {
			// Calculate the SHA-1 hash of an array of blen bytes of big-endian 32-bit words
			return sha1($.encoding.strToBe32s(str),str.length);
		}
	});

	// Private functions.
	function sha1(x,blen) {
		// Calculate the SHA-1 hash of an array of blen bytes of big-endian 32-bit words
		function add32(a,b) {
			// Add 32-bit integers, wrapping at 32 bits
			// Uses 16-bit operations internally to work around bugs in some JavaScript interpreters.
			var lsw=(a&0xFFFF)+(b&0xFFFF);
			var msw=(a>>16)+(b>>16)+(lsw>>16);
			return (msw<<16)|(lsw&0xFFFF);
		}
		function AA(a,b,c,d,e) {
			// Cryptographic round helper function. Add five 32-bit integers, wrapping at 32 bits, second parameter is rotated left 5 bits before the addition
			// Uses 16-bit operations internally to work around bugs in some JavaScript interpreters.
			b=(b>>>27)|(b<<5);
			var lsw=(a&0xFFFF)+(b&0xFFFF)+(c&0xFFFF)+(d&0xFFFF)+(e&0xFFFF);
			var msw=(a>>16)+(b>>16)+(c>>16)+(d>>16)+(e>>16)+(lsw>>16);
			return (msw<<16)|(lsw&0xFFFF);
		}
		function RR(w,j) {
			// Cryptographic round helper function.
			var n=w[j-3]^w[j-8]^w[j-14]^w[j-16];
			return (n>>>31)|(n<<1);
		}

		var len=blen*8;
		x[len>>5] |= 0x80 << (24-len%32);
		x[((len+64>>9)<<4)+15]=len;
		var w=new Array(80);

		var k1=0x5A827999;
		var k2=0x6ED9EBA1;
		var k3=0x8F1BBCDC;
		var k4=0xCA62C1D6;

		var h0=0x67452301;
		var h1=0xEFCDAB89;
		var h2=0x98BADCFE;
		var h3=0x10325476;
		var h4=0xC3D2E1F0;

		for(var i=0;i<x.length;i+=16) {
			var j=0;
			var t;
			var a=h0;
			var b=h1;
			var c=h2;
			var d=h3;
			var e=h4;
			while(j<16) {
				w[j]=x[i+j];
				t=AA(e,a,d^(b&(c^d)),w[j],k1);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			while(j<20) {
				w[j]=RR(w,j);
				t=AA(e,a,d^(b&(c^d)),w[j],k1);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			while(j<40) {
				w[j]=RR(w,j);
				t=AA(e,a,b^c^d,w[j],k2);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			while(j<60) {
				w[j]=RR(w,j);
				t=AA(e,a,(b&c)|(d&(b|c)),w[j],k3);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			while(j<80) {
				w[j]=RR(w,j);
				t=AA(e,a,b^c^d,w[j],k4);
				e=d; d=c; c=(b>>>2)|(b<<30); b=a; a=t; j++;
			}
			h0=add32(h0,a);
			h1=add32(h1,b);
			h2=add32(h2,c);
			h3=add32(h3,d);
			h4=add32(h4,e);
		}
		return [h0,h1,h2,h3,h4];
	}
})(jQuery);
/*
jQuery.twStylesheet.js

jQuery plugin to dynamically insert CSS rules into a document

Usage:
  jQuery.twStylesheet applies style definitions
  jQuery.twStylesheet.remove neutralizes style definitions

Copyright (c) UnaMesa Association 2009

Triple licensed under the BSD, MIT and GPL licenses:
  http://www.opensource.org/licenses/bsd-license.php
  http://www.opensource.org/licenses/mit-license.php
  http://www.gnu.org/licenses/gpl.html
*/

(function($) {

var defaultId = "customStyleSheet"; // XXX: rename to dynamicStyleSheet?

// Add or replace a style sheet
// css argument is a string of CSS rule sets
// options.id is an optional name identifying the style sheet
// options.doc is an optional document reference
// N.B.: Uses DOM methods instead of jQuery to ensure cross-browser comaptibility.
$.twStylesheet = function(css, options) {
	options = options || {};
	var id = options.id || defaultId;
	var doc = options.doc || document;
	var el = doc.getElementById(id);
	if(doc.createStyleSheet) { // IE-specific handling
		if(el) {
			el.parentNode.removeChild(el);
		}
		doc.getElementsByTagName("head")[0].insertAdjacentHTML("beforeEnd",
			'&nbsp;<style id="' + id + '" type="text/css">' + css + '</style>'); // fails without &nbsp;
	} else { // modern browsers
		if(el) {
			el.replaceChild(doc.createTextNode(css), el.firstChild);
		} else {
			el = doc.createElement("style");
			el.type = "text/css";
			el.id = id;
			el.appendChild(doc.createTextNode(css));
			doc.getElementsByTagName("head")[0].appendChild(el);
		}
	}
};

// Remove existing style sheet
// options.id is an optional name identifying the style sheet
// options.doc is an optional document reference
$.twStylesheet.remove = function(options) {
	options = options || {};
	var id = options.id || defaultId;
	var doc = options.doc || document;
	var el = doc.getElementById(id);
	if(el) {
		el.parentNode.removeChild(el);
	}
};

})(jQuery);
//]]>
</script>
<script type="text/javascript">
//<![CDATA[
if(useJavaSaver)
	document.write("<applet style='position:absolute;left:-1px' name='TiddlySaver' code='TiddlySaver.class' archive='TiddlySaver.jar' width='1' height='1'></applet>");
//]]>
</script>
<!--POST-SCRIPT-START-->

<!--POST-SCRIPT-END-->

<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=6581077; 
var sc_invisible=1; 
var sc_security="596c394c"; 
</script>
<script type="text/javascript"
src="http://www.statcounter.com/counter/counter.js"></script>
<noscript><div class="statcounter"><a title="tumblr
tracker" href="http://statcounter.com/tumblr/"
target="_blank"><img class="statcounter"
src="http://c.statcounter.com/6581077/0/596c394c/1/"
alt="tumblr tracker"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->

</body>
</html>
